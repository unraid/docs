# Version 7.1.0 (2025-05-05)

## Overview

This release adds wireless networking, the ability to import TrueNAS and other foreign pools, multiple enhancements to VMs, early steps toward making the webGUI responsive, and more.

---

## Key Changes

### Storage

**New Features:**

- Import foreign ZFS pools such as TrueNAS, Proxmox, Ubuntu, QNAP.
- Import the largest partition on disk instead of the first.
- Removing device from btrfs raid1 or zfs single-vdev mirror will now reduce pool slot count.

**Bug Fixes and Improvements:**

- Disabled disks now shown on the Dashboard.
- Only the first pool device spun down after custom spin down setting—now fixed.
- Array Start was permitted if only 2 Parity devices and no Data devices—now fixed.
- Parity check notification now correctly shows the current parity check.
- Resolved certain instances of *Wrong pool State. Too many wrong or missing devices* when upgrading.
- Not possible to replace a zfs device from a smaller vdev—now fixed.
- **Mover:**
  - Resolved issue with older share.cfg files that prevented mover from running.
  - Fixed mover failing to recreate hard link if parent directory did not already exist.
  - Fixed mover hanging on named pipes.
  - [Using mover to empty an array disk](7.0.0.md#using-mover-to-empty-an-array-disk) now only moves top level folders with a corresponding share.cfg file, and fixed bug preventing the list of files *not moved* from displaying.

---

### Networking

**New Features:**

- **Wireless Networking:**
  
  - Unraid now supports WiFi. Initial setup requires local keyboard/monitor or a wired connection.
  - WPA2/WPA3 and WPA2/WPA3 Enterprise supported.
  - Only one wireless NIC supported (wlan0). Not able to participate in a bond.
  - See [USB WiFi adapters supported with Linux in-kernel drivers](https://github.com/morrownr/USB-WiFi/blob/main/home/USB_WiFi_Adapters_that_are_supported_with_Linux_in-kernel_drivers.md).
  - Advanced: New firmware files placed in `/boot/config/firmware/` copied to `/lib/firmware/` before driver modules are loaded.

**Limitations:**

- Networking limitations when using wireless, as a wlan can only have a single MAC address.
- Docker: When wireless is enabled, system ignores Docker custom network type and always uses ipvlan.
- VMs: Recommend setting VM Network Source to virbr0 for unlimited VM support (not accessible from network, VNC to host only).

**Other Networking Changes:**

- DNS settings can be adjusted without stopping other services.
- Each interface now has an Info button and Desired MTU field is disabled until jumbo frames are enabled.
- Additional gateways are given higher metrics by default.
- Old network interfaces are removed from config files when saving changes.
- Various DHCP fixes.

---

### VM Manager

**New Features and Improvements:**

- Nouveau GPU driver for Nvidia GPUs included (disabled by default).
- **VirGL:** Share Intel and AMD GPUs between multiple Linux VMs using VirGL (virtual 3D OpenGL renderer).
- **QXL Virtual GPUs:** Set Graphics Card to Virtual and VM Console Video Driver to QXL (Best) for multiple screens/memory allocation.
- CPU pinning is now optional; if no cores are pinned, OS chooses which cores to use.
- User VM Templates: Create, export, and import user templates for VMs.
- Unraid VMs can now boot into GUI mode using the QXL video driver.
- Warn when Primary GPU is assigned as passthrough for a VM that may not work without a compatible vBIOS.

**Bug Fixes:**

- Removed confusing *Path does not exist* message when setting up the VM service.
- Could not change VM icon when using XML view—now fixed.

---

### WebGUI

**Improvements:**

- CSS reworked as a first step toward responsive design.
- Changes made to prevent "nchan out of shared memory" issues; nginx will restart automatically if detected.
- Option to disable "Allow realtime updates on inactive browsers" in Display Settings.
- Certain pages will automatically reload to display the latest information.

**Bug Fixes:**

- AdBlockers could prevent Dashboard from loading—now fixed.
- Browser memory utilization on the Dashboard could grow exponentially—now fixed.
- Prevent corrupted config file from breaking the Dashboard.

---

### Miscellaneous

**Other Changes and Fixes:**

- Date and Time settings now support syncing with a PTP server.
- Upgraded to jQuery 3.7.1 and jQuery UI 1.14.1.
- Visiting boot.php will no longer shut down the server.
- Docker tab: Dropdown menu for the last container was truncated in some situations—now fixed.
- Deleting a Docker directory stored on a ZFS volume now works properly.
- Custom ssh configuration copied from `/boot/config/ssh/` to `/etc/ssh/` on boot.
- File Manager can copy files from a User Share to an Unassigned Disk mount.
- Removed confusing *Path does not exist* message when setting up the Docker service.
- `rc.messagebus` updated to correct handling of `/etc/machine-id`.
- Diagnostics:
  - Improved anonymization of IPv6 addresses and user names in config files.
  - Diagnostics could fail due to multibyte strings in syslog—now fixed.
  - Diagnostics now logs errors in logs/diagnostics.error.log.

---

## Upgrade Instructions

### Mandatory Pre-Upgrade Steps

- Upgrade all plugins, particularly Unraid Connect and the Nvidia driver.

### Post-Upgrade Actions

- None specified.

---

## Known Issues

- Potential data-loss issue with the "mover empty disk" feature not handling split levels on shares correctly (resolved in 7.1.2).
- For other known issues, see the [7.0.0 release notes](7.0.0.md#known-issues).

---

## Rollback Instructions

- The standalone Patch Plugin will be uninstalled from this release. If rolling back to an earlier release, reinstall it.
- If rolling back earlier than 7.0.0, also see the [7.0.0 release notes](7.0.0.md#rolling-back).

---

## Technical Details

### Linux Kernel

- Version: 6.12.24-Unraid
  - [PATCH] [Revert "PCI: Avoid reset when disabled via sysfs"](https://lore.kernel.org/lkml/20250414211828.3530741-1-alex.williamson@redhat.com/)
  - CONFIG_NR_CPUS: increased from 256 to 512
  - CONFIG_TEHUTI_TN40: Tehuti Networks TN40xx 10G Ethernet adapters
  - CONFIG_DRM_XE: Intel Xe Graphics
  - CONFIG_UDMABUF: userspace dmabuf misc driver
  - CONFIG_DRM_NOUVEAU: Nouveau (NVIDIA) cards
  - CONFIG_DRM_QXL: QXL virtual GPU
  - CONFIG_EXFAT_FS: exFAT filesystem support
  - CONFIG_PSI: Pressure stall information tracking
  - CONFIG_PSI_DEFAULT_DISABLED: Require boot parameter to enable pressure stall information tracking, i.e., `psi=1`
  - CONFIG_ENCLOSURE_SERVICES: Enclosure Services
  - CONFIG_SCSI_ENCLOSURE:  SCSI Enclosure Support
  - CONFIG_DRM_ACCEL: Compute Acceleration Framework
  - CONFIG_DRM_ACCEL_HABANALABS: HabanaLabs AI accelerators
  - CONFIG_DRM_ACCEL_IVPU: Intel NPU (Neural Processing Unit)
  - CONFIG_DRM_ACCEL_QAIC:  Qualcomm Cloud AI accelerators
  - zfs: version 2.3.1
  - Wireless support: Atheros/Qualcomm, Broadcom, Intel, Marvell, Microtek, Realtek

### Base Distro Updates

- aaa_glibc-solibs: 2.41
- adwaita-icon-theme: 48.0
- at-spi2-core: 2.56.1
- bind: 9.20.8
- btrfs-progs: 6.14
- ca-certificates: 20250425
- cairo: 1.18.4
- cifs-utils: 7.3
- coreutils: 9.7
- dbus: 1.16.2
- dbus-glib: 0.114
- dhcpcd: 9.5.2
- diffutils: 3.12
- dnsmasq: 2.91
- docker: 27.5.1
- e2fsprogs: 1.47.2
- elogind: 255.17
- elfutils: 0.193
- ethtool: 6.14
- firefox: 128.10 (AppImage)
- floppy: 5.6
- fontconfig: 2.16.2
- gdbm: 1.25
- git: 2.49.0
- glib2: 2.84.1
- glibc: 2.41
- glibc-zoneinfo: 2025b
- grep: 3.12
- gtk+3: 3.24.49
- gzip: 1.14
- harfbuzz: 11.1.0
- htop: 3.4.1
- icu4c: 77.1
- inih: 60
- intel-microcode: 20250211
- iperf3: 3.18
- iproute2: 6.14.0
- iw: 6.9
- jansson: 2.14.1
- kernel-firmware: 20250425_cf6ea3d
- kmod: 34.2
- less: 674
- libSM: 1.2.6
- libX11: 1.8.12
- libarchive: 3.7.8
- libcgroup: 3.2.0
- libedit: 20250104_3.1
- libevdev: 1.13.4
- libffi: 3.4.8
- libidn: 1.43
- libnftnl: 1.2.9
- libnvme: 1.13
- libgpg-error: 1.55
- libpng: 1.6.47
- libseccomp: 2.6.0
- liburing: 2.9
- libusb: 1.0.28
- libuv: 1.51.0
- libvirt: 11.2.0
- libXft: 2.3.9
- libxkbcommon: 1.9.0
- libxml2: 2.13.8
- libxslt: 1.1.43
- libzip: 1.11.3
- linuxptp: 4.4
- lvm2: 2.03.31
- lzip: 1.25
- lzlib: 1.15
- mcelog: 204
- mesa: 25.0.4
- mpfr: 4.2.2
- nano: 8.4
- ncurses: 6.5_20250419
- nettle: 3.10.1
- nghttp2: 1.65.0
- nghttp3: 1.9.0
- noto-fonts-ttf: 2025.03.01
- nvme-cli: 2.13
- oniguruma: 6.9.10
- openssh: 10.0p1
- openssl: 3.5.0
- ovmf: stable202502
- pam: 1.7.0
- pango: 1.56.3
- parted: 3.6
- patch: 2.8
- pcre2: 10.45
- perl: 5.40.2
- php: 8.3.19
- procps-ng: 4.0.5
- qemu: 9.2.3
- rsync: 3.4.1
- samba: 4.21.3
- shadow: 4.17.4
- spice: 0.15.2
- spirv-llvm-translator: 20.1.0
- sqlite: 3.49.1
- sysstat: 12.7.7
- sysvinit: 3.14
- talloc: 2.4.3
- tdb: 1.4.13
- tevent: 0.16.2
- tree: 2.2.1
- userspace-rcu: 0.15.2
- utempter: 1.2.3
- util-linux: 2.41
- virglrenderer: 1.1.1
- virtiofsd: 1.13.1
- which: 2.23
- wireless-regdb: 2025.02.20
- wpa_supplicant: 2.11
- xauth: 1.1.4
- xf86-input-synaptics: 1.10.0
- xfsprogs: 6.14.0
- xhost: 1.0.10
- xinit: 1.4.4
- xkeyboard-config: 2.44
- xorg-server: 21.1.16
- xterm: 398
- xtrans: 1.6.0
- xz: 5.8.1
- zstd: 1.5.7

---

## Patches

No patches are currently available for this release.
