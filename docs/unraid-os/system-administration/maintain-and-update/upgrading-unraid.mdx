---
sidebar_position: 2
sidebar_label: Upgrading Unraid
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import UpgradeModern from "./partials/upgrade-modern.mdx";
import UpgradeLegacy611612 from "./partials/upgrade-legacy-611-612.mdx";
import ManualDowngradeSimplest from "./partials/manual-downgrade-simplest.mdx";
import ManualDowngradeCommandLine from "./partials/manual-downgrade-command-line.mdx";

# Upgrading Unraid

Upgrading Unraid OS ensures that you have the latest features, security updates, and hardware support. This page outlines the standard upgrade process, along with troubleshooting tips and manual upgrade options.

:::note[Prerequisites]

Before you start upgrading, make sure to create a complete backup of your USB flash device. For more details, refer to [Backing up your flash device](../maintain-and-update/changing-the-flash-device.mdx#backing-up-your-flash-device).

:::

:::tip[Best practices before upgrading]

1. **Make a backup** of your flash drive and any important data.
2. **Read the Release Notes** for the version you plan to install.
3. **Update all plugins** to their latest versions.
4. **Optionally, stop the array** before proceeding.
5. **Update Unraid OS** using the **_Tools → Update OS_** page.
6. **Reboot** your server to complete the upgrade.

:::

## Standard upgrade process

<Tabs>
  <TabItem value="modern-7x" label="Unraid 7.x and later" default>
    <UpgradeModern />
  </TabItem>

  <TabItem value="legacy-611-612" label="Unraid 6.11 to 6.12">
    <UpgradeLegacy611612 />
  </TabItem>
</Tabs>

:::caution[ZFS pool upgrade warnings]

When upgrading to Unraid 7.x, you may see warnings about [%%ZFS|zfs%%](../../advanced-configurations/optimize-storage/zfs-storage.mdx) pool feature upgrades during boot or in the %%WebGUI|web-gui%%. These warnings are not a sign of a problem; they simply indicate that your %%ZFS|zfs%% pool is using features from an older version of ZFS.

Upgrading your pool isn't urgent, but if you do decide to upgrade, keep in mind that it may not work with previous versions of Unraid. This means you may not be able to revert to a previous Unraid version after making the upgrade.

As always, remember to back up your data before upgrading your %%ZFS|zfs%% pools.

:::

---

## Troubleshooting upgrade issues

If you run into problems after upgrading, check the relevant section below for assistance.

<details>
  <summary><strong>Array or docker containers are slow to start after upgrade</strong> - Click to expand/collapse</summary>

A one-time migration may be necessary for Docker containers after certain upgrades. This process can take time, especially if you have many images. Be patient during this process; performance should normalize after the initial start.

</details>

<details>
  <summary><strong>Docker containers are not working correctly after upgrade</strong> - Click to expand/collapse</summary>

If you encounter errors like _"layers from manifest don't match image configuration,"_ you may need to rebuild your Docker image file. Here’s how:

1. Go to **_Settings → Docker_** and stop the Docker service.
2. Check the box to delete the Docker image and click the delete button.
3. Restart Docker to recreate the image.
4. Navigate to the **Apps** tab, **Previous Apps** and check off what you wish to reinstall and click **"Install xx Applications"**.

</details>

<details>
  <summary><strong>VMs show "cannot get interface MTU" or network errors</strong> - Click to expand/collapse</summary>

If you've used a custom bridge name for %%VM|vm%% networking, update all %%VMs|vm%% to use the default `br0` bridge by following these steps:

1. Go to the **VMs** tab and edit each %%VM|vm%% (make sure to enable **Advanced View**).
2. Set the network bridge to `br0` and click **Apply**.
3. Navigate to **_Settings → VM Manager_** (in **Advanced View**) and set the default bridge to `br0`.

</details>

<details>
  <summary><strong>VNC access to VMs is not working or is slow</strong> - Click to expand/collapse</summary>

For older %%VMs|vm%%, you may need to update the %%VNC|vnc-session%% video driver:

1. Edit the %%VM|vm%% from the **VMs** tab (select **Advanced View**).
2. Set the **%%VNC|vnc-session%% Video Driver** to **QXL** (recommended). Try **Cirrus** or **vmvga** if you have limited success with QXL.
3. Click **Apply** to save the changes.

</details>

<details>
  <summary><strong>VM will not boot (EFI shell appears)</strong> - Click to expand/collapse</summary>

If you have %%OVMF|ovmf%%-based %%VMs|vm%% created in older Unraid versions, you might encounter an EFI shell. You can boot the %%VM|vm%% by entering the following commands:

1. Type `fs0:`.
2. Then type `cd efi/boot`.
3. Finally, type `bootx64.efi`.

If `fs0:` doesn't work, you can try `fs1:` instead. If you continue to have issues, please visit the [Unraid forums](https://forums.unraid.net/) for assistance.

</details>

<details>
  <summary><strong>Trying to start my VM gives an "Invalid machine type" error</strong> - Click to expand/collapse</summary>

To resolve this, edit the %%VM|vm%% in the %%WebGUI|web-gui%% and click **Apply** without making any changes. This action will update the machine type to the latest supported version.

</details>

<details>
  <summary><strong>Poor VM performance after upgrading</strong> - Click to expand/collapse</summary>

If your %%VM|vm%% is slow after an upgrade, go to the %%VM|vm%% settings (in **Advanced View**) and update the **Machine** type version to the latest revision (e.g., change from `i440fx-2.5` to `i440fx-2.7`). Make sure not to change the prefix (for example, don't switch from `i440fx` to `Q35`).

</details>

---

## Manual downgrade

Manual downgrades are infrequently necessary but may be needed if you can't access the %%WebGUI|web-gui%% or need to revert to a prior version. Before proceeding, it's important to back up your USB flash device, details of which you can find in [Backing up your flash device](../maintain-and-update/changing-the-flash-device.mdx#backing-up-your-flash-device).

Only use these methods if you can't access the %%WebGUI|web-gui%%:

<Tabs>
  <TabItem value="Simplest method" label="Simplest method">
    <ManualDowngradeSimplest />
  </TabItem>

  <TabItem value="Command line method" label="Command line method">
    <ManualDowngradeCommandLine />
  </TabItem>
</Tabs>

:::info[What happens during the downgrade process]

When using the Downgrade OS tool (WebGUI), the tool will automatically handle the following:

1. System validation checks that the downgrade is safe to perform.
2. File backup creates a backup of your current system files.
3. Version verification ensures that the files for the target version are valid and complete.
4. File replacement replaces the current OS files with the files from the previous version.
5. Configuration preservation maintains your current settings.
6. System preparation prepares the system for the previous version.
7. Reboot scheduling schedules a reboot to finish the downgrade.

:::

#### Post-downgrade verification

After the downgrade is complete and your server has rebooted:

1. Check the version: Verify that you're running the version of Unraid you expect.
2. Test core functionality: Ensure that the %%array|array%%, Docker, and VM services are working properly.
3. Verify plugins: Check that your installed plugins are compatible and functioning as expected.
4. Test Docker containers: Start your Docker containers and confirm they are working correctly.
5. Check VMs: If you have any virtual machines (VMs), make sure they start and operate properly. See [VM setup](../../using-unraid-to/create-virtual-machines/vm-setup.mdx) for configuration guidance.
6. Monitor system logs: Keep an eye on the system logs for any error messages. Use [diagnostics tools](../../troubleshooting/diagnostics/capture-diagnostics-and-logs.mdx) to capture detailed system information.

#### Troubleshooting downgrade issues

<details>
  <summary><strong>Downgrade option not available</strong> - Click to expand/collapse</summary>

If you don’t see an option to downgrade:

- **Check system history**: Make sure you've previously upgraded from a compatible version.
- **Verify file integrity**: Previous version files might be corrupted or missing.
- **Check compatibility**: The earlier version may not be compatible with your current hardware.
- **Manual method**: If needed, follow the manual downgrade methods outlined on this page.

</details>

<details>
  <summary><strong>Downgrade fails during process</strong> - Click to expand/collapse</summary>

If the downgrade process doesn't go as planned:

1. Don't panic. Your system should still work with the current version.
2. Take a look at the system logs to find specific error messages. Use [diagnostics tools](../../troubleshooting/diagnostics/capture-diagnostics-and-logs.mdx) for comprehensive log analysis.
3. Verify files: Ensure that all required files for the target version are available.
4. Try the manual method: If the tool doesn't work, consider using the manual downgrade methods.
5. Contact support: If problems continue, reach out to Unraid support with your diagnostics.

</details>

<details>
  <summary><strong>System won't boot after downgrade</strong> - Click to expand/collapse</summary>

If your system doesn’t boot after downgrading:

1. Boot from USB: Use another computer to access your USB flash device. See [boot troubleshooting](../../troubleshooting/common-issues/boot-and-startup-failures.mdx) for detailed recovery steps.
2. Restore from backup: Copy your backup files back to the USB device.
3. Check file integrity: Make sure all system files are present and not damaged.
4. Try Safe Mode: Boot into [Safe Mode](../../using-unraid-to/customize-your-experience/plugins.mdx#troubleshooting-with-safe-mode) for further troubleshooting.
5. Manual recovery: If necessary, utilize the manual recovery methods.

</details>

<details>
  <summary><strong>Plugins or Docker containers not working</strong> - Click to expand/collapse</summary>

After downgrading, some plugins or containers may not function properly:

- **Update plugins**: Look for plugin updates that work with the downgraded version. Check [Community Applications](../../using-unraid-to/run-docker-containers/community-applications.mdx) for compatible versions.
- **Rebuild Docker**: Delete and recreate your Docker image file. See [Docker troubleshooting](../../troubleshooting/common-issues/docker-troubleshooting.mdx#re-creating-the-docker-image-file) for detailed steps.
  - **Check dependencies**: Ensure that all necessary dependencies are available.
  - **Plugin compatibility**: Some plugins might not support earlier Unraid versions.
  - **UI/WebGUI feature-dependent plugins**: Plugins relying on newer WebGUI features may not operate correctly on older versions.
  - **Theme plugins**: Visual customization plugins may require updates or removal if they are incompatible.

</details>
