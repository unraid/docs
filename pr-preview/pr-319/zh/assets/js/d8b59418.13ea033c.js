"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7168],{1243:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"unraid-os/using-unraid-to/manage-storage/array/removing-disks-from-array","title":"Removing disks from array","description":"There may come a time when you want to remove a disk from your Unraid array. Whether you\'re looking to save on power, retire an old or unreliable drive, or repurpose hardware for a different use, the process is fairly straightforward.","source":"@site/docs/unraid-os/using-unraid-to/manage-storage/array/removing-disks-from-array.mdx","sourceDirName":"unraid-os/using-unraid-to/manage-storage/array","slug":"/unraid-os/using-unraid-to/manage-storage/array/removing-disks-from-array","permalink":"/docs/pr-preview/pr-319/zh/unraid-os/using-unraid-to/manage-storage/array/removing-disks-from-array","draft":false,"unlisted":false,"editUrl":"https://translate.unraid.net/unraid-docs/zh","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"Removing disks from array"},"sidebar":"unraidSidebar","previous":{"title":"Replacing disks in array","permalink":"/docs/pr-preview/pr-319/zh/unraid-os/using-unraid-to/manage-storage/array/replacing-disks-in-array"},"next":{"title":"Array health and maintenance","permalink":"/docs/pr-preview/pr-319/zh/unraid-os/using-unraid-to/manage-storage/array/array-health-and-maintenance"}}');var t=a(4848),n=a(8453),s=a(2503);const o={sidebar_position:4,sidebar_label:"Removing disks from array"},d="Removing disks from array",l={},h=[{value:"Removing parity disks",id:"removing-parity-disks",level:2},{value:"Removing data disks",id:"removing-data-disks",level:2},{value:"Standard method (Recommended)",id:"standard-method-recommended",level:3},{value:"Parity-preserve method (Advanced)",id:"parity-preserve-method-advanced",level:3}];function c(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"removing-disks-from-array",children:"Removing disks from array"})}),"\n",(0,t.jsx)(r.p,{children:"There may come a time when you want to remove a disk from your Unraid array. Whether you're looking to save on power, retire an old or unreliable drive, or repurpose hardware for a different use, the process is fairly straightforward."}),"\n",(0,t.jsx)(r.h2,{id:"removing-parity-disks",children:"Removing parity disks"}),"\n",(0,t.jsxs)(r.p,{children:["If you find that you no longer need the level of ",(0,t.jsx)(r.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_0_49_1763146329052","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,t.jsx)(s.m_,{id:"parity_0_49_1763146329052",place:"top",effect:"solid",clickable:!0})," protection in your setup, you can remove a ",(0,t.jsx)(r.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity-drives_3_44_1763146329052","data-tooltip-html":"Redundant drives in the array that maintain parity information to recover data during disk failures.","data-tooltip-place":"top",children:"parity disk"}),(0,t.jsx)(s.m_,{id:"parity-drives_3_44_1763146329052",place:"top",effect:"solid",clickable:!0})," whenever you want."]}),"\n",(0,t.jsx)(r.p,{children:"To remove a parity drive:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Stop the array."}),"\n",(0,t.jsx)(r.li,{children:'Unassign the parity drive slot and set it to "Unassigned."'}),"\n",(0,t.jsx)(r.li,{children:"Start the array to commit the changes."}),"\n"]}),"\n",(0,t.jsxs)(r.admonition,{type:"warning",children:[(0,t.jsxs)(r.p,{children:["Before you make any changes, please keep this in mind: If you already have any failed data drives in your array, removing a ",(0,t.jsx)(r.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity-drives_0_124_1763146329052","data-tooltip-html":"Redundant drives in the array that maintain parity information to recover data during disk failures.","data-tooltip-place":"top",children:"parity disk"}),(0,t.jsx)(s.m_,{id:"parity-drives_0_124_1763146329052",place:"top",effect:"solid",clickable:!0})," can decrease the number of failures Unraid can handle without risking data loss."]}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"With dual parity, you can recover from a single failed drive, but be aware that you won't be able to survive another failure during the rebuild process."}),"\n",(0,t.jsx)(r.li,{children:"With single parity, you lose all redundancy, meaning that any additional drive failures could result in data loss."}),"\n"]})]}),"\n",(0,t.jsx)(r.h2,{id:"removing-data-disks",children:"Removing data disks"}),"\n",(0,t.jsx)(r.p,{children:"Removing a data disk requires a parity sync afterward. Until this sync completes, there's a risk of data loss if another disk fails."}),"\n",(0,t.jsx)(r.h3,{id:"standard-method-recommended",children:"Standard method (Recommended)"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Stop the array."}),"\n",(0,t.jsx)(r.li,{children:"Optionally document your disk assignments with a screenshot."}),"\n",(0,t.jsxs)(r.li,{children:["Reset the array configuration using ",(0,t.jsx)(r.strong,{children:"Tools \u2192 New Config"}),", choosing the option to preserve all current assignments."]}),"\n",(0,t.jsx)(r.li,{children:"Unassign the disk you want to remove."}),"\n",(0,t.jsx)(r.li,{children:'Start the array, but do not check the "Parity is valid" box.'}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"A parity sync starts if you have a parity disk assigned. The array is vulnerable to data loss until this sync completes."}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsx)(r.p,{children:"Move important data off the disk before removal. The parity sync process may take several hours depending on disk size and system activity."})}),"\n",(0,t.jsx)(r.h3,{id:"parity-preserve-method-advanced",children:"Parity-preserve method (Advanced)"}),"\n",(0,t.jsx)(r.p,{children:"This method allows you to remove a data disk while keeping your parity valid. It zeros out the data disk, allowing you to keep your parity intact. This is only recommended for advanced users."}),"\n",(0,t.jsx)(r.admonition,{type:"warning",children:(0,t.jsx)(r.p,{children:"This method erases all data on the selected disk. Verify that all important data has been moved before proceeding. There is no official support from LimeTech for this process."})}),"\n",(0,t.jsx)(r.p,{children:"To use the parity-preserve method:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["Start the array in maintenance mode, click on the disk you want to remove, and then click ",(0,t.jsx)(r.strong,{children:"Erase"}),". This erases the file system from the device while maintaining parity, then stops the array."]}),"\n",(0,t.jsx)(r.li,{children:"Start the array in normal mode. The disk won't mount, but the remaining disks are online."}),"\n",(0,t.jsx)(r.li,{children:"Record array assignments, especially the parity drive."}),"\n",(0,t.jsxs)(r.li,{children:['Optionally enable Reconstruct Write ("Turbo Write") in ',(0,t.jsx)(r.strong,{children:"Settings \u2192 Disk Settings"})," for faster zeroing, but only if all drives are healthy."]}),"\n",(0,t.jsxs)(r.li,{children:["Unmount the disk: ",(0,t.jsx)(r.code,{children:"umount /mnt/diskX"})]}),"\n",(0,t.jsxs)(r.li,{children:["Zero out the disk:","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["For Unraid 6.12 or later: ",(0,t.jsx)(r.code,{children:"dd bs=1M if=/dev/zero of=/dev/mdXp1 status=progress"})]}),"\n",(0,t.jsxs)(r.li,{children:["For Unraid 6.11 and earlier: ",(0,t.jsx)(r.code,{children:"dd bs=1M if=/dev/zero of=/dev/mdX status=progress"})]}),"\n"]}),"\n","Replace ",(0,t.jsx)(r.code,{children:"X"})," with the specific number of the data disk you're removing."]}),"\n",(0,t.jsx)(r.li,{children:"Stop the array once clearing is complete."}),"\n",(0,t.jsx)(r.li,{children:"Reset array configuration, retaining all current assignments."}),"\n",(0,t.jsx)(r.li,{children:"Unassign the disk you want to remove, double-checking all assignments, especially the parity drive."}),"\n",(0,t.jsx)(r.li,{children:'Check the box indicating "Parity is already valid."'}),"\n",(0,t.jsx)(r.li,{children:"Start the array to finish the removal."}),"\n",(0,t.jsxs)(r.li,{children:["Optionally run a correcting ",(0,t.jsx)(r.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity-check_0_28_1763146329052","data-tooltip-html":"A background process that verifies data integrity across the array, ensuring parity is up-to-date.","data-tooltip-place":"top",children:"parity check"}),(0,t.jsx)(s.m_,{id:"parity-check_0_28_1763146329052",place:"top",effect:"solid",clickable:!0})," afterward to ensure parity integrity."]}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);