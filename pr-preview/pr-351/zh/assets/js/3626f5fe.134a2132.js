"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8968],{9528:(e,o,r)=>{r.r(o),r.d(o,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"unraid-os/troubleshooting/common-issues/docker-troubleshooting","title":"Docker \u6545\u969c\u6392\u9664","description":"This page offers troubleshooting guidance specifically for Docker containers on Unraid, managed by the Unraid team. For advanced troubleshooting, in-depth technical details, or topics beyond the Unraid-specific implementation, please refer to the official Docker documentation.","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/unraid-os/troubleshooting/common-issues/docker-troubleshooting.mdx","sourceDirName":"unraid-os/troubleshooting/common-issues","slug":"/unraid-os/troubleshooting/common-issues/docker-troubleshooting","permalink":"/docs/pr-preview/pr-351/zh/unraid-os/troubleshooting/common-issues/docker-troubleshooting","draft":false,"unlisted":false,"editUrl":"https://translate.unraid.net/unraid-docs/zh","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"sidebar_label":"Docker \u6545\u969c\u6392\u9664"},"sidebar":"unraidSidebar","previous":{"title":"\u6570\u636e\u6062\u590d","permalink":"/docs/pr-preview/pr-351/zh/unraid-os/troubleshooting/common-issues/data-recovery"},"next":{"title":"Diagnostics","permalink":"/docs/pr-preview/pr-351/zh/category/diagnostics"}}');var n=r(4848),s=r(8453),t=r(2503);const c={sidebar_position:5,sidebar_label:"Docker \u6545\u969c\u6392\u9664"},a="Docker \u6545\u969c\u6392\u9664",d={},l=[{value:"\u91cd\u65b0\u521b\u5efa Docker \u6620\u50cf\u6587\u4ef6",id:"\u91cd\u65b0\u521b\u5efa-docker-\u6620\u50cf\u6587\u4ef6",level:2},{value:"\u91cd\u65b0\u5b89\u88c5 Docker \u5e94\u7528\u7a0b\u5e8f",id:"\u91cd\u65b0\u5b89\u88c5-docker-\u5e94\u7528\u7a0b\u5e8f",level:2},{value:"\u6062\u590d Docker \u81ea\u5b9a\u4e49\u7f51\u7edc",id:"\u6062\u590d-docker-\u81ea\u5b9a\u4e49\u7f51\u7edc",level:2}];function h(e){const o={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.header,{children:(0,n.jsx)(o.h1,{id:"docker-\u6545\u969c\u6392\u9664",children:"Docker \u6545\u969c\u6392\u9664"})}),"\n",(0,n.jsx)(o.admonition,{type:"info",children:(0,n.jsxs)(o.p,{children:["This page offers troubleshooting guidance specifically for Docker containers on Unraid, managed by the Unraid team. For advanced troubleshooting, in-depth technical details, or topics beyond the Unraid-specific implementation, please refer to the ",(0,n.jsx)(o.a,{href:"https://docs.docker.com/",children:"official Docker documentation"}),"."]})}),"\n",(0,n.jsx)(o.p,{children:"Docker makes it easy to run a variety of applications on your Unraid server, but issues can arise, such as containers not starting, corrupted Docker image files, or network problems. This page addresses some common issues related to Docker on Unraid and offers best practices for effectively resolving them."}),"\n",(0,n.jsx)(o.hr,{}),"\n",(0,n.jsx)(o.h2,{id:"\u91cd\u65b0\u521b\u5efa-docker-\u6620\u50cf\u6587\u4ef6",children:"\u91cd\u65b0\u521b\u5efa Docker \u6620\u50cf\u6587\u4ef6"}),"\n",(0,n.jsxs)(o.p,{children:["A corrupted Docker image file (",(0,n.jsx)(o.code,{children:"docker.img"}),") is a common issue, often caused by the ",(0,n.jsx)(o.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"cache-pool_2_41_1759427949765","data-tooltip-html":'High-speed storage for temporary data. Pools can be single-disk or multi-disk. The Mover process transfers data to/from array periodically.<br>See <a href="https://en.wikipedia.org/wiki/RAID">RAID - Wikipedia</a>',"data-tooltip-place":"top",children:"cache pool"}),(0,n.jsx)(t.m_,{id:"cache-pool_2_41_1759427949765",place:"top",effect:"solid",clickable:!0})," running out of space or an unclean shutdown. Luckily, a well-configured container stores all variable data outside the image file (usually in the ",(0,n.jsx)(o.code,{children:"appdata"})," share), so you can safely recreate the image without losing your application settings or data."]}),"\n",(0,n.jsx)(o.p,{children:"\u8981\u91cd\u65b0\u521b\u5efa Docker \u6620\u50cf\u6587\u4ef6\uff1a"}),"\n",(0,n.jsxs)(o.ol,{children:["\n",(0,n.jsxs)(o.li,{children:["\u8f6c\u5230 WebGUI \u4e2d\u7684 ",(0,n.jsx)(o.em,{children:(0,n.jsx)(o.strong,{children:"Settings \u2192 Docker"})}),"\u3002"]}),"\n",(0,n.jsxs)(o.li,{children:["\u5c06 ",(0,n.jsx)(o.strong,{children:"Enable Docker\uff08\u542f\u7528 Docker\uff09"})," \u8bbe\u7f6e\u4e3a ",(0,n.jsx)(o.strong,{children:"No\uff08\u5426\uff09"}),"\uff0c\u7136\u540e\u5355\u51fb ",(0,n.jsx)(o.strong,{children:"Apply\uff08\u5e94\u7528\uff09"})," \u505c\u6b62 Docker \u670d\u52a1\u3002"]}),"\n",(0,n.jsxs)(o.li,{children:["\u9009\u62e9\u5220\u9664Docker vdisk\u6587\u4ef6\u7684\u9009\u9879\uff0c\u7136\u540e\u70b9\u51fb",(0,n.jsx)(o.strong,{children:"\u5e94\u7528"}),"\u3002\u5982\u679c\u9700\u8981\uff0c\u8fd8\u53ef\u4ee5\u624b\u52a8\u5220\u9664\u6587\u4ef6\u3002"]}),"\n",(0,n.jsx)(o.li,{children:"\u786e\u8ba4\u65b0Docker vdisk\u6587\u4ef6\u7684\u4f4d\u7f6e\u548c\u6587\u4ef6\u540d\u3002\u6b64\u8bbe\u7f6e\u5305\u62ec\u6587\u4ef6\u5939\u8def\u5f84\u548c\u6587\u4ef6\u540d\u3002"}),"\n",(0,n.jsx)(o.li,{children:"\u8bbe\u7f6e\u65b0\u6620\u50cf\u6587\u4ef6\u7684\u6240\u9700\u5927\u5c0f\u3002\u9ed8\u8ba4\u5927\u5c0f\u901a\u5e38\u8db3\u4ee5\u6ee1\u8db3\u5927\u591a\u6570\u7528\u6237\u7684\u9700\u6c42\u3002"}),"\n",(0,n.jsxs)(o.li,{children:["Set ",(0,n.jsx)(o.strong,{children:"Enable Docker"})," to ",(0,n.jsx)(o.strong,{children:"Yes"})," and click ",(0,n.jsx)(o.strong,{children:"Apply"}),". Unraid will create and format a new ",(0,n.jsx)(o.code,{children:"docker.img"})," file using ",(0,n.jsx)(o.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"btrfs_8_12_1759427949765","data-tooltip-html":'\u201cB-Tree File System,\u201d a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.<br>See <a href="https://btrfs.readthedocs.io/">BTRFS File System - Official Documentation</a>',"data-tooltip-place":"top",children:"BTRFS"}),(0,n.jsx)(t.m_,{id:"btrfs_8_12_1759427949765",place:"top",effect:"solid",clickable:!0}),"."]}),"\n"]}),"\n",(0,n.jsx)(o.p,{children:"\u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528\u5176\u4fdd\u5b58\u7684\u8bbe\u7f6e\u91cd\u65b0\u5b89\u88c5\u5bb9\u5668\u3002"}),"\n",(0,n.jsx)(o.hr,{}),"\n",(0,n.jsx)(o.h2,{id:"\u91cd\u65b0\u5b89\u88c5-docker-\u5e94\u7528\u7a0b\u5e8f",children:"\u91cd\u65b0\u5b89\u88c5 Docker \u5e94\u7528\u7a0b\u5e8f"}),"\n",(0,n.jsx)(o.p,{children:"Unraid automatically saves a template for each installed container on your flash drive. These templates store your configuration, making it easy to restore containers after recreating the Docker image file."}),"\n",(0,n.jsx)(o.p,{children:"\u8981\u91cd\u65b0\u5b89\u88c5\u60a8\u7684\u5bb9\u5668\uff1a"}),"\n",(0,n.jsxs)(o.ol,{children:["\n",(0,n.jsxs)(o.li,{children:["\u8f6c\u5230%%WebGUI|WebGUI%%\u7684",(0,n.jsx)(o.strong,{children:"\u5e94\u7528"}),"\u9009\u9879\u5361\u3002"]}),"\n",(0,n.jsxs)(o.li,{children:["\u6253\u5f00 ",(0,n.jsx)(o.strong,{children:"Previous Apps\uff08\u4ee5\u524d\u7684\u5e94\u7528\uff09"})," \u90e8\u5206\u3002"]}),"\n",(0,n.jsx)(o.li,{children:"\u9009\u62e9\u8981\u91cd\u65b0\u5b89\u88c5\u7684\u5bb9\u5668\u3002"}),"\n",(0,n.jsx)(o.li,{children:"Proceed with the installation. Unraid will re-download each container and apply your previous settings automatically."}),"\n"]}),"\n",(0,n.jsx)(o.admonition,{type:"important",children:(0,n.jsxs)(o.p,{children:["\u5982\u679c\u6240\u6709\u53ef\u53d8\u6570\u636e\u6620\u5c04\u5728 Docker \u6620\u50cf\u6587\u4ef6\u4e4b\u5916\uff08\u4f8b\u5982\uff0c\u5728 ",(0,n.jsx)(o.code,{children:"appdata"})," \u5171\u4eab\u4e2d\uff09\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u5c06\u60a8\u7684\u5bb9\u5668\u6062\u590d\u5230\u5148\u524d\u72b6\u6001\u3002"]})}),"\n",(0,n.jsx)(o.admonition,{type:"tip",children:(0,n.jsxs)(o.p,{children:["\u5982\u679c\u5bb9\u5668\u5728\u91cd\u65b0\u5b89\u88c5\u540e\u65e0\u6cd5\u542f\u52a8\uff0c\u8bf7\u4ece ",(0,n.jsx)(o.strong,{children:"Docker"})," \u9009\u9879\u5361\u7684\u4e0a\u4e0b\u6587\u83dc\u5355\u4e2d\u68c0\u67e5\u5176\u65e5\u5fd7\uff0c\u4ee5\u67e5\u627e\u9519\u8bef\u6d88\u606f\u548c\u6545\u969c\u6392\u9664\u63d0\u793a\u3002"]})}),"\n",(0,n.jsx)(o.admonition,{type:"note",children:(0,n.jsx)(o.p,{children:"\u5728\u6062\u590d\u4f60\u7684\u5bb9\u5668\u540e\uff0c\u9a8c\u8bc1\u6240\u6709\u6620\u5c04\u7684\u4e3b\u673a\u8def\u5f84\u662f\u5426\u5b58\u5728\u5e76\u5177\u6709\u6b63\u786e\u7684\u6743\u9650\u3002\u9519\u8bef\u7684\u6620\u5c04\u6216\u6743\u9650\u662f\u542f\u52a8\u95ee\u9898\u7684\u5e38\u89c1\u539f\u56e0\u3002"})}),"\n",(0,n.jsx)(o.hr,{}),"\n",(0,n.jsx)(o.h2,{id:"\u6062\u590d-docker-\u81ea\u5b9a\u4e49\u7f51\u7edc",children:"\u6062\u590d Docker \u81ea\u5b9a\u4e49\u7f51\u7edc"}),"\n",(0,n.jsx)(o.p,{children:"\u5982\u679c\u5220\u9664Docker\u6620\u50cf\u6587\u4ef6\uff0c\u81ea\u5b9a\u4e49Docker\u7f51\u7edc\u5c06\u4e0d\u4f1a\u6301\u4e45\u5316\u3002\u5728\u79fb\u9664\u6620\u50cf\u4e4b\u524d\uff0c\u901a\u8fc7\u6253\u5f00\u7ec8\u7aef\u5e76\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u8bb0\u5f55\u4f60\u7684\u81ea\u5b9a\u4e49\u7f51\u7edc\u540d\u79f0\uff1a"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"docker network ls\n"})}),"\n",(0,n.jsxs)(o.p,{children:["\u8bb0\u4e0b\u60a8\u521b\u5efa\u7684\u4efb\u4f55\u7f51\u7edc\u7684\u540d\u79f0\uff08\u4e0d\u5305\u62ec\u9ed8\u8ba4\u7684 ",(0,n.jsx)(o.code,{children:"bridge"}),"\u3001",(0,n.jsx)(o.code,{children:"host"})," \u548c ",(0,n.jsx)(o.code,{children:"none"})," \u7f51\u7edc\uff09\u3002"]}),"\n",(0,n.jsx)(o.p,{children:"\u8981\u6062\u590d\u81ea\u5b9a\u4e49\u7f51\u7edc\uff1a"}),"\n",(0,n.jsxs)(o.ol,{children:["\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsx)(o.p,{children:"\u5728\u91cd\u65b0\u521b\u5efa Docker \u6620\u50cf\u6587\u4ef6\u540e\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u91cd\u5efa\u6bcf\u4e2a\u81ea\u5b9a\u4e49\u7f51\u7edc\uff1a"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"docker network create <network-name>\n"})}),"\n",(0,n.jsxs)(o.p,{children:["\u5c06 ",(0,n.jsx)(o.code,{children:"<network-name>"})," \u66ff\u6362\u4e3a\u60a8\u5148\u524d\u8bb0\u5f55\u7684\u51c6\u786e\u540d\u79f0\u3002"]}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsx)(o.p,{children:"\u6839\u636e\u9700\u8981\u66f4\u65b0\u60a8\u7684\u5bb9\u5668\u4ee5\u4f7f\u7528\u6062\u590d\u7684\u7f51\u7edc\u3002"}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(o.admonition,{type:"note",children:(0,n.jsxs)(o.p,{children:["\u5982\u679c\u60a8\u7684\u8bbe\u7f6e\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5728 ",(0,n.jsx)(o.em,{children:(0,n.jsx)(o.strong,{children:"Settings \u2192 Docker"})})," \u4e2d\u901a\u8fc7\u5c06 ",(0,n.jsx)(o.strong,{children:"\u4e3b\u673a\u8bbf\u95ee\u81ea\u5b9a\u4e49\u7f51\u7edc"})," \u8bbe\u7f6e\u4e3a ",(0,n.jsx)(o.strong,{children:"\u542f\u7528"})," \u6765\u542f\u7528\u5bf9\u81ea\u5b9a\u4e49\u7f51\u7edc\u7684\u4e3b\u673a\u8bbf\u95ee\u3002"]})}),"\n",(0,n.jsx)(o.admonition,{type:"tip",children:(0,n.jsx)(o.p,{children:"\u5982\u679c\u5728\u6062\u590d\u540e\u5bb9\u5668\u65e0\u6cd5\u6309\u9884\u671f\u901a\u4fe1\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684 Docker \u7f51\u7edc\u8bbe\u7f6e\u662f\u5426\u5b58\u5728\u51b2\u7a81\u6216\u8fde\u63a5\u95ee\u9898\u3002"})})]})}function p(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);