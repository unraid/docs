<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-API/oidc-provider-setup" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">OIDC提供商设置 | Unraid Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.unraid.net/docs/pr-preview/pr-368/zh/img/meta-unraid.png"><meta data-rh="true" name="twitter:image" content="https://docs.unraid.net/docs/pr-preview/pr-368/zh/img/meta-unraid.png"><meta data-rh="true" property="og:url" content="https://docs.unraid.net/docs/pr-preview/pr-368/zh/API/oidc-provider-setup/"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" property="og:locale:alternate" content="es"><meta data-rh="true" property="og:locale:alternate" content="fr"><meta data-rh="true" property="og:locale:alternate" content="de"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="theme-color" content="#242526" media="(prefers-color-scheme: dark)"><meta data-rh="true" name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"><meta data-rh="true" name="color-scheme" content="dark light"><meta data-rh="true" name="keywords" content="Unraid, server, storage, NAS, Docker, virtualization, array, parity, data protection, file sharing, plugins, management, GUI, disk management, caching, SSD, disk encryption, security, RAID, network configuration, backups, media server, transcoding, monitoring, VMs, GPU passthrough, hardware compatibility"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="OIDC提供商设置 | Unraid Docs"><meta data-rh="true" name="description" content="为 Unraid API 配置 OIDC (OpenID Connect) 提供商以用于 SSO 身份验证"><meta data-rh="true" property="og:description" content="为 Unraid API 配置 OIDC (OpenID Connect) 提供商以用于 SSO 身份验证"><link data-rh="true" rel="icon" href="/docs/pr-preview/pr-368/zh/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.unraid.net/docs/pr-preview/pr-368/zh/API/oidc-provider-setup/"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-368/API/oidc-provider-setup/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-368/es/API/oidc-provider-setup/" hreflang="es"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-368/fr/API/oidc-provider-setup/" hreflang="fr"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-368/de/API/oidc-provider-setup/" hreflang="de"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-368/zh/API/oidc-provider-setup/" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-368/API/oidc-provider-setup/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://JUYLFQHE7W-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Unraid API","item":"https://docs.unraid.net/docs/pr-preview/pr-368/zh/API/"},{"@type":"ListItem","position":2,"name":"OIDC提供商设置","item":"https://docs.unraid.net/docs/pr-preview/pr-368/zh/API/oidc-provider-setup"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CZENQ1ZPEH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CZENQ1ZPEH",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Unraid Docs" href="/docs/pr-preview/pr-368/zh/opensearch.xml">



<script src="/js/redirects.js"></script><link rel="stylesheet" href="/docs/pr-preview/pr-368/zh/assets/css/styles.f000b811.css">
<script src="/docs/pr-preview/pr-368/zh/assets/js/runtime~main.289fb9da.js" defer="defer"></script>
<script src="/docs/pr-preview/pr-368/zh/assets/js/main.70f77bc9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/pr-preview/pr-368/zh/"><div class="navbar__logo"><img src="/docs/pr-preview/pr-368/zh/img/un-mark-gradient.svg" alt="我的网站标志" class="themedComponent_mlkZ themedComponent--light_NVdE" style="width:30px"><img src="/docs/pr-preview/pr-368/zh/img/un-mark-gradient.svg" alt="我的网站标志" class="themedComponent_mlkZ themedComponent--dark_xIcU" style="width:30px"></div><b class="navbar__title text--truncate">Unraid 文档</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">更多</a><ul class="dropdown__menu"><li><a href="https://unraid.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">Unraid 首页<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://forums.unraid.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">论坛<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://github.com/unraid/docs" target="_blank" rel="noopener noreferrer" class="dropdown__link">文档 Github<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/docs/pr-preview/pr-368/API/oidc-provider-setup/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/docs/pr-preview/pr-368/es/API/oidc-provider-setup/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es">Español</a></li><li><a href="/docs/pr-preview/pr-368/fr/API/oidc-provider-setup/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Français</a></li><li><a href="/docs/pr-preview/pr-368/de/API/oidc-provider-setup/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="de">Deutsch</a></li><li><a href="/docs/pr-preview/pr-368/zh/API/oidc-provider-setup/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="系统模式" aria-label="切换深色和浅色模式（当前为系统模式）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pr-preview/pr-368/zh/">Unraid 文档</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/pr-preview/pr-368/zh/category/unraid-os/">Unraid 操作系统</a><button aria-label="展开侧栏类别 &#x27;Unraid 操作系统&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/pr-preview/pr-368/zh/category/unraid-connect/">Unraid Connect</a><button aria-label="展开侧栏类别 &#x27;Unraid Connect&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/pr-preview/pr-368/zh/API/">Unraid API</a><button aria-label="折叠侧栏类别 &#x27;Unraid API&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-368/zh/API/how-to-use-the-api/">使用 Unraid API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/pr-preview/pr-368/zh/API/oidc-provider-setup/">OIDC提供商设置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-368/zh/API/cli/">CLI参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-368/zh/API/programmatic-api-key-management/">Programmatic API Key Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-368/zh/API/upcoming-features/">路线图与功能</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-368/zh/API/api-key-app-developer-authorization-flow/">API密钥授权流程</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/pr-preview/pr-368/zh/category/contribute/">贡献</a><button aria-label="展开侧栏类别 &#x27;贡献&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pr-preview/pr-368/zh/glossary/">词汇表</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="面包屑导航"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页" class="breadcrumbs__link" href="/docs/pr-preview/pr-368/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/pr-preview/pr-368/zh/API/"><span>Unraid API</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">OIDC提供商设置</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页内容</button></div><div class="theme-doc-markdown markdown"><header><h1>OIDC提供商设置</h1></header>
<p>:::info[What 什么是OIDC？</p>
<p>OpenID Connect (OIDC) 是一种认证协议，允许用户使用现有账户（如Google、Microsoft或公司身份提供商）登录。它为无缝和安全登录提供了单点登录(SSO)支持。</p>
<p>:::</p>
<p>This guide walks you through configuring OIDC (OpenID Connect) providers for SSO authentication in the Unraid API using the web interface.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-快速开始">🚀 快速开始<a href="#-快速开始" class="hash-link" aria-label="直接链接到 🚀 快速开始" title="直接链接到 🚀 快速开始">​</a></h2>
<details open="" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="false"><summary><strong>前往OIDC设置</strong></summary><div><div class="collapsibleContent_i85q"><ol>
<li>Navigate to your Unraid server&#x27;s web interface</li>
<li>进入<strong>设置</strong> → <strong>管理访问</strong> → <strong>API</strong> → <strong>OIDC</strong></li>
<li>您将看到不同提供商的选项卡 - 单击**+**按钮以添加新提供商</li>
</ol></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="oidc提供商界面概览">OIDC提供商界面概览<a href="#oidc提供商界面概览" class="hash-link" aria-label="直接链接到 OIDC提供商界 面概览" title="直接链接到 OIDC提供商界面概览">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Login Page with SSO Options" src="/docs/pr-preview/pr-368/zh/assets/images/sso-with-options-1502ad3a5ea6131273cbb449f0848840.png" width="543" height="641" class="img_ev3q">
<em>Login page showing traditional login form with SSO options - &quot;Login With Unraid.net&quot; and &quot;Sign in with Google&quot; buttons</em></p>
<p>界面包括：</p>
<ul>
<li><strong>提供商选项卡</strong>: 每个配置的提供商（Unraid.net，Google等）以选项卡形式出现。</li>
<li><strong>添加提供商按钮</strong>: 单击**+**按钮以添加新提供商</li>
<li><strong>授权模式下拉菜单</strong>: 在“简单”和“高级”模式之间切换</li>
<li><strong>简单授权部分</strong>: 配置允许的电子邮件域和具体地址</li>
<li><strong>添加项目按钮</strong>: 单击以添加多条授权规则</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="理解授权模式">理解授权模式<a href="#理解授权模式" class="hash-link" aria-label="直接链接到 理解授权模式" title="直接链接到 理解授权模式">​</a></h2>
<p>界面提供了两种授权模式：</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="简单模式推荐">简单模式（推荐）<a href="#简单模式推荐" class="hash-link" aria-label="直接链接到 简单模式（推荐）" title="直接链接到 简单模式（推荐）">​</a></h3>
<p>简单模式是配置授权的最简单方法。您可以：</p>
<ul>
<li>允许特定电子邮件域（例如，@company.com）</li>
<li>允许特定电子邮件地址</li>
<li>Configure who can access your Unraid server with minimal setup</li>
</ul>
<p><strong>何时使用简单模式：</strong></p>
<ul>
<li>您想允许来自您公司域的所有用户</li>
<li>您有一个特定用户的小名单</li>
<li>你对OIDC配置比较陌生</li>
</ul>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>高级模式</strong></summary><div><div class="collapsibleContent_i85q"><p>高级模式通过基于声明的规则提供细粒度的控制。您可以：</p><ul>
<li>基于JWT声明创建复杂的授权规则</li>
<li>使用操作符如等于、包含、以…结束、以…开始</li>
<li>使用OR/AND逻辑结合多个条件</li>
<li>选择是否任何规则通过（OR模式）或所有规则通过（AND模式）</li>
</ul><p><strong>何时使用高级模式：</strong></p><ul>
<li>您需要检查组成员资格</li>
<li>您想验证多个声明（例如，电子邮件域和验证状态）</li>
<li>您有复杂的授权需求</li>
<li>您需要对规则的评估方式进行精细化控制</li>
</ul></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="授权规则">授权规则<a href="#授权规则" class="hash-link" aria-label="直接链接到 授权规则" title="直接链接到 授权规则">​</a></h2>
<p><img decoding="async" loading="lazy" alt="授权规则配置" src="/docs/pr-preview/pr-368/zh/assets/images/advanced-rules-a1adb1d0ae0e59913d42cc0c8d30878c.png" width="1162" height="972" class="img_ev3q">
<em>高级授权规则显示以电子邮件为基础的访问控制的JWT声明配置及操作符以…结束</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="简单模式示例">简单模式示例<a href="#简单模式示例" class="hash-link" aria-label="直接链接到 简单模式示例" title="直接链接到 简单模式示例">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="允许公司域">允许公司域<a href="#允许公司域" class="hash-link" aria-label="直接链接到 允许公司域" title="直接链接到 允许公司域">​</a></h4>
<p>在简单授权中：</p>
<ul>
<li><strong>允许的电子邮件域</strong>: 输入<code>company.com</code></li>
<li>这允许任何带有@company.com邮箱的人</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="允许特定用户">允许特定用户<a href="#允许特定 用户" class="hash-link" aria-label="直接链接到 允许特定用户" title="直接链接到 允许特定用户">​</a></h4>
<ul>
<li><strong>特定电子邮件地址</strong>: 添加单个电子邮件</li>
<li>单击<strong>添加项目</strong>以添加多个地址</li>
</ul>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>高级模式示例</strong></summary><div><div class="collapsibleContent_i85q"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="授权规则模式">授权规则模式<a href="#授权规则模式" class="hash-link" aria-label="直接链接到 授权规则模式" title="直接链接到 授权规则模式">​</a></h4><p>使用多个规则时，您可以选择它们的评估方式：</p><ul>
<li><strong>OR模式</strong>（默认）: 如果任何规则通过，用户将被授权</li>
<li><strong>AND模式</strong>: 仅当所有规则通过时，用户才被授权</li>
</ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="电子邮件域与验证and模式">电子邮件域与验证（AND模式）<a href="#电子邮件域与验证and模式" class="hash-link" aria-label="直接链接到 电子邮件域与验证（AND模式）" title="直接链接到 电子邮件域与验证（AND模式）">​</a></h4><p>要求同时进行电子邮件域与验证：</p><ol>
<li>将<strong>授权规则模式</strong>设置为<code>AND</code></li>
<li>添加两条规则：<!-- -->
<ul>
<li>规则 1：<!-- -->
<ul>
<li><strong>声明</strong>: <code>email</code></li>
<li><strong>操作符</strong>: <code>endsWith</code></li>
<li><strong>值</strong>: <code>@company.com</code></li>
</ul>
</li>
<li>规则 2：<!-- -->
<ul>
<li><strong>声明</strong>: <code>email_verified</code></li>
<li><strong>操作符</strong>: <code>equals</code></li>
<li><strong>值</strong>: <code>true</code></li>
</ul>
</li>
</ul>
</li>
</ol><p>这确保用户必须同时拥有公司邮箱和已验证的电子邮件地址。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="基于  组的访问or模式">基于组的访问（OR模式）<a href="#基于组的访问or模式" class="hash-link" aria-label="直接链接到 基于组的访问（OR模式）" title="直接链接到 基于组的访问（OR模式）">​</a></h4><p>为了允许对多个组的访问：</p><ol>
<li>将<strong>授权规则模式</strong>设置为<code>OR</code>（默认）</li>
<li>为每个组添加规则：<!-- -->
<ul>
<li><strong>声明</strong>: <code>groups</code></li>
<li><strong>操作符</strong>: <code>contains</code></li>
<li><strong>值</strong>: <code>admins</code>
或添加另一个规则：</li>
<li><strong>声明</strong>: <code>groups</code></li>
<li><strong>操作符</strong>: <code>contains</code></li>
<li><strong>值</strong>: <code>developers</code></li>
</ul>
</li>
</ol><p>在<code>admins</code>或<code>developers</code>组中的用户将被授权。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="多个域">多个域<a href="#多个域" class="hash-link" aria-label="直接链接到 多个域" title="直接链接到 多个域">​</a></h4><ul>
<li><strong>声明</strong>: <code>email</code></li>
<li><strong>操作符</strong>: <code>endsWith</code></li>
<li><strong>值</strong>: 添加多个域（例如，<code>company.com</code>, <code>subsidiary.com</code>）</li>
</ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="复杂授权and模式">复杂授权（AND模式）<a href="#复杂授权and模式" class="hash-link" aria-label="直接链接到 复杂授权（AND模式）" title="直接链接到 复杂授权（AND模式）">​</a></h4><p>对于需要多种条件的严格安全要求：</p><ol>
<li>将<strong>授权规则模式</strong>设置为<code>AND</code></li>
<li>添加所有必须通过的多条规则：<!-- -->
<ul>
<li>电子邮件必须来自公司域</li>
<li>电子邮件必须经过验证</li>
<li>用户必须位于特定组中</li>
<li>账户须启用双重身份验证（如果声明可用）</li>
</ul>
</li>
</ol></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>配置界面详情</strong></summary><div><div class="collapsibleContent_i85q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="提供商选项卡">提供商选项卡<a href="#提供商选项卡" class="hash-link" aria-label="直接链接到 提供商选项卡" title="直接链接到 提供商选项卡">​</a></h3><ul>
<li>每个配置的提供商显示为顶部的选项卡</li>
<li>单击选项卡在提供商配置之间切换</li>
<li>右侧的**+**按钮添加新的提供商</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="授权模式切换区">授权模式切换区<a href="#授权模式切换区" class="hash-link" aria-label="直接链接到 授权模式切换区" title="直接链接到 授权模式切换区">​</a></h3><ul>
<li><strong>简单</strong>: 最适合基于电子邮件的授权（大多数用户推荐）</li>
<li><strong>高级</strong>: 用于复杂的基于JWT声明的规则</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="简单授权字段">简单授权字段<a href="#简单授权字段" class="hash-link" aria-label="直接链接到 简单授权字段" title="直接链接到 简单授权字段">​</a></h3><p>选择“简单”模式时，您将看到：</p><ul>
<li><strong>允许的电子邮件域</strong>: 输入不带@的域名（例如，<code>company.com</code>）<!-- -->
<ul>
<li>帮助文本：“这些域名结尾的电子邮件可以登录”</li>
</ul>
</li>
<li><strong>特定电子邮件地址</strong>: 添加单个电子邮件地址<!-- -->
<ul>
<li>帮助文本：“只有这些精确的电子邮件地址可以登录”</li>
</ul>
</li>
<li><strong>添加项目</strong>按钮添加多个条目</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="高级授权字段">高级授权字段<a href="#高级授权字段" class="hash-link" aria-label="直接链接到 高级授权字段" title="直接链接到 高级授权字段">​</a></h3><p>选择“高级”模式时，您将看到：</p><ul>
<li><strong>授权规则模式</strong>: 选择<code>OR</code>（任何规则通过）或<code>AND</code>（所有规则必须通过）</li>
<li><strong>授权规则</strong>: 添加基于声明的多条规则</li>
<li><strong>对于每条规则</strong>:<!-- -->
<ul>
<li><strong>声明</strong>: 要检查的JWT声明</li>
<li><strong>操作符</strong>: 如何比较（等于、包含、以…结束、以…开始）</li>
<li><strong>值</strong>: 匹配对象</li>
</ul>
</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附加界面元素">附加界面元素<a href="#附加界面元素" class="hash-link" aria-label="直接链接到 附加界面元素" title="直接链接到 附加界面元素">​</a></h3><ul>
<li><strong>启用开发者沙盒</strong>: 切换以启用位于<code>/graphql</code>的GraphQL沙盒</li>
<li>界面使用深色主题以提高可见性</li>
<li>字段验证指示器帮助确保正确配置</li>
</ul></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="重定向uri是必须的">重定向URI是必须的<a href="#重定向uri是必须的" class="hash-link" aria-label="直接链接到 重定向URI是必须的" title="直接链接到 重定向URI是必须的">​</a></h3>
<p>:::caution[Important 配置</p>
<p>所有提供商必须使用此精确重定向URI格式进行配置：</p>
<p>:::</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">http://YOUR_UNRAID_IP/graphql/api/auth/oidc/callback</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p>将<code>YOUR_UNRAID_IP</code>替换为您实际的服务器IP地址（例如，<code>192.168.1.100</code>或<code>tower.local</code>）。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="发布者url格式">发布者URL格式<a href="#发布者url格式" class="hash-link" aria-label="直接链接到 发布者URL格式" title="直接链接到 发布者URL格式">​</a></h3>
<p><strong>发布者URL</strong>字段接受这两种格式，但<strong>强烈推荐基础URL</strong>以保障安全：</p>
<ul>
<li><strong>基础URL</strong>（推荐）: <code>https://accounts.google.com</code></li>
<li><strong>完整发现URL</strong>: <code>https://accounts.google.com/.well-known/openid-configuration</code></li>
</ul>
<p><strong>⚠️ 安全注意</strong>：始终尽量使用基本URL格式。系统会自动附加<code>/.well-known/openid-configuration</code>以便进行OIDC发现。直接使用完整发现URL会禁用重要的发行者验证检查，OpenID Connect规范不推荐这样做。</p>
<p><strong>正确基础URL的示例：</strong></p>
<ul>
<li>Google: <code>https://accounts.google.com</code></li>
<li>Microsoft/Azure: <code>https://login.microsoftonline.com/YOUR_TENANT_ID/v2.0</code></li>
<li>Keycloak: <code>https://keycloak.example.com/realms/YOUR_REALM</code></li>
<li>Authelia: <code>https://auth.yourdomain.com</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-测试您的配置">✅ 测试您的配置<a href="#-测试  您的配置" class="hash-link" aria-label="直接链接到 ✅ 测试您的配置" title="直接链接到 ✅ 测试您的配置">​</a></h2>
<p><img decoding="async" loading="lazy" alt="登录页面显示 SSO 按钮" src="/docs/pr-preview/pr-368/zh/assets/images/sso-with-options-1502ad3a5ea6131273cbb449f0848840.png" width="543" height="641" class="img_ev3q">
<em>Unraid 登录页面显示传统的用户名/密码认证和带有定制提供商按钮的 SSO 选项</em></p>
<ol>
<li>保存您的提供商配置</li>
<li>登出（如果已登录）</li>
<li>导航到登录页面</li>
<li>您的配置提供商按钮应出现</li>
<li>单击以测试登录流程</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-故障排除">🔧 故障排除<a href="#-故障排除" class="hash-link" aria-label="直接链接到 🔧 故障排除" title="直接链接到 🔧 故障排除">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="常见问题">常见问题<a href="#常见问题" class="hash-link" aria-label="直接链接到 常见问题" title="直接链接到 常见问题">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="找不到提供商错误">“找不到提供商”错误<a href="#找不到提供商错误" class="hash-link" aria-label="直接链接到 “找不到提供商”错误" title="直接链接到 “找不到提供商”错误">​</a></h4>
<ul>
<li>确保发布者URL正确</li>
<li>检查提供商是否支持OIDC发现（/.well-known/openid-configuration）</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="认证失败">“认证失败”<a href="#认证失败" class="hash-link" aria-label="直接链接到 “认证失败”" title="直接链接到 “认证失败”">​</a></h4>
<ul>
<li>在简单模式中：检查电子邮件域是否正确输入（不带@）</li>
<li>在高级模式中：<!-- -->
<ul>
<li>验证声明名称是否与提供商发送的完全匹配</li>
<li>检查授权规则模式是否设置正确（OR vs AND）</li>
<li>确保令牌中  存在所有必需的声明</li>
</ul>
</li>
<li>启用调试日志以查看实际声明和规则评估</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="无效重定向uri">“无效重定向URI”<a href="#无效重定向uri" class="hash-link" aria-label="直接链接到 “无效重定向URI”" title="直接链接到 “无效重定向URI”">​</a></h4>
<ul>
<li>确保您的提供商中的重定向URI完全匹配</li>
<li>如果使用非标准配置，请包括正确的端口</li>
<li>验证重定向URI协议是否与服务器配置匹配（HTTP或HTTPS）</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="无法看到登录按钮">无法看到登录按钮<a href="#无法看到登录按钮" class="hash-link" aria-label="直接链接到 无法看到登录按钮" title="直接链接到 无法看到登录按钮">​</a></h4>
<ul>
<li>检查至少配置了一条授权规则</li>
<li>验证提供者已启用/保存</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="调试模式">调试模式<a href="#调试模式" class="hash-link" aria-label="直接链接到 调试模式" title="直接链接到 调试模式">​</a></h3>
<p>要排除故障：</p>
<ol>
<li>启用调试日志：</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LOG_LEVEL</span><span class="token operator">=</span><span class="token plain">debug unraid-api start </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--debug</span><br></span></code></pre></div></div>
<ol start="2">
<li>检查日志：</li>
</ol>
<ul>
<li>从提供商接收到的声明</li>
<li>授权规则评估</li>
<li>令牌验证错误</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-安全最佳实践">🔐 安全最佳实践<a href="#-安全最佳实践" class="hash-link" aria-label="直接链接到 🔐 安全最佳实践" title="直接链接到 🔐 安全最佳实践">​</a></h2>
<ol>
<li><strong>使用简单模式进行授权</strong> - 防止过于宽松的配置并减少错误配置风险</li>
<li><strong>授权时要具体</strong> - 不要使用过于宽泛的规则</li>
<li><strong>定期旋转密钥</strong> - 定期更新客户端密钥</li>
<li><strong>全面测试</strong> - 验证仅预定用户可以访问</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-需要帮助吗">💡 需要帮助吗？<a href="#-需要帮助吗" class="hash-link" aria-label="直接链接到 💡 需要帮助吗？" title="直接链接到 💡 需要帮助吗？">​</a></h2>
<ul>
<li>检查提供商的OIDC文档</li>
<li>查看 Unraid API 日志以获取详细的错误信息</li>
<li>确保您的提供商支持标准的 OIDC 发现</li>
<li>验证 Unraid 和提供商之间的网络连接</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-提供者特定设置">🏢 提供者特定设置<a href="#-提供者特定设置" class="hash-link" aria-label="直接链接到 🏢 提供者特定设置" title="直接链接到 🏢 提供者特定设置">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unraidnet-提供者">Unraid.net 提供者<a href="#unraidnet-提供者" class="hash-link" aria-label="直接链接到 Unraid.net 提供者" title="直接链接到 Unraid.net 提供者">​</a></h3>
<p>Unraid.net 提供商是内置且预配置的。您只需在界面中配置授权规则。</p>
<p><strong>配置：</strong></p>
<ul>
<li><strong>发行者 URL</strong>: 预配置（内置提供程序）</li>
<li><strong>客户端 ID/Secret</strong>: 预配置（内置提供程序）</li>
<li><strong>重定向 URI</strong>: <code>http://YOUR_UNRAID_IP/graphql/api/auth/oidc/callback</code></li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Redirect URI 协议</div><div class="admonitionContent_BuS1"><p><strong>匹配协议至您的服务器设置：</strong> 如果在没有 SSL/TLS 的情况下访问您的 Unraid 服务器（通常用于本地网络访问），请使用 <code>http://</code>。如果您在服务器上配置了 SSL/TLS，请使用 <code>https://</code>。某些 OIDC 提供商（如 Google）要求 HTTPS，不会接受 HTTP 重定向 URI。</p></div></div>
<p>使用简单模式（允许的电子邮件域/地址）或高级模式来配置授权规则，以满足复杂的需求。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="google">Google<a href="#google" class="hash-link" aria-label="直接链接到 Google" title="直接链接到 Google">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>📋 设置步骤</strong></summary><div><div class="collapsibleContent_i85q"><p>在 <a href="https://console.cloud.google.com/" target="_blank" rel="noopener noreferrer">Google Cloud Console</a> 中设置 OAuth 2.0 凭据：</p><ol>
<li>转到 <strong>API 和服务</strong> → <strong>凭据</strong></li>
<li>点击 <strong>创建凭据</strong> → <strong>OAuth 客户端 ID</strong></li>
<li>选择 <strong>Web 应用程序</strong> 作为应用程序类型</li>
<li>  将您的重定向 URI 添加到 <strong>授权重定向 URI</strong></li>
<li>如果出现提示，请配置 OAuth 同意屏幕</li>
</ol></div></div></details>
<p><strong>配置：</strong></p>
<ul>
<li><strong>发行者 URL</strong>：<code>https://accounts.google.com</code></li>
<li><strong>客户端 ID/Secret</strong>: 来自您的 OAuth 2.0 客户端凭据</li>
<li><strong>所需范围</strong>: <code>openid</code>, <code>profile</code>, <code>email</code></li>
<li><strong>重定向 URI</strong>: <code>http://YOUR_UNRAID_IP/graphql/api/auth/oidc/callback</code></li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Google 域名要求</div><div class="admonitionContent_BuS1"><p>**Google 要求 OAuth 重定向 URI 的有效域名。**本地 IP 地址和 <code>.local</code> 域不被接受。要在 Unraid 服务器上使用 Google OAuth，您需要：</p><ul>
<li><strong>选项 1: 反向代理</strong> - 设置一个反向代理（如 NGINX 代理管理器或 Traefik），使用有效域名指向您的 Unraid API</li>
<li><strong>选项 2: Tailscale</strong> - 使用 Tailscale 获取 Google 可接受的有效 <code>*.ts.net</code> 域</li>
<li><strong>选项 3: 动态 DNS</strong> - 使用 DDNS 服务为您的服务器获取公共域名</li>
</ul><p>请记得在 Google Cloud 控制台和 Unraid OIDC 配置中更新您的重定向 URI 以使用有效的域名。</p></div></div>
<p>对于 Google Workspace 域，使用高级模式和 <code>hd</code> 声明来限制对您组织域的访问。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authelia">Authelia<a href="#authelia" class="hash-link" aria-label="直接链接到 Authelia" title="直接链接到 Authelia">​</a></h3>
<p>在 Authelia <code>configuration.yml</code> 中配置 OIDC 客户端，使用客户端 ID <code>unraid-api</code> 并使用 Authelia hash-password 命令生成一个哈希密钥。</p>
<p><strong>配置：</strong></p>
<ul>
<li><strong>发行者 URL</strong>：<code>https://auth.yourdomain.com</code></li>
<li><strong>客户端 ID</strong>：<code>unraid-api</code>（或在 Authelia 中配置）</li>
<li><strong>客户端 Secret</strong>：您的未哈希密钥</li>
<li><strong>所需范围</strong>: <code>openid</code>, <code>profile</code>, <code>email</code>, <code>groups</code></li>
<li><strong>重定向 URI</strong>: <code>http://YOUR_UNRAID_IP/graphql/api/auth/oidc/callback</code></li>
</ul>
<p>使用带 <code>groups</code> 声明的高级模式进行基于组的授权。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="microsoftazure-ad">Microsoft/Azure AD<a href="#microsoftazure-ad" class="hash-link" aria-label="直接链接到 Microsoft/Azure AD" title="直接链接到 Microsoft/Azure AD">​</a></h3>
<p>在 <a href="https://portal.azure.com/" target="_blank" rel="noopener noreferrer">Azure Portal</a> 中，Azure Active Directory → 应用注册项下注册一个新应用。记录应用 ID，创建客户端密钥，并记录您的租户 ID。</p>
<p><strong>配置：</strong></p>
<ul>
<li><strong>发行者 URL</strong>: <code>https://login.microsoftonline.com/YOUR_TENANT_ID/v2.0</code></li>
<li><strong>客户端 ID</strong>: 您的应用程序（客户端）ID</li>
<li><strong>客户端 Secret</strong>: 生成的客户端秘密</li>
<li><strong>所需范围</strong>: <code>openid</code>, <code>profile</code>, <code>email</code></li>
<li><strong>重定向 URI</strong>: <code>http://YOUR_UNRAID_IP/graphql/api/auth/oidc/callback</code></li>
</ul>
<p>可以在界面中配置授权规则，使用电子邮件域或者高级声明。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="keycloak">Keycloak<a href="#keycloak" class="hash-link" aria-label="直接链接到 Keycloak" title="直接链接到 Keycloak">​</a></h3>
<p>在 Keycloak 管理控制台中创建一个新的保密客户端，使用 <code>openid-connect</code> 协议，并从凭据选项卡复制客户端密钥。</p>
<p><strong>配置：</strong></p>
<ul>
<li><strong>发行者 URL</strong>：<code>https://keycloak.example.com/realms/YOUR_REALM</code></li>
<li><strong>客户端 ID</strong>: <code>unraid-api</code>（或在 Keycloak 中配置）</li>
<li><strong>客户端 Secret</strong>: 来自 Keycloak 凭据选项卡</li>
<li><strong>所需范围</strong>: <code>openid</code>, <code>profile</code>, <code>email</code></li>
<li><strong>重定向 URI</strong>: <code>http://YOUR_UNRAID_IP/graphql/api/auth/oidc/callback</code></li>
</ul>
<p>对于基于角色的授权，使用 <code>realm_access.roles</code> 或 <code>resource_access</code> 声明的高级模式。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authentik">Authentik<a href="#authentik" class="hash-link" aria-label="直接链接到 Authentik" title="直接链接到 Authentik">​</a></h3>
<p>在 Authentik 中创建一个新的 OAuth2/OpenID 提供者，然后创建一个应用程序并将其链接到提供者。</p>
<p><strong>配置：</strong></p>
<ul>
<li><strong>发行者 URL</strong>: <code>https://authentik.example.com/application/o/&lt;application_slug&gt;/</code></li>
<li><strong>客户端 ID</strong>: 来自 Authentik 提供者配置</li>
<li><strong>客户端 Secret</strong>: 来自 Authentik 提供者配置</li>
<li><strong>所需范围</strong>: <code>openid</code>, <code>profile</code>, <code>email</code></li>
<li><strong>重定向 URI</strong>: <code>http://YOUR_UNRAID_IP/graphql/api/auth/oidc/callback</code></li>
</ul>
<p>可以在界面中配置授权规则。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="okta">Okta<a href="#okta" class="hash-link" aria-label="直接链接到 Okta" title="直接链接到 Okta">​</a></h3>
<p>在 Okta 管理控  制台中创建一个新的 OIDC Web 应用程序，并分配适当的用户或组。</p>
<p><strong>配置：</strong></p>
<ul>
<li><strong>发行者 URL</strong>: <code>https://YOUR_DOMAIN.okta.com</code></li>
<li><strong>客户端 ID</strong>: 来自 Okta 应用程序配置</li>
<li><strong>客户端 Secret</strong>: 来自 Okta 应用程序配置</li>
<li><strong>所需范围</strong>: <code>openid</code>, <code>profile</code>, <code>email</code></li>
<li><strong>重定向 URI</strong>: <code>http://YOUR_UNRAID_IP/graphql/api/auth/oidc/callback</code></li>
</ul>
<p>可以在界面中配置授权规则，使用电子邮件域或者高级声明。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://translate.unraid.net/unraid-docs/zh" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文档页面"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/pr-preview/pr-368/zh/API/how-to-use-the-api/"><div class="pagination-nav__sublabel">上一篇</div><div class="pagination-nav__label">使用 Unraid API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pr-preview/pr-368/zh/API/cli/"><div class="pagination-nav__sublabel">下一篇</div><div class="pagination-nav__label">CLI参考</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-快速开始" class="table-of-contents__link toc-highlight">🚀 快速开始</a><ul><li><a href="#oidc提供商界面概览" class="table-of-contents__link toc-highlight">OIDC提供商界面概览</a></li></ul></li><li><a href="#理解授权模式" class="table-of-contents__link toc-highlight">理解授权模式</a><ul><li><a href="#简单模式推荐" class="table-of-contents__link toc-highlight">简单模式（推荐）</a></li></ul></li><li><a href="#授权规则" class="table-of-contents__link toc-highlight">授权规则</a><ul><li><a href="#简单模式示例" class="table-of-contents__link toc-highlight">简单模式示例</a></li><li><a href="#提供商选项卡" class="table-of-contents__link toc-highlight">提供商选项卡</a></li><li><a href="#授权模式切换区" class="table-of-contents__link toc-highlight">授权模式切换区</a></li><li><a href="#简单授权字段" class="table-of-contents__link toc-highlight">简单授权字段</a></li><li><a href="#高级授权字段" class="table-of-contents__link toc-highlight">高级授权字段</a></li><li><a href="#附加界面元素" class="table-of-contents__link toc-highlight">附加界面元素</a></li><li><a href="#重定向uri是必须的" class="table-of-contents__link toc-highlight">重定向URI是必须的</a></li><li><a href="#发布者url格式" class="table-of-contents__link toc-highlight">发布者URL格式</a></li></ul></li><li><a href="#-测试您的配置" class="table-of-contents__link toc-highlight">✅ 测试您的配置</a></li><li><a href="#-故障排除" class="table-of-contents__link toc-highlight">🔧 故障排除</a><ul><li><a href="#常见问题" class="table-of-contents__link toc-highlight">常见问题</a></li><li><a href="#调试模式" class="table-of-contents__link toc-highlight">调试模式</a></li></ul></li><li><a href="#-安全最佳实践" class="table-of-contents__link toc-highlight">🔐 安全最佳实践</a></li><li><a href="#-需要帮助吗" class="table-of-contents__link toc-highlight">💡 需要帮助吗？</a></li><li><a href="#-提供者特定设置" class="table-of-contents__link toc-highlight">🏢 提供者特定设置</a><ul><li><a href="#unraidnet-提供者" class="table-of-contents__link toc-highlight">Unraid.net 提供者</a></li><li><a href="#google" class="table-of-contents__link toc-highlight">Google</a></li><li><a href="#authelia" class="table-of-contents__link toc-highlight">Authelia</a></li><li><a href="#microsoftazure-ad" class="table-of-contents__link toc-highlight">Microsoft/Azure AD</a></li><li><a href="#keycloak" class="table-of-contents__link toc-highlight">Keycloak</a></li><li><a href="#authentik" class="table-of-contents__link toc-highlight">Authentik</a></li><li><a href="#okta" class="table-of-contents__link toc-highlight">Okta</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/pr-preview/pr-368/zh/">主页</a></li><li class="footer__item"><a href="https://github.com/unraid/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">在 Github 上贡献<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://forums.unraid.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">论坛<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discord.unraid.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://unraid.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Unraid 首页<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://connect.myunraid.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Unraid Connect<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://newsletter.unraid.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">通讯<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://unraid.net/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">博客<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">License</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer" class="footer__link-item" description="This documentation is available under the Creative Commons Attribution-ShareAlike 4.0 International License. Feel free to share, copy, and use our docs however you need. You can even modify and build upon them for your own projects. Just make sure to give us credit and share any improvements you make under the same license. Note: This license applies only to the documentation content, not to Unraid software or trademarks.">CC BY-SA 4.0<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/docs/pr-preview/pr-368/zh/img/un-mark-gradient.svg" alt="Unraid 标志" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="100"><img src="/docs/pr-preview/pr-368/zh/img/un-mark-gradient.svg" alt="Unraid 标志" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="100"></div><div class="footer__copyright"><small>版权所有 &copy; 2005-2025 Lime Technology, Inc.<br>Unraid&reg; 是 Lime Technology, Inc. 的注册商标。</small></div></div></div></footer></div></div>
</body>
</html>