"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2125],{2111:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"API/api-key-app-developer-authorization-flow","title":"Flujo de Autorizaci\xf3n de Clave API","description":"Este documento describe el flujo de creaci\xf3n de claves API de autoservicio para aplicaciones de terceros.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/API/api-key-app-developer-authorization-flow.mdx","sourceDirName":"API","slug":"/API/api-key-app-developer-authorization-flow","permalink":"/docs/pr-preview/pr-359/es/API/api-key-app-developer-authorization-flow","draft":false,"unlisted":false,"editUrl":"https://translate.unraid.net/unraid-docs/es","tags":[],"version":"current","frontMatter":{},"sidebar":"unraidSidebar","previous":{"title":"Hoja de Ruta y Caracter\xedsticas","permalink":"/docs/pr-preview/pr-359/es/API/upcoming-features"},"next":{"title":"Contribute","permalink":"/docs/pr-preview/pr-359/es/category/contribute"}}');var r=i(4848),a=i(8453);const c={},o="Flujo de Autorizaci\xf3n de Clave API",l={},d=[{value:"Visi\xf3n General",id:"visi\xf3n-general",level:2},{value:"Flujo",id:"flujo",level:2},{value:"Par\xe1metros de consulta",id:"par\xe1metros-de-consulta",level:2},{value:"Formato del \xe1mbito",id:"formato-del-\xe1mbito",level:2},{value:"Ejemplos:",id:"ejemplos",level:3},{value:"Recursos Disponibles:",id:"recursos-disponibles",level:3},{value:"Acciones Disponibles:",id:"acciones-disponibles",level:3},{value:"Consideraciones de Seguridad",id:"consideraciones-de-seguridad",level:2},{value:"Ejemplo de Integraci\xf3n",id:"ejemplo-de-integraci\xf3n",level:2}];function t(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"flujo-de-autorizaci\xf3n-de-clave-api",children:"Flujo de Autorizaci\xf3n de Clave API"})}),"\n",(0,r.jsx)(n.p,{children:"Este documento describe el flujo de creaci\xf3n de claves API de autoservicio para aplicaciones de terceros."}),"\n",(0,r.jsx)(n.h2,{id:"visi\xf3n-general",children:"Visi\xf3n General"}),"\n",(0,r.jsx)(n.p,{children:"Las aplicaciones pueden solicitar acceso a la API de un servidor Unraid redirigiendo a los usuarios a una p\xe1gina de autorizaci\xf3n especial donde los usuarios pueden revisar los permisos solicitados y crear una clave API con un solo clic."}),"\n",(0,r.jsx)(n.h2,{id:"flujo",children:"Flujo"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"La aplicaci\xf3n inicia la solicitud"}),": La aplicaci\xf3n redirige al usuario a:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"https://[unraid-server]/ApiKeyAuthorize?name=MyApp&scopes=docker:read,vm:*&redirect_uri=https://myapp.com/callback&state=abc123\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Autenticaci\xf3n del usuario"}),": Si no ha iniciado sesi\xf3n, el usuario es redirigido para iniciar sesi\xf3n primero (autenticaci\xf3n est\xe1ndar de Unraid)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pantalla de consentimiento"}),": El usuario ve:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Nombre y descripci\xf3n de la aplicaci\xf3n"}),"\n",(0,r.jsx)(n.li,{children:"Permisos solicitados (con casillas de verificaci\xf3n para aprobar/denegar \xe1mbitos espec\xedficos)"}),"\n",(0,r.jsx)(n.li,{children:"Campo de nombre de la clave API (rellenado previamente)"}),"\n",(0,r.jsx)(n.li,{children:"Botones Autorizar y Cancelar"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Creaci\xf3n de la clave API"}),": Tras la autorizaci\xf3n:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"La clave API se crea con los \xe1mbitos aprobados"}),"\n",(0,r.jsx)(n.li,{children:"La clave se muestra al usuario"}),"\n",(0,r.jsxs)(n.li,{children:["Si se proporciona ",(0,r.jsx)(n.code,{children:"redirect_uri"}),", el usuario es redirigido con la clave"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Llamada de retorno"}),": La aplicaci\xf3n recibe la clave API:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"https://myapp.com/callback?api_key=xxx&state=abc123\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"par\xe1metros-de-consulta",children:"Par\xe1metros de consulta"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (requerido): Nombre de la aplicaci\xf3n solicitante"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (opcional): Descripci\xf3n de la aplicaci\xf3n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"scopes"})," (requerido): Lista de \xe1mbitos solicitados separados por comas"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"redirect_uri"})," (opcional): URL para redirigir tras la autorizaci\xf3n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"state"})," (opcional): Valor opaco para mantener el estado"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"formato-del-\xe1mbito",children:"Formato del \xe1mbito"}),"\n",(0,r.jsxs)(n.p,{children:["Los \xe1mbitos siguen el patr\xf3n: ",(0,r.jsx)(n.code,{children:"recurso:acci\xf3n"})]}),"\n",(0,r.jsx)(n.h3,{id:"ejemplos",children:"Ejemplos:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"docker:read"})," - Acceso de lectura a Docker"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"vm:*"})," - Acceso completo a las VMs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system:update"})," - Acceso de actualizaci\xf3n al sistema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"role:viewer"})," - Acceso como rol de espectador"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"role:admin"})," - Acceso como rol de administrador"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"recursos-disponibles",children:"Recursos Disponibles:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"docker"}),", ",(0,r.jsx)(n.code,{children:"vm"}),", ",(0,r.jsx)(n.code,{children:"system"}),", ",(0,r.jsx)(n.code,{children:"share"}),", ",(0,r.jsx)(n.code,{children:"user"}),", ",(0,r.jsx)(n.code,{children:"network"}),", ",(0,r.jsx)(n.code,{children:"disk"}),", etc."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"acciones-disponibles",children:"Acciones Disponibles:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"create"}),", ",(0,r.jsx)(n.code,{children:"read"}),", ",(0,r.jsx)(n.code,{children:"update"}),", ",(0,r.jsx)(n.code,{children:"delete"})," o ",(0,r.jsx)(n.code,{children:"*"})," para todas"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"consideraciones-de-seguridad",children:"Consideraciones de Seguridad"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Se requiere HTTPS"}),": Las URIs de redirecci\xf3n deben usar HTTPS (excepto localhost para desarrollo)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consentimiento del usuario"}),": Los usuarios aprueban expl\xedcitamente cada permiso"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Basado en sesi\xf3n"}),": Utiliza la sesi\xf3n de autenticaci\xf3n existente de Unraid"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Visualizaci\xf3n \xfanica"}),": Las claves API se muestran una vez y deben guardarse de forma segura"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"ejemplo-de-integraci\xf3n",children:"Ejemplo de Integraci\xf3n"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// JavaScript example\nconst unraidServer = 'tower.local';\nconst appName = 'My Docker Manager';\nconst scopes = 'docker:*,system:read';\nconst redirectUri = 'https://myapp.com/unraid/callback';\nconst state = generateRandomState();\n\n// Store state for verification\nsessionStorage.setItem('oauth_state', state);\n\n// Redirect user to authorization page\nwindow.location.href =\n    `https://${unraidServer}/ApiKeyAuthorize?` +\n    `name=${encodeURIComponent(appName)}&` +\n    `scopes=${encodeURIComponent(scopes)}&` +\n    `redirect_uri=${encodeURIComponent(redirectUri)}&` +\n    `state=${encodeURIComponent(state)}`;\n\n// Handle callback\nconst urlParams = new URLSearchParams(window.location.search);\nconst apiKey = urlParams.get('api_key');\nconst returnedState = urlParams.get('state');\n\nif (returnedState === sessionStorage.getItem('oauth_state')) {\n    // Save API key securely\n    saveApiKey(apiKey);\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>o});var s=i(6540);const r={},a=s.createContext(r);function c(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);