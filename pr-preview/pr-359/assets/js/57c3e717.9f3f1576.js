"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6677],{7501:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>_,contentTitle:()=>x,default:()=>k,frontMatter:()=>y,metadata:()=>i,toc:()=>j});const i=JSON.parse('{"id":"unraid-os/troubleshooting/common-issues/data-recovery","title":"Data recovery","description":"Understanding data protection is important when managing your Unraid server. While Unraid offers strong protection against common hardware failures, no system can guarantee complete immunity to data loss. This section provides guidance on best practices for safeguarding your data, recognizing potential issues, and recovering data when problems occur.","source":"@site/docs/unraid-os/troubleshooting/common-issues/data-recovery.mdx","sourceDirName":"unraid-os/troubleshooting/common-issues","slug":"/unraid-os/troubleshooting/common-issues/data-recovery","permalink":"/docs/pr-preview/pr-359/unraid-os/troubleshooting/common-issues/data-recovery","draft":false,"unlisted":false,"editUrl":"https://github.com/unraid/docs/edit/renovate/actions-setup-node-6.x/docs/unraid-os/troubleshooting/common-issues/data-recovery.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"Data recovery"},"sidebar":"unraidSidebar","previous":{"title":"System crashes & stability","permalink":"/docs/pr-preview/pr-359/unraid-os/troubleshooting/common-issues/system-crashes-and-stability"},"next":{"title":"Docker troubleshooting","permalink":"/docs/pr-preview/pr-359/unraid-os/troubleshooting/common-issues/docker-troubleshooting"}}');var r=a(4848),s=a(8453),o=a(2503),n=a(9489),l=a(7227);function d(e){const t={a:"a",admonition:"admonition",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Starting with Unraid 7.0, XFS file system repair is now fully automated through the WebGUI:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Initial Check"}),": Click the ",(0,r.jsx)(t.strong,{children:"CHECK"})," button (no options to enter)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Check Results"}),":","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"No corruption detected"}),': Shows "no filesystem corruption detected" and the ',(0,r.jsx)(t.strong,{children:"CHECK"})," button remains"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Corruption detected"}),': Shows "filesystem corruption detected" and a ',(0,r.jsx)(t.strong,{children:"FIX"})," button appears"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Repair Process"}),": Click ",(0,r.jsx)(t.strong,{children:"FIX"})," to automatically repair the file system"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Additional Actions"}),": If needed, a ",(0,r.jsx)(t.strong,{children:"ZERO LOG"})," button may appear"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Completion"}),': Shows "filesystem repaired" when the process is complete']}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"This automated system eliminates the need for users to manually enter repair options and ensures the correct repair sequence is followed."}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Repairs maintain ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_0_17_1760419859774","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_0_17_1760419859774",place:"top",effect:"solid",clickable:!0})," protection and can take significant time."]}),"\n",(0,r.jsxs)(t.li,{children:["Both ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_0_5_1760419859774","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_0_5_1760419859774",place:"top",effect:"solid",clickable:!0})," and command-line options are supported for ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"xfs_3_44_1760419859774","data-tooltip-html":'A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.<br>See <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs">XFS File System - Red Hat Documentation</a>',"data-tooltip-place":"top",children:"XFS"}),(0,r.jsx)(o.m_,{id:"xfs_3_44_1760419859774",place:"top",effect:"solid",clickable:!0})," repair (commands shown below)."]}),"\n"]})})]})}function c(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}function h(e){const t={a:"a",admonition:"admonition",code:"code",li:"li",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Use ",(0,r.jsx)(t.code,{children:"btrfs scrub"})," in the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_2_8_1760419859776","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_2_8_1760419859776",place:"top",effect:"solid",clickable:!0})," to scan for and repair certain errors."]}),"\n",(0,r.jsx)(t.li,{children:"On single drives, scrub may detect but not fix some errors; if so, consider copying data and reformatting the disk or pool."}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Current ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"btrfs_0_8_1760419859776","data-tooltip-html":'\u201cB-Tree File System,\u201d a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.<br>See <a href="https://btrfs.readthedocs.io/">BTRFS File System - Official Documentation</a>',"data-tooltip-place":"top",children:"BTRFS"}),(0,r.jsx)(o.m_,{id:"btrfs_0_8_1760419859776",place:"top",effect:"solid",clickable:!0})," repair tools may not address all corruption; check Unraid documentation for updated tools if needed."]}),"\n",(0,r.jsxs)(t.li,{children:["For more details on scrub and recovery, refer to the respective ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"btrfs_0_64_1760419859776","data-tooltip-html":'\u201cB-Tree File System,\u201d a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.<br>See <a href="https://btrfs.readthedocs.io/">BTRFS File System - Official Documentation</a>',"data-tooltip-place":"top",children:"BTRFS"}),(0,r.jsx)(o.m_,{id:"btrfs_0_64_1760419859776",place:"top",effect:"solid",clickable:!0})," documentation or Unraid forums for guidance."]}),"\n"]})})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}function u(e){const t={a:"a",code:"code",li:"li",ol:"ol",p:"p",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Use the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_0_8_1760419859777","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_0_8_1760419859777",place:"top",effect:"solid",clickable:!0})," for ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_3_5_1760419859777","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_3_5_1760419859777",place:"top",effect:"solid",clickable:!0})," drives formatted with ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"xfs_6_23_1760419859777","data-tooltip-html":'A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.<br>See <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs">XFS File System - Red Hat Documentation</a>',"data-tooltip-place":"top",children:"XFS"}),(0,r.jsx)(o.m_,{id:"xfs_6_23_1760419859777",place:"top",effect:"solid",clickable:!0}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Start the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_10_1760419859777","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_10_1760419859777",place:"top",effect:"solid",clickable:!0})," in ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"maintenance-mode_3_4_1760419859777","data-tooltip-html":'Feature that starts the array without mounting drives. Enables disk repair, re-assignment, or parity rebuilds without affecting the array\'s active data.<br>See <a href="https://en.wikipedia.org/wiki/Maintenance_mode">Maintenance Mode - Wikipedia</a>',"data-tooltip-place":"top",children:"Maintenance Mode"}),(0,r.jsx)(o.m_,{id:"maintenance-mode_3_4_1760419859777",place:"top",effect:"solid",clickable:!0})," (unmounted)."]}),"\n",(0,r.jsxs)(t.li,{children:["From the Main tab, select the disk and open ",(0,r.jsx)(t.strong,{children:"Check Filesystem Status"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["By default, a check uses ",(0,r.jsx)(t.code,{children:"-n"})," (non-modifying); for more output, add ",(0,r.jsx)(t.code,{children:"-v"})," for ",(0,r.jsx)(t.code,{children:"-nv"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["To repair, remove the ",(0,r.jsx)(t.code,{children:"-n"})," flag to allow fixes."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_0_4_1760419859777","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_0_4_1760419859777",place:"top",effect:"solid",clickable:!0})," process maintains ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_3_19_1760419859777","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_3_19_1760419859777",place:"top",effect:"solid",clickable:!0})," during repair."]})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}function g(e){const t={a:"a",code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["At the console or via ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"ssh_0_22_1760419859778","data-tooltip-html":'\u201cSecure Shell,\u201d an encrypted protocol for securely accessing and managing your Unraid server remotely through a command-line interface.<br>See <a href="https://www.1kosmos.com/security-glossary/secure-shell-ssh/">Secure Shell (SSH) - 1Kosmos Security Glossary</a>',"data-tooltip-place":"top",children:"SSH"}),(0,r.jsx)(o.m_,{id:"ssh_0_22_1760419859778",place:"top",effect:"solid",clickable:!0}),", run:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"xfs_repair -v /dev/mdXp1\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Replace ",(0,r.jsx)(t.strong,{children:"X"})," with the correct disk number (e.g., ",(0,r.jsx)(t.code,{children:"md1p1"})," for Disk 1)."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Review the repair report for further remediation steps if required. If only minor issues, running ",(0,r.jsx)(t.code,{children:"-v"})," is generally sufficient."]}),"\n",(0,r.jsxs)(t.li,{children:["If repair produces a ",(0,r.jsx)(t.code,{children:"lost+found"})," directory, review and manage as above."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_0_0_1760419859778","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"Parity"}),(0,r.jsx)(o.m_,{id:"parity_0_0_1760419859778",place:"top",effect:"solid",clickable:!0})," is maintained during the repair."]}),"\n",(0,r.jsxs)(t.li,{children:["When finished, stop the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_24_1760419859778","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_24_1760419859778",place:"top",effect:"solid",clickable:!0})," and restart in normal mode."]}),"\n"]})]})}function f(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}const y={sidebar_position:4,sidebar_label:"Data recovery"},x="Data recovery",_={},j=[{value:"Backup strategy fundamentals",id:"backup-strategy-fundamentals",level:2},{value:"Repair file systems",id:"repair-file-systems",level:2},{value:"Device naming: paths and symbols",id:"device-naming-paths-and-symbols",level:3},{value:"Choosing the right repair method",id:"choosing-the-right-repair-method",level:3},{value:"Checking and fixing drives in the WebGUI",id:"checking-and-fixing-drives-in-the-webgui",level:2},{value:"Preparing to test",id:"preparing-to-test",level:3},{value:"Running the test",id:"running-the-test",level:3},{value:"Running the Repair",id:"running-the-repair",level:3},{value:"After the test and repair",id:"after-the-test-and-repair",level:3},{value:"XFS check &amp; repair",id:"xfs-check--repair",level:3},{value:"Unmountable disk(s)",id:"unmountable-disks",level:2},{value:"Recovery procedure",id:"recovery-procedure",level:3},{value:"Lost array configuration",id:"lost-array-configuration",level:2},{value:"Recover data using ddrescue",id:"recover-data-using-ddrescue",level:2},{value:"Cloning a failing disk",id:"cloning-a-failing-disk",level:3},{value:"Translating ddrescue output",id:"translating-ddrescue-output",level:3},{value:"Mounting and checking the recovered disk",id:"mounting-and-checking-the-recovered-disk",level:3},{value:"Identifying corrupt files without checksums",id:"identifying-corrupt-files-without-checksums",level:3}];function b(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"data-recovery",children:"Data recovery"})}),"\n",(0,r.jsx)(t.p,{children:"Understanding data protection is important when managing your Unraid server. While Unraid offers strong protection against common hardware failures, no system can guarantee complete immunity to data loss. This section provides guidance on best practices for safeguarding your data, recognizing potential issues, and recovering data when problems occur."}),"\n",(0,r.jsx)(t.p,{children:"Effective data recovery starts with solid data protection strategies, which include regular backups, proactive monitoring, and careful handling of drive and array configurations."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"backup-strategy-fundamentals",children:"Backup strategy fundamentals"}),"\n",(0,r.jsx)(t.p,{children:"Even though Unraid offers protection against various hardware failures, having reliable backups of your crucial data is vital. Backups are your last defense against catastrophic failures, ransomware, or accidental deletion."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Assess critical data:"})," Identify irreplaceable or essential files, such as personal documents, photos, and important videos."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Multiple backup copies:"})," Stick to the 3-2-1 rule: keep at least three copies of your data on two different media types, with one copy stored offsite or in the cloud. This minimizes risk from physical disasters like fire or theft."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Backup frequency:"})," Schedule regular backups to reduce the chances of data loss."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Ransomware protection:"})," At least one backup copy should be offline or inaccessible to protect against potential corruption."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Backup tools:"})," For Unraid 7.0 and above, it's recommended to use ",(0,r.jsx)(t.a,{href:"/docs/pr-preview/pr-359/unraid-connect/overview-and-setup",children:"Unraid Connect"})," for automated backups of your flash and configuration to the cloud. Additional popular backup solutions include:","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsxs)(t.strong,{children:[(0,r.jsx)(t.a,{href:"https://unraid-production-481d40bf.preview.craft.cloud/community/apps?q=Duplicati#r:~:text=of%202%20Apps-,duplicati,-Backup%2C%20Cloud",children:"Duplicati"}),":"]})," A versatile, open-source backup tool that offers deduplication and encryption, supporting cloud, local, USB, and remote destinations."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsxs)(t.strong,{children:[(0,r.jsx)(t.a,{href:"https://unraid-production-481d40bf.preview.craft.cloud/community/apps?q=rclone#r:~:text=various%20cloud%20services.-,rclone,-Waseh%27s%20Repository",children:"rclone"}),":"]})," A robust solution for syncing and backing up cloud storage providers."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsxs)(t.strong,{children:[(0,r.jsx)(t.a,{href:"https://rsync.samba.org/",children:"rsync"}),":"]})," An efficient option for local or remote backups."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsxs)(t.strong,{children:[(0,r.jsx)(t.a,{href:"https://www.borgbackup.org/",children:"borgbackup"}),":"]})," A choice for advanced users interested in deduplicated, encrypted backups."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Users should assess their risk tolerance and backup needs, but utilizing cloud integration and automation is a good starting point for most Unraid users."}),"\n",(0,r.jsx)(t.admonition,{title:"Modern backup strategy",type:"tip",children:(0,r.jsxs)(t.p,{children:["With Unraid 7.0 and up, enable ",(0,r.jsx)(t.a,{href:"/docs/pr-preview/pr-359/unraid-connect/overview-and-setup",children:"Unraid Connect"})," for automated cloud backups of your flash device and configuration. Consider using Duplicati, rclone, or similar tools for important files and shares to create scheduled backups to local, remote, or cloud destinations. Always test your restore process to ensure your backups will work when needed."]})}),"\n",(0,r.jsx)(t.admonition,{title:"Proactive monitoring and support",type:"info",children:(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Enable notifications:"})," Set up notifications in ",(0,r.jsx)(t.em,{children:(0,r.jsx)(t.strong,{children:"Settings \u2192 Notifications"})})," to receive immediate alerts about system issues."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Seek expert guidance:"})," If you're unsure about recovery steps, consult the ",(0,r.jsx)(t.a,{href:"https://forums.unraid.net/",children:"Unraid forums"})," before taking any action."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Regular health checks:"})," Keep an eye on your drive\u2019s ",(0,r.jsx)(t.a,{href:"/docs/pr-preview/pr-359/unraid-os/system-administration/monitor-performance/smart-reports-and-disk-health",children:"SMART data"})," and perform periodic file system checks."]}),"\n"]})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"repair-file-systems",children:"Repair file systems"}),"\n",(0,r.jsxs)(t.admonition,{type:"caution",children:[(0,r.jsx)(t.p,{children:"Use these instructions strictly for data drives with file system corruption. Do not apply them to the parity drive, hardware issues, or missing drives."}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"File system repair tools are intended only for fixing data or cache drives that have file system or mount errors."}),"\n",(0,r.jsxs)(t.li,{children:["The parity drive does ",(0,r.jsx)(t.strong,{children:"not"})," have a file system. Running any repair tool on the parity drive can corrupt it and may result in irreversible data loss."]}),"\n"]})]}),"\n",(0,r.jsx)(t.h3,{id:"device-naming-paths-and-symbols",children:"Device naming: paths and symbols"}),"\n",(0,r.jsxs)(t.p,{children:["When using the ",(0,r.jsxs)(t.strong,{children:[(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_0_0_1760419851611","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_0_0_1760419851611",place:"top",effect:"solid",clickable:!0})]}),", device paths are managed automatically. If you choose to repair via the command line, always ensure you are using the correct ",(0,r.jsx)(t.strong,{children:"partition path"}),":"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Label"}),(0,r.jsx)(t.th,{children:"Typical path"}),(0,r.jsx)(t.th,{children:"Usage"}),(0,r.jsxs)(t.th,{children:[(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_0_0_1760419851611","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"Parity"}),(0,r.jsx)(o.m_,{id:"parity_0_0_1760419851611",place:"top",effect:"solid",clickable:!0})," protected?"]})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Disk 7"}),(0,r.jsx)(t.td,{children:"/mnt/disk7"}),(0,r.jsx)(t.td,{children:"Unraid mount point"}),(0,r.jsxs)(t.td,{children:["Yes (if ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_8_1760419851611","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_8_1760419851611",place:"top",effect:"solid",clickable:!0})," disk)"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_0_1760419851611","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"Array"}),(0,r.jsx)(o.m_,{id:"array_0_0_1760419851611",place:"top",effect:"solid",clickable:!0})," partition"]}),(0,r.jsx)(t.td,{children:"/dev/md7p1"}),(0,r.jsx)(t.td,{children:"Unraid-managed device"}),(0,r.jsx)(t.td,{children:"Yes"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Raw partition"}),(0,r.jsx)(t.td,{children:"/dev/sdj1"}),(0,r.jsx)(t.td,{children:"Direct device access"}),(0,r.jsx)(t.td,{children:"No"})]})]})]}),"\n",(0,r.jsxs)(t.admonition,{type:"warning",children:[(0,r.jsxs)(t.p,{children:["Never run file system repair tools on entire drives (like ",(0,r.jsx)(t.code,{children:"/dev/sdj"}),"); always use partition paths (like ",(0,r.jsx)(t.code,{children:"/dev/sdj1"})," or Unraid-managed ",(0,r.jsx)(t.code,{children:"/dev/mdXp1"}),")."]}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["For ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_4_1760419851611","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_4_1760419851611",place:"top",effect:"solid",clickable:!0})," drives, always use the Unraid-managed device (such as ",(0,r.jsx)(t.code,{children:"/dev/md5p1"}),") to ",(0,r.jsxs)(t.strong,{children:["preserve ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_0_9_1760419851611","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_0_9_1760419851611",place:"top",effect:"solid",clickable:!0})," protection"]}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Using the raw partition (for example, ",(0,r.jsx)(t.code,{children:"/dev/sdj1"}),") will not update ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_2_18_1760419851611","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_2_18_1760419851611",place:"top",effect:"solid",clickable:!0}),", leaving it invalid."]}),"\n"]})]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Always use ",(0,r.jsx)(t.code,{children:"/dev/mdXp1"})," for ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_2_5_1760419851611","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_2_5_1760419851611",place:"top",effect:"solid",clickable:!0})," drives to maintain valid ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_5_26_1760419851611","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_5_26_1760419851611",place:"top",effect:"solid",clickable:!0}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["For non-",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_8_1760419851611","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_8_1760419851611",place:"top",effect:"solid",clickable:!0})," drives (like ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"cache_3_14_1760419851611","data-tooltip-html":'A feature in Unraid that temporarily stores newly written data on faster drives (typically SSDs) before moving it to the array, improving write performance.<br>See <a href="https://www.britannica.com/technology/cache-memory">Cache Memory - Computer Science Principles</a>',"data-tooltip-place":"top",children:"cache"}),(0,r.jsx)(o.m_,{id:"cache_3_14_1760419851611",place:"top",effect:"solid",clickable:!0}),"-only devices), use the direct partition path, e.g., ",(0,r.jsx)(t.code,{children:"/dev/sdj1"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"choosing-the-right-repair-method",children:"Choosing the right repair method"}),"\n",(0,r.jsxs)(t.p,{children:["All Unraid versions since ",(0,r.jsx)(t.strong,{children:"v6.0.0"})," support file system repairs through the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_2_41_1760419851611","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_2_41_1760419851611",place:"top",effect:"solid",clickable:!0})," for ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"xfs_5_5_1760419851611","data-tooltip-html":'A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.<br>See <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs">XFS File System - Red Hat Documentation</a>',"data-tooltip-place":"top",children:"XFS"}),(0,r.jsx)(o.m_,{id:"xfs_5_5_1760419851611",place:"top",effect:"solid",clickable:!0})," and ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"btrfs_8_5_1760419851611","data-tooltip-html":'\u201cB-Tree File System,\u201d a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.<br>See <a href="https://btrfs.readthedocs.io/">BTRFS File System - Official Documentation</a>',"data-tooltip-place":"top",children:"BTRFS"}),(0,r.jsx)(o.m_,{id:"btrfs_8_5_1760419851611",place:"top",effect:"solid",clickable:!0}),"."]}),"\n",(0,r.jsx)(t.p,{children:"For most users, the recommended method is:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Open the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_0_9_1760419851611","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_0_9_1760419851611",place:"top",effect:"solid",clickable:!0}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Navigate to the ",(0,r.jsx)(t.strong,{children:"Main"})," tab."]}),"\n",(0,r.jsxs)(t.li,{children:["Click on the appropriate ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_25_1760419851611","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_25_1760419851611",place:"top",effect:"solid",clickable:!0})," or ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"cache_3_4_1760419851611","data-tooltip-html":'A feature in Unraid that temporarily stores newly written data on faster drives (typically SSDs) before moving it to the array, improving write performance.<br>See <a href="https://www.britannica.com/technology/cache-memory">Cache Memory - Computer Science Principles</a>',"data-tooltip-place":"top",children:"cache"}),(0,r.jsx)(o.m_,{id:"cache_3_4_1760419851611",place:"top",effect:"solid",clickable:!0})," device."]}),"\n",(0,r.jsx)(t.li,{children:"Follow the prompts to run the built-in file system check and repair."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"If you prefer using the command line, always:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Identify the correct Unraid-managed partition (",(0,r.jsx)(t.code,{children:"/dev/mdXp1"}),") for ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_2_6_1760419851611","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_2_6_1760419851611",place:"top",effect:"solid",clickable:!0})," drives."]}),"\n",(0,r.jsxs)(t.li,{children:["Use the appropriate repair tools for your file system:","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"XFS:"})," ",(0,r.jsx)(t.code,{children:"xfs_repair"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"BTRFS:"})," ",(0,r.jsx)(t.code,{children:"btrfs scrub"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{title:"Know your file system",type:"caution",children:(0,r.jsxs)(t.p,{children:["Using the wrong repair tool can cause further damage. Verify that your disk is formatted as ",(0,r.jsxs)(t.strong,{children:[(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"xfs_0_0_1760419851611","data-tooltip-html":'A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.<br>See <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs">XFS File System - Red Hat Documentation</a>',"data-tooltip-place":"top",children:"XFS"}),(0,r.jsx)(o.m_,{id:"xfs_0_0_1760419851611",place:"top",effect:"solid",clickable:!0})]}),", ",(0,r.jsxs)(t.strong,{children:[(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"btrfs_0_0_1760419851611","data-tooltip-html":'\u201cB-Tree File System,\u201d a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.<br>See <a href="https://btrfs.readthedocs.io/">BTRFS File System - Official Documentation</a>',"data-tooltip-place":"top",children:"BTRFS"}),(0,r.jsx)(o.m_,{id:"btrfs_0_0_1760419851611",place:"top",effect:"solid",clickable:!0})]}),", or another supported file system type before initiating repairs."]})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"checking-and-fixing-drives-in-the-webgui",children:"Checking and fixing drives in the WebGUI"}),"\n",(0,r.jsxs)(t.p,{children:["This section covers how to diagnose and repair file system corruption on data drives using Unraid's built-in tools. File system issues can occur after unclean shutdowns, power failures, or hardware problems, but Unraid provides safe repair methods that maintain your ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_0_267_1760419851611","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_0_267_1760419851611",place:"top",effect:"solid",clickable:!0})," protection while fixing the underlying problems."]}),"\n",(0,r.jsx)(t.h3,{id:"preparing-to-test",children:"Preparing to test"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"File System"}),(0,r.jsx)(t.th,{children:"Start Mode"}),(0,r.jsx)(t.th,{children:"Maintenance Mode Req'd?"}),(0,r.jsx)(t.th,{children:"Notes"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"xfs_0_0_1760419851611","data-tooltip-html":'A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.<br>See <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs">XFS File System - Red Hat Documentation</a>',"data-tooltip-place":"top",children:"XFS"}),(0,r.jsx)(o.m_,{id:"xfs_0_0_1760419851611",place:"top",effect:"solid",clickable:!0})]}),(0,r.jsx)(t.td,{children:"Maintenance Mode"}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_0_1760419851611","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"Array"}),(0,r.jsx)(o.m_,{id:"array_0_0_1760419851611",place:"top",effect:"solid",clickable:!0})," must be started in Maintenance Mode (drives not mounted) for check/repair."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"btrfs_0_0_1760419851611","data-tooltip-html":'\u201cB-Tree File System,\u201d a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.<br>See <a href="https://btrfs.readthedocs.io/">BTRFS File System - Official Documentation</a>',"data-tooltip-place":"top",children:"BTRFS"}),(0,r.jsx)(o.m_,{id:"btrfs_0_0_1760419851611",place:"top",effect:"solid",clickable:!0})]}),(0,r.jsx)(t.td,{children:"Normal mode"}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_0_1760419851611","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"Array"}),(0,r.jsx)(o.m_,{id:"array_0_0_1760419851611",place:"top",effect:"solid",clickable:!0})," must be started normally, not in Maintenance Mode, for scrub/check."]})]})]})]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Identify the file system for the target drive: ",(0,r.jsx)(t.strong,{children:"Main"})," tab \u2192 Click drive name \u2192 Check ",(0,r.jsx)(t.strong,{children:"File system type"}),"."]}),"\n",(0,r.jsx)(t.li,{children:"From the Main screen, click the disk to be tested or repaired."}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"running-the-test",children:"Running the test"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["The default for most file systems (like ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"xfs_0_40_1760419851611","data-tooltip-html":'A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.<br>See <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs">XFS File System - Red Hat Documentation</a>',"data-tooltip-place":"top",children:"XFS"}),(0,r.jsx)(o.m_,{id:"xfs_0_40_1760419851611",place:"top",effect:"solid",clickable:!0}),") is a read-only check (no changes), usually with the ",(0,r.jsx)(t.code,{children:"-n"})," (no modify) option. (For more detailed output with ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"xfs_5_52_1760419851611","data-tooltip-html":'A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.<br>See <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs">XFS File System - Red Hat Documentation</a>',"data-tooltip-place":"top",children:"XFS"}),(0,r.jsx)(o.m_,{id:"xfs_5_52_1760419851611",place:"top",effect:"solid",clickable:!0}),", add the ",(0,r.jsx)(t.code,{children:"-v"})," (verbose) option, resulting in ",(0,r.jsx)(t.code,{children:"-nv"}),".)"]}),"\n",(0,r.jsxs)(t.li,{children:["For ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"btrfs_0_4_1760419851612","data-tooltip-html":'\u201cB-Tree File System,\u201d a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.<br>See <a href="https://btrfs.readthedocs.io/">BTRFS File System - Official Documentation</a>',"data-tooltip-place":"top",children:"BTRFS"}),(0,r.jsx)(o.m_,{id:"btrfs_0_4_1760419851612",place:"top",effect:"solid",clickable:!0}),", you will use the ",(0,r.jsx)(t.code,{children:"scrub"})," command instead of the ",(0,r.jsx)(t.code,{children:"balance"})," operation."]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Check"})," to start; use the ",(0,r.jsx)(t.strong,{children:"Refresh"})," button to monitor progress if needed."]}),"\n",(0,r.jsxs)(t.li,{children:["If no corruptions are found, proceed to ",(0,r.jsx)(t.a,{href:"#after-the-test-and-repair",children:(0,r.jsx)(t.strong,{children:"After the test and repair"})}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"running-the-repair",children:"Running the Repair"}),"\n",(0,r.jsxs)(n.A,{children:[(0,r.jsx)(l.A,{value:"xfs-drives",label:"For XFS drives",default:!0,children:(0,r.jsx)(c,{})}),(0,r.jsx)(l.A,{value:"btrfs-drives",label:"For BTRFS drives and pools",children:(0,r.jsx)(p,{})})]}),"\n",(0,r.jsx)(t.h3,{id:"after-the-test-and-repair",children:"After the test and repair"}),"\n",(0,r.jsxs)(t.p,{children:["If you used ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"maintenance-mode_0_12_1760419851612","data-tooltip-html":'Feature that starts the array without mounting drives. Enables disk repair, re-assignment, or parity rebuilds without affecting the array\'s active data.<br>See <a href="https://en.wikipedia.org/wiki/Maintenance_mode">Maintenance Mode - Wikipedia</a>',"data-tooltip-place":"top",children:"Maintenance Mode"}),(0,r.jsx)(o.m_,{id:"maintenance-mode_0_12_1760419851612",place:"top",effect:"solid",clickable:!0}),", stop the array and restart it in normal mode to resume operations."]}),"\n",(0,r.jsx)(t.admonition,{title:"What to expect after repair",type:"tip",children:(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Repair and check operations may take up to a half hour or more, depending on the size and status of your file system."}),"\n",(0,r.jsxs)(t.li,{children:["Extensive corruption may create a ",(0,r.jsx)(t.code,{children:"lost+found"})," folder containing recovered file and folder fragments. Examine and restore these as needed; delete when finished."]}),"\n",(0,r.jsxs)(t.li,{children:["This is similar to running chkdsk or scandisk on Windows and working with files renamed as ",(0,r.jsx)(t.code,{children:"File0000.chk"}),", etc. Take your time when reviewing ",(0,r.jsx)(t.code,{children:"lost+found"})," content."]}),"\n"]})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"xfs-check--repair",children:"XFS check & repair"}),"\n",(0,r.jsxs)(n.A,{children:[(0,r.jsx)(l.A,{value:"webguicheck",label:"WebGUI check and repair",default:!0,children:(0,r.jsx)(m,{})}),(0,r.jsx)(l.A,{value:"xfs_repair_cl",label:"Running xfs_repair via command line",children:(0,r.jsx)(f,{})})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"unmountable-disks",children:"Unmountable disk(s)"}),"\n",(0,r.jsx)(t.p,{children:"If a previously functional disk becomes unmountable, this usually indicates file system corruption, often caused by an unclean shutdown or write failure."}),"\n",(0,r.jsx)(t.admonition,{title:"Critical action",type:"danger",children:(0,r.jsxs)(t.p,{children:["Never format an unmountable disk through the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_0_45_1760419851612","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_0_45_1760419851612",place:"top",effect:"solid",clickable:!0}),"! Formatting erases all data and updates ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_3_41_1760419851612","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_3_41_1760419851612",place:"top",effect:"solid",clickable:!0}),", making recovery impossible."]})}),"\n",(0,r.jsx)(t.h3,{id:"recovery-procedure",children:"Recovery procedure"}),"\n",(0,r.jsxs)(t.p,{children:["When a disk that was previously working fine suddenly becomes unmountable, it\u2019s natural to feel concerned about your data. This type of problem is often caused by file system corruption, which can occur after an unclean shutdown, a power interruption, or a failed write operation. The most important thing to remember is: ",(0,r.jsx)(t.strong,{children:"do not format the drive"})," if prompted by the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_2_20_1760419851612","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_2_20_1760419851612",place:"top",effect:"solid",clickable:!0}),". Formatting will erase all existing data and make recovery difficult, if not impossible."]}),"\n",(0,r.jsx)(t.p,{children:"Instead, your first step should be to attempt a file system repair. Unraid provides built-in tools for this, and following the correct procedure can often restore access to your data with minimal risk."}),"\n",(0,r.jsx)(t.p,{children:"Here\u2019s how to proceed:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Review the ",(0,r.jsx)(t.a,{href:"#repair-file-systems",children:"file system repair section"}),". This guide walks you through the process for your specific file system."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["For disks using the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"xfs_0_20_1760419851612","data-tooltip-html":'A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.<br>See <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs">XFS File System - Red Hat Documentation</a>',"data-tooltip-place":"top",children:"XFS"}),(0,r.jsx)(o.m_,{id:"xfs_0_20_1760419851612",place:"top",effect:"solid",clickable:!0})," file system (the default for most Unraid setups), run:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"xfs_repair -v /dev/mdXp1\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Replace ",(0,r.jsx)(t.strong,{children:"X"})," with the correct disk number. The ",(0,r.jsx)(t.code,{children:"-v"})," flag provides detailed progress information. This command checks and attempts to repair the file system on the specified disk."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["For disks formatted with ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"btrfs_0_25_1760419851612","data-tooltip-html":'\u201cB-Tree File System,\u201d a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.<br>See <a href="https://btrfs.readthedocs.io/">BTRFS File System - Official Documentation</a>',"data-tooltip-place":"top",children:"BTRFS"}),(0,r.jsx)(o.m_,{id:"btrfs_0_25_1760419851612",place:"top",effect:"solid",clickable:!0}),", first run a read-only check:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"btrfs check /dev/mdXp1\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Replace ",(0,r.jsx)(t.strong,{children:"X"})," with the correct disk number. Only use repair mode if absolutely necessary and after understanding the risks:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"btrfs check --repair /dev/mdXp1\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{type:"danger",children:(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"--repair"})," option is extremely dangerous and can cause further data loss. Always backup or image the disk first. Review ",(0,r.jsx)(t.a,{href:"https://btrfs.readthedocs.io/en/latest/btrfs-check.html",children:"the documentation"})," and consider seeking additional advice if you\u2019re unsure."]})}),"\n",(0,r.jsx)(t.p,{children:"If these repair attempts do not resolve the issue or if you encounter errors you don\u2019t understand, it\u2019s best to pause and ask for help on the Unraid forums. Many experienced users and moderators are available to help guide you through the next steps, and getting a second opinion before proceeding further is always safer."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"lost-array-configuration",children:"Lost array configuration"}),"\n",(0,r.jsxs)(t.p,{children:["Losing your ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_12_1760419851612","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_12_1760419851612",place:"top",effect:"solid",clickable:!0})," configuration can be stressful, but it doesn't mean your data is gone. The ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_3_76_1760419851612","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_3_76_1760419851612",place:"top",effect:"solid",clickable:!0})," configuration file (located at ",(0,r.jsx)(t.code,{children:"config/super.dat"})," on your flash device) tells Unraid how your drives are assigned and which ones serve as ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_8_89_1760419851612","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_8_89_1760419851612",place:"top",effect:"solid",clickable:!0}),". If you've lost your flash drive or don\u2019t have a recent backup, you can recover your ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_11_86_1760419851612","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_11_86_1760419851612",place:"top",effect:"solid",clickable:!0})," by carefully reassigning the drives."]}),"\n",(0,r.jsx)(t.p,{children:"Here\u2019s what to do if you find yourself in this situation:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["In the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_0_7_1760419851612","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_0_7_1760419851612",place:"top",effect:"solid",clickable:!0}),", assign all available drives as data drives. Don't assign any as ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_3_66_1760419851612","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_3_66_1760419851612",place:"top",effect:"solid",clickable:!0})," yet."]}),"\n",(0,r.jsxs)(t.li,{children:["Start the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_10_1760419851612","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_10_1760419851612",place:"top",effect:"solid",clickable:!0}),". Drives previously used for ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_3_29_1760419851612","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_3_29_1760419851612",place:"top",effect:"solid",clickable:!0})," will appear as ",(0,r.jsx)(t.em,{children:"unmountable"})," because they don't contain a file system."]}),"\n",(0,r.jsxs)(t.li,{children:["Write down or take a screenshot of the serial numbers for these unmountable drives - these are your ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_0_100_1760419851612","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_0_100_1760419851612",place:"top",effect:"solid",clickable:!0})," drives."]}),"\n",(0,r.jsxs)(t.li,{children:["Stop the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_9_1760419851612","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_9_1760419851612",place:"top",effect:"solid",clickable:!0}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Go to ",(0,r.jsx)(t.em,{children:(0,r.jsx)(t.strong,{children:"Tools \u2192 New Config"})})," and select the option to retain current assignments."]}),"\n",(0,r.jsxs)(t.li,{children:["Click the checkbox confirming you want to proceed and click ",(0,r.jsx)(t.strong,{children:"Apply"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Return to the ",(0,r.jsx)(t.strong,{children:"Main"})," tab and correctly assign the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_2_30_1760419851612","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_2_30_1760419851612",place:"top",effect:"solid",clickable:!0})," drives using the serial numbers you noted."]}),"\n",(0,r.jsxs)(t.li,{children:["Start the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_10_1760419851612","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_10_1760419851612",place:"top",effect:"solid",clickable:!0})," to rebuild ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_3_12_1760419851612","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_3_12_1760419851612",place:"top",effect:"solid",clickable:!0})," based on your correct assignments."]}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"recover-data-using-ddrescue",children:"Recover data using ddrescue"}),"\n",(0,r.jsxs)(t.p,{children:["When standard Unraid recovery methods, such as the ",(0,r.jsx)(t.a,{href:"/docs/pr-preview/pr-359/unraid-os/using-unraid-to/manage-storage/array-configuration#replacing-disks",children:"replacing disks"})," procedure, aren't feasible due to multiple disk failures or invalid ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_2_69_1760419851612","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_2_69_1760419851612",place:"top",effect:"solid",clickable:!0}),", specialized tools like ",(0,r.jsx)(t.strong,{children:"ddrescue"})," can help you salvage as much data as possible from a failing drive."]}),"\n",(0,r.jsx)(t.admonition,{title:"Best practices for data recovery",type:"note",children:(0,r.jsx)(t.p,{children:"Before you begin, remember that data recovery is a delicate process. Always work from a copy of your failing disk when possible, and avoid writing new data to the source disk. If your data is irreplaceable, consider professional recovery services before attempting advanced recovery yourself. Document your actions and take time\u2014rushing increases the risk of permanent data loss."})}),"\n",(0,r.jsxs)(t.p,{children:["The recommended method to install ddrescue is through the ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://unraid.net/community/apps?q=nerd+tools#r",children:"Nerd Tools"})})," plugin (which replaced the deprecated NerdPack in 2022)."]}),"\n",(0,r.jsx)(t.p,{children:"To enable ddrescue:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Install ",(0,r.jsx)(t.a,{href:"https://unraid-production-481d40bf.preview.craft.cloud/community/apps?q=nerd+tools#r:~:text=of%201%20App-,Nerd%20Tools,-unRaid.es",children:"Nerd Tools"})," from the ",(0,r.jsx)(t.strong,{children:"Apps"})," tab in the Unraid ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_4_19_1760419851612","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_4_19_1760419851612",place:"top",effect:"solid",clickable:!0}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Open ",(0,r.jsx)(t.em,{children:(0,r.jsx)(t.strong,{children:"Settings \u2192 Nerd Tools"})})," and enable ",(0,r.jsx)(t.strong,{children:"ddrescue"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"cloning-a-failing-disk",children:"Cloning a failing disk"}),"\n",(0,r.jsx)(t.p,{children:"You'll need a healthy destination disk that is at least as large as the failing source disk. Make sure neither disk is mounted during the process. Double-check your device assignments before starting; the wrong destination will overwrite and destroy its data."}),"\n",(0,r.jsxs)(t.p,{children:["To clone the entire disk, open a terminal or ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"ssh_0_45_1760419851612","data-tooltip-html":'\u201cSecure Shell,\u201d an encrypted protocol for securely accessing and managing your Unraid server remotely through a command-line interface.<br>See <a href="https://www.1kosmos.com/security-glossary/secure-shell-ssh/">Secure Shell (SSH) - 1Kosmos Security Glossary</a>',"data-tooltip-place":"top",children:"SSH"}),(0,r.jsx)(o.m_,{id:"ssh_0_45_1760419851612",place:"top",effect:"solid",clickable:!0})," session and run the following command:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"ddrescue -f /dev/sdX /dev/sdY /boot/ddrescue.log\n"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Replace ",(0,r.jsx)(t.strong,{children:"X"})," with the letter of your source disk and ",(0,r.jsx)(t.strong,{children:"Y"})," with the letter of your destination disk."]}),"\n",(0,r.jsxs)(t.li,{children:["The ",(0,r.jsx)(t.code,{children:"/boot/ddrescue.log"})," file will track progress and allow you to resume if the process is interrupted."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["If you want to clone directly to an ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_36_1760419851612","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_36_1760419851612",place:"top",effect:"solid",clickable:!0})," disk while maintaining ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"parity_3_24_1760419851612","data-tooltip-html":'A redundancy mechanism that protects data against disk failures by storing a checksum across the array.<br>See <a href="https://en.wikipedia.org/wiki/Parity_bit#RAID_array">Parity data in RAID arrays | Wikipedia</a>',"data-tooltip-place":"top",children:"parity"}),(0,r.jsx)(o.m_,{id:"parity_3_24_1760419851612",place:"top",effect:"solid",clickable:!0}),", use the ",(0,r.jsx)(t.code,{children:"md#"})," device and start the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_8_22_1760419851612","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_8_22_1760419851612",place:"top",effect:"solid",clickable:!0})," in Maintenance Mode:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"ddrescue -f /dev/sdX1 /dev/md\\# /boot/ddrescue.log\n"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Replace ",(0,r.jsx)(t.strong,{children:"X"})," with the letter of your source disk (note the ",(0,r.jsx)(t.code,{children:"1"})," for the partition)."]}),"\n",(0,r.jsxs)(t.li,{children:["Replace ",(0,r.jsx)(t.strong,{children:"#"})," with the number of your destination disk."]}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{type:"caution",children:(0,r.jsx)(t.p,{children:"Always verify device assignments before running ddrescue. Using the wrong destination could lead to total data loss on that disk."})}),"\n",(0,r.jsx)(t.h3,{id:"translating-ddrescue-output",children:"Translating ddrescue output"}),"\n",(0,r.jsx)(t.p,{children:"During the recovery process, ddrescue will display real-time progress."}),"\n",(0,r.jsx)(t.p,{children:"Here\u2019s an example of what you might see during the first pass:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"GNU ddrescue 1.27\nipos: 926889 MB, non-trimmed: 1695 kB, current rate: 95092 kB/s\nopos: 926889 MB, non-scraped: 0 B, average rate: 79236 kB/s\nnon-tried: 1074 GB, bad-sector: 0 B, error rate: 0 B/s\nrescued: 925804 MB, bad areas: 0, run time: 3h 14m 44s\npct rescued: 46.28%, read errors: 54, remaining time: 3h 18m\ntime since last successful read: 0s\nCopying non-tried blocks... Pass 1 (forwards)\n"})}),"\n",(0,r.jsx)(t.admonition,{title:"What does this mean?",type:"note",children:(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"ipos/opos"}),": Current read/write positions on the source and destination disks."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"rescued"}),": Amount of data successfully copied."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"bad areas/read errors"}),": Number of problematic regions and read errors encountered."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"pct rescued"}),": Percentage of the disk recovered so far."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"remaining time"}),": Estimated time to completion."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Copying non-tried blocks..."}),": ddrescue is making its first attempt to read all sectors."]}),"\n"]})}),"\n",(0,r.jsx)(t.p,{children:"After the initial copy, ddrescue will work on recovering data from bad sectors by making multiple passes and sometimes reading blocks in both directions. This phase can take much longer, especially if the disk is seriously damaged."}),"\n",(0,r.jsx)(t.p,{children:"Here\u2019s an example output during this phase:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"GNU ddrescue 1.27\nipos: 17878 MB, non-trimmed: 0 B, current rate: 0 B/s\nopos: 17878 MB, non-scraped: 362496 B, average rate: 74898 kB/s\nnon-tried: 0 B, bad-sector: 93696 B, error rate: 102 B/s\nrescued: 2000 GB, bad areas: 101, run time: 7h 25m 8s\npct rescued: 99.99%, read errors: 260, remaining time: 25m\ntime since last successful read: 10s\nScraping failed blocks... (forwards)\n"})}),"\n",(0,r.jsx)(t.admonition,{title:"What's happening now?",type:"note",children:(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Scraping failed blocks..."}),": ddrescue is making repeated attempts to recover unreadable sectors."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"bad areas/read errors"}),": These numbers may increase as ddrescue finds more damage, but the goal is to minimize unrecoverable data."]}),"\n"]})}),"\n",(0,r.jsx)(t.h3,{id:"mounting-and-checking-the-recovered-disk",children:"Mounting and checking the recovered disk"}),"\n",(0,r.jsxs)(t.p,{children:["Once ddrescue is complete, you can try to mount the destination disk. Use the ",(0,r.jsxs)(t.a,{href:"https://unraid.net/community/apps?q=unassigned+devices#r:~:text=don%27t%20be%20carefull!!!-,Unassigned%20Devices,-dlandon",children:[(0,r.jsx)(t.strong,{children:"Unassigned Devices"})," plugin"]})," for easy mounting in the ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"web-gui_2_26_1760419851612","data-tooltip-html":"The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid.","data-tooltip-place":"top",children:"WebGUI"}),(0,r.jsx)(o.m_,{id:"web-gui_2_26_1760419851612",place:"top",effect:"solid",clickable:!0}),". If the disk doesn't mount, run the appropriate file system repair tool, such as ",(0,r.jsx)(t.code,{children:"xfs_repair"})," or ",(0,r.jsx)(t.code,{children:"btrfs check"}),". Even if the disk mounts, it's a good idea to run a file system check to ensure integrity."]}),"\n",(0,r.jsxs)(t.p,{children:["Once you have recovered the files, copy them to a safe location on your ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"array_0_72_1760419851612","data-tooltip-html":"The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid's main storage system, storing data across multiple devices.","data-tooltip-place":"top",children:"array"}),(0,r.jsx)(o.m_,{id:"array_0_72_1760419851612",place:"top",effect:"solid",clickable:!0}),". Be mindful that some files may be corrupt, especially if the disk had many unreadable sectors. Using ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"checksum_3_103_1760419851612","data-tooltip-html":'A small piece of data generated from a larger block of data, used to detect errors during storage or transmission. BTRFS and ZFS file systems use checksums to verify data integrity.<br>See <a href="https://en.wikipedia.org/wiki/Checksum">Checksum - Wikipedia</a>',"data-tooltip-place":"top",children:"checksums"}),(0,r.jsx)(o.m_,{id:"checksum_3_103_1760419851612",place:"top",effect:"solid",clickable:!0})," (or ",(0,r.jsx)(t.a,{className:"remark-auto-glossary-tooltip-trigger","data-tooltip-id":"btrfs_6_5_1760419851612","data-tooltip-html":'\u201cB-Tree File System,\u201d a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.<br>See <a href="https://btrfs.readthedocs.io/">BTRFS File System - Official Documentation</a>',"data-tooltip-place":"top",children:"BTRFS"}),(0,r.jsx)(o.m_,{id:"btrfs_6_5_1760419851612",place:"top",effect:"solid",clickable:!0})," with built-in checksumming) can help you identify damaged files."]}),"\n",(0,r.jsx)(t.h3,{id:"identifying-corrupt-files-without-checksums",children:"Identifying corrupt files without checksums"}),"\n",(0,r.jsx)(t.p,{children:"If you don\u2019t have checksums, you can still identify files affected by bad sectors using ddrescue\u2019s fill mode:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Create a temporary file with a unique string:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'printf "Unraid " > ~/fill.txt\n'})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Fill the bad blocks on the cloned disk with that string:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"ddrescue --fill-mode='-' ~/fill.txt /dev/sdY /boot/ddrescue.log\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Replace ",(0,r.jsx)(t.strong,{children:"Y"})," with the destination disk and use the existing ddrescue mapfile."]}),"\n"]}),"\n"]})]})}function k(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(b,{...e})}):b(e)}},7227:(e,t,a)=>{a.d(t,{A:()=>o});a(6540);var i=a(4164);const r={tabItem:"tabItem_Ymn6"};var s=a(4848);function o({children:e,hidden:t,className:a}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,i.A)(r.tabItem,a),hidden:t,children:e})}},9489:(e,t,a)=>{a.d(t,{A:()=>k});var i=a(6540),r=a(4164),s=a(4245),o=a(6347),n=a(6494),l=a(2814),d=a(5167),c=a(9900);function h(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:a}=e;return(0,i.useMemo)((()=>{const e=t??function(e){return h(e).map((({props:{value:e,label:t,attributes:a,default:i}})=>({value:e,label:t,attributes:a,default:i})))}(a);return function(e){const t=(0,d.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function u({value:e,tabValues:t}){return t.some((t=>t.value===e))}function m({queryString:e=!1,groupId:t}){const a=(0,o.W6)(),r=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l.aZ)(r),(0,i.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})}),[r,a])]}function g(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,s=p(e),[o,l]=(0,i.useState)((()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!u({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:s}))),[d,h]=m({queryString:a,groupId:r}),[g,f]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,r]=(0,c.Dv)(t);return[a,(0,i.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:r}),y=(()=>{const e=d??g;return u({value:e,tabValues:s})?e:null})();(0,n.A)((()=>{y&&l(y)}),[y]);return{selectedValue:o,selectValue:(0,i.useCallback)((e=>{if(!u({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),h(e),f(e)}),[h,f,s]),tabValues:s}}var f=a(1062);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=a(4848);function _({className:e,block:t,selectedValue:a,selectValue:i,tabValues:o}){const n=[],{blockElementScrollPositionUntilNextRender:l}=(0,s.a_)(),d=e=>{const t=e.currentTarget,r=n.indexOf(t),s=o[r].value;s!==a&&(l(t),i(s))},c=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=n.indexOf(e.currentTarget)+1;t=n[a]??n[0];break}case"ArrowLeft":{const a=n.indexOf(e.currentTarget)-1;t=n[a]??n[n.length-1];break}}t?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},e),children:o.map((({value:e,label:t,attributes:i})=>(0,x.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{n.push(e)},onKeyDown:c,onClick:d,...i,className:(0,r.A)("tabs__item",y.tabItem,i?.className,{"tabs__item--active":a===e}),children:t??e},e)))})}function j({lazy:e,children:t,selectedValue:a}){const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=s.find((e=>e.props.value===a));return e?(0,i.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==a})))})}function b(e){const t=g(e);return(0,x.jsxs)("div",{className:(0,r.A)("tabs-container",y.tabList),children:[(0,x.jsx)(_,{...t,...e}),(0,x.jsx)(j,{...t,...e})]})}function k(e){const t=(0,f.A)();return(0,x.jsx)(b,{...e,children:h(e.children)},String(t))}}}]);