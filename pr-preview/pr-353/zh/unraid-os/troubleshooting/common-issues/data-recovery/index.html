<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-unraid-os/troubleshooting/common-issues/data-recovery" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">数据恢复 | Unraid Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.unraid.net/docs/pr-preview/pr-353/zh/img/meta-unraid.png"><meta data-rh="true" name="twitter:image" content="https://docs.unraid.net/docs/pr-preview/pr-353/zh/img/meta-unraid.png"><meta data-rh="true" property="og:url" content="https://docs.unraid.net/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/data-recovery/"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" property="og:locale:alternate" content="es"><meta data-rh="true" property="og:locale:alternate" content="fr"><meta data-rh="true" property="og:locale:alternate" content="de"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="theme-color" content="#242526" media="(prefers-color-scheme: dark)"><meta data-rh="true" name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"><meta data-rh="true" name="color-scheme" content="dark light"><meta data-rh="true" name="keywords" content="Unraid, server, storage, NAS, Docker, virtualization, array, parity, data protection, file sharing, plugins, management, GUI, disk management, caching, SSD, disk encryption, security, RAID, network configuration, backups, media server, transcoding, monitoring, VMs, GPU passthrough, hardware compatibility"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="数据恢复 | Unraid Docs"><meta data-rh="true" name="description" content="Understanding data protection is important when managing your Unraid server. While Unraid offers strong protection against common hardware failures, no system can guarantee complete immunity to data loss. This section provides guidance on best practices for safeguarding your data, recognizing potential issues, and recovering data when problems occur."><meta data-rh="true" property="og:description" content="Understanding data protection is important when managing your Unraid server. While Unraid offers strong protection against common hardware failures, no system can guarantee complete immunity to data loss. This section provides guidance on best practices for safeguarding your data, recognizing potential issues, and recovering data when problems occur."><link data-rh="true" rel="icon" href="/docs/pr-preview/pr-353/zh/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.unraid.net/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/data-recovery/"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-353/unraid-os/troubleshooting/common-issues/data-recovery/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-353/es/unraid-os/troubleshooting/common-issues/data-recovery/" hreflang="es"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-353/fr/unraid-os/troubleshooting/common-issues/data-recovery/" hreflang="fr"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-353/de/unraid-os/troubleshooting/common-issues/data-recovery/" hreflang="de"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/data-recovery/" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.unraid.net/docs/pr-preview/pr-353/unraid-os/troubleshooting/common-issues/data-recovery/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://JUYLFQHE7W-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Unraid 操作系统","item":"https://docs.unraid.net/docs/pr-preview/pr-353/zh/category/unraid-os"},{"@type":"ListItem","position":2,"name":"故障排除","item":"https://docs.unraid.net/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/"},{"@type":"ListItem","position":3,"name":"常见问题","item":"https://docs.unraid.net/docs/pr-preview/pr-353/zh/category/common-issues"},{"@type":"ListItem","position":4,"name":"数据恢复","item":"https://docs.unraid.net/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/data-recovery"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CZENQ1ZPEH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CZENQ1ZPEH",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Unraid Docs" href="/docs/pr-preview/pr-353/zh/opensearch.xml">



<script src="/js/redirects.js"></script><link rel="stylesheet" href="/docs/pr-preview/pr-353/zh/assets/css/styles.f000b811.css">
<script src="/docs/pr-preview/pr-353/zh/assets/js/runtime~main.d6160615.js" defer="defer"></script>
<script src="/docs/pr-preview/pr-353/zh/assets/js/main.79316841.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/pr-preview/pr-353/zh/"><div class="navbar__logo"><img src="/docs/pr-preview/pr-353/zh/img/un-mark-gradient.svg" alt="我的网站标志" class="themedComponent_mlkZ themedComponent--light_NVdE" style="width:30px"><img src="/docs/pr-preview/pr-353/zh/img/un-mark-gradient.svg" alt="我的网站标志" class="themedComponent_mlkZ themedComponent--dark_xIcU" style="width:30px"></div><b class="navbar__title text--truncate">Unraid 文档</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">更多</a><ul class="dropdown__menu"><li><a href="https://unraid.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">Unraid 首页<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://forums.unraid.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">论坛<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://github.com/unraid/docs" target="_blank" rel="noopener noreferrer" class="dropdown__link">文档 Github<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/docs/pr-preview/pr-353/unraid-os/troubleshooting/common-issues/data-recovery/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/docs/pr-preview/pr-353/es/unraid-os/troubleshooting/common-issues/data-recovery/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es">Español</a></li><li><a href="/docs/pr-preview/pr-353/fr/unraid-os/troubleshooting/common-issues/data-recovery/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Français</a></li><li><a href="/docs/pr-preview/pr-353/de/unraid-os/troubleshooting/common-issues/data-recovery/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="de">Deutsch</a></li><li><a href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/data-recovery/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="系统模式" aria-label="切换深色和浅色模式（当前为系统模式）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pr-preview/pr-353/zh/">Unraid 文档</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/pr-preview/pr-353/zh/category/unraid-os/">Unraid 操作系统</a><button aria-label="折叠侧栏类别 &#x27;Unraid 操作系统&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pr-preview/pr-353/zh/category/getting-started-with-unraid/">开始使用 Unraid</a><button aria-label="展开侧栏类别 &#x27;开始使用 Unraid&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pr-preview/pr-353/zh/category/using-unraid-to/">使用 Unraid</a><button aria-label="展开侧栏类别 &#x27;使用 Unraid&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pr-preview/pr-353/zh/category/system-administration/">系统管理</a><button aria-label="展开侧栏类别 &#x27;系统管理&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pr-preview/pr-353/zh/category/advanced-configurations/">高级配置</a><button aria-label="展开侧栏类别 &#x27;高级配置&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/">故障排除</a><button aria-label="折叠侧栏类别 &#x27;故障排除&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/pr-preview/pr-353/zh/category/common-issues/">常见问题</a><button aria-label="折叠侧栏类别 &#x27;常见问题&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/boot-and-startup-failures/">引导和启动故障</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/unclean-shutdowns/">非正常关机</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/system-crashes-and-stability/">系统崩溃与稳定性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/data-recovery/">数据恢复</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/docker-troubleshooting/">Docker 故障排除</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pr-preview/pr-353/zh/category/diagnostics/">诊断</a><button aria-label="展开侧栏类别 &#x27;诊断&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/faq/">常见问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/licensing-faq/">许可证常见问题解答</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pr-preview/pr-353/zh/category/release-notes/">发行说明</a><button aria-label="展开侧栏类别 &#x27;发行说明&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pr-preview/pr-353/zh/unraid-os/download_list/">版本历史</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/pr-preview/pr-353/zh/category/unraid-connect/">Unraid Connect</a><button aria-label="展开侧栏类别 &#x27;Unraid Connect&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/pr-preview/pr-353/zh/API/">Unraid API</a><button aria-label="展开侧栏类别 &#x27;Unraid API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/pr-preview/pr-353/zh/category/contribute/">贡献</a><button aria-label="展开侧栏类别 &#x27;贡献&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pr-preview/pr-353/zh/glossary/">词汇表</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="面包屑导航"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页" class="breadcrumbs__link" href="/docs/pr-preview/pr-353/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/pr-preview/pr-353/zh/category/unraid-os/"><span>Unraid 操作系统</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/"><span>故障排除</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/pr-preview/pr-353/zh/category/common-issues/"><span>常见问题</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">数据恢复</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页内容</button></div><div class="theme-doc-markdown markdown"><header><h1>数据恢复</h1></header>
<p>Understanding data protection is important when managing your Unraid server. While Unraid offers strong protection against common hardware failures, no system can guarantee complete immunity to data loss. This section provides guidance on best practices for safeguarding your data, recognizing potential issues, and recovering data when problems occur.</p>
<p>有效的数据恢复从稳固的数据保护策略开始，包括定期备份、主动监控以及对驱动器和阵列配置的谨慎处理。</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="备份策略基础">备份策略基础<a href="#备份策略基础" class="hash-link" aria-label="直接链接到 备份策略基础" title="直接链接到 备份策略基础">​</a></h2>
<p>Even though Unraid offers protection against various hardware failures, having reliable backups of your crucial data is vital. Backups are your last defense against catastrophic failures, ransomware, or accidental deletion.</p>
<ul>
<li>**评估重要数据：**识别不可替代或必需的文件，例如个人文档、照片和重要视频。</li>
<li><strong>多个备份副本：</strong> 遵循3-2-1规则：保留至少三份数据副本在两种不同的媒体类型上，其中一份副本存储在异地或云中。这将最大限度降低物理灾害（如火灾或盗窃）的风险。</li>
<li><strong>备份频率:</strong> 安排定期备份以减少数据丢失的可能性。</li>
<li><strong>勒索软件保护:</strong> 至少一个备份副本应离线或不可接触，以防止潜在的损坏。</li>
<li><strong>备份工具：</strong> 对于Unraid 7.0及以上版本，建议使用<a href="/docs/pr-preview/pr-353/zh/unraid-connect/overview-and-setup/">Unraid Connect</a>进行闪存和配置的自动云备份。其他流行的备份解决方案包括：<!-- -->
<ul>
<li><strong><a href="https://unraid-production-481d40bf.preview.craft.cloud/community/apps?q=Duplicati#r:~:text=of%202%20Apps-,duplicati,-Backup%2C%20Cloud" target="_blank" rel="noopener noreferrer">Duplicati</a>:</strong> 一个多功能开源备份工具，提供重复数据删除和加密，支持云端、本地、USB 和远程目的地。</li>
<li><strong><a href="https://unraid-production-481d40bf.preview.craft.cloud/community/apps?q=rclone#r:~:text=various%20cloud%20services.-,rclone,-Waseh%27s%20Repository" target="_blank" rel="noopener noreferrer">rclone</a>:</strong> 一个强大的用于同步和备份云存储提供商的解决方案。</li>
<li><strong><a href="https://rsync.samba.org/" target="_blank" rel="noopener noreferrer">rsync</a>:</strong> 一种用于本地或远程备份的高效选择。</li>
<li><strong><a href="https://www.borgbackup.org/" target="_blank" rel="noopener noreferrer">borgbackup</a>:</strong> 适合对重复数据删除和加密备份有需求的高级用户。</li>
</ul>
</li>
</ul>
<p>用户应该评估他们的风险承受能力和备份需求，但利用云集成和自动化对大多数 Unraid 用户来说是一个良好的起点。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Modern 备份策略</div><div class="admonitionContent_BuS1"><p>对于Unraid 7.0及以上版本，启用<a href="/docs/pr-preview/pr-353/zh/unraid-connect/overview-and-setup/">Unraid Connect</a>来自动备份您的闪存设备和配置到云中。使用Duplicati、rclone或类似工具为重要文件和共享创建对本地、远程或云目标地的计划备份。始终测试您的还原过程，以确保在需要时备份能正常工作。</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Proactive 监控和支持</div><div class="admonitionContent_BuS1"><ul>
<li><strong>启用通知:</strong> 在<em><strong>设置 → 通知</strong></em>中设置通知以接收有关系统问题的即时警报。</li>
<li><strong>寻求专家指导:</strong> 如果您不确定恢复步骤，请在采取任何动 作前咨询 <a href="https://forums.unraid.net/" target="_blank" rel="noopener noreferrer">Unraid 论坛</a>。</li>
<li><strong>定期健康检查:</strong> 密切关注您驱动器的 <a href="/docs/pr-preview/pr-353/zh/unraid-os/system-administration/monitor-performance/smart-reports-and-disk-health/">SMART 数据</a>，并定期执行文件系统检查。</li>
</ul></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="修复文件系统">修复文件系统<a href="#修复文件系统" class="hash-link" aria-label="直接链接到 修复文件系统" title="直接链接到 修复文件系统">​</a></h2>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_BuS1"><p>Use these instructions strictly for data drives with file system corruption. Do not apply them to the parity drive, hardware issues, or missing drives.</p><ul>
<li>文件系统修复工具仅用于修复具有文件系统或挂载错误的数据或缓存驱动器。</li>
<li>奇偶校验驱动器<strong>没有</strong>文件系统。对奇偶校验驱动器运行任何修复工具会导致损坏，可能导致不可逆转的数据丢失。</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="设备命名路径和符号">设备命名：路径和符号<a href="#设备命名路径和符号" class="hash-link" aria-label="直接链接到 设备命名：路径和符号" title="直接链接到 设备命名：路径和符号">​</a></h3>
<p>使用**<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_0_4_1760071171267" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a><strong>时，设备路径会自动管理。如果选择通过命令行修复，始终确保使用正确的</strong>分区路径**：</p>
<table><thead><tr><th>标签</th><th>典型路径</th><th>用途</th><th>%%Parity|奇偶%% 保护是否启用？</th></tr></thead><tbody><tr><td>磁盘 7</td><td>/mnt/disk7</td><td>Unraid 挂载点</td><td>是 (如果是 %%array|阵列%% 磁盘)</td></tr><tr><td>%%Array|阵列%% 分区</td><td>/dev/md7p1</td><td>Unraid 管理的设备</td><td>可以</td></tr><tr><td>原始分区</td><td>/dev/sdj1</td><td>直接设备访问</td><td>不可以</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>警告</div><div class="admonitionContent_BuS1"><p>Never run file system repair tools on entire drives (like <code>/dev/sdj</code>); always use partition paths (like <code>/dev/sdj1</code> or Unraid-managed <code>/dev/mdXp1</code>).</p><ul>
<li>
<p>对于 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_3_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a> 驱动器，始终使用 Unraid 管理的设备（如 <code>/dev/md5p1</code>）以<strong>保留 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_0_3_1760071171267" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a> 保护</strong>。</p>
</li>
<li>
<p>使用原始分区（例如，<code>/dev/sdj1</code>）不会更新 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_2_6_1760071171267" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a>，会使其无效。</p>
</li>
</ul></div></div>
<ul>
<li>
<p>始终使用 <code>/dev/mdXp1</code> 对于 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_2_4_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a> 驱动器以保持有效的 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_5_11_1760071171267" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a>。</p>
</li>
<li>
<p>对于非<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_3_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a>驱动器（如<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="cache_3_5_1760071171267" data-tooltip-html="A feature in Unraid that temporarily stores newly written data on faster drives (typically SSDs) before moving it to the array, improving write performance.&lt;br&gt;See &lt;a href=&quot;https://www.britannica.com/technology/cache-memory&quot;&gt;Cache Memory - Computer Science Principles&lt;/a&gt;" data-tooltip-place="top">cache</a>-only设备），请使用直接分区路径，例如<code>/dev/sdj1</code>。</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="选择正确的修复方法">选择正确的修复方法<a href="#选择正确的修复方法" class="hash-link" aria-label="直接链接到 选择正确的修复方法" title="直接链接到 选择正确的修复方法">​</a></h3>
<p>自 <strong>v6.0.0</strong> 以来的所有 Unraid 版本都支持通过 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_2_22_1760071171267" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a> 对 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="xfs_5_3_1760071171267" data-tooltip-html="A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.&lt;br&gt;See &lt;a href=&quot;https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs&quot;&gt;XFS File System - Red Hat Documentation&lt;/a&gt;" data-tooltip-place="top">XFS</a> 和 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="btrfs_8_3_1760071171267" data-tooltip-html="“B-Tree File System,” a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.&lt;br&gt;See &lt;a href=&quot;https://btrfs.readthedocs.io/&quot;&gt;BTRFS File System - Official Documentation&lt;/a&gt;" data-tooltip-place="top">BTRFS</a> 进行文件系统修复。</p>
<p>对于大多数用户，推荐的方法是：</p>
<ol>
<li>打开 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_0_3_1760071171267" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a>。</li>
<li>导航到 <strong>主</strong> 选项卡。</li>
<li>点击适当的 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_6_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a> 或 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="cache_3_3_1760071171267" data-tooltip-html="A feature in Unraid that temporarily stores newly written data on faster drives (typically SSDs) before moving it to the array, improving write performance.&lt;br&gt;See &lt;a href=&quot;https://www.britannica.com/technology/cache-memory&quot;&gt;Cache Memory - Computer Science Principles&lt;/a&gt;" data-tooltip-place="top">cache</a> 设备。</li>
<li>按照提示运行内置的文件系统检查和修复。</li>
</ol>
<p>如果您更喜欢使用命令行，请始终：</p>
<ul>
<li>识别适用于 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_6_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a> 驱动器的正确 Unraid 管理分区（<code>/dev/mdXp1</code>）。</li>
<li>使用适合您文件系统的修复工具：<!-- -->
<ul>
<li><strong>XFS:</strong> <code>xfs_repair</code></li>
<li><strong>BTRFS:</strong> <code>btrfs scrub</code></li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Know 您的文件系统</div><div class="admonitionContent_BuS1"><p>使用错误的修复工具可能会造成进一步的损害。在开始修复前，验证您的磁盘是否格式化为**<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="xfs_0_42_1760071171267" data-tooltip-html="A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.&lt;br&gt;See &lt;a href=&quot;https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs&quot;&gt;XFS File System - Red Hat Documentation&lt;/a&gt;" data-tooltip-place="top">XFS</a><strong>、</strong><a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="btrfs_4_0_1760071171267" data-tooltip-html="“B-Tree File System,” a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.&lt;br&gt;See &lt;a href=&quot;https://btrfs.readthedocs.io/&quot;&gt;BTRFS File System - Official Documentation&lt;/a&gt;" data-tooltip-place="top">BTRFS</a>**或其他受支持的文件系统类型。</p></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="在-webgui-中检查和修复驱动器">在 WebGUI 中检查和修复驱动器<a href="#在-webgui-中检查和修复驱动器" class="hash-link" aria-label="直接链接到 在 WebGUI 中检查和修复驱动器" title="直接链接到 在 WebGUI 中检查和修复驱动器">​</a></h2>
<p>This section covers how to diagnose and repair file system corruption on data drives using Unraid&#x27;s built-in tools. File system issues can occur after unclean shutdowns, power failures, or hardware problems, but Unraid provides safe repair methods that maintain your <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_0_267_1760071171267" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a> protection while fixing the underlying problems.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="准备测试">准备测试<a href="#准备测试" class="hash-link" aria-label="直接链接到 准备测试" title="直接链接到 准备测试">​</a></h3>
<table><thead><tr><th>文件系统</th><th>启动模式</th><th>需要维护模式？</th><th>笔记</th></tr></thead><tbody><tr><td><a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="xfs_0_0_1760071171267" data-tooltip-html="A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.&lt;br&gt;See &lt;a href=&quot;https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs&quot;&gt;XFS File System - Red Hat Documentation&lt;/a&gt;" data-tooltip-place="top">XFS</a></td><td>维护模式</td><td>可以</td><td><a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_0_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">阵列</a>必须在维护模式下启动（驱动器未挂载）以进行检查/修复。</td></tr><tr><td><a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="btrfs_0_0_1760071171267" data-tooltip-html="“B-Tree File System,” a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.&lt;br&gt;See &lt;a href=&quot;https://btrfs.readthedocs.io/&quot;&gt;BTRFS File System - Official Documentation&lt;/a&gt;" data-tooltip-place="top">BTRFS</a></td><td>正常模式</td><td>不可以</td><td>请正常启动 %%array|阵列%%，而非维护模式，以便进行擦除/检查。</td></tr></tbody></table>
<ul>
<li>为目标驱动器确定文件系统： <strong>主</strong> 选项卡 → 点击驱动器名称 → 检查 <strong>文件系统类型</strong>。</li>
<li>从主要界面，点击要测试或修复的磁盘。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="进行测试">进行测试<a href="#进行测试" class="hash-link" aria-label="直接链接到 进行测试" title="直接链接到 进行测试">​</a></h3>
<ol>
<li>大多数文件系统（如<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="xfs_0_9_1760071171267" data-tooltip-html="A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.&lt;br&gt;See &lt;a href=&quot;https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs&quot;&gt;XFS File System - Red Hat Documentation&lt;/a&gt;" data-tooltip-place="top">XFS</a>）的默认设置是只读检查（无更改），通常使用<code>-n</code>（不修改）选项。（对于更详细的输出与<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="xfs_5_18_1760071171267" data-tooltip-html="A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.&lt;br&gt;See &lt;a href=&quot;https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs&quot;&gt;XFS File System - Red Hat Documentation&lt;/a&gt;" data-tooltip-place="top">XFS</a>，增加<code>-v</code>（详细）选项，生成<code>-nv</code>。）</li>
<li>对 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="btrfs_0_2_1760071171267" data-tooltip-html="“B-Tree File System,” a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.&lt;br&gt;See &lt;a href=&quot;https://btrfs.readthedocs.io/&quot;&gt;BTRFS File System - Official Documentation&lt;/a&gt;" data-tooltip-place="top">BTRFS</a> 使用 <code>scrub</code> 命令，而不是进行 <code>balance</code> 操作。</li>
<li>点击 <strong>检查</strong> 开始操作；如有需要，使用 <strong>刷新</strong> 按钮监控进度。</li>
<li>如未发现损坏，请继续进行 <a href="#after-the-test-and-repair"><strong>测试和修复后</strong></a>。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="进行修复">进行修复<a href="#进行修复" class="hash-link" aria-label="直接链接到 进行修复" title="直接链接到 进行修复">​</a></h3>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">对于XFS驱动器</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">对于BTRFS驱动器和池</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>从 Unraid 7.0 开始，通过 WebGUI 完全自动化 XFS 文件系统修复：</p>
<ol>
<li><strong>初始检查</strong>: 点击 <strong>CHECK</strong> 按钮（无需输入选项）</li>
<li><strong>检查结果</strong>:<!-- -->
<ul>
<li><strong>未检测到损坏</strong>：显示“未检测到文件系统损坏”，<strong>CHECK</strong> 按钮保持不变</li>
<li><strong>检测到损坏</strong>：显示“检测到文件系统损坏”，出现 <strong>FIX</strong> 按钮</li>
</ul>
</li>
<li><strong>修复过程</strong>: 点击 <strong>FIX</strong> 自动修复文件系统</li>
<li><strong>其他操作</strong>: 如有需要，可能会出现 <strong>ZERO LOG</strong> 按钮</li>
<li><strong>完成</strong>: 过程完成后显示“文件系统已修复”</li>
</ol>
<p>此自动系统消除了用户手动输入修复选项的需求，并确保了正确的修复顺序。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_BuS1"><ul>
<li>修复保持 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_0_5_1760071183613" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a> 保护，并可能需要相当长的时间。</li>
<li>对于 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="xfs_0_3_1760071183613" data-tooltip-html="A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.&lt;br&gt;See &lt;a href=&quot;https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs&quot;&gt;XFS File System - Red Hat Documentation&lt;/a&gt;" data-tooltip-place="top">XFS</a> 修复，支持 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_3_7_1760071183613" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a> 和命令行选项（如下所示的命令）。</li>
</ul></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>在 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_0_2_1760071183612" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a> 中使用 <code>btrfs scrub</code> 扫描并修复某些错误。</li>
<li>在单个驱动器上，scrub 可能会检测但无法修复某些错误；如是，请考虑复制数据并重新格式化磁盘或存储池。</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_BuS1"><ul>
<li>当前 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="btrfs_0_3_1760071183612" data-tooltip-html="“B-Tree File System,” a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.&lt;br&gt;See &lt;a href=&quot;https://btrfs.readthedocs.io/&quot;&gt;BTRFS File System - Official Documentation&lt;/a&gt;" data-tooltip-place="top">BTRFS</a> 修复工具可能无法解决所有损坏；如需要，请查阅 Unraid 文档以获取更新工具。</li>
<li>有关 scrub 和恢复的更多详细信息，请参考相应的 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="btrfs_0_27_1760071183612" data-tooltip-html="“B-Tree File System,” a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.&lt;br&gt;See &lt;a href=&quot;https://btrfs.readthedocs.io/&quot;&gt;BTRFS File System - Official Documentation&lt;/a&gt;" data-tooltip-place="top">BTRFS</a> 文档或 Unraid 论坛以获取指导。</li>
</ul></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="测试和修复后">测试和修复后<a href="#测试和修复后" class="hash-link" aria-label="直接链接到 测试和修复后" title="直接链接到 测试和修复后">​</a></h3>
<p>如果您使用了 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="maintenance-mode_0_7_1760071171267" data-tooltip-html="Feature that starts the array without mounting drives. Enables disk repair, re-assignment, or parity rebuilds without affecting the array&#x27;s active data.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Maintenance_mode&quot;&gt;Maintenance Mode - Wikipedia&lt;/a&gt;" data-tooltip-place="top">维护模式</a>，请停止阵列并重新启动至正常模式以恢复操作。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>What 修复后的期望</div><div class="admonitionContent_BuS1"><ul>
<li>修复和检查操作可能需要长达半小时或更长时间，具体取决于您文件系统的大小和状态。</li>
<li>严重的损坏可能会产生一个<code>lost+found</code>文件夹，其中包含恢复的文件和文件夹碎片。根据需要检查并恢复这些碎片；完成后删除。</li>
<li>这类似于在Windows上运行chkdsk或scandisk，并处理重命名为<code>File0000.chk</code>等的文件。在查看<code>lost+found</code>内容时要花些时间。</li>
</ul></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="xfs-检查和修复">XFS 检查和修复<a href="#xfs-检查和修复" class="hash-link" aria-label="直接链接到 XFS 检查和修复" title="直接链接到 XFS 检查和修复">​</a></h3>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">WebGUI 检查和修复</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">通过命令行运行xfs_repair</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><ol>
<li>使用 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_0_3_1760071183614" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a> 对于格式化为 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="xfs_3_8_1760071183614" data-tooltip-html="A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.&lt;br&gt;See &lt;a href=&quot;https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs&quot;&gt;XFS File System - Red Hat Documentation&lt;/a&gt;" data-tooltip-place="top">XFS</a> 的 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_6_3_1760071183614" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a> 驱动器。</li>
<li>以 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="maintenance-mode_0_2_1760071183614" data-tooltip-html="Feature that starts the array without mounting drives. Enables disk repair, re-assignment, or parity rebuilds without affecting the array&#x27;s active data.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Maintenance_mode&quot;&gt;Maintenance Mode - Wikipedia&lt;/a&gt;" data-tooltip-place="top">Maintenance Mode</a>（未挂载）启动 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_3_8_1760071183614" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a>。</li>
<li>从主选项卡中选择磁盘并打开 <strong>检查文件系统状态</strong>。</li>
<li>默认情况下，检查使用 <code>-n</code>（非修改）；想要更多输出，请在 <code>nv</code> 上添加 <code>-v</code>。</li>
<li>要修复，请删除 <code>-n</code> 标志以允许修复。</li>
</ol>
<p><a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_0_0_1760071183614" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a> 过程在修复期间保持 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_2_11_1760071183614" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a>。</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>在控制台或通过 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="ssh_0_8_1760071183616" data-tooltip-html="“Secure Shell,” an encrypted protocol for securely accessing and managing your Unraid server remotely through a command-line interface.&lt;br&gt;See &lt;a href=&quot;https://www.1kosmos.com/security-glossary/secure-shell-ssh/&quot;&gt;Secure Shell (SSH) - 1Kosmos Security Glossary&lt;/a&gt;" data-tooltip-place="top">SSH</a>，运行：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">xfs_repair -v /dev/mdXp1</span><br></span></code></pre></div></div>
<p>用正确的磁盘编号替换 <strong>X</strong>（例如，Disk 1 为 <code>md1p1</code>）。</p>
<ul>
<li>查看维修报告以获取进一步的补救步骤（如果需要）。如果只有小问题，通常运行 <code>-v</code> 就足够了。</li>
<li>如果修复产生了 <code>lost+found</code> 目录，请按照上述方式检查和管理。</li>
<li>在修复期间，%%校验|校验%% 被维持。</li>
<li>完成后，停止 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_7_1760071183616" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a> 并在正常模式下重新启动。</li>
</ul></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="不可挂载磁盘">不可挂载磁盘<a href="#不可挂载磁盘" class="hash-link" aria-label="直接链接到 不可挂载磁盘" title="直接链接到 不可挂载磁盘">​</a></h2>
<p>如果一个以前功能正常的磁盘无法挂载，通常表明文件系统损坏，通常是由于非清洁关机或写入故障引起的。</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Critical 行动</div><div class="admonitionContent_BuS1"><p>切勿通过 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_0_5_1760071171267" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a> 格式化无法挂载的磁盘！格式化会擦除所有数据并更新 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_3_26_1760071171267" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a>，使恢复变得不可能。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="恢复程序">恢复程序<a href="#恢复程序" class="hash-link" aria-label="直接链接到 恢复程序" title="直接链接到 恢复程序">​</a></h3>
<p>当一个以前运行正常的磁盘突然变得无法挂载时，自然会对数据感到担忧。这类问题通常是由文件系统损坏引起的，可能在非正常关机、断电或写入操作失败后发生。记住的最重要的事情是：<strong>如果由<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_0_3_1760071171267" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a>提示，请不要格式化驱动器</strong>。格式化会删除所有现有数据，并使恢复变得困难，甚至不可能。</p>
<p>Instead, your first step should be to attempt a file system repair. Unraid provides built-in tools for this, and following the correct procedure can often restore access to your data with minimal risk.</p>
<p>以下是操作方法：</p>
<ol>
<li>
<p>查看<a href="#repair-file-systems">文件系统修复部分</a>。本指南将为您特定的文件系统逐步介绍这一过程。</p>
</li>
<li>
<p>对于使用 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="xfs_0_5_1760071171267" data-tooltip-html="A high-performance filesystem used as the default for array drives in Unraid. Optimized for large files and good handling of random read/write operations.&lt;br&gt;See &lt;a href=&quot;https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs&quot;&gt;XFS File System - Red Hat Documentation&lt;/a&gt;" data-tooltip-place="top">XFS</a> 文件系统的磁盘（大多数 Unraid 设置的默认设置），运行：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">xfs_repair -v /dev/mdXp1</span><br></span></code></pre></div></div>
<p>将<strong>X</strong>替换为正确的磁盘号。<code>-v</code>标志提供详细的进度信息。此命令检查并尝试修复特定磁盘上的文件系统。</p>
</li>
<li>
<p>对于格式化为 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="btrfs_0_7_1760071171267" data-tooltip-html="“B-Tree File System,” a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.&lt;br&gt;See &lt;a href=&quot;https://btrfs.readthedocs.io/&quot;&gt;BTRFS File System - Official Documentation&lt;/a&gt;" data-tooltip-place="top">BTRFS</a> 的磁盘，首先运行只读检查：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">btrfs check /dev/mdXp1</span><br></span></code></pre></div></div>
<p>将<strong>X</strong>替换为正确的磁盘号。仅在绝对必要的情况下并在了解风险后使用修复模式：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">btrfs check --repair /dev/mdXp1</span><br></span></code></pre></div></div>
</li>
</ol>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>危险</div><div class="admonitionContent_BuS1"><p><code>--repair</code> 选项极其危险，可能导致进一步的数据丢失。在开始操作前，一定要先备份或克隆磁盘。查看 <a href="https://btrfs.readthedocs.io/en/latest/btrfs-check.html" target="_blank" rel="noopener noreferrer">相关文档</a>，如果您不确定，建议寻求额外的建议。</p></div></div>
<p>If these repair attempts do not resolve the issue or if you encounter errors you don’t understand, it’s best to pause and ask for help on the Unraid forums. Many experienced users and moderators are available to help guide you through the next steps, and getting a second opinion before proceeding further is always safer.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="丢失阵列配置">丢失阵列配置<a href="#丢失阵列配置" class="hash-link" aria-label="直接链接到 丢失阵列配置" title="直接链接到 丢失阵列配置">​</a></h2>
<p>Losing your <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_12_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a> configuration can be stressful, but it doesn&#x27;t mean your data is gone. The <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_3_76_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a> configuration file (located at <code>config/super.dat</code> on your flash device) tells Unraid how your drives are assigned and which ones serve as <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_8_89_1760071171267" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a>. If you&#x27;ve lost your flash drive or don’t have a recent backup, you can recover your <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_11_86_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a> by carefully reassigning the drives.</p>
<p>如果您发现自己处于这种情况，请按以下步骤操作：</p>
<ol>
<li>在<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_0_1_1760071171267" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a>中，将所有可用驱动器分配为数据驱动器。暂时不要  分配任何驱动器为<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_3_31_1760071171267" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a>。</li>
<li>启动<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_2_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a>。以前用作<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_3_5_1760071171267" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a>的驱动器将显示为<em>无法挂载</em>，因为它们不包含文件系统。</li>
<li>记下或对这些无法挂载的驱动器拍摄其序列号截图——这些是您的 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_0_30_1760071171267" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a> 驱动器。</li>
<li>停止<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_2_1760071171267" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a>。</li>
<li>转到<em><strong>工具 → 新配置</strong></em> 然后选择保留当前分配的选项。</li>
<li>勾选确认要继续的复选框并点击<strong>应用</strong>。</li>
<li>返回到<strong>主</strong>选项卡，并使用您记下的序列号正确分配 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_2_19_1760071171267" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a> 驱动器。</li>
<li>启动 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_3_1760071171268" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a> 以根据您的正确分配重建 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_3_13_1760071171268" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a>。</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用-ddrescue-恢复数据">使用 ddrescue 恢复数据<a href="#使用-ddrescue-恢复数据" class="hash-link" aria-label="直接链接到 使用 ddrescue 恢复数据" title="直接链接到 使用 ddrescue 恢复数据">​</a></h2>
<p>当标准 Unraid 恢复方法（如 <a href="/docs/pr-preview/pr-353/zh/unraid-os/using-unraid-to/manage-storage/array-configuration/#replacing-disks">更换磁盘</a> 过程）由于多个磁盘故障或 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_2_14_1760071171268" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a> 无效不可行时，像 <strong>ddrescue</strong> 这样的专业工具可以帮助您从失败的驱动器中拯救尽可能多的数据。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Best 数据恢复实践</div><div class="admonitionContent_BuS1"><p>在开始之前，记住数据恢复是一个微妙的过程。尽可能从故障磁盘的副本工作，避免将新数据写入源磁盘。如果您的数据不可替代，请在尝试高级恢复之前考虑专业恢复服务。记录您的操作并花时间——仓促处理增加了永久性数据丢失的风险。</p></div></div>
<p>推荐通过 <strong><a href="https://unraid.net/community/apps?q=nerd+tools#r" target="_blank" rel="noopener noreferrer">Nerd Tools</a></strong> 插件安装ddrescue（该插件在2022年取代了已弃用的NerdPack）。</p>
<p>要启用 ddrescue：</p>
<ol>
<li>从 Unraid <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_0_9_1760071171268" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a> 的 <strong>应用程序</strong>选项卡中安装 <a href="https://unraid-production-481d40bf.preview.craft.cloud/community/apps?q=nerd+tools#r:~:text=of%201%20App-,Nerd%20Tools,-unRaid.es" target="_blank" rel="noopener noreferrer">Nerd Tools</a>。</li>
<li>打开 <em><strong>设置 → Nerd Tools</strong></em> 并启用 <strong>ddrescue</strong>。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="克隆故障磁盘">克隆故障磁盘<a href="#克隆故障磁盘" class="hash-link" aria-label="直接链接到 克隆故障磁盘" title="直接链接到 克隆故障磁盘">​</a></h3>
<p>您需要一个健康的目标磁盘，它的大小至少与故障源磁盘一样大。确保在此过程中，无论是目标磁盘还是源磁盘都未挂载。开始前请仔细检查设备分配；错误的目标将覆盖并破坏其数据。</p>
<p>要克隆整个磁盘，请打开终端或 <a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="ssh_0_15_1760071171268" data-tooltip-html="“Secure Shell,” an encrypted protocol for securely accessing and managing your Unraid server remotely through a command-line interface.&lt;br&gt;See &lt;a href=&quot;https://www.1kosmos.com/security-glossary/secure-shell-ssh/&quot;&gt;Secure Shell (SSH) - 1Kosmos Security Glossary&lt;/a&gt;" data-tooltip-place="top">SSH</a> 会话并运行以下命令：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ddrescue -f /dev/sdX /dev/sdY /boot/ddrescue.log</span><br></span></code></pre></div></div>
<ul>
<li>将 <strong>X</strong> 替换为你的源磁盘的字母，<strong>Y</strong> 替换为你的目标磁盘的字母。</li>
<li><code>/boot/ddrescue.log</code> 文件将跟踪进度并允许你在进程被中断时恢复。</li>
</ul>
<p>如果您希望在保持<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="parity_0_8_1760071171268" data-tooltip-html="A redundancy mechanism that protects data against disk failures by storing a checksum across the array.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Parity_bit#RAID_array&quot;&gt;Parity data in RAID arrays | Wikipedia&lt;/a&gt;" data-tooltip-place="top">parity</a>的同时直接克隆到<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_3_8_1760071171268" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a>磁盘上，请使用<code>md#</code>设备并在维护模式下启动<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_8_11_1760071171268" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a>：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ddrescue -f /dev/sdX1 /dev/md\# /boot/ddrescue.log</span><br></span></code></pre></div></div>
<ul>
<li>用您的源磁盘字母替换<strong>X</strong>（注意分区使用<code>1</code>）。</li>
<li>替换 <strong>#</strong> 为你的目标磁盘编号。</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_BuS1"><p>在运行ddrescue前请始终验证设备分配。使用错误的目标可能导致该磁盘上的数据完全丢失。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="翻译-ddrescue-输出">翻译 ddrescue 输出<a href="#翻译-ddrescue-输出" class="hash-link" aria-label="直接链接到 翻译 ddrescue 输出" title="直接链接到 翻译 ddrescue 输出">​</a></h3>
<p>在恢复过程中，ddrescue将显示实时进度。</p>
<p>以下是你可能在第一次通过时看到的示例：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">GNU ddrescue 1.27</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ipos: 926889 MB, non-trimmed: 1695 kB, current rate: 95092 kB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opos: 926889 MB, non-scraped: 0 B, average rate: 79236 kB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">non-tried: 1074 GB, bad-sector: 0 B, error rate: 0 B/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rescued: 925804 MB, bad areas: 0, run time: 3h 14m 44s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pct rescued: 46.28%, read errors: 54, remaining time: 3h 18m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">time since last successful read: 0s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Copying non-tried blocks... Pass 1 (forwards)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>What 这是什么意思？</div><div class="admonitionContent_BuS1"><ul>
<li><strong>ipos/opos</strong>：源和目标磁盘上的当前读写位置。</li>
<li><strong>rescued</strong>：成功复制的数据量。</li>
<li><strong>坏区域/读取错误</strong>：遇到的问题区域和读取错误的数量。</li>
<li><strong>恢复百分比</strong>：到目前为止恢复的磁盘百分比。</li>
<li><strong>剩余时间</strong>：估计完成时间。</li>
<li><strong>正在复制未尝试的块...</strong>： ddrescue 正在首次尝试读取所有扇区。</li>
</ul></div></div>
<p>在初始复制后，ddrescue将通过多次传递和有时以两种方向读取块来恢复坏扇区中的数据。这一阶段可能需要更长的时间，尤其是在磁盘严重损坏的情况下。</p>
<p>这是此  阶段的示例输出：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">GNU ddrescue 1.27</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ipos: 17878 MB, non-trimmed: 0 B, current rate: 0 B/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opos: 17878 MB, non-scraped: 362496 B, average rate: 74898 kB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">non-tried: 0 B, bad-sector: 93696 B, error rate: 102 B/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rescued: 2000 GB, bad areas: 101, run time: 7h 25m 8s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pct rescued: 99.99%, read errors: 260, remaining time: 25m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">time since last successful read: 10s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Scraping failed blocks... (forwards)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>What&#x27;s 正在发生？</div><div class="admonitionContent_BuS1"><ul>
<li><strong>刮取失败的块...</strong>： ddrescue正在重复尝试恢复不可读的扇区。</li>
<li><strong>坏区域/读取错误</strong>：随着 ddrescue 发现更多损坏，这些数字可能会增加，但目标是尽量减少无法恢复的数据。</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="挂载和检查已恢复的磁盘">挂载和检查已恢复的磁盘<a href="#挂载和检查已恢复的磁盘" class="hash-link" aria-label="直接链接到 挂载和检查已恢复的磁盘" title="直接链接到 挂载和检查已恢复的磁盘">​</a></h3>
<p>ddrescue完成后，您可以尝试挂载目标磁盘。使用<a href="https://unraid.net/community/apps?q=unassigned+devices#r:~:text=don%27t%20be%20carefull!!!-,Unassigned%20Devices,-dlandon" target="_blank" rel="noopener noreferrer"><strong>未分配的设备</strong>插件</a>在<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="web-gui_2_1_1760071171268" data-tooltip-html="The web-based graphical user interface for managing your Unraid server through a browser. The primary way most users interact with Unraid." data-tooltip-place="top">WebGUI</a>中轻松挂载。如果磁盘无法挂载，请运行适当的文件系统修复工具，如<code>xfs_repair</code>或<code>btrfs check</code>。即使磁盘挂载了，运行文件系统检查以确保完整性也是一个好主意。</p>
<p>一旦恢复了文件，将它们复制到您的<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="array_0_16_1760071171268" data-tooltip-html="The collection of data disks managed by Unraid, which can include parity protection. The array is Unraid&#x27;s main storage system, storing data across multiple devices." data-tooltip-place="top">array</a>上的安全位置。请注意，如果磁盘存在许多不可读的扇区，某些文件可能会损坏。使用<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="checksum_3_38_1760071171268" data-tooltip-html="A small piece of data generated from a larger block of data, used to detect errors during storage or transmission. BTRFS and ZFS file systems use checksums to verify data integrity.&lt;br&gt;See &lt;a href=&quot;https://en.wikipedia.org/wiki/Checksum&quot;&gt;Checksum - Wikipedia&lt;/a&gt;" data-tooltip-place="top">checksums</a>（或内置校验的<a class="remark-auto-glossary-tooltip-trigger" data-tooltip-id="btrfs_6_7_1760071171268" data-tooltip-html="“B-Tree File System,” a modern file system option in Unraid that supports features like snapshots and checksumming. Often used for cache pools due to its ability to detect corruption.&lt;br&gt;See &lt;a href=&quot;https://btrfs.readthedocs.io/&quot;&gt;BTRFS File System - Official Documentation&lt;/a&gt;" data-tooltip-place="top">BTRFS</a>）可以帮助您识别损坏的文件。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="没有校验和识别损坏文件">没有校验和识别损坏文件<a href="#没有校验和识别损坏文件" class="hash-link" aria-label="直接链接到 没有校验和识别损坏文件" title="直接链接到 没有校验和识别损坏文件">​</a></h3>
<p>如果你没有校验和，你仍然可以使用 ddrescue 的填充模式识别受坏区影响的文件：</p>
<ol>
<li>
<p>创建包含唯一字符串的临时文件：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">printf &quot;Unraid &quot; &gt; ~/fill.txt</span><br></span></code></pre></div></div>
</li>
<li>
<p>用该字符串填充克隆磁盘上的坏块：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ddrescue --fill-mode=&#x27;-&#x27; ~/fill.txt /dev/sdY /boot/ddrescue.log</span><br></span></code></pre></div></div>
<p>替换 <strong>Y</strong> 为目标磁盘并使用现有的 ddrescue 映射文件。</p>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://translate.unraid.net/unraid-docs/zh" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文档页面"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/system-crashes-and-stability/"><div class="pagination-nav__sublabel">上一篇</div><div class="pagination-nav__label">系统崩溃与稳定性</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pr-preview/pr-353/zh/unraid-os/troubleshooting/common-issues/docker-troubleshooting/"><div class="pagination-nav__sublabel">下一篇</div><div class="pagination-nav__label">Docker 故障排除</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#备份策略基础" class="table-of-contents__link toc-highlight">备份策略基础</a></li><li><a href="#修复文件系统" class="table-of-contents__link toc-highlight">修复文件系统</a><ul><li><a href="#设备命名路径和符号" class="table-of-contents__link toc-highlight">设备命名：路径和符号</a></li><li><a href="#选择正确的修复方法" class="table-of-contents__link toc-highlight">选择正确的修复方法</a></li></ul></li><li><a href="#在-webgui-中检查和修复驱动器" class="table-of-contents__link toc-highlight">在 WebGUI 中检查和修复驱动器</a><ul><li><a href="#准备测试" class="table-of-contents__link toc-highlight">准备测试</a></li><li><a href="#进行测试" class="table-of-contents__link toc-highlight">进行测试</a></li><li><a href="#进行修复" class="table-of-contents__link toc-highlight">进行修复</a></li><li><a href="#测试和修复后" class="table-of-contents__link toc-highlight">测试和修复后</a></li><li><a href="#xfs-检查和修复" class="table-of-contents__link toc-highlight">XFS 检查和修复</a></li></ul></li><li><a href="#不可挂载磁盘" class="table-of-contents__link toc-highlight">不可挂载磁盘</a><ul><li><a href="#恢复程序" class="table-of-contents__link toc-highlight">恢复程序</a></li></ul></li><li><a href="#丢失阵列配置" class="table-of-contents__link toc-highlight">丢失阵列配置</a></li><li><a href="#使用-ddrescue-恢复数据" class="table-of-contents__link toc-highlight">使用 ddrescue 恢复数据</a><ul><li><a href="#克隆故障磁盘" class="table-of-contents__link toc-highlight">克隆故障磁盘</a></li><li><a href="#翻译-ddrescue-输出" class="table-of-contents__link toc-highlight">翻译 ddrescue 输出</a></li><li><a href="#挂载和检查已恢复的磁盘" class="table-of-contents__link toc-highlight">挂载和检查已恢复的磁盘</a></li><li><a href="#没有校验和识别损坏文件" class="table-of-contents__link toc-highlight">没有校验和识别损坏文件</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/pr-preview/pr-353/zh/">主页</a></li><li class="footer__item"><a href="https://github.com/unraid/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">在 Github 上贡献<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://forums.unraid.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">论坛<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discord.unraid.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://unraid.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Unraid 首页<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://connect.myunraid.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Unraid Connect<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://newsletter.unraid.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">通讯<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://unraid.net/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">博客<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/docs/pr-preview/pr-353/zh/img/un-mark-gradient.svg" alt="Unraid 标志" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="100"><img src="/docs/pr-preview/pr-353/zh/img/un-mark-gradient.svg" alt="Unraid 标志" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="100"></div><div class="footer__copyright"><small>版权所有 &copy; 2005-2025 Lime Technology, Inc.<br>Unraid&reg; 是 Lime Technology, Inc. 的注册商标。</small></div></div></div></footer></div></div>
</body>
</html>