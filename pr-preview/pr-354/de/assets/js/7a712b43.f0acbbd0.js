"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3232],{6612:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"API/api-key-app-developer-authorization-flow","title":"API-Schl\xfcssel-Autorisierungsprozess","description":"Dieses Dokument beschreibt den selbstverwalteten Prozess zur Erstellung von API-Schl\xfcsseln f\xfcr Drittanbieteranwendungen.","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/API/api-key-app-developer-authorization-flow.mdx","sourceDirName":"API","slug":"/API/api-key-app-developer-authorization-flow","permalink":"/docs/pr-preview/pr-354/de/API/api-key-app-developer-authorization-flow","draft":false,"unlisted":false,"editUrl":"https://translate.unraid.net/unraid-docs/de","tags":[],"version":"current","frontMatter":{},"sidebar":"unraidSidebar","previous":{"title":"Roadmap & Funktionen","permalink":"/docs/pr-preview/pr-354/de/API/upcoming-features"},"next":{"title":"Contribute","permalink":"/docs/pr-preview/pr-354/de/category/contribute"}}');var s=r(4848),t=r(8453);const l={},d="API-Schl\xfcssel-Autorisierungsprozess",c={},o=[{value:"\xdcbersicht",id:"\xfcbersicht",level:2},{value:"Prozess",id:"prozess",level:2},{value:"Abfrageparameter",id:"abfrageparameter",level:2},{value:"Bereichsformat",id:"bereichsformat",level:2},{value:"<strong>DD-WRT:</strong> Wenn Sie &quot;dnsmasq&quot; mit aktiviertem DNS-Rebinding-Schutz verwenden, k\xf6nnen Sie diese Zeile Ihrer Router",id:"dd-wrt-wenn-sie-dnsmasq-mit-aktiviertem-dns-rebinding-schutz-verwenden-k\xf6nnen-sie-diese-zeile-ihrer-router",level:3},{value:"Verf\xfcgbare Ressourcen:",id:"verf\xfcgbare-ressourcen",level:3},{value:"Verf\xfcgbare Aktionen:",id:"verf\xfcgbare-aktionen",level:3},{value:"Sicherheitsaspekte",id:"sicherheitsaspekte",level:2},{value:"Beispielintegration",id:"beispielintegration",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"api-schl\xfcssel-autorisierungsprozess",children:"API-Schl\xfcssel-Autorisierungsprozess"})}),"\n",(0,s.jsx)(n.p,{children:"Dieses Dokument beschreibt den selbstverwalteten Prozess zur Erstellung von API-Schl\xfcsseln f\xfcr Drittanbieteranwendungen."}),"\n",(0,s.jsx)(n.h2,{id:"\xfcbersicht",children:"\xdcbersicht"}),"\n",(0,s.jsx)(n.p,{children:"Anwendungen k\xf6nnen API-Zugriff auf einen Unraid-Server anfordern, indem sie Benutzer auf eine spezielle Autorisierungsseite umleiten, wo Benutzer die angeforderten Berechtigungen \xfcberpr\xfcfen und mit einem Klick einen API-Schl\xfcssel erstellen k\xf6nnen."}),"\n",(0,s.jsx)(n.h2,{id:"prozess",children:"Prozess"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Anwendung fordert an"}),": Die App leitet den Nutzer um zu:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://[unraid-server]/ApiKeyAuthorize?name=MyApp&scopes=docker:read,vm:*&redirect_uri=https://myapp.com/callback&state=abc123\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Benutzerauthentifizierung"}),": Falls nicht bereits angemeldet, wird der Benutzer zuerst zur Anmeldung weitergeleitet (Standard-Unraid-Authentifizierung)"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Zustimmungsbildschirm"}),": Nutzer sieht:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Anwendungsname und Beschreibung"}),"\n",(0,s.jsx)(n.li,{children:"Angeforderte Berechtigungen (mit Checkboxen zur Genehmigung/Ablehnung spezifischer Bereiche)"}),"\n",(0,s.jsx)(n.li,{children:"API-Schl\xfcsselname-Feld (vorausgef\xfcllt)"}),"\n",(0,s.jsx)(n.li,{children:"Autorisieren & Abbrechen Schaltfl\xe4chen"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"API-Schl\xfcsselerstellung"}),": Nach der Autorisierung:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"API-Schl\xfcssel wird mit genehmigten Bereichen erstellt"}),"\n",(0,s.jsx)(n.li,{children:"Schl\xfcssel wird dem Benutzer angezeigt"}),"\n",(0,s.jsxs)(n.li,{children:["Wenn ",(0,s.jsx)(n.code,{children:"redirect_uri"})," angegeben ist, wird der Benutzer mit dem Schl\xfcssel zur\xfcckgeleitet"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"R\xfcckruf"}),": App erh\xe4lt den API-Schl\xfcssel:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://myapp.com/callback?api_key=xxx&state=abc123\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"abfrageparameter",children:"Abfrageparameter"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"})," (erforderlich): Name der anfordernden Anwendung"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"description"})," (optional): Beschreibung der Anwendung"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"scopes"})," (erforderlich): Kommagetrennte Liste der angeforderten Bereiche"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"redirect_uri"})," (optional): URL, zu der nach der Autorisierung weitergeleitet werden soll"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"state"})," (optional): Undurchsichtiger Wert zur Aufrechterhaltung des Status"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"bereichsformat",children:"Bereichsformat"}),"\n",(0,s.jsxs)(n.p,{children:["Bereiche folgen dem Muster: ",(0,s.jsx)(n.code,{children:"resource:action"})]}),"\n",(0,s.jsxs)(n.h3,{id:"dd-wrt-wenn-sie-dnsmasq-mit-aktiviertem-dns-rebinding-schutz-verwenden-k\xf6nnen-sie-diese-zeile-ihrer-router",children:[(0,s.jsx)(n.strong,{children:"DD-WRT:"}),' Wenn Sie "dnsmasq" mit aktiviertem DNS-Rebinding-Schutz verwenden, k\xf6nnen Sie diese Zeile Ihrer Router']}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"docker:read"})," - Lesezugriff auf Docker"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"vm:*"})," - Vollzugriff auf VMs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"system:update"})," - Update-Zugriff auf das System"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"role:viewer"})," - Zugriffsrolle Betrachter"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"role:admin"})," - Zugriffsrolle Administrator"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"verf\xfcgbare-ressourcen",children:"Verf\xfcgbare Ressourcen:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"docker"}),", ",(0,s.jsx)(n.code,{children:"vm"}),", ",(0,s.jsx)(n.code,{children:"system"}),", ",(0,s.jsx)(n.code,{children:"share"}),", ",(0,s.jsx)(n.code,{children:"user"}),", ",(0,s.jsx)(n.code,{children:"network"}),", ",(0,s.jsx)(n.code,{children:"disk"}),", etc."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"verf\xfcgbare-aktionen",children:"Verf\xfcgbare Aktionen:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"create"}),", ",(0,s.jsx)(n.code,{children:"read"}),", ",(0,s.jsx)(n.code,{children:"update"}),", ",(0,s.jsx)(n.code,{children:"delete"})," oder ",(0,s.jsx)(n.code,{children:"*"})," f\xfcr alle"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"sicherheitsaspekte",children:"Sicherheitsaspekte"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"HTTPS erforderlich"}),": Umleitungs-URIs m\xfcssen HTTPS verwenden (au\xdfer localhost f\xfcr die Entwicklung)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Benutzereinwilligung"}),": Benutzer genehmigen explizit jede Berechtigung"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sitzungsbasiert"}),": Verwendet bestehende Unraid-Authentifizierungssitzung"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Einmalige Anzeige"}),": API-Schl\xfcssel werden einmal gezeigt und m\xfcssen sicher gespeichert werden"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"beispielintegration",children:"Beispielintegration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// JavaScript example\nconst unraidServer = 'tower.local';\nconst appName = 'My Docker Manager';\nconst scopes = 'docker:*,system:read';\nconst redirectUri = 'https://myapp.com/unraid/callback';\nconst state = generateRandomState();\n\n// Store state for verification\nsessionStorage.setItem('oauth_state', state);\n\n// Redirect user to authorization page\nwindow.location.href =\n    `https://${unraidServer}/ApiKeyAuthorize?` +\n    `name=${encodeURIComponent(appName)}&` +\n    `scopes=${encodeURIComponent(scopes)}&` +\n    `redirect_uri=${encodeURIComponent(redirectUri)}&` +\n    `state=${encodeURIComponent(state)}`;\n\n// Handle callback\nconst urlParams = new URLSearchParams(window.location.search);\nconst apiKey = urlParams.get('api_key');\nconst returnedState = urlParams.get('state');\n\nif (returnedState === sessionStorage.getItem('oauth_state')) {\n    // Save API key securely\n    saveApiKey(apiKey);\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>d});var i=r(6540);const s={},t=i.createContext(s);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);