当您的阵列中至少包含一个指定的奇偶校验设备时，进行 %%parity check|奇偶校验检查%% 是必不可少的。在此过程中，所有数据磁盘同时被读取。系统重新计算奇偶校验并将其与存储在您的 %%parity disk(s)|奇偶校验磁盘%% 上的信息进行比较。

<details>
  <summary><strong>深入：奇偶校验同步与奇偶校验检查 - 有何区别？</strong> - 点击展开/折叠</summary>

  %%parity|奇偶校验%% 同步会读取所有数据磁盘并从零开始创建 %%parity|奇偶校验%% ，将结果保存到 %%parity drives|奇偶校验磁盘%% 上。通常在您添加或更换 %%parity drives|奇偶校验磁盘%% 或进行重大配置更改后，此过程会发生。

  %%parity check|奇偶校验检查%% 会读取所有数据磁盘以及 %%parity drives|奇偶校验磁盘%% 。它重新计算 %%parity|奇偶校验%% 值并与存储值进行比较。有两种模式来运行 %%parity check|奇偶校验检查%%：

  - **修正 (CORRECT)：** 如果发现不匹配，它会更新 %%parity disk|奇偶校验磁盘%% 并记录事件。
  - **非校正（NOCORRECT）：** 仅记录发现的错误而不更新校验。

  为避免过多日志记录，在 %%parity check|奇偶校验检查%% 过程中仅报告前 100 个错误地址。这些不匹配被称为 **同步错误** ，表明奇偶校验与数据不一致，通常由于如突然断电或硬件问题所致。每个同步错误按 4KiB 块计数 - 这是系统的 I/O 单元大小（称为 Linux 页大小）。
</details>

<details>
  <summary><strong>深入：奇偶校验和阵列磁盘中的“有效”是什么意思？</strong> - 点击展开/折叠</summary>

  **有效的 %%parity disk|奇偶校验磁盘%%** 表示在最后一次成功 %%parity|奇偶校验%% 同步后，Unraid 认定该 %%parity|奇偶校验%% 是 "好" 的，意味着如果磁盘出现故障，它适合数据恢复。"有效" 状态适用于阵列中的每个磁盘，而不仅仅是 %%parity|奇偶校验%% 。如果除一个之外的所有磁盘都是有效的，Unraid 可以使用 %%parity|奇偶校验%% 重建丢失或故障磁盘的数据。

  即使在非修正检查后发生一些同步错误，Unraid 仍保持 %%parity disk|奇偶校验磁盘%% 的 "有效" 状态。这样您仍然可以恢复故障磁盘。如果 %%parity|奇偶校验%% 被标记为无效，您将在仅发生一次额外故障后面临两个无效磁盘的风险，从而导致潜在数据丢失。
</details>

在 %%parity check|奇偶校验检查%% 进行时，您仍然可以使用阵列。然而，请注意由于磁盘争用，性能可能会变慢，因为文件操作和检查都在争夺资源。

通常，如果 %%parity check|奇偶校验检查%% 识别到错误，Unraid 将更新 %%parity disk|奇偶校验磁盘%% 以与计算数据对齐并增加同步错误计数器。

:::tip

If you prefer to run a check without making corrections, simply uncheck **Write corrections to parity** before starting. This way, errors will be reported but not fixed.

:::

:::important

After an "Unsafe Shutdown"—when the array is restarted without being properly stopped—Unraid automatically initiates a %%parity check|parity-check%% using the mode configured under **Settings → Scheduler → Parity Check** (non-correcting by default). To change how the automatic check runs, open **Settings → Scheduler → Parity Check** and adjust the options there. Unexpected power loss is the most common trigger for an unsafe shutdown, so using an uninterruptible power supply (UPS) is strongly recommended to protect your data.

:::

<h4>What are parity errors?</h4>

%%Parity|parity%% errors happen when the %%parity|parity%% information your system calculates doesn't match what's stored on your %%parity drives|parity-drives%%. This mismatch can arise from several issues, including:

- Sudden power loss or unsafe shutdowns
- Failing drives or disk errors
- Problems with cables or connections
- Unclean shutdowns or unexpected system crashes

When %%parity|parity%% errors occur, either the %%parity drives|parity-drives%% or the data disks could be out of sync. Ideally, a %%parity check|parity-check%% should report zero errors so everything functions correctly.

<h4>What to do if you encounter %%parity|parity%% errors</h4>

If your %%parity check|parity-check%% reveals errors:

1. **Investigate the problem:** Start by checking %%SMART reports|smart-report%%, which provide detailed information about your drives' health. Look for any signs of disk or connection problems.
2. **Seek help from our forums:** If you cannot resolve the issue on your own, consider reaching out for advice on the Unraid forums. The community can offer valuable insights and suggestions based on their experiences.
3. **Run another check:** After you've addressed any hardware issues, running another %%parity check|parity-check%% is a good idea to ensure everything is back in order.

:::info[Rebuild 时间]

Remember that %%parity checks|parity-check%% can take several hours, depending on the size of your disks and the activity level of your system. For the best results, schedule these checks during times of low system usage.

:::
