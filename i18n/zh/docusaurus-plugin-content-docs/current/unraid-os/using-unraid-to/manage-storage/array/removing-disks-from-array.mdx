---
sidebar_position: 4
sidebar_label: 从阵列中移除磁盘
---

# 从阵列中移除磁盘

有可能您想从 Unraid 阵列中移除一个磁盘。无论您是想节约电力，退役一个旧的或不可靠的驱动器，还是将硬件重新用于其他用途，此过程都相对简单。

## 移除校验盘

如果您发现不再需要设置中的 %%parity|校验%% 保护级别，可以随时移除 %%parity disk|校验盘%%。

要移除奇偶校验驱动器：

1. 停止数组。
2. 取消分配校验盘插槽，并设置为“未分配”。
3. 启动阵列以提交更改。

:::warning

Before you make any changes, please keep this in mind: If you already have any failed data drives in your array, removing a %%parity disk|parity-drives%% can decrease the number of failures Unraid can handle without risking data loss.

- 使用双重校验可以从单个失效驱动器中恢复，但请注意，在重建过程中，您将无法承受另一次故障。
- 使用单校验，您将失去所有冗余，这意味着任何额外的驱动器故障都可能导致数据丢失。

:::

## 移除数据磁盘

移除数据盘后需要进行校验同步。在此同步完成之前，如果另一块磁盘出现故障，可能会导致数据丢失的风险。

### 标准方法（推荐）

1. 停止数组。
2. 可选择使用截屏记录您的磁盘分配。
3. 使用**Tools → New Config**重设阵列配置，选择保留所有当前分配的选项。
4. 取消分配您想移除的磁盘。
5. 启动阵列，但不要勾选“校验有效”框。

如果您已经分配了一个校验盘，校验同步将开始。在此同步完成之前，阵列容易出现数据丢失的风险。

:::tip

在移除前将重要数据显示移出磁盘。校验同步过程可能需要几个小时，具体取决于磁盘大小和系统活动。

:::

### 校验保留方法（高级）

此方法允许您在保持校验有效的情况下移除数据盘。它将数据盘清零，允许您保持校验完整。这仅推荐给高级用户。

:::warning

This method erases all data on the selected disk. Verify that all important data has been moved before proceeding. There is no official support from LimeTech for this process.

:::

使用保持校验的方法：

1. 以维护模式启动阵列，点击您想移除的磁盘，然后点击**擦除**。这将在保持校验的情况下从设备中擦除文件系统，然后停止阵列。
2. 以正常模式启动阵列。该磁盘将无法挂载，但其余的磁盘在线。
3. 记录阵列分配，特别是校验盘。
4. 在**设置 → 磁盘设置**中启用重建写入（“Turbo Write”）以加快清零速度，但仅当所有磁盘都处于健康状态时。
5. 卸载磁盘：`umount /mnt/diskX`
6. 清零磁盘：
   - For Unraid 6.12 or later: `dd bs=1M if=/dev/zero of=/dev/mdXp1 status=progress`
   - For Unraid 6.11 and earlier: `dd bs=1M if=/dev/zero of=/dev/mdX status=progress`
   将`X`替换为您要移除的数据磁盘的具体编号。
7. 清除完成后停止阵列。
8. 重置阵列配置，保留所有当前分配。
9. 取消分配您要移除的磁盘，仔细检查所有分配，特别是校验盘。
10. 勾选“校验已经有效”的选项。
11. 启动阵列以完成移除。
12. 可选择在完成后运行修正%%parity check|parity-check%%以确保校验完整性。
