# 版本 6.12.9 2024-03-26

## 升级说明

这是一个错误修复版本，解决了社区报告的一系列问题，详情如下。我们强烈建议所有用户升级到此版本。

### 已知问题

#### 过时的插件

过时的插件可能会导致问题，我们建议保持它们的最新状态。

#### 与macvlan相关的调用跟踪和崩溃

如果您收到与 macvlan 相关的调用跟踪（或任何无法解释的崩溃），第一步我们建议您导航到 ***设置 > Docker***，切换到**高级**视图，然后将 **Docker 自定义网络类型** 从 **macvlan** 更改为 **ipvlan**。这是自版本 6.11.5 以来 Unraid 随附的默认配置，应该适用于大多数系统。

请注意，某些用户报告在使用某些路由器（Fritzbox）进行端口转发时遇到问题，并且在 ipvlan 模式下使用高级网络管理工具（Ubiquity）时功能受到限制。如果这影响到您，请查看自 Unraid 版本 [6.12.4](6.12.4.md#fix-for-macvlan-call-traces) 起提供的替代解决方案。

#### 由于jumbo frames导致的网络问题

如果您有任何类型的网络问题，请确认您没有启用 Jumbo 桢。导航到 ***设置 > 网络设置 > eth0*** 并确认 **期望的 MTU** 为 1500。有关更多信息，请参阅 [关于 Jumbo 框架的常见问题警告](https://forums.unraid.net/topic/120220-fix-common-problems-more-information/page/2/#comment-1167702)。

#### 由于Realtek网卡导致的问题

升级的内核修复了与 Jumbo 框架和内核中 Realtek 8125 驱动程序的死锁问题。然而，我们仍然建议遵循上述关于 Jumbo 框架的建议。

如果您继续遇到网络稳定性问题，并且\_**工具 > 系统设备**\_ 显示您拥有 Realtek 以太网控制器，请获取显示的零件号并搜索社区应用，看看是否有专用的 Realtek 驱动程序插件。有关更多信息，请参阅 [Realtek 驱动程序插件支持页面](https://forums.unraid.net/topic/141349-plugin-realtek-r8125-r8168-and-r81526-drivers/)。

#### 其他问题？

我们强烈推荐安装**Fix Common Problems**插件，因为它会警告您常见配置问题。

如果您遇到其他崩溃或稳定性问题，请导航到 ***设置 > 系统日志服务器*** 并启用 **镜像系统日志到闪存**。这将在您的 USB 闪存启动设备上造成额外的磨损，但在崩溃后收集日志短期内是有用的。

下次重启后，导航到\_**工具 > 诊断**\_并下载您的匿名诊断（从版本6.12.5起，诊断会自动包含镜像到闪存驱动器的日志）。

最后，在 [常规支持](https://forums.unraid.net/forum/55-general-support/) 下开始一个新主题，并提供问题的所有详细信息。一旦问题解决，请务必禁用 **镜像系统日志到闪存**。

### 回滚

“Docker Patch 6.12.8”的功能现在内置在 Unraid 中。如果您回滚到 6.12.8，可能需要重新安装该插件。

如果回滚至早于 6.12.8 的版本，请参阅 [6.12.8 发布说明](6.12.8.md#rolling-back)。

## 与 [6.12.8](6.12.8.md)的变化

### 漏洞修复和改进

- Docker
  - 在添加或更新容器时忽略配置文件中的空路径
  - 解决更新容器时的某些问题
  - 修复当有容器更新时的通知问题
- 管理访问页面
  - 解决显示 IPv6 URL 的问题
  - 移除对旧版 'unraid.net' SSL 证书的支持，并移除 "UpdateDNS"
- 诊断工具：包含 PHP 错误日志以协助故障排除
- 系统驱动程序：解决导致页面无法显示的翻译问题
- UPC：
  - 解决服务器描述中的单引号或双引号问题
  - 如果未安装 unraid-api，则不尝试启动它
- 修复仅 HTTPS 模式、仅 HTTP 模式或通过 http 更改服务器描述或型号时的重定向错误。
- 将 /run tmpfs 尺寸限制从 32M 增至 128M
- 在创建 GPT 分区表和通知内核重新读取之间引入延迟，以防止"设备或资源正忙"错误。
- shfs：修复与 zfs 卷有关的高层次分配方法
- nfs：确保默认启用 NFSv4 挂载
- 解决各种 PHP 警告
- 将新安装的默认时间服务器更改为 "time.google.com"

### Linux kernel

- 版本 6.1.82

## 补丁

安装 [Unraid Patch 插件](https://forums.unraid.net/topic/185560-unraid-patch-plugin/) 后，访问 ***工具 → Unraid Patch*** 获取以下补丁/紧急修复：

- 一部分安全更新，详情请参阅 [这篇博客文章](https://unraid.net/blog/cvd)。我们建议升级到最新稳定版本以获取其他安全更新。
