# 版本 6.12.2 2023-06-29

相比 [6.12.1](6.12.1.md) 的变更

## 升级说明

### 已知问题

请参阅 [6.12.0 发行说明](6.12.0.md#known-issues) 了解一般已知问题。

### 回滚

若回滚至早于6.12.0版本，请参阅 [6.12.0 发行说明](6.12.0.md#rolling-back)。

## 亮点

这主要是一个修复bug的版本更新，也包括了一个小的安全更新。 其他亮点包括：

- 我们将 **docker** 从 Unraid OS 6.12 开发中引入的 v23.0.6 版本，恢复到 Unraid OS 6.11 中使用的最新补丁发布 v20.10.24，以解决发现的 **docker** 内存使用量增加和其他问题。
- 在 WireGuard 隧道启动或停止时，自动对所有 'config/wireguard/\*.conf' 文件应用调用我们 'update\_services' 脚本进行必要的小改动。当通过更新 OS 页面进行更新时，这是自动完成的。对于手动更新或降级，需在设置/VPN 管理器页面的设置上做一次“虚假更改”，然后点击应用。

## 漏洞修复和改进

- 电子邮件通知：在 /etc/php.ini 中添加一行：'mail.mixed\_lf\_and\_crlf=On'，以应对 PHP8 CRLF 处理的更改
- emhttpd：修复问题：未识别模拟 ZFS 卷
- emhttpd：修复问题：如果 diskFsType==auto 且 defaultFsType 指定了加密，则格式化失败
- emhttpd：修复问题：如果 diskFsType==auto，则挂载失败
- htop：移除预定义的 /root/.config/htop/htoprc 文件
- 网络：RC 服务更新：
  - NFS - 修复服务重载
  - RPC - 修复服务重载
  - NGINX - 在 FQDN 重定向时移除 HTTPS 端口（默认 443）
  - 所有服务 - 注册 IPv4 本地链路分配（169.254.xxx.xxx）
  - 所有服务 - 使锁定文件可编程
  - WireGuard：延迟服务更新以避免竞态条件
  - rc.library：不允许在绑定列表中出现重复项
- WebGUI：仪表板更新：
  - 重新引入显示/隐藏卡片内容
  - 新增图标功能，一次性显示/隐藏所有内容
  - 减少列之间的间隔
  - 描述 -> 模型
  - ZFS：将百分比值修正为最大 100%
  - 使用原型函数：这使第三方开发者更容易自动隐藏动态内容
  - 处理重复的 IP 分配并发出警告
  - 将标题内存更改为系统
- WebGUI：操作系统更新：添加复选框以确认阅读发行说明后执行升级
- WebGUI：诊断：包含重复分配列表
- WebGUI：NFS：对于安全/私人，将规则字段从 256 个字符增加到 512 个字符。

## Linux kernel

- 版本 6.1.36

## 基础发行版

- bind: 版本 -9.16.42 (CVE-2023-2911)
- docker: 20.10.24（从 v23.0.6 恢复）

## 补丁

安装 [Unraid Patch 插件](https://forums.unraid.net/topic/185560-unraid-patch-plugin/) 后，访问 _**工具 → Unraid Patch**_ 获取以下补丁/紧急修复：

- 一部分安全更新，详情请参阅 [这篇博客文章](https://unraid.net/blog/cvd)。我们建议升级到最新稳定版本以获取其他安全更新。
