## 版本 6.11.0 2022-09-23

### 改进内容

- 本次版本更新包括大量基本软件包更新，其中涵盖了多个CVE的缓解措施。

- Linux 内核更新包含了 [处理器 MMIO 过时数据漏洞](https://lwn.net/Articles/898011/) 的缓解措施。

- 插件系统已重新构建，以便使"插件安装"可以在后台进行。这解决了用户可能认为安装已经崩溃并关闭窗口的问题，但实际上并未崩溃。

- 其他 WebGUI 改进。

- 在虚拟机管理器表单编辑器中添加了指定自定义 VNC 端口的支持。使用 XML 编辑器指定的自定义端口号将在切换到基于表单的编辑器时保留。

- 非旋转设备的休眠现在将这些设备置于待机模式（如设备支持）。类似地，唤醒或任何 I/O 到设备将恢复正常操作。

- 显示从 SMART 信息中获取的 NVMe 设备功能。

- 增加内核配置选项以支持 Sr-iov 与 Mellanox ConnectX4+ 卡。

- 将 Dynamix SSD Trim 插件合并到 Unraid OS WebGUI 中。

- 对 cgroup2 的初步支持。在 syslinux 的附加行中传递“unraidcgroup2”以激活。

- 基础发行版中包含 Perl。

### 错误修复

- 修正了在虚拟机管理器中，当虚拟机名称嵌入“#”字符时导致虚拟机日志无法打开的问题。

- 修复了按计划暂停/恢复校验时出现的问题。

- 修正了安装注册密钥的问题。

- 更新了'samba'以解决安全问题。还应消除内核信息中关于“试图通过flock(2)设置LOCK\_MAND锁”的抱怨信息。

- 修复了从“test”分支切换到“next”时的问题。

- 停止尝试关闭不支持待机模式的设备。

- 修正了由于过时的 cyras-sasl 库而导致的广告加入问题

- 若 CPU 不支持（大部分 AMD 处理器），请勿启动 mcelog 守护进程。

- 修正在 nginx 未正确识别 SSL 证书续订的问题。

- wireguard：在启动 WG 隧道之前检查网关（下一跳）的可达性。

- 忽略在“btrfs filesystem show”命令输出中混入的“ERROR:”字符串。这解决了 libblkid 标签可能将奇偶校验磁盘标记为拥有 btrfs 文件系统的问题，因为它查找“魔数”的地方恰好匹配 btrfs。后续"btrfs fi"命令将尝试从此设备读取 btrfs 元数据，由于实际没有 btrfs 文件系统，因此操作失败。

- 修复了mover 中的错误，该错误阻止文件从 unRAID 阵列移动到缓存池（首选模式），如果共享名称包含空格。

## 变更日志对比 Unraid OS 6.10.3

#### 管理

- 在 unRAIDServer.plg 中添加未压缩文件的 sha256 校验。
- bash：在 /etc/profile 中从 PATH 中省略 “.”（当前目录）
- docker：如果没有运行的容器，不会调用 'docker stop'。
- emhttpd：增强待机（旋转）支持。
- mover：修复了当共享名称包含空格时阻止从阵列移动到缓存的问题
- rc.nginx：为包含 OCSP 响应者 URL 的证书启用 OCSP 置入。
- rc.nginx：压缩 'woff' 字体文件并指示浏览器缓存
- rc.wireguard：为 WireGuard 自动启动提供更好的故障排除
- rc.S：支持插件驱动模块的早期加载
- SMB：修复 USB 闪存引导设备的 'fruit' 设置
- SMB：删除 NTLMv1 支持，因为已从 Linux 内核中移除
- SMB：（暂时）移动vfs\_fruit设置到单独的/etc/samba/smb-fruit.conf文件中
- SMB：（暂时）消除Samba 'idmap\_hash已弃用' 的提示行
- 启动：防止安装可能存在于 /boot/extra 中的降级版软件包
- upc: 版本 v1.3.0
- WebGUI：插件系统更新
  - 解绑前端和后端操作
  - 使用 nchan 作为通信通道
  - 允许在后端继续时关闭窗口
  - 使用 SWAL 作为窗口管理器
  - 在插件页面增加多删除能力
  - 添加更新所有插件及详情
- WebGUI：docker：使用 docker 标签作为 WebUI 的主要来源
  - 使“net.unraid.docker.webui”docker 标签成为解析 Web 用户界面地址时的主要来源。如果缺少 docker 标签，将使用模板值。
- WebGUI：更新Credits.page
- WebGUI：虚拟机管理器：修复虚拟机日志在虚拟机名嵌入“#”时无法打开的问题
- WebGUI：管理访问页面：添加自签名证书详情
- WebGUI：校验校验：修复回归错误
- WebGUI：移除脚本中的会话创建
- WebGUI：更新 SSH 密钥正则表达式
  - 添加对 ed25519/sk-ed25519 的支持
  - 删除对 ecdsa 的支持（不安全）
  - 使用正确的正则表达式检查有效密钥类型
- WebGUI：杂项样式更新
- WebGUI：管理访问：HTTP 端口设置应始终启用
- WebGUI：修复：保留 VNC 端口设置
- WebGUI：修复插件系统中回归错误
- WebGUI：修复安装注册密钥的问题
- WebGUI：当选择自定义图像时高亮显示案例选择
- WebGUI：修复（upc）：v1.4.2 apiVersion 检查回归
- WebGUI：更新 NVME 驱动器的磁盘功能页面
- WebGUI：杂项（upc）：v1.6.0
- WebGUI：插件系统和 docker 更新
- WebGUI：系统信息 - 样式更新
- WebGUI：插件：保持标题按钮在同一位置
- WebGUI：在低分辨率中防止容器尺寸溢出
- WebGUI：虚拟机管理器：在 GUI 中添加启动顺序和 CD 热插拔功能
- WebGUI：Docker 管理器：增加根据容器标签指定 shell 的功能。
- WebGUI：修复 Discord 通知代理 URL
- WebGUI：当无信息可用时，抑制横幅消息中的信息图标
- WebGUI：增加待机消息并且在SCSI驱动器中使用 -n 表示身份。
- WebGUI：修复 SAS 自检
- WebGUI：修复插件多重更新
- WebGUI：UPS 显示增强：
  - 为每个类别添加图标
  - 在仪表盘的 UPS 部分添加翻译
  - 添加输出电压/频率值
  - 根据设置添加颜色
  - 标准化单位
  - 使更新接近实时
  - 增加 UPS 型号字段
- WebGUI：JQuery：版本 3.6.1
- WebGUI：JQueryUI：版本 1.13.2
- WebGUI：改善字体文件 URL 的 “缓存破坏”
- WebGUI：修复：docker 弹出窗口中的文本颜色有时错误
- WebGUI：修复：在校验读取中显示读取错误
- WebGUI：虚拟机管理器：添加 USB 启动策略，增加缺少 USB 的支持
- WebGUI：Docker：修复没有容器时出现的 JavaScript 错误
- WebGUI：增加第三方系统诊断
  - 增加针对第三方插件包的诊断
  - 增加对 /dev/dri 设备的诊断
  - 增加对 /dev/dvb 设备的诊断
  - 增加对 NVIDIA 设备的诊断

#### Linux kernel

- 版本 5.19.9（CVE-2022-21123 (CVE-2022-21123 CVE-2022-21125 CVE-2022-21166)
- md/unraid: 版本 2.9.24
- CONFIG\_IOMMU\_DEFAULT\_PASSTHROUGH: 透传
- CONFIG\_VIRTIO\_IOMMU：Virtio IOMMU 驱动程序
- CONFIG\_X86\_AMD\_PSTATE: AMD处理器P-State驱动程序
- CONFIG\_FIREWIRE：FireWire驱动程序栈
- CONFIG\_FIREWIRE\_OHCI：OHCI-1394控制器
- CONFIG\_FIREWIRE\_SBP2：存储设备 (SBP-2协议)
- CONFIG\_FIREWIRE\_NET：基于1394的IP网络
- CONFIG\_INPUT\_UINPUT：用户级驱动支持
- CONFIG\_INPUT\_JOYDEV：摇杆接口
- CONFIG\_INPUT\_JOYSTICK：摇杆/游戏手柄
- CONFIG\_JOYSTICK\_XPAD：Xbox游戏手柄支持
- CONFIG\_JOYSTICK\_XPAD\_FF：Xbox游戏手柄震动支持
- CONFIG\_JOYSTICK\_XPAD\_LEDS：Xbox360控制器“BigX”LED支持
- CONFIG\_MLX5\_TLS：Mellanox Technologies TLS Connect-X支持
- CONFIG\_MLX5\_ESWITCH：Mellanox Technologies MLX5 SRIOV E-Switch支持
- CONFIG\_MLX5\_CLS\_ACT：MLX5 TC分类器动作支持
- CONFIG\_MLX5\_TC\_SAMPLE：MLX5 TC样本卸载支持
- CONFIG\_MLXSW\_SPECTRUM：Mellanox Technologies Spectrum系列支持
- CONFIG\_NET\_SWITCHDEV：交换设备（及类似交换设备）支持
- CONFIG\_TLS：传输层安全性支持
- CONFIG\_TLS\_DEVICE：传输层安全性硬件卸载
- CONFIG\_TLS\_TOE：传输层安全性TCP栈旁路
- CONFIG\_VMD：英特尔卷管理设备驱动程序
- 增加了其他传感器驱动：
  - CONFIG\_AMD\_SFH\_HID：AMD传感器融合中心
  - CONFIG\_SENSORS\_AQUACOMPUTER\_D5NEXT：Aquacomputer D5 Next水冷泵
  - CONFIG\_SENSORS\_MAX6620：Maxim MAX6620风扇控制器
  - CONFIG\_SENSORS\_NZXT\_SMART2：NZXT RGB和风扇控制器/智能设备v2
  - CONFIG\_SENSORS\_SBRMI：模拟SB-RMI传感器
  - CONFIG\_SENSORS\_SHT4x：Sensiron湿度和温度传感器。SHT4x及兼容。
  - CONFIG\_SENSORS\_SY7636A：Silergy SY7636A
  - CONFIG\_SENSORS\_INA238：Texas Instruments INA238
  - CONFIG\_SENSORS\_TMP464：Texas Instruments TMP464及兼容
  - CONFIG\_SENSORS\_ASUS\_WMI：ASUS WMI X370/X470/B450/X399
  - CONFIG\_SENSORS\_ASUS\_WMI\_EC：ASUS WMI B550/X570
  - CONFIG\_SENSORS\_ASUS\_EC：ASUS EC传感器
- 补丁：在 drivers/bluetooth/btrtl.c 中添加缺失的固件引用
  - rtl8723d\_fw\.bin
  - rtl8761b\_fw\.bin
  - rtl8761bu\_fw\.bin
  - rtl8821c\_fw\.bin
  - rtl8822cs\_fw\.bin
  - rtl8822cu\_fw\.bin
- CONFIG\_BPF\_UNPRIV\_DEFAULT\_OFF：默认禁用不受信任的BPF
- 补丁：Team Group MP33 M.2 2280 1TB NVMe 的特性（全球范围内在 nsid 上重复 ID）
- 启用所有IPv6内核选项：
  - CONFIG\_INET6\_\*
  - CONFIG\_IPV6\_\*
- CONFIG\_RC\_CORE：遥控器支持
- CONFIG\_SFC\_SIENA：Solarflare SFC9000支持
- CONFIG\_SFC\_SIENA\_MCDI\_LOGGING：Solarflare SFC9000系列MCDI日志支持
- CONFIG\_SFC\_SIENA\_MCDI\_MON：Solarflare SFC9000系列hwmon支持
- CONFIG\_SFC\_SIENA\_SRIOV：Solarflare SFC9000系列SR-IOV支持
- CONFIG\_ZRAM：压缩RAM块设备支持
- CONFIG\_ZRAM\_DEF\_COMP\_LZ4：默认内存压缩器(lz4)
- 启用所有EDAC内核选项：
  - CONFIG\_EDAC：EDAC（错误检测及校正）报告
  - CONFIG\_EDAC\_\*

#### 基本发行版

- aaa\_base：版本15.1
- aaa\_glibc-solibs：版本2.36
- aaa\_libraries：版本15.1
- at：版本3.2.3
- bind：版本 9.18.6
- btrfs-progs：版本 5.19.1
- ca-certificates：版本 20220622
- cifs-utils：版本 7.0
- coreutils：版本 9.1
- cracklib：版本 2.9.8
- cryptsetup：版本 2.5.0
- curl：版本 7.85.0
- cyrus-sasl：版本 2.1.28
- dbus：版本 1.14.0
- dhcpcd：版本9.4.1
- dmidecode：版本 3.4
- docker：版本 20.10.17 （CVE-2022-29526 CVE-2022-30634 CVE-2022-30629 CVE-2022-30580 CVE-2022-29804 CVE-2022-29162 CVE-2022-31030）
- etc：版本 15.1
- ethtool：版本 5.19
- eudev：版本3.2.11
- file：版本 5.43
- findutils：版本 4.9.0
- firefox：版本105.0.r20220922151854-x86\_64 (AppImage)
- fuse3: 版本 3.12.0
- gawk：版本 5.2.0
- gdbm: 版本 1.23
- git：版本 2.37.3
- glib2：版本 2.72.3
- glibc：版本 2.36
- glibc-zoneinfo：版本 2022c
- gnutls：版本 3.7.7
- gptfdisk: 版本 1.0.9
- grep：版本 3.8
- gzip：版本 1.12
- hdparm：版本 9.65
- htop：版本 3.2.1
- icu4c：版本 71.1
- inotify-tools：版本 3.22.6.0
- iperf3：版本 3.11
- iproute2：版本 5.19.0
- iptables：版本 1.8.8
- jemalloc：版本 5.3.0
- json-c：版本0.16\_20220414
- json-glib：版本1.6.6
- kmod：版本 30
- krb5：版本 1.20
- libaio：版本 0.3.113
- libarchive：版本3.6.1
- libcap-ng：版本 0.8.3
- libcgroup：版本 3.0.0
- libdrm：版本 2.4.113
- libepoxy：版本 1.5.10
- libffi：版本 3.4.2
- libgcrypt：版本 1.10.1
- libgpg-error：版本 1.45
- libidn：版本 1.41
- libjpeg-turbo：版本 2.1.4
- libmnl：版本 1.0.5
- libnetfilter\_conntrack：版本1.0.9
- libnfnetlink：版本 1.0.2
- libnftnl：版本 1.2.3
- libnl3：版本 3.7.0
- libpng：版本 1.6.38
- libssh：版本 0.10.4
- libtasn1：版本 4.19.0
- libtirpc：版本 1.3.3
- liburcu：版本 0.13.1
- libusb：版本 1.0.26
- libwebp：版本 1.2.4
- libxml2：版本 2.9.14
- libxslt：版本 1.1.36
- libzip：版本 1.9.2
- logrotate：版本 3.20.1
- lsof：版本 4.95.0
- lzip：版本 1.23
- mc：版本 4.8.28
- mcelog：版本 189
- nano：版本 6.4
- nfs-utils：版本 2.6.2
- nghttp2：版本 1.49.0
- nginx：版本 1.22.0
- ntfs-3g：版本 2022.5.17
- ntp: 版本 4.2.8p15
- oniguruma：版本 6.9.8
- openssh：版本 9.0p1
- openssl：版本 1.1.1q （CVE-2022-1292 CVE-2022-2097 CVE-2022-2274）
- openssl-solibs：版本 1.1.1q （CVE-2022-1292）
- p11-kit: 版本 0.24.1
- pciutils：版本 3.8.0
- pcre2：版本 10.40
- perl：版本 5.36.0
- php：版本 7.4.30 （CVE-2022-31625 CVE-2022-31626）
- pkgtools：版本 15.1
- rpcbind：版本 1.2.6
- rsync：版本 3.2.6
- samba：版本 4.17.0 （CVE-2022-2031 CVE-2022-32744 CVE-2022-32745 CVE-2022-32746 CVE-2022-32742）
- sqlite：版本 3.39.3
- sudo：版本 1.9.11p3
- sysfsutils：版本 2.1.1
- sysstat：版本 12.6.0
- sysvinit-scripts：版本 15.1
- talloc：版本 2.3.4
- tar: 版本 1.34
- tevent：版本 0.13.0
- tree：版本 2.0.2
- util-linux：版本 2.38.1
- wayland：版本 1.21.0
- wget：版本 1.21.3
- xfsprogs：版本 5.18.0
- xz：版本 5.2.6
- zlib: 版本 1.2.12

["WireGuard"和"WireGuard"徽标是Jason A. Donenfeld注册的商标。](https://www.wireguard.com/)

## 补丁

安装 [Unraid Patch 插件](https://forums.unraid.net/topic/185560-unraid-patch-plugin/) 后，访问 ***工具 → Unraid Patch*** 获取以下补丁/紧急修复：

- 一部分安全更新，详情请参阅 [这篇博客文章](https://unraid.net/blog/cvd)。我们建议升级到最新稳定版本以获取其他安全更新。
