# 版本 6.12.12 2024-08-20

## 升级说明

Unraid 6.12 继续从 Unraid 7 的开发工作中受益，此版本包括了几个从 Unraid 7 回溯的错误修复，以及一个针对 curl 的安全修复。

### 已知问题

#### 过时的插件

过时的插件可能会导致问题，我们建议保持它们的最新状态。

#### 与macvlan相关的调用跟踪和崩溃

如果您收到与 macvlan 相关的调用跟踪（或任何无法解释的崩溃），第一步我们建议您导航到 ***设置 > Docker***，切换到**高级**视图，然后将 **Docker 自定义网络类型** 从 **macvlan** 更改为 **ipvlan**。这是自版本 6.11.5 以来 Unraid 随附的默认配置，应该适用于大多数系统。

请注意，某些用户报告在使用某些路由器（Fritzbox）进行端口转发时遇到问题，并且在 ipvlan 模式下使用高级网络管理工具（Ubiquity）时功能受到限制。如果这影响到您，请查看自 Unraid 版本 [6.12.4](6.12.4.md#fix-for-macvlan-call-traces) 起提供的替代解决方案。

#### 由于jumbo frames导致的网络问题

如果您有任何类型的网络问题，请确认您没有启用 Jumbo 桢。导航到 ***设置 > 网络设置 > eth0*** 并确认 **期望的 MTU** 为 1500。有关更多信息，请参阅 [关于 Jumbo 框架的常见问题警告](https://forums.unraid.net/topic/120220-fix-common-problems-more-information/page/2/#comment-1167702)。

#### 由于Realtek网卡导致的问题

升级的内核修复了与 Jumbo 框架和内核中 Realtek 8125 驱动程序的死锁问题。然而，我们仍然建议遵循上述关于 Jumbo 框架的建议。

如果您继续遇到网络稳定性问题，并且\_**工具 > 系统设备**\_ 显示您拥有 Realtek 以太网控制器，请获取显示的零件号并搜索社区应用，看看是否有专用的 Realtek 驱动程序插件。有关更多信息，请参阅 [Realtek 驱动程序插件支持页面](https://forums.unraid.net/topic/141349-plugin-realtek-r8125-r8168-and-r81526-drivers/)。

#### 其他问题？

我们强烈推荐安装**Fix Common Problems**插件，因为它会警告您常见配置问题。

如果您遇到其他崩溃或稳定性问题，请导航到 ***设置 > 系统日志服务器*** 并启用 **镜像系统日志到闪存**。这将在您的 USB 闪存启动设备上造成额外的磨损，但在崩溃后收集日志短期内是有用的。

下次重启后，导航到\_**工具 > 诊断**\_并下载您的匿名诊断（从版本6.12.5起，诊断会自动包含镜像到闪存驱动器的日志）。

最后，在 [常规支持](https://forums.unraid.net/forum/55-general-support/) 下开始一个新主题，并提供问题的所有详细信息。一旦问题解决，请务必禁用 **镜像系统日志到闪存**。

### 回滚

如果回滚到 6.12.11 之前的版本，请参见 [6.12.11 的发行说明](6.12.11.md#rolling-back)。

## 与 [6.12.11](6.12.11.md) 的更改

### 漏洞修复和改进

- 通过将默认 *Docker PID 限制* 添加到 ***设置 > Docker 设置*** 来防止 Docker 分叉炸弹
- shfs: 修复 "分裂层级 0"（手动分裂层级）退化问题
- 移除 keys.lime-technology.com 的硬编码 host 文件条目
- 使用 "go 链接" 链接到文档
- 修复 UPS 设置页在配置包含空值时的问题
- update.php：使用后释放文件指针
- 诊断：匿名化 IPv6 地址
- 修复：停止并重新启动阵列后，nfsd 未运行
- 修复：删除共享后未从 SMB 和 NFS 中删除
- 修复：仅在英文中保存路由
- rc.S 脚本中的启动改进：
  - 自动修复引导扇区备份
  - 如果无法继续引导，明确卸载所有文件系统
- 在共享页面按自然顺序排序用户
- webgui: 替换 document.write() 的用法
- 修复帮助文本中的拼写错误
- 删除已废弃的 /etc/apcupsd/doshutdown 脚本
- UserEdit：在 Ed25519、FIDO/U2F Ed25519 和 RSA 之外，支持 SSH 密钥类型 DSA、ECDSA 和 FIDO/U2F ECDSA
- 修复：PHPSettings.page： 修复不一致的 PHP 错误报告默认值
- 仪表板：在校验/同步时弱化消息

### Linux kernel

- 版本 6.1.103

### 基本发行版

- curl：版本 8.9.1 (CVE-2024-7264)

## 补丁

安装 [Unraid Patch 插件](https://forums.unraid.net/topic/185560-unraid-patch-plugin/) 后，访问 ***工具 → Unraid Patch*** 获取以下补丁/紧急修复：

- 一部分安全更新，详情请参阅 [这篇博客文章](https://unraid.net/blog/cvd)。我们建议升级到最新稳定版本以获取其他安全更新。
