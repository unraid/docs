---
sidebar_position: 9
---

# 系统

## 我需要获得构建/配置系统的帮助。我应该去哪里？

如需获得为 Unraid OS 创建特殊构建的帮助，请查看我们的 [Compulsive Design 论坛](https://forums.unraid.net/forum/35-unraid-compulsive-design/)。

我们的社区非常乐于帮助用户创建他们的终极 Unraid 系统。

## Unraid 是否支持硬件 RAID 控制器？

虽然一些用户能够使用 RAID 控制器，但部分功能可能出现错误。当使用硬件 RAID 控制器时，磁盘温度或某些 SMART 值可能无法正确识别。

因此，我们仅正式支持使用非 RAID 控制器来管理存储设备。大多数 RAID 存储控制器可以通过更新固件转换为基本的 HBA 设备（完全禁用 RAID），但您需要自行搜索以确定您的控制器是否支持此功能。

## 我可以在 Unraid 上的虚拟机中使用 HASP 密钥吗？多个虚拟机如何工作？

如果 HASP 密钥是 USB 加密狗，则一次只能将其分配给一个虚拟机。两个虚拟机无法同时运行并访问同一个密钥。

此外，根据设备的工作方式，您可能需要将整个 USB 控制器分配给要使用密钥的虚拟机。在购买我们的软件之前，您应当使用试用许可证进行测试，因为 USB 设备在虚拟机中的工作方式并不完全相同。

## 我的 USB 闪存出现故障，并且我没有备份。如何恢复我的配置？

[Unraid Connect](../connect/index.md) 支持闪存备份，帮助防止闪存驱动器损坏导致的配置丢失。若您没有配置闪存备份，请按如下步骤操作。

首先，您需要获取一个新的闪存设备。请记住使用来自 Kingston、PNY、Lexar 或 Samsung 等制造商的优质设备。其次，您需要找到包含您之前闪存设备注册密钥的电子邮件。

最后，您需要在新的闪存设备上安装 Unraid，启动Unraid服务器，然后在新闪存上安装旧的注册密钥（通过 工具 → 注册 页面）。然后您可以申请并安装替换密钥。

关于您的阵列配置，如果您记得驱动器分配（哪些磁盘分配到哪些插槽），您应该能够简单地重新分配它们并启动阵列。

您需要重新配置共享、用户和其他系统设置，但您的数据应该完好无损。

如果您无法记住驱动器分配，[请在论坛上发帖寻求进一步帮助（在 General Support 下）](https://forums.unraid.net/forum/55-general-support/)。

## 如果我忘记了 root 密码该怎么办？

请参阅 [重置您的 Unraid 密码](../manual/users/reset-password.md)

_重要提示：此过程仅适用于用户密码。如果您加密驱动器并忘记了密码，很遗憾，您将无法恢复数据。Lime Technology 或任何人都无法恢复此密码。请记住密码或将其写在安全、私密的地方！_

## 如何从头开始完全重装 Unraid OS？如何擦除现有配置/文件系统？

1. 确保系统上没有您想要或需要的数据。
2. 停止阵列并关闭服务器。
3. 移除 USB 闪存设备。
4. 使用 Windows 或 Mac 计算机，使用我们网站上的 USB Flash Creator 工具重新格式化闪存并安装 Unraid OS。
5. 将闪存重新安装到服务器中并启动它。
6. 点击 WebGUI 右上角的"终端"图标。
7. 在命令行中，输入：lsblk
8. 记下所有存在的设备，不包括您的 USB 闪存设备。
9. 现在对列表中的每个设备（不包括 USB 闪存设备），输入以下命令：wipefs /dev/sdX（将 X 替换为上一步中设备的字母）。这将从设备中删除文件系统，以便 Unraid OS 可以重新格式化它，注意：此操作将**永久删除**您的文件。
10. 现在按照正常程序继续重新配置 Unraid OS。

## 重启分配了 AMD 显卡的 Windows 10 虚拟机后显卡不工作。我该怎么办？

这是由于许多 AMD GPU 不支持功能级重置导致的。推荐使用 英伟达 GPU，因为它们没有这个问题。解决此问题的一种方法是每次关闭虚拟机之前从虚拟机中弹出 GPU。您可以从 Windows 右下角找到这个选项，就是弹出USB存储设备的地方。只需弹出 GPU，然后使用另一台机器从 Unraid WebGUI 关闭虚拟机。这样应该可以解决问题。

## 我的 CPU 没有集成显卡，如何将主 GPU 传递给虚拟机？

这并不容易，但幸运的是 SpaceInvaderOne [在我们的论坛上提供了视频指南！](https://forums.unraid.net/topic/51230-video-guidehow-to-pass-through-an-nvidia-gpu-as-primary-or-only-gpu-in-unraid/)

## 如何向系统中添加更多的存储控制器？

Unraid 可以轻松地跨系统中的多个控制器扩展存储。控制器必须作为标准 HBA 运行，而不是 RAID 控制器。大多数 RAID 控制器提供了一个选项，可以刷新固件或重新配置卡来以这种方式运行。

## Unraid 是否支持各种 RAID 类型，如 RAID1/5/6/10？

Unraid 将存储管理在两个独立的部分：阵列和缓存。阵列本身使用专用的奇偶校验设备，类似于 MAID。

阵列不能配置为传统的 RAID 方法，如 RAID 1/5/6/10。

缓存使用 btrfs 创建。当存在多个磁盘时，缓存称为"池"，默认配置为使用 btrfs RAID1，这与传统的 RAID1 略有不同。缓存可以选择配置为使用 btrfs RAID 5/6/10，但 btrfs 上的 RAID 5/6 仍被认为不稳定，因此不建议用于生产环境。

## 我的系统崩溃，但日志中没有包含该事件。如何获取支持？

有时系统硬崩溃可能会阻止您获取日志中对诊断问题至关重要的信息。如果您无法通过远程连接获取日志，您需要使用本地连接。将至少一个显示器和键盘连接到服务器，并启动到非 GUI 模式。在出现登录提示后，以用户"root"和您设置服务器时设置的密码登录（如果未设置密码，请留空并再次按 Enter）。从命令行，输入以下命令：

```shell
tail /var/log/syslog -f
```

这将开始将系统日志直接打印到显示器上。现在像平常一样使用服务器。当崩溃发生时，拍下显示器上可见内容的照片，并将其发布在支持论坛中。这将让我们对问题有更深入的了解。

## 有没有办法禁用 br0 桥接？

当然有！只需前往 设置 → 网络设置 页面即可禁用网络桥接。请注意，这将导致虚拟机出现问题（例如失去从虚拟机到宿主机通信的能力）。

## 如果我使用手动方法配置了闪存设备，如何启用 UEFI 引导模式？

只需从闪存驱动器根目录的 EFI 文件夹中删除破折号符号，然后确保您的主板 BIOS 配置为引导 UEFI。

## 我在将 RTX GPU 分配给虚拟机时遇到问题

在排除虚拟机/硬件直通问题时，请在论坛上寻求帮助，但关于这些较新设备有一点值得注意。这些 GPU 在 GPU 中内置了 USB 控制器。这使它可以与 USB 集线器一起使用， Windows 虚拟机可以更自然地交互这些设备（例如支持热插拔 USB 设备）。但是，建议您将此设备隔离以确保其驱动程序未与 Unraid OS 一起加载。要隔离设备，请执行以下步骤：

1. 在 工具 → 系统设备 页面上找到包含您的 GPU 及其其他设备的 IOMMU 组。

2. 注意括号中指示的供应商和产品 ID。
例如：

```shell
[10de:1f08] 02:00.0 VGA compatible controller: NVIDIA Corporation Device 1f08 (rev a1)

[10de:10f9] 02:00.1 Audio device: NVIDIA Corporation Device 10f9 (rev a1)

**[10de:1ada]** 02.00.2 USB controller: NVIDIA Corporation Device 1ada (rev a1)

**[10de:1adb]** 03:00.3 Serial bus controller [0c80]: NVIDIA Corporation Device 1adb (rev a1)
```

3. 导航到闪存设备设置页面（在主页面选项卡上）。

4. 点击闪存设备。

5. 通过在所选引导模式中添加以下内容来编辑 Syslinux 配置：

```shell
vfio-pci.ids=[####:####],[####:####]
```

例如：

```shell
append vfio-pci.ids=10de:1ada,10de:1adb initrd=/bzroot,/bzroot-gui
```

6. 应用更改并重启服务器。

7. 编辑或创建您的虚拟机，您现在将看到这些附加的 PCI 设备可供分配给您的虚拟机，而无需手动编辑您的 XML。

## Unraid 是否有一种分配功能，可以记住驱动器上的坏扇区以防止写入？

硬盘驱动器和 SSD 使用 SMART 数据来跟踪坏扇区并防止写入。这是底层硬件的原生功能。也就是说，您应尽快更换显示大量的坏扇区/重新分配的扇区的设备。如果您不确定，请尝试在我们的 General Support 论坛中发帖，并附带有问题的驱动器的 SMART 数据，我们的社区可以帮助您确定下一步该怎么做。

## 我当前有一个使用 MBR 样式分区表格式化的设备阵列，想要转换为 GPT。我该怎么做？

任何 2TB 或更小的设备使用 MBR 样式分区表。

任何大于 2TB 的设备使用 GPT 样式分区表。

对于 Unraid OS 6.8.x 及更早版本：

`任何存储设备的分区 1 的起始位置是从设备开始的 32KiB（无论是 MBR 还是 GPT）。`

从 Unraid OS 6.9 开始：

`旋转设备（如HDD）的分区 1 的默认起始位置是从设备开始的 32KiB（无论是 MBR 还是 GPT）。`

`非旋转设备（如SSD）的分区 1 的默认起始位置是从设备开始的 1MiB（无论是 MBR 还是 GPT）`

若您有有效的奇偶校验，并希望保留数据：

必须首先更新并重建奇偶校验。**逐个**更新每个数据设备并重建奇偶校验。

对于这种升级，我们建议每次都在"维护模式"下开始执行更新和重建。这将确保在此过程中不会写入设备。在此过程结束时，原始存储设备应保持完好。

还强烈建议下载闪存备份：Main/Flash/Flash Backup。 