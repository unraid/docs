---
sidebar_position: 3
sidebar_label: 远程访问
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import RemoteAccessDynamic from './partials/remote-access/dynamic.mdx';
import RemoteAccessStatic from './partials/remote-access/static.mdx';

# 远程访问

从任何地方远程访问您的 Unraid WebGUI，解锁安全的基于浏览器的访问。这一功能对于在家外管理服务器非常理想——不需要复杂的网络或 VPN Tunnel 设置。对于更高级的需求，如连接到 Docker 容器或访问网络驱动器，仍建议使用 VPN Tunnel。

:::important[Security 提醒]

在启用远程访问之前，请确保您的 root 密码是强且唯一的。如有需要，请在 **用户** 页面上进行更新。此外，保持您的 Unraid 操作系统更新至最新版本，以防范安全漏洞。[了解更多关于更新 Unraid 的信息](../unraid-os/system-administration/maintain-and-update/upgrading-unraid.mdx)。

:::

通过 Unraid Connect 提供的远程访问：

- **便利性** - 通过安全的云托管连接快速从任何地方访问您的服务器管理界面。
- **安全性** - 动态访问模式仅在必要时允许对互联网的访问，帮助减少自动化攻击的风险。
- **简易性** - 对于基本管理任务，无需手动端口转发或 VPN 客户端设置。

:::tip

对于全面的网络访问或高级使用案例，请考虑设置[Tailscale](../unraid-os/system-administration/secure-your-server/tailscale.mdx)或 VPN 解决方案。

:::

---

## 初步设置

要启用远程访问：

1. 在 Unraid WebGUI 导航到***设置 → 管理访问***。
2. 检查 **HTTPS 端口**（默认：443）。如果此端口正在被使用（例如，由 Docker 占用），请选择一个未使用的端口号，如 3443、4443 或 5443。
3. 如果更改了任何设置，请点击**应用**。
4. 在**CA 签名证书文件**下，点击**提供**以生成受信任的证书。

您的 Unraid 服务器将准备好通过 WebGUI 接受使用配置端口和受信任证书的安全远程连接。

---

## 选择远程访问类型

Unraid Connect 提供两种模式：

<Tabs>
  <TabItem value="动态" label="动态远程访问" default>
    <RemoteAccessDynamic />
  </TabItem>

  <TabItem value="静态" label="静态远程访问">
    <RemoteAccessStatic />
  </TabItem>
</Tabs>

| 功能                         | 动态远程访问          | 静态远程访问    |
| -------------------------- | --------------- | --------- |
| %%WebGUI\|web-gui%% 向互联网开放 | 仅在启用时           | 始终        |
| 攻击面                        | 最小化             | 最大化       |
| 自动化                        | 通过 Connect 自动开关 | 手动设置，总是开启 |
| %%UPnP\|upnp%% 支持          | 可以              | 可以        |
|                            | **推荐给大多数人**     |           |

## 动态远程访问设置

要设置动态远程访问：

1. 在***设置 → 管理访问 → Unraid API***中，选择远程访问下拉菜单中的动态选项：
   - **动态 - UPnP：** 使用%%UPnP|upnp%%自动打开和关闭随机端口（需要在路由器上启用%%UPnP|upnp%%）。
   - \*\*动态 - 手动端口转发：\*\*需要您手动在路由器上转发选定的端口。

2. 导航到 [Unraid Connect](https://connect.myunraid.net/)，并进入管理或服务器详细页面。

3. 如果您的服务器当前无法从您的位置访问，则**动态远程访问**卡片将显示一个按钮。

4. 点击按钮以启用 WAN 访问。如果使用 %%UPnP|upnp%%，将创建一个新端口转发租约（通常为 30 分钟）并在活动期间自动续订。

5. 该卡将显示当前状态和 UPnP 状态。

6. 在 10 分钟不活动后 - 或者如果您点击 **禁用远程访问** - 将自动撤销互联网访问。%%UPnP|upnp%% 租约也会被移除。

---

## 使用 UPnP（通用即插即用）

UPnP 自动化了端口转发，简化了远程访问而无需手动路由器配置。

配置 UPnP：

1. **在您的路由器上启用 %%UPnP|upnp%%。**
   确保您的路由器支持 %%UPnP|upnp%% 并确认在路由器设置中已启用。

2. **在 Unraid 中启用 %%UPnP|upnp%%。**
   前往 ***设置 → 管理访问*** 并更改 **使用 %%UPnP|upnp%%** 为 **是**。

3. **在 Unraid Connect 中选择 %%UPnP|upnp%%。**
   在 Unraid Connect 设置页面，选择远程访问选项为 %%UPnP|upnp%%（选择动态或始终开启）然后点击 **应用**。

4. **验证端口转发（仅限“始终打开”）。**
   点击 **检查** 按钮。如果成功，您将看到“您的 Unraid 服务器可从互联网访问”的消息。

   对于动态转发，需要点击[Unraid Connect](https://connect.myunraid.net/)中的 **启用动态远程访问** 以允许访问。

:::caution\[Troubleshooting]

如果在重新加载时设置从 %%UPnP|upnp%% 更改为手动端口转发，Unraid 可能无法与您的路由器通信。请仔细检查 %%UPnP|upnp%% 是否已启用，并考虑更新您的路由器固件。

:::

---

## 使用手动端口转发

手动端口转发提供更大的控制，并且适用于大多数路由器。

配置手动端口转发：

1. \*\*选择一个WAN端口：\*\*选择一个1000以上的随机端口号（例如13856或48653），而不是使用默认的443。

2. **在 Unraid 中应用设置：**点击**应用**以保存您选择的端口。

3. **配置您的路由器：** 在您的路由器上设置一个端口转发规则，将您选择的 WAN 端口指向服务器的 HTTPS 端口。Unraid 界面提供正确的端口和 IP 地址。

   某些路由器可能要求 WAN 端口和 HTTPS 端口一致。如果是这样，请为两者使用相同高随机数。

4. **验证端口转发（仅限“始终打开”）：** 按 **检查** 按钮。如果一切正常，您将看到“您的 Unraid 服务器可从互联网访问”的消息。

   对于动态转发，请确保点击 [Unraid Connect](https://connect.myunraid.net/) 中的 **启用动态远程访问** 以开启访问。

5. **访问您的服务器：**登录 [Unraid Connect](https://connect.myunraid.net/)，然后点击**管理**链接以远程连接到您的服务器。

---

## 启用安全本地访问

安全本地访问确保所有连接到您的 Unraid WebGUI 的连接，即使在您的家庭或办公室网络内，也通过 HTTPS 加密，从而保护所有敏感信息，例如登录凭据和配置数据。

安全本地访问的好处包括：

- **加密** - 浏览器与服务器之间交换的所有数据都受到保护。
- **一致性** - 本地和远程访问使用相同的安全 URL。
- **合规性** - 遵循保护管理界面的安全最佳实践。

启用安全本地访问：

1. 转到***设置 → 管理访问***。
2. 在**CA 签名证书**部分，检查 DNS 重绑定警告。
   - 如果没有显示警告，将**使用 SSL/TLS** 设置为 **严格**。
   - 如果出现警告，请查看 [DNS 重绑定保护](../unraid-os/system-administration/secure-your-server/securing-your-connection.mdx#dns-rebinding-protection)。

:::important

当 %%SSL|ssl%%/%%TLS|tls%% 设置为严格时，客户端设备必须解析服务器的 DNS 名称。如果您的互联网连接失败，可能会失去对 %%WebGUI|web-gui%% 的访问。请参阅[在 DNS 故障时访问您的服务器](../unraid-os/system-administration/secure-your-server/securing-your-connection.mdx#accessing-your-server-when-dns-is-down)以了解恢复步骤。

:::
