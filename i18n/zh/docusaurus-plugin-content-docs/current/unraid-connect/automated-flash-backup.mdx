---
sidebar_position: 2
sidebar_label: 自动闪存备份
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# 自动闪存备份

备份您的 Unraid 闪存驱动器对于快速恢复因硬件故障、意外删除或数据损坏等问题至关重要。虽然本地备份（如将闪存驱动器复制到其他 USB 设备或网络共享）可以轻松访问和控制，但它们可能会受到盗窃、火灾或可能影响整个设置的硬件故障的影响。另一方面，云备份为您的配置提供安全的异地存储，保护您免受本地灾难的影响，并允许您从任何地方恢复。

与专注于用户数据、VMs或Docker容器的传统备份不同，闪存备份特别保留您的Unraid OS配置、许可和系统设置。这一重点使您能够迅速恢复服务器的操作，而无需从头开始。Unraid Connect允许自动、基于云的OS配置备份。如果闪存设备出现故障，您可以使用[Unraid USB闪存创建工具](https://unraid.net/download)快速恢复您的最新备份。

使用 Unraid Connect 时，闪存备份是完全可选的。

:::tip

使用本地和云备份方法以获得最大保护效果。云备份提供了本地解决方案所不具有的额外弹性层。

:::

## 数据收集和隐私

<details>
  <summary><strong>点击查看收集了哪些数据以及我们如何处理</strong></summary>

  Unraid Connect在使用闪存备份时严肃对待您的隐私和数据：

  <h4>目的</h4>

  Flash 备份仅保留恢复 Unraid OS 环境所需的配置文件。这样有助于在闪存设备发生故障时快速恢复并保持服务连续性。

  <h4>数据收集</h4>

  备份仅包括配置文件，确保排除敏感信息，例如密码和%%WireGuard|wireguard%% 密钥。Docker模板XML文件可能是备份的一部分，并可能包含特定应用程序的凭据。

  <h4>数据保留</h4>

  仅保留最新的备份。如果备份超过某些限制——特别是如果单个文件超过10 MB或总存储库大小超过100 MB——它将被删除并重新创建。当您停用闪存备份功能或在一定时间不活动后，备份也会被移除。

  <h4>数据共享</h4>

  闪存备份数据绝不会与第三方共享。它仅用于为您提供备份和恢复服务。
</details>

## 启用闪存备份

Unraid Connect 在完整加密可用之前，不包括敏感数据（如帐户密码和 %%WireGuard|wireguard%% 密钥）；然而，Docker 模板 XML 文件（可能包含应用程序凭据）是包括在内的。加密解决方案正在开发中。

启用闪存备份：

1. 前往 ***设置 → 管理访问 → Unraid API***。

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![闪存备份激活](/img/flashbackupbutton.png)
</div>

2. 在**闪存备份**下，点击**激活**。
3. 等待激活和初始备份完成。完成后状态会显示 **已激活：最新**。

激活后，任何配置更改将在1-2分钟内自动备份至云端。

:::important

备份不包括 config/shadow 和 config/smbpasswd 文件。用户帐户会被保留，但密码不会。在恢复后，您需要重置所有用户密码，包括 root 密码。%%WireGuard|wireguard%% 密钥也未包括在内。

:::

Flash 备份旨在存储必要的配置文件，而不是闪存盘的完整副本。它不会备份临时文件（例如日志）或应用程序二进制文件。插件配置包括在内，但应用程序文件将在启动时需要重新下载。单个文件支持最多 10 MB 的备份；如果总备份超过 100 MB，就会被删除和重新创建。

## 恢复闪存备份

要恢复您的配置：

1. 登录 Unraid Connect。
2. 在Dashboard上选择**详细信息**。
3. 在闪存备份框中，点击**生成闪存备份**。
4. 系统会创建一个包含您的OS配置和发布版本的zip文件。
5. 点击**下载闪存备份**以获取zip文件。
6. 使用[Unraid USB闪存创建工具](https://unraid.net/download)将备份恢复到新的闪存驱动器。

### 恢复后步骤

使用恢复的闪存驱动器启动后：

- 在 ***设置 → 管理访问 → Unraid API*** 中重新激活闪存备份。
- 在用户页面为所有用户（包括root）重置密码。
- 为**设置→VPN 管理器**中的每个%%VPN Tunnel|vpn-tunnel%%和对等方生成新密钥并下载更新的客户端配置。
- 如果在启动后无法立刻使用互联网访问，则在恢复连接后通过 ***Apps → Previous Apps*** 重新安装插件。配置文件将准备好使用。

## 禁用闪存备份

要关闭闪存备份：

1. 在 ***设置 → 管理访问 → Unraid API*** 中，点击 **停用** 闪存备份。
2. 在确认对话框中，如果您希望立即删除备份，请勾选 **也删除云备份**。否则，备份将在空闲一段时间后自动删除。

## 隐私与安全

### 备份加密

当前，Flash 备份存储在云中且未加密。作为预防措施，备份中从不包括敏感数据，包括所有用户和 root 密码以及所有 %%WireGuard|wireguard%% 密钥。

### 敏感数据政策

为保护您的隐私，以下内容**绝不会**存储在云备份中：

- Unraid root或用户账户密码
- 公共、私有或共享%%WireGuard|wireguard%%密钥

:::note\[Reminder]

Flash 备份仅用于配置恢复。始终为数据和关键密钥采纳额外的备份策略。

:::

---

\* “%%WireGuard|wireguard%%”和“%%WireGuard|wireguard%%”徽标是Jason A. Donenfeld的注册商标。
