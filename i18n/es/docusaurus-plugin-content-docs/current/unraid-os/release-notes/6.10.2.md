## Versión 6.10.2 2022-05-27

### Posible corrupción de datos con el controlador tg3 cuando Intel VT-d está habilitado

La combinación del kernel Linux 5.15, el controlador tg3 y el Intel VT-d habilitado parece estar causando corrupción de datos. Esto ha sido verificado en varias plataformas que incluyen una NIC Broadcom NetXtreme Gigabit Ethernet (nota: puede haber otras). Este lanzamiento incluye la siguiente solución alternativa:

Muy temprano en el inicio del servidor (rc.S) si se detecta que Intel VT-d está habilitado,
entonces el script incondicionalmente creará el archivo:

`/etc/modprobe.d/tg3.conf`

con el siguiente contenido:

`lista negra tg3`

Por lo tanto, por defecto si VT-d está habilitado, es decir, no se ha deshabilitado ni en la BIOS ni a través del kernel "intel\*iommu=off", entonces vamos a poner en la lista negra el controlador tg3 en todas las plataformas. ¿Qué pasa si alguien tiene una plataforma donde el tg3 no les causa ningún problema con VT-d activado? En este caso, deben crear un archivo vacío en su dispositivo flash:

`config/modprobe.d/tg3.conf`

Cuando la secuencia de inicio continúe, llegará al punto donde
se ejecuta:

`instalar -p -m 0644 /boot/config/modprobe.d/* /etc/modprobe.d`

Un archivo *en blanco* tg3.conf almacenado en el flash efectivamente
des-lista negra.

Habrá usuarios que perderán la conectividad de red porque su NIC está en la lista negra. Si está usando una plataforma problemática, debe ingresar a su BIOS y deshabilitar VT-d. Si esta es una plataforma sin problemas, entonces necesitará crear el archivo tg3.conf en blanco en su directorio flash config/modprobe.d.

Puede llevar algún tiempo identificar e integrar una solución adecuada para este
problema, en cuyo punto eliminaremos el código de auto-listado en negro.

#### Cómo deshabilitar Intel VT-d en HP MicroServer Gen 8 con un E3-1265LV2

Reinicie el servidor y luego:

- Durante el arranque, presione F9 para entrar en la BIOS.
- Una vez cargada la BIOS, ingrese al menú de Opciones del sistema → Opciones del procesador → Intel(R) VT-d
- Póngalo en deshabilitado
- Presione Esc para volver al menú principal nuevamente
- Presione F10 para salir de la BIOS y guardar

El servidor debería arrancar de nuevo como normal. Sombrero de punta al miembro de la Comunidad [Oceanic por las instrucciones](https://forums.unraid.net/topic/124108-unraid-os-version-6102-available/#comment-1132042).

### Cambios relacionados con seguridad

- El navegador Firefox ha sido actualizado a la versión 100.0.2 para abordar una vulnerabilidad de seguridad muy grave. Si usa Firefox, también le sugerimos actualizar en todas las plataformas.
- Hemos solucionado un problema donde el inicio de sesión en WebGUI podía aceptar una contraseña de un
  usuario que no fuera 'root', si ese nombre de usuario incluía la cadena
  'root'.
- El kernel de Linux fue actualizado a 5.15.43 para abordar una vulnerabilidad de "evasión
  de seguridad".

### Otros cambios

- En la página de Acceso a la Gestión, para la configuración "Usar SSL/TLS" cambiamos la palabra "Auto" a "Estricta" en el menú desplegable. Esto describe mejor la acción de esta configuración.
- El administrador de Docker ahora usa la etiqueta Docker para iconos como respaldo.
- El administrador de VM ahora ofrece la opción de usar redes LibVirt además de puentes sin tener que editar el XML del VM.
- Mejorado el manejo de certificados SSL personalizados.
- \[6.10.1] Fic error de regresión: soporte de arranque USB flash desde una partición que no sea la número 1
- otros arreglos de errores variados

## Registro de cambios vs. Unraid OS 6.10.1

#### Distro base

- firefox AppImage: versión: 100.0.r20220519220738 (CVE-2022-1802
  CVE-2022-1529)

#### Núcleo de Linux

- versión 5.15.43-Unraid (CVE-2022-21499)

#### Gestión

- nginx: evitar agregar el número de puerto predeterminado a las URLs de redirección
- nginx: archivo de certificación autofirmado: aceptar nombre común y todos los nombres alternativos
- inicio: solucionar múltiples interfaces de red asignadas con la misma dirección MAC
- inicio: lista negra tg3 por defecto si Intel VT-d está habilitado
- WebGUI: Acceso de gestión: Configuración de usar SSL/TLS: cambiar la palabra 'Auto' a 'Estricto'
- WebGUI: Corregido: smGlue no incluido al seleccionar un controlador
- WebGUI: Corregido: permitir nombres de compartir con ampersand incrustado
- WebGUI: agregar soporte de terminal LXC (para el Plugin LXC)
- WebGUI: la interfaz web de Docker ahora usa la etiqueta Docker para iconos como respaldo
- WebGUI: Administrador de VM: soporte para redes libvirt (hacer redes libvirt accesibles vía gui)
- WebGUI: corregir problema donde el inicio de sesión 'root' funciona con contraseña de
  otro nombre de usuario que incluye la cadena 'root'
- WebGUI: Corrección de ortografía en la página de actualización del sistema operativo: warninging → warning
- WebGUI: revisión del texto de ayuda: correcciones menores

## Parches

Con el [plugin de Parches para Unraid](https://forums.unraid.net/topic/185560-unraid-patch-plugin/) instalado, visite ***Herramientas → Parche de Unraid*** para obtener los siguientes parches / hot fixes:

- Un subconjunto de actualizaciones de seguridad, vea [esta publicación de blog](https://unraid.net/blog/cvd) para más detalles. Recomendamos actualizar a la última versión estable para obtener actualizaciones de seguridad adicionales.
