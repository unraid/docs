# Versión 6.12.8 2024-02-15

## Notas de actualización

Esta versión tiene dos correcciones muy importantes. Primero, actualizamos Docker para incorporar correcciones para su
[reciente aviso de seguridad](https://www.docker.com/blog/docker-security-advisory-multiple-vulnerabilities-in-runc-buildkit-and-moby/).

Segundo, solucionamos un error de caso límite que puede conducir a la pérdida de datos si una unidad de disco añadido recientemente tiene un diseño de partición no estándar. Si agrega una de estas unidades, la segunda vez que inicie el grupo la unidad aparecerá como no formateada. Si esto sucede,
póngase en contacto con soporte y podemos ayudarle con la recuperación de datos. Incluso si no ha encontrado este problema, recomendamos actualizar
para que no se vea afectado al agregar unidades en el futuro.

Esta versión también incluye algunas buenas correcciones en la red, contenedores Docker, soporte de Time Machine y máquinas virtuales, así como una solución para una
desaceleración que algunos sistemas estaban experimentando en el panel de control. También hemos mejorado el manejo de atributos SMART para unidades NVME y SSD.
Detalles a continuación.

### Problemas conocidos

#### Plugins desactualizados

Los plugins desactualizados pueden causar problemas; recomendamos que se mantengan actualizados.

#### Trazas de llamadas y bloqueos relacionados con macvlan

Si estás obteniendo trazas de llamadas relacionadas con macvlan (o realmente cualquier bloqueo inexplicable), como primer paso recomendamos navegar a _**Configuración > Docker**_, cambiar a la vista **avanzada** y cambiar el **tipo de red personalizada de Docker** de **macvlan** a **ipvlan**. Esta es la configuración por defecto que Unraid ha enviado desde la versión 6.11.5 y debería funcionar para la mayoría de los sistemas.

Tenga en cuenta que algunos usuarios han informado problemas con el reenvío de puertos desde ciertos routers (Fritzbox) y una funcionalidad reducida con herramientas de gestión avanzada de redes (Ubiquity) cuando están en modo ipvlan. Si esto le afecta, consulte la solución alternativa disponible desde Unraid [6.12.4](6.12.4.md#fix-for-macvlan-call-traces).

#### Problemas de red debido a tramas jumbo

Si estás teniendo problemas de red de cualquier tipo, confirma que no has habilitado frames jumbo. Navega a _**Configuración > Configuración de Red > eth0**_ y confirma que el **MTU Deseado** es 1500. Para más información consulta la [advertencia de Problemas Comunes para frames jumbo](https://forums.unraid.net/topic/120220-fix-common-problems-more-information/page/2/#comment-1167702).

#### Problemas debido a tarjetas de red Realtek

La actualización del kernel soluciona el problema de deadlock con frames jumbo y el controlador Realtek 8125 incluido. Sin embargo, seguimos recomendando seguir el consejo anterior con respecto a frames jumbo.

Si continúas teniendo problemas de estabilidad de red y _**Herramientas > Dispositivos del Sistema**_ muestra que tienes un controlador ethernet Realtek, obtén el número de parte mostrado y busca Apps de la Comunidad para ver si hay un plugin de driver proporcionado por el proveedor Realtek para ese dispositivo. Para más información, consulta la [página de soporte para plugins de drivers Realtek](https://forums.unraid.net/topic/141349-plugin-realtek-r8125-r8168-and-r81526-drivers/).

#### ¿Otros problemas?

Recomendamos encarecidamente la instalación del plugin **Arreglar Problemas Comunes** ya que te advertirá sobre problemas comunes de configuración.

Si tienes otros bloqueos o problemas de estabilidad, navega a _**Configuración > Servidor Syslog**_ y habilita **Reflejar syslog en el flash**. Esto causará desgaste adicional en tu dispositivo de arranque USB flash, pero es útil a corto plazo para recopilar registros después de un bloqueo.

Después del próximo reinicio, navega a _**Herramientas > Diagnósticos**_ y descarga tus diagnósticos anonimizados (a partir de 6.12.5, los diagnósticos incluyen automáticamente registros que se reflejaron en el dispositivo flash).

Finalmente, inicia un nuevo tema bajo [Soporte General](https://forums.unraid.net/forum/55-general-support/) y proporciona todos los detalles del problema. Una vez resuelto el problema, asegúrate de deshabilitar **Reflejar syslog en el flash**.

### Deshacer cambios

Tenga en cuenta que volver a una versión anterior hará que su sistema sea vulnerable a los problemas de seguridad de Docker y al posible escenario de pérdida de datos mencionado en [notas de actualización](#upgrade-notes).

Si revierte a una versión anterior a la 6.12.6, consulte también las [notas de la versión 6.12.6](6.12.6.md#rolling-back).

## Cambios vs. 6.12.7

Se corrigió un problema relacionado con la actualización desde versiones rc.

## Cambios vs. [6.12.6](6.12.6.md)

### Correcciones de errores y mejoras

- Docker:
  - Corregir las rutas de WG añadidas a la interfaz correcta (br0 o eth0 o bond0)
  - Usar desmontaje "perezoso" del contenedor de Docker para evitar el bloqueo del apagado del array
  - Actualizado para abordar múltiples problemas de seguridad (CVE-2024-21626, CVE-2024-24557)
- Mejoras en la red:
  - Arrancar más rápido comprobando el portador antes de asignar direcciones DHCP
  - Eliminar ceros a la izquierda de las direcciones IPv4 e IPv6
  - Nuevos comandos '/etc/rc.d/rc.inet1 status' y '/etc/rc.d/rc.inet1 status ip' para ayudar con la solución de problemas de red desde la línea de comandos
- Notificaciones: Agregar ntfy.sh a los agentes de notificación
- Mejoras en SMART:
  - Corregir autoprueba NVME
  - Corregir la visualización del atributo SMART 'Tiempo de encendido acumulado, horas:minutos xxxxx:yy'
  - Mostrar KB/MB/GB/TB escritos en Atributos SMART para SSDs
  - Agregar atributo SMART 'Resistencia restante del SSD'
- Registro del sistema:
  - Por defecto, el syslog se copia a la memoria USB del arranque al apagarse, vea _**Configuración > Servidor Syslog**_ para desactivar
  - Los registros de lo anterior y **Mirar syslog a la memoria USB** ahora están disponibles en el próximo arranque en _**Herramientas > Syslog**_ y en diagnósticos
- VM Manager: Corrección para la degradación: si la plantilla de VM se ha actualizado al último tipo de máquina QEMU, no se encontrará al realizar la degradación. Este cambio encuentra la versión actual más reciente para un tipo de máquina dado.
- ZFS: Usar la bandera "-f" durante la importación de zpool para permitir la importación de pools extranjeros
- Otro:
  - Habilitar el arranque EFI por defecto para instalaciones nuevas
  - Corregir la desaceleración en las páginas del Panel de Control y Docker (y reduce las escrituras en el dispositivo flash)
  - Formateo: no inicializar el diseño de partición del dispositivo si ya es válido.
  - Actualizar SO: rediseñadas las páginas de Actualizar SO y Degradar SO, consulte [entrada del blog](https://unraid.net/blog/new-update-os-tool)
  - Corrección de MacOS no puede escribir en 'flash' y restaurar la compatibilidad de Time Machine (cambios de fruit)
  - Permitir que las Aplicaciones de la Comunidad (si están instaladas) inicien automáticamente los contenedores durante una instalación múltiple
  - Formulario de comentarios: cambiar botón HECHO a CANCELAR

### Actualizaciones de paquetes

- docker: versión 24.0.9
- kernel-firmware: versión 20231226\_abfcad8

### Núcleo de Linux

- versión 6.1.74
  - CONFIG\_USB\_SERIAL\_XR: Controlador USB a Serial de MaxLinear/Exar USB
  - CONFIG\_CAN: Soporte de subsistema de bus CAN
  - CONFIG\_CAN\_NETLINK: Controladores de dispositivos CAN con soporte Netlink
  - CONFIG\_CAN\_GS\_USB: Interfaces compatibles con Geschwister Schneider UG y candleLight
  - CONFIG\_SCSI\_LPFC: Soporte de Canal de Fibra Emulex LightPulse

## Parches

Con el [plugin de Parches para Unraid](https://forums.unraid.net/topic/185560-unraid-patch-plugin/) instalado, visite _**Herramientas → Parche de Unraid**_ para obtener los siguientes parches / hot fixes:

- Un subconjunto de actualizaciones de seguridad, vea [esta publicación de blog](https://unraid.net/blog/cvd) para más detalles. Recomendamos actualizar a la última versión estable para obtener actualizaciones de seguridad adicionales.
