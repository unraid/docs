---
sidebar_position: 2
sidebar_label: Configuración de la matriz
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import AddDataDiskParityProtected from './partials/add-data-disk-parity-protected.mdx';
import AddDataDiskNoParity from './partials/add-data-disk-no-parity.mdx';
import ParitySwapWhat from './partials/parity-swap-what.mdx';
import ParitySwapWhen from './partials/parity-swap-when.mdx';
import RemoveDataDiskStandard from './partials/remove-data-disk-standard.mdx';
import RemoveDataDiskParityPreserve from './partials/remove-data-disk-parity-preserve.mdx';
import ArrayCheckParity from './partials/array-check-parity.mdx';
import ArrayCheckRead from './partials/array-check-read.mdx';
import TroubleshootMissingDisks from './partials/troubleshoot-missing-disks.mdx';
import TroubleshootDeviceLimit from './partials/troubleshoot-device-limit.mdx';
import TroubleshootLicenseIssues from './partials/troubleshoot-license-issues.mdx';
import TroubleshootKeyServer from './partials/troubleshoot-key-server.mdx';
import TroubleshootWithdrawnRelease from './partials/troubleshoot-withdrawn-release.mdx';

# Configuración de la matriz

El sistema de almacenamiento de Unraid combina flexibilidad con protección de datos mediante su arquitectura de %%array|array%% y %%cache|cache%%. El %%array|array%% gestiona su almacenamiento principal con protección de %%paridad|parity%% opcional, mientras que los grupos de caché aceleran el rendimiento.

A continuación se presentan algunos principios importantes para la configuración de la matriz:

<details>
  <summary><strong>Always use your largest drive(s) for parity.</strong></summary>

  When you add more disks to your %%array|array%% later, remember that you can't use a data disk that's larger than your %%parity disks|parity-drives%%. It's a good idea to buy the biggest hard drive for your %%parity disks|parity-drives%% at the start. This way, you won't be limited by smaller sizes when expanding later.

  If you use two %%parity disks|parity-drives%%, they can be different sizes. However, keep in mind that no disk in your %%array|array%% can be larger than the smallest %%parity disks|parity-drives%% you have.
</details>

<details>
  <summary><strong>Do not use SSDs in the array - save them for pools or unassigned devices.</strong></summary>

  Unraid does not support TRIM or Discard operations for SSDs in the main array. Over time, this will cause SSD performance to degrade if they are used as array members. For best results, use SSDs in %%cache pools|cache-pool%% or as unassigned devices, where these features are supported and long-term performance is maintained. Most modern SSDs, including NVMe, work well in these roles.
</details>

<details>
  <summary><strong>Using a cache will improve array write performance.</strong></summary>

  Instead of writing directly to the main storage, data is first sent to a dedicated disk or a group of disks. This data is then moved to the main storage at scheduled times, usually once a day at 3:40 AM. The great thing is that data saved to the %%cache|cache%% still appears through your %%user shares|user-share%%, so you don't have to change how you access your files.
</details>

<details>
  <summary><strong>Creating a cache pool helps keep your cached data safe.</strong></summary>

  Using only one cache device puts your cached data at risk until it is moved to the main array. To protect your data at all times, use multiple devices configured as a %%cache pool|cache-pool%%. This setup provides redundancy for cached data, reducing the chance of data loss due to a cache device failure.
</details>

<details>
  <summary><strong>SSD cache devices are great for apps and virtual machines.</strong></summary>

  Using SSDs helps applications and virtual machines (VMs) run faster because they can access data more quickly. SSDs work well in a %%cache pool|cache-pool%%, giving you an excellent mix of speed, efficiency, and data security.
</details>

<details>
  <summary><strong>Encryption is turned off by default.</strong></summary>

  If you want to use encryption on your system, you must reformat the disk with an encrypted file system type—this process erases all existing data on the drive. Before enabling encryption, move your data off the disk, change the file system to an encrypted option, format the disk, and then move your data back. For details, see [How to encrypt a drive in Unraid](../../system-administration/secure-your-server/securing-your-data.mdx#how-to-encrypt-a-drive-in-unraid).

  Ten en cuenta que usar cifrado puede dificultar la recuperación de datos si algo sale mal, así que úsalo solo si realmente lo necesitas.
</details>

:::info[Disk Reconocimiento y Flexibilidad de Puerto]

Unraid identifica los discos según sus números de serie y tamaños, no los puertos SATA específicos a los que están conectados. Esto significa que puede cambiar los discos entre diferentes puertos SATA sin afectar sus asignaciones en Unraid. Esta característica es particularmente útil para resolver problemas de hardware, como encontrar un puerto defectuoso o reemplazar cables de alimentación o SATA poco confiables.

:::

:::caution

Tu matriz no iniciará si asignas o conectas más dispositivos de los que permite tu clave de licencia.

:::

## Iniciar/detener la matriz

Cuando su sistema se inicia, generalmente enciende automáticamente el conjunto de discos. Sin embargo, si ha cambiado recientemente la configuración de discos, como agregar un nuevo disco, el conjunto permanecerá apagado para permitirle verificar su configuración.

:::caution

Tenga en cuenta que deberá detener primero el conjunto para hacer cualquier ajuste. Detenerlo apagará completamente todos los contenedores de Docker y comparticiones de red, apagará o hibernará las VM, y sus dispositivos de almacenamiento se desmontarán, haciendo que sus datos y aplicaciones no sean accesibles hasta que reinicie el conjunto.

:::

Para iniciar o detener la matriz:

1. Haga clic en la pestaña **Principal**.
2. Navega a la sección **Operación de la matriz**.
3. Haga clic en **Iniciar** o **Detener**. Es posible que deba marcar la casilla que dice "Sí, quiero hacer esto" antes de continuar.

---

## Operaciones de la matriz

Unraid proporciona varias opciones de mantenimiento y configuración para su conjunto de almacenamiento. Las operaciones clave incluyen:

import DocCardList from '@theme/DocCardList';

<DocCardList
  items={[
  { type: 'link', href: '#adding-disks', label: 'Añadir Discos', description: 'Expandir la capacidad de almacenamiento' },
  { type: 'link', href: '#replacing-disks', label: 'Reemplazar Discos', description: 'Actualizar o cambiar discos fallidos' },
  { type: 'link', href: '#removing-disks', label: 'Eliminar Discos', description: 'Descomisionar o reducir el tamaño del array' },
  { type: 'link', href: '#checking-array-devices', label: 'Verificar dispositivos del array', description: 'Monitorear datos SMART y diagnósticos' },
  { type: 'link', href: '#spinning-disks-down-or-up', label: 'Hacer girar discos hacia abajo o hacia arriba', description: 'Gestionar encendido/apagado del disco' },
  { type: 'link', href: '#reset-the-array-configuration', label: 'Restablecer la configuración del array', description: 'Reconstruir la estructura del array' }
  ]}
/>

---

### Agregando discos

#### Configurando discos nuevos

1. Ve a ***Principal → Dispositivos de la matriz*** en la interfaz.
2. Selecciona el espacio donde deseas agregar el disco y selecciona el disco de la lista desplegable.
3. Por defecto, los nuevos discos del conjunto se formatearán con %%XFS|xfs%%. Si desea usar %%ZFS|zfs%% o %%BTRFS|btrfs%% en su lugar, seleccione su sistema de archivos preferido del menú desplegable.

:::tip[Hot-Swap Característica]

Si está utilizando hardware moderno compatible con Unraid, puede cambiar discos sin apagar su servidor. Esta función, conocida como intercambio en caliente, ha estado disponible en los servidores LimeTech desde el principio.

:::

#### Despejar vs. Pre-despejar

Unraid requiere que los discos estén en un estado limpiado - completamente llenos de ceros y marcados con una firma especial - antes de agregarlos a un conjunto protegido por paridad. Este proceso asegura la integridad de la paridad y mantiene el conjunto en línea durante la preparación del disco.

Clearance is mandatory when adding a data disk to a %%parity|parity%%-protected array. If you are adding a %%parity disk|parity-drives%% or working with an array that does not use %%parity|parity%%, clearance is not required.

La operación de limpiar incorporada escribe ceros en el disco en segundo plano, permitiendo que el conjunto permanezca disponible. Una vez que el proceso está completo, el disco debe formatearse antes de su uso. Este método es eficiente, no requiere herramientas de terceros y es ideal para expansiones rápidas.

Para un enfoque más exhaustivo, la operación de pre-limpieza – disponible a través de complementos como [Pre-limpieza de Dispositivos No Asignados](https://unraid.net/community/apps?q=unassigned+devices#r:~:text=enable%20destructive%20mode.-,Unassigned%20Devices%20Preclear,-dlandon) – realiza una lectura previa para verificar sectores defectuosos, llena el disco con ceros y luego verifica la integridad con una lectura posterior. Este paso adicional ayuda a detectar fallos tempranos del disco, pero toma significativamente más tiempo y requiere la instalación manual del complemento.

**Regla general:** Usa la operación de despeje integrada para adiciones rápidas a tu matriz o elige pre-despeje si deseas un testeo extenso de la salud del disco antes de ponerlo en servicio.

<h4>Comparación entre Despejar y Pre-despejar</h4>

<div style={{ margin: 'auto', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  |                          | Borrar                             | Pre-despejar                               |
  | ------------------------ | ---------------------------------- | ------------------------------------------ |
  | **Propósito**            | Garantiza la compatibilidad básica | Prueba el disco y lo prepara para su uso   |
  | **Velocidad**            | Funciona rápidamente               | Proceso mucho más lento                    |
  | **Impacto en la matriz** | Funciona en segundo plano          | Necesita que el disco sea removido del uso |
  | **Mejor para**           | Ideal para expansiones rápidas     | Genial para chequear discos nuevos         |
</div>

**Despejar** prepara rápidamente un disco para su uso, haciéndolo compatible con tu sistema y permitiéndote agregar almacenamiento en solo unas horas.

**Pre-despejar** toma más tiempo pero proporciona un test exhaustivo, asegurando que un disco nuevo es confiable antes de que se incorpore a tu matriz.

:::caution[Critical Note]

Evita formatear un disco pre-despejado antes de incluirlo en la matriz, ya que esto elimina la firma de despeje.

:::

#### Agregar discos de datos

Agregar discos de datos es una excelente manera de aumentar el espacio de almacenamiento de su conjunto Unraid. Al agregar más discos, puede mantener más archivos, aplicaciones y copias de seguridad, mientras sigue protegiendo sus datos.

:::important[Important Note:]

When adding a new data disk, it must be the same size or smaller than your current %%parity disks|parity-drives%%. If you want to use a larger disk, you'll need to replace the %%parity disks|parity-drives%% first with the larger one, then use the old %%parity disks|parity-drives%% as a data disk.

:::

<details>
  <summary><strong>Cómo agregar un disco de datos</strong></summary>

  ```mdx-code-block

  <Tabs>
    <TabItem value="standard" label="Standard addition (Parity-protected)" default>
      <AddDataDiskParityProtected />
    </TabItem>

    <TabItem value="no-parity" label="Addition without parity">
      <AddDataDiskNoParity />
    </TabItem>
  </Tabs>
  ```
</details>

#### Agregando discos de paridad

%%Parity disks|parity-drives%% are a helpful feature that provide an extra layer of protection for your data. They allow your storage system to recover information if a hard drive fails. While using %%parity disks|parity-drives%% is optional, it's highly recommended to keep your data safe.

:::important\[Requirements]

- **Paridad Única:** El disco debe ser al menos del mismo tamaño que tu disco de datos más grande.
- **Doble Paridad:** Ambos %%parity disks|discos de paridad%% también deben ser al menos del tamaño de tu disco de datos más grande, pero pueden tener tamaños diferentes entre sí.

:::

Agregar un %%parity disk|disco de paridad%% es similar a agregar un disco de datos, pero hay un paso importante a tener en cuenta:

1. Después de seleccionar el %%parity disk|disco de paridad%% y de iniciar tu matriz de almacenamiento, comienza un proceso llamado **cálculo de paridad**.
2. Mientras este proceso se ejecuta, aún puede acceder a sus archivos. Sin embargo, el sistema puede funcionar un poco más lento debido a que está trabajando para calcular la paridad.

<details>
  <summary><strong>In-depth: What is parity and why does it matter?</strong> - Click to expand/collapse</summary>

  %%Parity|parity%% in Unraid protects your data by ensuring that you can recover from a drive failure. With the use of a %%parity disk|parity-drives%%, any single missing disk can be reconstructed by combining the information from all other data drives along with the %%parity|parity%% data.

  Unraid confía en esta paridad en tiempo real para dos propósitos principales:

  - Reconstruir datos cuando un disco falla
  - Corregir errores cuando se encuentra un sector defectuoso

  Esta característica te permite mantener tus datos seguros, incluso cuando los discos eventualmente fallan con el tiempo.
</details>

<details>
  <summary><strong>In-depth: How does Unraid parity work?</strong> - Click to expand/collapse</summary>

  Unraid works with a special bit called the *parity bit*, which is stored for each bit position across all data disks and is managed by a dedicated %%parity disk|parity-drives%%. The %%parity|parity%% is calculated such that the total number of bits in each position across all disks (including the %%parity disk|parity-drives%%) is always an even number, a process known as even parity.

  Así es como se desglosa:

  - Unraid utiliza la operación XOR (OR exclusivo) para este cálculo.
  - Por ejemplo, si tienes cuatro discos y sus 57ª bits son 1, 1, 1, 1, el bit de paridad para esa posición será 0 (porque 1 + 1 + 1 + 1 + 0 = par).
  - Sin embargo, si los 57ª bits son 1, 0, 0, 0, la %%paridad|parity%% de esa posición será 1 (para asegurar que el total siga siendo par).

  When adding a new drive, Unraid first clears it by writing zeros to all bits. This allows for quick inclusion into the protected array since writing zeros does not interfere with the current parity calculations.
</details>

<details>
  <summary><strong>In-depth: How is data reconstructed using parity?</strong> - Click to expand/collapse</summary>

  Unraid puede reconstruir un disco perdido o reparar un sector defectuoso utilizando los siguientes pasos:

  - Lee todas las unidades restantes, incluido el %%parity disk|parity-drives%%.
  - Aplica la %%paridad|parity%% par para resolver los datos faltantes.

  Por ejemplo, si el disco 2 falla:

  - Si los bits relacionados son 1, 1, 1 (además de la %%paridad|parity%%), Unraid calcula: 1 + x + 1 + 1 + 0 = par. Aquí, x debe ser 1 para mantener un total par.
  - Si los bits muestran 1, x, 0, 0, 1 = par, entonces x será igual a 0.

  This %%parity|parity%% feature allows Unraid to "simulate" the missing disk. You can continue using the array as if the drive were still functional. Once you install a new drive in the failed slot, Unraid will recreate all the missing data based on the current state of %%parity|parity%% and the other disks.

  Para asegurar una protección continua y una recuperación efectiva, es importante realizar revisiones regulares de %%paridad|parity-check%%.
</details>

<details>
  <summary><strong>How big does my parity disk need to be?</strong> - Click to expand/collapse</summary>

  Your %%parity disk|parity-drives%% must be **equal to or larger than your largest data disk**. For instance:

  - Si tu disco de datos más grande es de 10TB, tu %%parity disk|parity-drives%% debe tener al menos 10TB.
  - Puedes usar varios tamaños de discos de datos de manera libre, siempre que ninguno supere el tamaño del %%parity disk|parity-drives%%.
</details>

<details>
  <summary><strong>In-depth: How does parity affect write performance?</strong> - Click to expand/collapse</summary>

  Writing to a %%parity|parity%%-protected array involves four disk operations for each write: reading data, reading %%parity|parity%%, writing data, and writing %%parity|parity%%. This process requires a full rotation from each affected drive, so the overall write speed is limited by the slowest drive involved in the operation.

  Adding a faster %%parity disk|parity-drives%% won't necessarily improve write speeds unless you're writing to multiple slow data disks simultaneously, allowing the %%parity disk|parity-drives%% to handle the load. Typically, the write speed is constrained by the slowest data drive being written to.
</details>

<details>
  <summary><strong>In-depth: How does Dual Parity work?</strong> - Click to expand/collapse</summary>

  Dual %%parity|parity%% enables recovery from **two simultaneous disk failures**. In Unraid, the second %%parity disk|parity-drives%% doesn't simply mirror the first. Instead:

  - **Paridad 1:** Emplea cálculos de %%paridad|parity%% estándar XOR (par).
  - **Paridad 2:** Utiliza un algoritmo más complejo (campo de Galois, en lugar de Reed-Solomon como en %%RAID 6|raid6%% tradicional), permitiendo a Unraid reconstruir a partir de cualquier dos discos faltantes al mismo tiempo. Esta característica es significativa para conjuntos más grandes, donde el riesgo de múltiples fallos aumenta. La Doble %%paridad|parity%% mejora significativamente la resistencia sin la sobrecarga adicional de la redundancia reflejada.
</details>

:::caution\[Remember]

When setting up a new data storage system, add your data disks **first**, making sure they all use a compatible file system. **After** placing your data disks, you can add a %%parity disk|parity-drives%% to protect against drive failures.

Once your %%parity disk|parity-drives%% is added, remember that any new disk you want to include in the array must be cleared (zeroed) before it's integrated. This is to ensure that the %%parity|parity%% remains valid and continues to protect your data.

:::

#### Actualización de discos de paridad

Puedes actualizar tu(s) dispositivo(s) %%parity disk|parity-drives%% a uno(s) más grande(s) para usar discos de mayor tamaño en el array o agregar un %%parity disk|parity-drives%% adicional.

:::caution

Si planea seguir los siguientes pasos y solo tiene un %%parity disk|parity-drives%%, tenga en cuenta estos puntos:

- Sus datos estarán desprotegidos hasta que la reconstrucción de la %%paridad|parity%% se complete. Si un disco de datos falla durante este tiempo, podría perder la información en ese disco.
- Si ya tiene un disco de datos que ha fallado, seguir estos pasos le impedirá poder reconstruir ese disco. En este caso, debería seguir el procedimiento **Paridad de Intercambio** en su lugar.

:::

Para eliminar un disco de paridad:

1. **Detener el arreglo:** Usa el %%WebGUI|web-gui%% para detener el arreglo.

:::tip

Si su servidor admite intercambio en caliente, no necesita apagarlo para cambiar discos. Puede omitir de forma segura los pasos 2 y 4.

:::

2. **Apaga el servidor:** Apaga tu servidor para realizar cambios de hardware de manera segura.
3. **Instala el nuevo %%parity disk|parity-drives%%:** Coloca el nuevo, más grande %%parity disk|parity-drives%% en tu servidor.
4. **Enciende el servidor:** Vuelve a encender el servidor.
5. **Asigna el nuevo disco:** Ve a la ranura de paridad en tus configuraciones y asigna el nuevo disco, reemplazando el antiguo.
6. **Inicia el arreglo:** Usa el %%WebGUI|web-gui%% para iniciar el arreglo de nuevo.

Una vez que el arreglo esté de nuevo en línea, Unraid comenzará a construir la %%parity|parity%% en el disco nuevo. Puedes seguir accediendo a tus datos durante este tiempo, pero ten en cuenta que podría ser un poco más lento hasta que el proceso termine. ¡Una vez que la construcción de la %%parity|parity%% esté completa, tus datos estarán protegidos de nuevo!

:::important[Important Consejos]

- **Conserva el disco antiguo:** No retires el antiguo %%parity disk|parity-drives%% hasta que la nueva construcción de %%parity|parity%% finalice. Si un disco de datos falla durante la actualización, tener el disco antiguo puede ayudarte a recuperar tus datos.

- **Usuarios de doble paridad:** Si tienes dos %%parity disks|parity-drives%%, actualiza uno a la vez para mayor seguridad.

- **Reutiliza el disco antiguo:** Después de la actualización, puedes usar el viejo %%parity disk|parity-drives%% como disco de datos si aún satisface tus necesidades de almacenamiento.

:::

---

### Reemplazo de discos

Es posible que necesites reemplazar discos en tu arreglo por dos razones principales:

1. [**Actualización de capacidad**](#upgrading-capacity): Tu almacenamiento está casi lleno, y deseas usar discos más grandes.
2. [**Fallo o retiro**](#replacing-faileddisabled-disks): Un disco ha fallado o ya no es compatible.

Aunque el proceso de reemplazo de discos es similar en ambos casos, ten cuidado, ya que existe el riesgo de pérdida de datos durante el reemplazo. Los dispositivos de paridad ayudan a proteger tus datos; un dispositivo de paridad puede salvaguardarte contra la falla de un solo disco, mientras que dos pueden proteger contra la pérdida de datos si fallan dos discos. Siempre ten en cuenta tu nivel de protección durante el reemplazo de discos.

#### Actualización de capacidad

Al actualizar tu disco de datos a uno más grande, ten en cuenta estos puntos:

- **Discos no montables:** Arregla cualquier disco no montable antes de actualizar. Un estado no montable no se resolverá durante la reconstrucción.

- **Riesgos de paridad única:** Si tienes paridad única, corres el riesgo de pérdida de datos si otra unidad falla durante la actualización. Busca consejo en foros si esto sucede.

- **Protección de paridad dual:** Con paridad dual, estás a salvo de perder datos si una unidad falla mientras se actualiza una sola unidad. También puedes actualizar dos unidades a la vez, pero ten en cuenta que esto aumenta el riesgo ya que no tendrás protección contra la falla de otra unidad.

- **Copia de seguridad del disco antiguo:** Mantén el disco original intacto hasta que se confirme que la actualización ha sido exitosa. Esto proporciona una opción de respaldo si algo sale mal.

:::warning

Reemplazar unidades siempre implica un riesgo. Si otra unidad falla durante la actualización, especialmente con solo una paridad, puede experimentar pérdida de datos. Siempre verifique la salud de sus unidades antes de comenzar el proceso y asegúrese de mantener la antigua unidad intacta hasta que la actualización esté completa y sus datos estén confirmados como seguros.

:::

Para actualizar un disco de datos existente:

1. **Run a parity check:** First, ensure the integrity of your data by running a %%parity check|parity-check%%. Go to [***Tools → Parity Check***](#checking-array-devices) and make sure there are **zero errors**. If parity isn't valid, rebuilding the disk will corrupt its file system.

2. **Detener el arreglo:** A continuación, querrá detener el arreglo. Navegue a ***Principal → Operación del Arreglo*** y seleccione **Detener**.

3. **Desasignar el disco objetivo:** Una vez que el arreglo esté detenido, encuentra el disco que deseas reemplazar. Retíralo de su ranura en ***Principal → Dispositivos del Arreglo***.

4. **Iniciar el arreglo:** Ahora, inicia nuevamente el arreglo. Unraid emulará el disco faltante utilizando los discos de paridad y datos existentes. Tienes dos modos para elegir:
   - **%%Maintenance Mode|maintenance-mode%%:** This mode prevents any writes to the %%emulated disk|emulated-disk%%.
   - **Normal Mode:** If you need read/write access to the %%emulated disk|emulated-disk%%, select this option.

:::note

Iniciar el arreglo en Modo Normal en este punto es opcional. Puedes utilizarlo para verificar que el disco emulado se monte y que los datos se vean correctos antes de proceder, pero no es necesario para el proceso de actualización.

:::

5. **Detener el arreglo nuevamente:** El arreglo ahora debería mostrar que el disco no asignado ha fallado. Detén el arreglo una vez más.

6. **Asignar el disco de reemplazo:** Inserta tu nuevo disco más grande en la ranura vacante en el arreglo.

7. **Start the array to rebuild:** Finally, start the array again. Unraid will now rebuild the contents of the %%emulated disk|emulated-disk%% onto the new disk. The file system will automatically adjust to take full advantage of the larger disk's capacity.

#### Reemplazo de discos fallidos/desactivados

<details>
  <summary><strong>What is a failed/disabled disk?</strong></summary>

  A failed or disabled disk is one that Unraid has stopped using for writing data, usually because it encountered a write error. Keep in mind these don't always mean the drive itself is broken; sometimes, it might be due to bad connections, power issues, or just a temporary glitch.

  Algunas indicaciones incluyen:

  <div class="texto--centro">
    ![Red "X" indicates write error](/img/Diskfailureindicator.png)
    <p class="caption-center">*This red "X" shows which disk needs replacement.*</p>
  </div>

  <br />

  <div class="texto--centro">
    ![Failure notification alert](/img/Diskfailurenotification.png)
    <p class="caption-center">*Keep an eye out for these alerts.*</p>
  </div>

  <br />

  <details>
    <summary><strong>Haz clic para ver cómo diferentes configuraciones de paridad manejan fallos de disco</strong></summary>

    | Escenario de Falla | Sin Paridad | Paridad Única | Paridad Dual |
    | ------------------ | ----------- | ------------- | ------------ |

    \| **1 Disk Failure**  | Data Lost | Rebuildable   | Rebuildable |
    \| **2 Disk Failures** | Data Lost | Data Lost     | Rebuildable |

    :::tip[Tips for Safe Rebuilds]

    - **For Single Parity:** You can only replace one disk at a time. If another disk fails during the rebuild, you could lose data.
    - **For Dual Parity:** You can replace one or two disks at the same time, but be cautious if more than two disks fail.
      :::

    :::important
    If you experience a situation where **more disks fail than your parity can protect:**

    1. **Detenga inmediatamente todas las operaciones de escritura** para prevenir una mayor pérdida de datos.
    2. Busque ayuda publicando su problema en los [foros de Unraid](https://forums.unraid.net/) junto con diagnósticos.
    3. **Do not attempt a rebuild** until you've received advice - focus on salvaging your data first.
       :::
  </details>
</details>

<details>
  <summary><strong>Cómo diagnosticar el problema</strong></summary>

  Para diagnosticar el problema, comienza revisando el %%syslog|syslog%% y los informes %%SMART|smart-report%%:

  - Si el %%syslog|syslog%% muestra que el disco se ha reiniciado, podría haber un problema con la conexión o los cables.
  - Los informes %%SMART|smart-report%% pueden ayudar a evaluar la salud del disco, pero la mejor manera de verificarlo es realizando una prueba extendida de %%SMART|smart%%. Si se completa sin errores, es probable que el disco esté bien.
  - Si ves errores %%CRC|crc-errors%%, generalmente apunta a problemas con el cableado. Ten cuidado con estos errores, ya que se acumulan con el tiempo y no se reinician.

  :::tip
  To stay informed about drive issues, [enable notifications](../../getting-started/set-up-unraid/customize-unraid-settings.mdx#notification-settings) in Unraid. This way, you are alerted right away if something goes wrong, reducing the risk to your data.
  :::
</details>

<details>
  <summary><strong>What is emulation?</strong></summary>

  When a drive is disabled, Unraid will use its parity and other working drives to emulate the failed drive. This means your system continues to operate, and you can still access the data stored on the %%emulated drive|emulated-disk%%:

  - Unraid dejará de escribir en el disco físico, y cualquier actualización se guardará en la paridad y la emulación en su lugar.
  - Before replacing the failed drive, you can check and recover data from the %%emulated drive|emulated-disk%%, which keeps the physical drive intact for potential recovery.
  - If you can't access the %%emulated drive|emulated-disk%%, repairing the file system is essential before any rebuild since fixing the file system is quicker and more effective than a rebuild.
</details>

<details>
  <summary><strong>Preparándose para el reemplazo de disco</strong></summary>

  When you need to replace a drive, make sure the new drive is at least as large as the failed drive but not larger than your smallest parity drive. If you have to use a larger drive, follow the **Parity Swap** procedure.

  While it's not mandatory, many users choose to pre-clear new drives to test them and help prevent early failure. You can do this with the Preclear plugin, a %%SMART|smart%% extended test, or manufacturer tools.

  :::caution
  If you try to rebuild using an unmountable %%emulated drive|emulated-disk%%, the new drive will also become unmountable. Always repair the file system before attempting a rebuild.
  :::
</details>

If a disk in your Unraid system has failed or is disabled, don't worry! You can replace it and recover your data. Just follow these simple steps. Remember, you need a new disk that is the same size or larger than the one you're replacing, but it can't be larger than your smallest %%parity disk|parity-drives%%.

:::important

Antes de comenzar, asegúrese de verificar si hay errores o advertencias en el disco. Unraid debe poder leer todos los discos restantes sin ningún problema para que la reconstrucción funcione correctamente. Si otro disco está fallando, podría provocar pérdida de datos.

:::

Para reemplazar y reconstruir un disco:

1. **Detenga el array:**

   - Inicie sesión en el Unraid %%WebGUI|web-gui%% (la interfaz web).
   - Encuentra la opción para detener el arreglo. Esto es necesario antes de que puedas cambiar cualquier disco.

:::tip

Si tu servidor soporta hot-swap, puedes omitir el siguiente paso y simplemente detener el array.

:::

2. **Apague su servidor** (solo si **no** está usando intercambio en caliente):
   - Si su servidor no soporta intercambio en caliente, deberá apagarlo completamente.

3. **Reemplace el disco fallido:**
   - Retire el disco viejo y fallado de su servidor.
   - Inserte el nuevo disco. Solo recuerde, debe ser al menos del mismo tamaño que el disco anterior pero no más grande que su disco de %%paridad|parity-drives%% más pequeño.

4. **Encienda el servidor** (si lo apagó):
   - Enciende tu servidor si lo apagaste.

5. **Asignar el nuevo disco:**
   - Regrese al %%WebGUI|web-gui%% de Unraid.
   - Encuentre la ranura del disco fallido y asigne su nuevo disco a esa ranura.

6. **Confirme su acción:**
   - Verifique el cuadro que dice **Sí, quiero hacer esto** y confirme.

7. **(Opcional) Elija el %%Modo de Mantenimiento|maintenance-mode%%:**
   - Puedes seleccionar el %%modo de mantenimiento|maintenance-mode%%, lo que puede hacer que el proceso de reconstrucción sea más rápido. Sin embargo, durante este tiempo, no podrá acceder al arreglo en absoluto.
   - Si eliges el %%Modo de Mantenimiento|maintenance-mode%%, asegúrate de hacer clic en **Sincronizar** para iniciar la reconstrucción.

8. **Inicie la reconstrucción:**
   - Click **Start** to begin the process. Unraid will copy your data from the %%emulated disk|emulated-disk%% to the new disk.
   - Si tu nuevo disco es más grande, Unraid gestionará el espacio adicional por ti.

:::warning

Si Unraid le solicita formatear el nuevo disco durante la reconstrucción, **no lo haga**. Formatear borrará todos los datos y hará imposible la recuperación.

:::

<h4>Qué esperar durante la reconstrucción</h4>

- El array seguirá disponible para usar durante el proceso de reconstrucción (a menos que esté en el %%Modo de Mantenimiento|maintenance-mode%%), pero puede funcionar más lento.
- La reconstrucción puede tomar varias horas, dependiendo del tamaño de sus discos y el uso del sistema.
- El nuevo disco tendrá el mismo sistema de archivos que el original.
- Si el disco viejo era no montable debido a problemas del sistema de archivos, el nuevo disco tampoco será montable. Por favor, solucione cualquier problema del sistema de archivos antes de iniciar la reconstrucción.

:::note[Additional notas]

- El proceso de reconstrucción no cambiará el formato de archivo del disco; simplemente restaurará su forma anterior.
- Siempre verifique la salud de cada disco antes de comenzar una reconstrucción para evitar problemas potenciales.

:::

#### Intercambio de Paridad

```mdx-code-block

<Tabs>
  <TabItem value="what" label="What is parity swap?">
    <ParitySwapWhat />
  </TabItem>

  <TabItem value="when" label="When to use parity swap?">
    <ParitySwapWhen />
  </TabItem>
</Tabs>
```

<details>
  <summary><strong>Escenario de ejemplo</strong></summary>

  Tiene una configuración de Unraid con un **disco de paridad de 2TB** y un **disco de datos de 1TB** y quiere reemplazar el disco de 1TB con un **disco de 4TB**.

  First, assign the new 4TB drive as the parity drive, which will replace the 2TB drive. Then move the original 2TB drive to the data slot, and remove the 1TB drive entirely.

  After these changes, you'll have a 4TB drive as your new parity, ensuring you can add future data drives up to 4TB. The 2TB drive will now hold your existing data, while the 1TB drive can be repurposed.

  Este intercambio mantiene sus datos seguros y su array protegido, permitiendo futuras actualizaciones.
</details>

:::important\[Prerequisites]

- Antes de comenzar, asegúrese de que el disco de datos que desea reemplazar esté deshabilitado. Si el disco ha fallado (muestra un indicador rojo), ya está deshabilitado. Si el disco está saludable pero desea reemplazarlo, desasigne el disco y comience el arreglo una vez sin él para forzar a Unraid a marcarlo como deshabilitado.
- Si su disco de datos de reemplazo no es más grande que su disco de paridad, use el procedimiento estándar de [Reemplazo de un Disco de Datos](#replacing-faileddisabled-disks) en su lugar.
- Este procedimiento solo es necesario para reemplazar discos de datos en un arreglo Unraid con un disco más grande que el disco de paridad actual. Si solo necesita actualizar su disco de paridad, simplemente retire el disco de paridad antiguo, agregue el nuevo y comience el arreglo. La paridad se reconstruirá automáticamente.

:::

:::warning\[Warnings]

- Always verify the health of all drives using %%SMART reports|smart-report%% before starting a %%parity swap|parity-swap%%. Attempting this procedure with another failing or unhealthy disk increases the risk of data loss.
- Si es posible, pre-limpie el nuevo disco. Aunque no es necesario, pre-limpiar comprueba la resistencia del disco y reduce el riesgo de fallo temprano.
- Identifique correctamente todas las unidades antes de comenzar. Anote los números de modelo y los últimos cuatro caracteres de cada número de serie para evitar errores durante la asignación.

:::

Para realizar un intercambio de paridad:

:::note

Si el disco a ser reemplazado ya está deshabilitado (fallido), es posible que no necesite realizar los pasos 1-4. Si ya ha instalado la nueva unidad de reemplazo (por ejemplo, después de pre-limpiarla), puede omitir los pasos 5-8.

:::

1. **Detener el array** si está en funcionamiento.
2. **Desasigne la vieja unidad de datos** si todavía está asignada. Si el disco estaba previamente saludable, puede ver notificaciones de error por un disco faltante - esto es esperado.
3. **Inicie el arreglo.** Si se le solicita, marque la casilla confirmando su acción. El disco de datos ahora debería mostrar como "No instalado."
4. **Detenga el array nuevamente.** En este punto, el array trata el disco como fallido.
5. **Apaga el servidor.**

   :::tip
   If your system supports **hot-swap**, you do not need to power down to remove or install disks. Just make sure the array is stopped before making any hardware changes.
   :::

:::

6. *(Opcional)* **Retire la unidad vieja.** Puede desear mantenerla instalada para pruebas o reasignarla.
7. **Instale el nuevo disco.** Se recomienda encarecidamente pre-limpiar, pero no es necesario formatear.
8. **Encienda el servidor.**
9. **Detenga el arreglo** si se inició automáticamente. Si ve un mensaje sobre intentar desmontar comparticiones de disco, deshabilita los servicios de Docker y/o VM en Configuraciones, reinicie e intente de nuevo.
10. **Desasigne el disco de paridad.**
11. **Asigne el nuevo disco a la ranura de paridad.** Puede recibir notificaciones de error - esto es normal.
12. **Asigne el disco de %%paridad|parity-drives%% viejo a la ranura de datos** del disco que está siendo reemplazado. Tanto el disco de paridad como el disco de datos de reemplazo ahora deberían mostrar indicadores de estado azules.
13. **Vaya a *Principal → Operación del Arreglo.*** Debería ver un botón de **Copiar** y un mensaje indicando "Copiar llevará la información de paridad al nuevo disco de %%paridad|parity-drives%%."
14. **Confirme e inicie el proceso de copia.** Verifique el cuadro de confirmación y haga clic en **Copiar**. El arreglo no estará disponible durante esta operación.

- El proceso de copia puede tomar muchas horas, dependiendo del tamaño del disco. Cuando finalice, el arreglo estará detenido y listo para una reconstrucción de datos.

15. **Inicie el array para comenzar la reconstrucción de datos.**
    - Confirme su acción si se le solicita. El arreglo ahora está iniciado y los datos se reconstruyen en el nuevo disco de datos.
    - Puede usar el array durante la reconstrucción, pero para mejor rendimiento, limite el uso.
    - El proceso de reconstrucción también tomará varias horas.

:::warning

Nunca formatee un disco durante este proceso. Formatear borrará todos los datos y actualizará la paridad, haciendo imposible la recuperación.

:::

After completion, you will have a larger parity disk and a replaced data disk. Many users run a %%parity check|parity-check%% afterward for extra confidence, though this is optional.

---

### Remoción de discos

Es posible que llegue un momento en que desee eliminar un disco de su arreglo Unraid. Ya sea que esté buscando ahorrar energía, retirar un disco viejo o poco confiable, o reutilizar hardware para un uso diferente, el proceso es bastante sencillo.

#### Removiendo discos de paridad

If you find that you no longer need the level of %%parity|parity%% protection in your setup, you can remove a %%parity disk|parity-drives%% whenever you want.

To remove a %%parity drives|parity-drives%%:

1. **Detenga el array:** Comience accediendo al %%WebGUI|web-gui%% y deteniendo el array.
2. **Unassign the %%parity drives|parity-drives%%:** Locate the %%parity drives|parity-drives%% slot and set it to "Unassigned."
3. **Start the array:** Finally, restart the array to commit the changes and successfully remove the %%parity drives|parity-drives%% from the configuration.

:::warning

Antes de realizar cualquier cambio, tenga en cuenta lo siguiente: Si ya tiene algún disco de datos fallido en su matriz, eliminar un %%parity disk|parity-drives%% puede disminuir el número de fallos que Unraid puede manejar sin arriesgar pérdida de datos.

- Con dual paridad, puedes recuperar de una sola unidad fallida, pero ten en cuenta que no podrás sobrevivir a otra falla durante el proceso de reconstrucción.
- Con una sola paridad, pierdes toda la redundancia, lo que significa que cualquier falla adicional en las unidades podría resultar en pérdida de datos.

:::

#### Eliminar discos de datos

Eliminar un disco de datos es un proceso sencillo, pero es importante recordar que necesitarás realizar una sincronización de %%parity|parity%% después. Hasta que esta sincronización esté completa, hay un riesgo de pérdida de datos si otro disco falla.

Puedes elegir entre dos métodos para eliminar un disco de datos:

1. **Método estándar** - Recomendado para la mayoría de los usuarios.
2. **Método de preservación de paridad** - Adecuado para usuarios avanzados que desean mantener la paridad durante la eliminación.

```mdx-code-block

<Tabs>
  <TabItem value="standard" label="Standard method" default>
    <RemoveDataDiskStandard />
  </TabItem>

  <TabItem value="parity-preserve" label="Parity-preserve method (Advanced)">
    <RemoveDataDiskParityPreserve />
  </TabItem>
</Tabs>
```

---

### Verificación de dispositivos del arreglo

Verificar regularmente su arreglo Unraid es crucial para mantener la integridad de los datos e identificar problemas potenciales antes de que resulten en pérdida de datos. Puede iniciar una verificación utilizando el botón **Verificar** en ***Operaciones del Arreglo***. Dependiendo de la configuración de su arreglo, este botón le permite realizar una verificación de %%paridad|parity-check%% o de lectura.

<div style={{ margin: 'auto', maxWidth: '400px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![The check button lets you perform parity and read checks](/img/Check_button.PNG)
</div>

Para comodidad, puede programar estas verificaciones para que se ejecuten automáticamente en intervalos que se adapten a usted navegando a ***Configuración → Programador***. Se recomienda realizar verificaciones automáticas, no correctivas, mensualmente o trimestralmente para garantizar la salud continua de sus datos.

#### Chequeos de Paridad y Lectura

```mdx-code-block

<Tabs>
  <TabItem value="parity-check" label="Parity checks" default>
    <ArrayCheckParity />
  </TabItem>

  <TabItem value="read-check" label="Read checks">
    <ArrayCheckRead />
  </TabItem>
</Tabs>
```

#### Historial de verificación

Siempre que el sistema realice una verificación de %%paridad|parity-check%% o una verificación de lectura, mantendrá un registro de lo que ocurrió. Puede ver estos detalles fácilmente haciendo clic en el botón **Historial** que se encuentra bajo ***Operaciones del Arreglo*** en la interfaz.

Para aquellos que quieran indagar más a fundo, todos estos registros se guardan en un archivo de texto ubicado en el directorio `config` en tu dispositivo USB de Unraid.

---

### Apagar o encender discos

Unraid allows you to control the power states of your hard drives. You can easily %%spin them up or down|spin-state%%, and manage SSDs to be active or in standby. This helps save energy, extend the life of your drives, and reduce noise when the disks are not being used.

<h4>¿Por qué bajar o subir la velocidad?</h4>

- **Reducir velocidad:** Si tienes discos que no se utilizan con frecuencia, reducir su velocidad puede ahorrar energía y ayudar a que duren más.
- **Aumentar velocidad:** Si sabes que necesitarás los archivos pronto, aumentar la velocidad de los discos con antelación puede reducir los tiempos de espera.

<h4>Cómo controlar los estados de velocidad</h4>

Puedes controlar los estados de velocidad del disco a través de la pestaña **Main** en el %%WebGUI|web-gui%%.

1. **Ve a la pestaña Main** y localiza tus dispositivos de arreglo.
2. **Encuentra los botones de control de velocidad**: cada disco mostrará una de las siguientes opciones:
   - Haz clic en el botón 🔘 para **Aumentar velocidad** si el disco está actualmente en baja velocidad
   - Haz clic en el botón 🟢 para **Reducir velocidad** si el disco está actualmente girando
3. **Haz clic en el botón apropiado** para la acción que deseas:
   - Haz clic en **Reducir velocidad** 🟢 para apagar un disco inactivo y ahorrar energía
   - Haz clic en **Aumentar velocidad** 🔘 para encender un disco que actualmente está en baja velocidad

Recuerda que si un disco está siendo accedido (por ejemplo, si estás abriendo un archivo), permanecerá activo e ignorará cualquier solicitud de reducir velocidad.

Cuando un disco está desactivado, su temperatura no se mostrará en el %%WebGUI|web-gui%%. Sin embargo, una vez que cualquier aplicación o usuario acceda a él, se activará automáticamente.

:::tip

Use los controles de activación para ahorrar energía y reducir el desgaste de sus discos. Recuerde que los discos que se están utilizando activamente permanecerán encendidos hasta que todas las tareas estén terminadas.

:::

---

### Restablecer la configuración del arreglo

Restablecer la configuración de su arreglo es un paso importante que debe llevarse a cabo con cuidado. Este proceso suele ser necesario cuando se elimina un disco, se comienza desde cero con un nuevo diseño de arreglo o se resuelven problemas de asignación de discos. Tenga en cuenta que esta acción puede afectar la protección de datos y la paridad, así que asegurese de proceder solo cuando realmente lo necesite.

Razones comunes para restablecer tu arreglo incluyen:

- **Eliminar o reemplazar discos:** Si necesita retirar o intercambiar discos en su arreglo.
- **Comenzar de nuevo:** Cuando busca crear una nueva disposición para su arreglo.
- **Corregir errores de asignación de discos:** Para corregir cualquier problema con la forma en que los discos están asignados actualmente.
- **Recuperarse de problemas de configuración:** Al enfrentar desafíos con su configuración existente.

<div style={{ margin: 'auto', maxWidth: '650px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![Resetear la configuración de tu disco se puede hacer a través de la nueva página de configuración](/img/Newconfig.png)
</div>

Para restablecer la configuración de tu arreglo:

1. Ir a la página **Herramientas** y haz clic en **Nueva Configuración**.
2. Puedes mantener algunas asignaciones de disco existentes si solo deseas hacer ajustes menores. Esto puede ahorrar tiempo y minimizar la posibilidad de errores.
3. Confirma tu elección marcando la casilla, luego haz clic en **Aplicar**.
4. Vuelve a la pestaña **Principal**. Después de aplicar los cambios, tu configuración habrá sido restablecida.
5. Haz los cambios necesarios en tu configuración asignando o desasignando discos según sea apropiado.
6. Inicia el arreglo en Modo Normal o %%Maintenance Mode|maintenance-mode%% para finalizar tus actualizaciones.

:::important

- **Preservación de datos:** Unraid intentará reconocer discos previamente usados y preservar datos donde sea posible.
- **Impacto en la paridad:** Retirar un disco de datos siempre invalidará la paridad a menos que ese disco haya sido borrado antes de ser retirado.
- **Reordenamiento de discos:** Cambiar el orden de los discos no afectará la paridad1, pero *puede* invalidar la paridad2.

:::

:::caution

Cuando vea el botón **Iniciar**, hay una casilla de verificación etiquetada **La Paridad es Válida**. Solo marque esta casilla si está seguro de que es correcta o si un usuario experimentado de Unraid le ha aconsejado hacerlo durante la recuperación. Marcar incorrectamente esta opción puede llevar a la pérdida de datos.

No use **Nueva Configuración** si su objetivo es reconstruir un disco. Realizar una Nueva Configuración borra el historial del arreglo necesario para una reconstrucción, y Unraid no ofrecerá reconstruir el disco después. Siga en su lugar el procedimiento de reconstrucción de discos.

:::

#### Deshacer un restablecimiento

Si encuentras que necesitas revertir un restablecimiento:

1. Accede a tu dispositivo flash a través de la red (SMB).
2. Localiza y abre la carpeta `config`.
3. Renombra el archivo `super.old` a `super.dat`.
4. Reinicia tu servidor y tu configuración anterior del arreglo debería ser restaurada.

---

### Informes de estado

Unraid proporciona informes de estado que le ayudan a mantenerse al tanto de la salud de su arreglo de almacenamiento. Estos informes son una forma rápida de verificar si alguno de sus discos está deshabilitado o si tiene problemas de lectura o escritura de datos.

- **Estado actual:** Los informes de estado muestran la condición actual de su arreglo. Es importante tener en cuenta que esta información se restablece después de reiniciar su sistema, por lo que no mantendrá un historial de problemas anteriores.

- **Sin datos históricos:** Si deseas ver qué ha ocurrido antes de un reinicio, tendrás que buscar en otro lugar, ya que estos informes no guardan estados pasados.

:::important

Recuerde que los informes de estado no incluyen datos %%SMART|smart%%. Los informes %%SMART|smart-report%% le ofrecen una vista más detallada sobre la salud individual de los discos. Así que, incluso si su informe de estado muestra que todo está bien, revisar los informes %%SMART|smart-report%% regularmente sigue siendo una buena idea para detectar cualquier problema potencial a tiempo.

:::

---

## Modos de escritura del arreglo

Unraid proporciona diversos modos de escritura para gestionar las operaciones del arreglo, cada uno con sus propias ventajas y desventajas en cuanto a velocidad, consumo de energía y desgaste de los discos. Conocer cómo funcionan estos modos, junto con el papel de una unidad de caché o pool, puede ayudarlo a afinar su servidor para que se adapte mejor a sus necesidades.

**Modos de escritura a simple vista**

| Modo de Escritura                | Velocidad (Típica)                       | Uso de energía | Cuando las unidades se activan       | Protección de datos     | Mejor caso de uso                                                                                 |
| -------------------------------- | ---------------------------------------- | -------------- | ------------------------------------ | ----------------------- | ------------------------------------------------------------------------------------------------- |
| Leer/Modificar/Escribir          | 20–40 MB/s                               | Bajo           | Solo la paridad y la unidad objetivo | Sí                      | La mayoría de las cargas de trabajo, ahorro de energía, escrituras pequeñas                       |
| Turbo Escritura (Reconstrucción) | 40–120 MB/s                              | Alta           | Todas las unidades                   | Sí                      | Transferencias de archivos grandes, reconstrucciones del arreglo, %%parity checks\|parity-check%% |
| Escritura en Caché (SSD/NVMe)    | 50–110 MB/s (SSD), 250–900 MB/s (NVMe)\* | Varía          | Solo las unidades de caché           | No (hasta que se mueva) | Aplicaciones, VMs, escrituras frecuentes, maximizar velocidad                                     |

<h3>Leer/Modificar/Escribir</h3>

<details>
  <summary>Haz clic para expandir/colapsar</summary>

  <h4>How it works</h4>
  This mode reads the existing data and the parity, calculates the new parity, and then writes the updated data. Only the %%parity drive|parity-drives%% and the target data drive spin up, which results in lower power usage and less wear on the drives. However, it can be slower due to the additional read/write cycles.

  <h4>Cuándo usar</h4>

  - En cualquier momento, especialmente si deseas ahorro de energía y que las unidades en reposo se activen.
  - Ideal para escrituras pequeñas o infrecuentes.
</details>

<h3>Turbo Escritura (Escritura reconstruida)</h3>

<details>
  <summary>Haz clic para expandir/colapsar</summary>

  Turbo write, also known as reconstruct write, is a feature designed to boost the writing speed of your Unraid array. It works by reading all data drives and updating the parity simultaneously. This process eliminates the delays caused by waiting for the platters to rotate, as seen in the default write mode. However, it's important to note that all array drives need to be spinning and functioning properly for this to work effectively.

  <h4>Cómo funciona</h4>

  - Cuando escribes nuevos datos, Unraid lee de las otras unidades de datos y calcula la paridad al mismo tiempo. Tanto los datos nuevos como la paridad actualizada se escriben juntos.
  - Todas las unidades del arreglo deben estar operativas y activamente girando.
  - Este método mejora significativamente las velocidades de escritura en comparación con el modo de escritura predeterminado.

  <h4>Cuándo usar la Turbo Escritura</h4>

  - Utiliza la turbo escritura al transferir archivos grandes y secuenciales al arreglo.
  - Es eficaz durante las reconstrucciones del arreglo o %%parity checks|parity-check%%, ya que todas las unidades ya estarán girando.
  - Este modo es muy útil cuando minimizar el tiempo de escritura es una prioridad y puedes confirmar que todas las unidades están sanas.

  <h4>Cuándo evitar la Turbo Escritura</h4>

  - Evita usar este modo si deseas que tus unidades se apaguen durante los tiempos de inactividad para conservar energía.
  - La turbo escritura no es ideal para operaciones de escritura pequeñas o poco frecuentes, ya que provoca que todas las unidades se activen para cada escritura, aumentando el consumo de energía y el desgaste de las unidades.
  - Si sospechas que alguna unidad está fallando o es poco confiable, es mejor evitar la turbo escritura, ya que depende de que todas las unidades funcionen.

  :::info
  Turbo write is best suited for bulk operations and scenarios requiring high throughput. However, it might not be the best choice for everyday tasks if you're focused on energy savings and minimizing drive wear.
  :::
</details>

<h3>Escritura en Caché</h3>

<details>
  <summary>Haz clic para expandir/colapsar</summary>

  <h4>Cómo funciona</h4>

  Data is written first to a fast SSD or NVMe %%cache|cache%% and can then be moved to the main array later by a process called the %%Mover|mover%%. The speeds vary:

  - SSD: 50–110 MB/s
  - NVMe: 250–900 MB/s (que puede utilizar redes 10GbE)

  Una vez que los datos se trasladan al arreglo, están protegidos por la paridad.

  <h4>Cuándo usar la Escritura en Caché</h4>

  - Para compartir operaciones de escritura frecuentes, como aplicaciones, máquinas virtuales o descargas.
  - Para mejorar el rendimiento y reducir cualquier latencia percibida de escritura.

  <h4>Expectativas de rendimiento</h4>

  - Sin una unidad de caché: Promedio 20–30 MB/s, con picos de hasta 40 MB/s.
  - Con caché SSD: 50–110 MB/s.
  - Con caché NVMe: 250–900 MB/s dependiendo de las limitaciones de la red o la unidad.

  :::tip
  Consider using a cache pool (multiple devices) for added redundancy and data protection before the %%Mover|mover%% runs.
  :::
</details>

:::info[Automated Soluciones

- El modo **Auto** (una característica futura) activará la turbo escritura solo cuando todas las unidades ya estén girando.
- Los plugins de la comunidad (busca "Turbo Write" en la pestaña de Apps) pueden ofrecer opciones mejoradas de automatización o programación.

:::

Para cambiar el Modo de Escritura:

1. Navega a ***Configuraciones → Configuraciones de Disco***.
2. Ubica **Tunable (md_write_method)**.
3. Elige tu modo preferido:
   - **Leer/Modificar/Escribir** (predeterminado)
   - **Reconstruct Write** (Turbo Write)
   - **Auto** (característica futura)
4. Haz clic en **Aplicar** para confirmar tu elección.

:::important[Quick recapitulación

- Usa **Turbo Write** cuando necesites velocidad, pero ten en cuenta el aumento del consumo de energía y la activación de las unidades.
- Utiliza **Escritura en Caché** para un rendimiento óptimo, especialmente con unidades SSD o NVMe.
- Para la mayoría de los usuarios, el modo de escritura predeterminado ofrece el mejor equilibrio, a menos que necesites específicamente mayores velocidades.

:::

---

## Modos de lectura

Cuando uses Unraid, la velocidad a la que puedes leer archivos está determinada principalmente por el disco individual que contiene cada archivo. A diferencia de los sistemas %%RAID|raid%% tradicionales, que combinan múltiples discos para mejorar el rendimiento, Unraid almacena cada archivo en un solo disco. Esto significa que las velocidades de lectura no se incrementarán por las velocidades combinadas de varios discos.

<h3>Expectativas de rendimiento</h3>

- **HDD único típico:** 70–250 MB/s (depende del modelo de la unidad, la edad y la ubicación de los datos)
- **SSD SATA típico:** 400–550 MB/s
- **NVMe SSD (en un pool):** 250–7,000 MB/s (se aplican limitaciones de generación PCIe y red/PCIe; por ejemplo, red 10GbE se limita a ~1,100 MB/s)

:::note[Special casos

- Si un disco está deshabilitado y sus datos están siendo reconstruidos, Unraid usará las unidades restantes junto con la información de paridad para recrear los datos. Durante este proceso, la velocidad de lectura puede reducirse a 30–60 MB/s o incluso menos, dependiendo del disco más lento en tu sistema.
- Any ongoing operations in the array, such as a %%parity check|parity-check%% or rebuilding a drive, can also affect read performance. This is due to increased movement of the drive heads and overall contention for resources.

:::

---

## Piscinas de caché

Los %%Cache pools|cache-pool%% en Unraid proporcionan ventajas significativas, particularmente para tareas intensivas en escrituras, máquinas virtuales (VMs) y contenedores Docker. Estos pools operan por separado del array principal y pueden configurarse con múltiples discos utilizando los sistemas de archivos %%BTRFS|btrfs%% o %%ZFS|zfs%%, soportando varias configuraciones de %%RAID|raid%% para velocidad y protección de datos.

<h3>Pools de caché vs. el arreglo principal</h3>

| Característica                     | Pool de caché (BTRFS)                                                                                             | Pool de caché (ZFS)                                                                                                                                                    | Arreglo principal (Unraid)                                  |
| ---------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------- |
| **Velocidad de lectura**           | SSD: 400–550 MB/s, NVMe: 250–7,000 MB/s\*                                                                         | SSD: 400–550 MB/s, NVMe: 250–7,000 MB/s\*                                                                                                                              | HDD: 70–250 MB/s (por disco)                                |
| **Velocidad de escritura**         | SSD: 400–550 MB/s, NVMe: 250–7,000 MB/s\*                                                                         | SSD: 400–550 MB/s, NVMe: 250–7,000 MB/s\*                                                                                                                              | 20–120 MB/s (dependiente del modo de paridad)               |
| **Protección de datos**            | %%RAID 1\|raid1%%/%%RAID 10\|raid10%%; %%RAID 5\|raid5%%/%%RAID 6\|raid6%% (experimental, no para datos críticos) | %%RAID 1\|raid1%%/%%RAID 10\|raid10%%; %%RAIDZ1\|raidz1%%/%%RAIDZ2\|raidz2%%/%%RAIDZ3\|raidz3%% (estable, listo para producción)                                       | Basado en paridad, independiente del sistema de archivos    |
| **Expansión**                      | Mezclar tamaños de unidades; agregar/eliminar dispositivos dinámicamente                                          | Soporte limitado de adición/eliminación de dispositivos; no se puede eliminar de RAIDZ; adición de un solo dispositivo para expandir un único vdev RAIDZ en Unraid 7.2 | Agregar unidades, pero sin banda ni escalado de rendimiento |
| **Complejidad en la recuperación** | Higher risk of data loss; %%BTRFS\|btrfs%% tools required                                                         | Mayor riesgo de pérdida de datos; se requieren herramientas %%ZFS\|zfs%%                                                                                               | Reconstrucciones más fáciles basadas en paridad             |
| **Mejor para**                     | Aplicaciones, máquinas virtuales, escrituras frecuentes                                                           | Aplicaciones, máquinas virtuales, escrituras frecuentes, cargas de trabajo empresariales                                                                               | Almacenamiento a granel, bibliotecas de medios              |

\**Las velocidades reales de NVMe dependen de la generación PCIe, el enfriamiento, y el ancho de banda de la red (p.ej., 10GbE se limita a ~1,100 MB/s).*

<h4>Pros de los pools de caché</h4>

- **Mayor rendimiento:** Los pools NVMe pueden saturar redes de 10GbE/40GbE (1,100–3,500 MB/s).
- **RAID flexible:** Tanto %%BTRFS|btrfs%% como %%ZFS|zfs%% soportan %%RAID 1|raid1%%/%%RAID 10|raid10%% para redundancia sin necesidad de igualar tamaños de unidades.
- **Baja latencia:** Ideal para bases de datos, máquinas virtuales y contenedores Docker.
- **Ventajas de ZFS:** %%ZFS|zfs%% proporciona funciones de grado empresarial como verificación de integridad de datos, compresión y snapshots.

<h4>Contras de los pools de caché</h4>

- **Sin protección de paridad:** Los datos no están protegidos hasta que se trasladan al arreglo.
- **Riesgos de recuperación:** %%BTRFS|btrfs%% %%RAID 5|raid5%%/%%RAID 6|raid6%% es inestable; los pools de un solo disco carecen de redundancia.
- **Consideraciones de ZFS:** %%ZFS|zfs%% requiere más memoria RAM y tiene requisitos de hardware más estrictos que %%BTRFS|btrfs%%.

Para obtener información más detallada sobre %%cache pools|cache-pool%%, incluyendo cómo configurarlos, gestionarlos y características avanzadas, consulte la página [Pools de Caché](./cache-pools.mdx).

---

## Solución de problemas

### Solución de fallos de inicio del arreglo

Si tu conjunto no arranca, sigue estos pasos para identificar y solucionar problemas comunes. Busca mensajes de error bajo ***Principal → Operación del conjunto***.

```mdx-code-block

<Tabs>
  <TabItem value="missing-disks" label="Missing disks" default>
    <TroubleshootMissingDisks />
  </TabItem>

  <TabItem value="device-limit" label="Device limit">
    <TroubleshootDeviceLimit />
  </TabItem>

  <TabItem value="key-issues" label="License issues">
    <TroubleshootLicenseIssues />
  </TabItem>

  <TabItem value="key-server" label="Key server connection">
    <TroubleshootKeyServer />
  </TabItem>

  <TabItem value="withdrawn" label="Withdrawn release">
    <TroubleshootWithdrawnRelease />
  </TabItem>
</Tabs>
```

### Fallo de disco durante una reconstrucción

Si un segundo disco falla mientras está reconstruyendo otro, lo que pueda hacer dependerá de su configuración de paridad.

<h4>Disco de %%paridad único|parity-drives%%</h4>

Si un disco falla durante la reconstrucción de otro, la reconstrucción se detendrá porque los datos no se pueden restaurar con precisión. Lamentablemente, no podrás recuperar tus datos en esta situación.

<h4>Disco de %%paridad dual|parity-drives%%</h4>

If you have two %%parity drives|parity-drives%%, you have more options:

- Puedes esperar a que la primera reconstrucción termine y luego ocuparte del segundo disco fallido.
- O puedes detener la reconstrucción actual, reemplazar el segundo disco fallido y luego iniciar el arreglo para reconstruir ambos discos al mismo tiempo.

Si la primera reconstrucción está casi terminada, generalmente es mejor dejar que termine. Si recién comenzó, podría ser más rápido reconstruir ambos juntos.

:::warning

Reconstruir discos pone mucha tensión en todas las unidades, lo que aumenta la probabilidad de nuevas fallas. Siempre verifica la salud del disco usando informes %%SMART|smart-report%% antes de comenzar una reconstrucción.

:::

:::info[Rebuild Tiempo]

Prepárate para que el proceso de reconstrucción tome varias horas. El tiempo puede variar según el tamaño del disco y qué tan ocupado esté tu sistema. Los discos más grandes y los sistemas ocupados pueden tardar más.

:::
