---
sidebar_position: 4
sidebar_label: Sistemas de archivos
---

# Sistemas de archivos

## Seleccionando un tipo de sistema de archivos

Seleccionar el sistema de archivos correcto para su Unraid %%array|array%% o %%cache pool|cache-pool%% es crucial. Le ayuda a lograr un equilibrio entre rendimiento, protección de datos y funciones avanzadas. Unraid admite varios sistemas de archivos de Linux modernos, cada uno con sus propias fortalezas únicas y casos de uso específicos:

| Sistema de Archivos | Protección de Datos                                                                   | Eficiencia Espacial                    | Características Avanzadas                                                          | Mejor Caso de Uso                                                        |
| ------------------- | ------------------------------------------------------------------------------------- | -------------------------------------- | ---------------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| %%XFS\|xfs%%        | Sin redundancia incorporada                                                           | 100%                                   | Robusto contra la corrupción                                                       | Predeterminado para unidades de array; alta fiabilidad                   |
| EXT4                | Sin redundancia incorporada                                                           | 100%                                   | Mature, stable, journaled                                                          | Array drives or single-drive pools; alternative to XFS                   |
| %%ZFS\|zfs%%        | %%RAIDZ1\|raidz1%%/%%RAIDZ2\|raidz2%%/%%RAIDZ3\|raidz3%%, espejos, etc.               | Varía según el nivel de %%RAID\|raid%% | %%Checksums\|suma de verificaciones%%, %%Snapshots\|instantáneas%%, %%RAID\|raid%% | Pools de dispositivos múltiples, %%VMs\|vm%%, Docker, usuarios avanzados |
| %%BTRFS\|btrfs%%    | %%RAID 0\|raid0%%/%%RAID 1\|raid1%%/%%10\|raid10%%/%%5\|raid5%%/%%6\|raid6%%, espejos | Varía según el nivel de %%RAID\|raid%% | %%Checksums\|suma de verificaciones%%, %%Snapshots\|instantáneas%%, %%RAID\|raid%% | Pools de dispositivos múltiples, SSD/HDD mixtos, pools flexibles         |
| NTFS                | Sin redundancia incorporada                                                           | 100%                                   | Windows compatibility                                                              | Adding existing Windows drives without data migration                    |
| exFAT               | Sin redundancia incorporada                                                           | 100%                                   | Compatibilidad multiplataforma                                                     | Adding existing exFAT drives without data migration                      |

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import FsCheckCliXfs from './partials/fs-check-cli-xfs.mdx';
import FsCheckCliBtrfs from './partials/fs-check-cli-btrfs.mdx';
import FsCheckCliZfs from './partials/fs-check-cli-zfs.mdx';
import FsRepairCliXfs from './partials/fs-repair-cli-xfs.mdx';
import FsRepairCliBtrfs from './partials/fs-repair-cli-btrfs.mdx';
import FsRepairCliZfs from './partials/fs-repair-cli-zfs.mdx';

### XFS

%%XFS|xfs%% is the default file system for %%array|array%% drives in Unraid. It's known for its robustness and ability to recover from corruption after unexpected shutdowns or crashes. Each drive formatted with %%XFS|xfs%% acts as a self-contained file system, making data recovery straightforward on any Linux system.

- **Protección de datos:** Sin redundancia incorporada; depende de la %%parity|parity%% de Unraid para la protección.
- **Rendimiento:** Consistente y fiable.
- **Mejor para:** Unidades de %%array|array%%, especialmente cuando la estabilidad y facilidad de recuperación de datos son prioritarias.

### EXT4

EXT4 is a mature and stable file system that offers excellent compatibility and reliability. It is fully supported and stands on par with %%XFS|xfs%%, %%BTRFS|btrfs%%, and %%ZFS|zfs%%, making it a strong choice for array drives or single-drive pools.

- **Data protection:** It does not have built-in redundancy and relies on Unraid's %%parity|parity%% for protection.
- **Performance:** It provides consistent and reliable performance with journaling to ensure data integrity.
- **Best for:** %%Array|array%% drives or single-drive pools when you are looking for an alternative to %%XFS|xfs%%.

### ZFS

%%ZFS|zfs%% is a modern file system that comes with advanced features such as %%checksums|checksum%% to detect %%bit rot|bit-rot%%, %%snapshots|snapshot%% for backups, and native %%RAID|raid%% support options like %%RAIDZ1|raidz1%%/%%RAIDZ2|raidz2%%/%%RAIDZ3|raidz3%% and mirrors. %%ZFS|zfs%% can be utilized for both single-device and multi-device pools.

- **Protección de datos:** Soporta varios niveles de %%RAID|raid%% para redundancia.
- **Rendimiento:** Excelente, particularmente en pools de dispositivos múltiples.
- **Mejor para:** Entornos de alto rendimiento, %%virtual machines|vm%%, Docker o cuando se requieren funciones avanzadas como %%snapshots|snapshot%%.

For comprehensive guidance on %%ZFS|zfs%% features, configuration, and best practices, see the dedicated [ZFS storage](../../advanced-configurations/optimize-storage/zfs-storage.mdx) page.

### BTRFS

%%BTRFS|btrfs%% ofrece soporte flexible para %%RAID|raid%%, %%checksums|checksum%% para la integridad de datos, y gestión eficiente de discos de tamaños mixtos en agrupaciones. Sirve como sistema de archivos predeterminado para %%cache pools|cache-pool%% y admite configuraciones de un solo dispositivo y de varios dispositivos.

- **Protección de datos:** Soporta %%RAID 0|raid0%%/%%1|raid1%%/%%10|raid10%%/%%5|raid5%%/%%6|raid6%% (tenga en cuenta que %%RAID 5|raid5%%/%%6|raid6%% aún son experimentales).
- **Rendimiento:** Bueno, con flexibilidad para expansión y contracción.
- **Mejor para:** %%Cache pools|cache-pool%%, especialmente si planeas mezclar SSDs y HDDs o necesitas una manera fácil de expandir.

### NTFS and exFAT (limited support)

NTFS and exFAT file systems are supported with some limitations. This is mainly to help you add existing drives with data to your Unraid system without needing to transfer the data elsewhere first.

:::warning

Drives formatted with NTFS or exFAT must be added to the %%array|array%% **before** you add any parity drives. Once a parity drive has been added to your %%array|array%%, any new data drives you add will be zeroed out, regardless of their file system format.

If you want to use existing NTFS or exFAT drives:

- Add them to the %%array|array%% first (or run ***Tools → New Config*** to reset your array configuration).
- After adding your NTFS/exFAT data drives, you can then add parity drives.
- The existing data on these drives will be preserved and protected by parity.

:::

- **Data protection:** These drives do not offer built-in redundancy; they rely on Unraid's %%parity|parity%% for protection once parity is added.
- **Performance:** Adequate for basic storage needs.
- **Best for:** Adding existing Windows-formatted drives (NTFS) or cross-platform formatted drives (exFAT) without the need for data migration. They can also be used for single-drive pools.
- **Limitations:** These file systems are not recommended for regular use; they are intended primarily for migrating existing drives. For new drives, consider using %%XFS|xfs%%, EXT4, %%BTRFS|btrfs%%, or %%ZFS|zfs%% instead.

For more details on adding existing drives, see the [release notes](../../release-notes/7.2.0.md#ext234-ntfs-and-exfat-support).

:::note[Additional Notas]

- Mezclar diferentes tipos de sistemas de archivos en su sistema Unraid es perfectamente aceptable; el sistema de %%parity|parity%% de Unraid funciona independientemente del sistema de archivos utilizado.
- Siempre formatee y particione las unidades dentro de Unraid para asegurar la compatibilidad.
- Los sistemas Linux pueden leer estos sistemas de archivos de forma nativa; sin embargo, Windows y macOS requerirán software adicional para acceder.
- You can **encrypt** drives for enhanced security, but keep in mind that encrypted drives might pose challenges for recovery if corruption occurs.
- Para unidades de transferencia o dispositivos externos, se recomienda usar el plugin **[Unassigned Devices](#using-the-unassigned-devices-plugins)**, que admite sistemas de archivos adicionales.
  :::

:::

:::tip[Still ¿necesitas ayuda eligiendo?

- **For array drives:** %%XFS|xfs%% is generally the best choice for most users. EXT4 is also a solid option if you prefer a more traditional Linux file system.
- **For high-performance or advanced features:** Choose %%ZFS|zfs%% or %%BTRFS|btrfs%% for %%cache pools|cache-pool%% or multi-device setups. See the [ZFS storage](../../advanced-configurations/optimize-storage/zfs-storage.mdx) page for detailed %%ZFS|zfs%% guidance.
- **Para pools mixtos o en expansión:** %%BTRFS|btrfs%% es ideal si desea utilizar diferentes tamaños de unidades o añadir o quitar dispositivos fácilmente.
- **For existing drives:** Use NTFS or exFAT only when adding existing drives with data; add them before adding parity.

Si no estás seguro, comenzar con los valores predeterminados es una buena opción: usa %%XFS|xfs%% para las unidades de %%array|array%% y %%BTRFS|btrfs%% para %%cache pools|cache-pool%%.

:::

---

## Establecer un tipo de sistema de archivos

Al agregar una nueva unidad a Unraid, puedes seleccionar el tipo de sistema de archivos que mejor se adapte a tus necesidades. El sistema de archivos determina cómo se organiza y protege la información en el disco.

To set the file system type globally, navigate to ***Settings → Disk Settings*** to set the default file system for new %%array|array%% drives only. Unraid defaults to %%XFS|xfs%% for %%array|array%% drives.

:::note

There is currently no global default setting for %%cache pools|cache-pool%%. They will always default to %%BTRFS|btrfs%% if left to "auto".

:::

:::important

If you're adding drives with existing NTFS or exFAT data, they must be added to the %%array|array%% before any parity drives are added. Once parity is present, all newly added data drives will be zeroed out regardless of their file system type.

:::

To set the file system for an individual drive:

1. Stop the %%array|array%% before making changes.
2. In the **Main** tab, click the drive you want to configure.
3. Select the desired file system type from the drop-down menu.
4. (Optional) If you select **auto**, Unraid uses the global default.
5. Para %%cache pools|cache-pool%% de múltiples dispositivos, solo se admite %%BTRFS|btrfs%% o %%ZFS|zfs%%.
6. If adding existing NTFS or exFAT data drives to the %%array|array%%, add them before adding any parity drives.

---

## Crear un sistema de archivos (formateo)

Antes de usar un nuevo disco en Unraid, debe formatearlo con el sistema de archivos seleccionado.

:::warning

Formatting will erase all existing content on the drive. Make sure you've backed up any important data before proceeding.

:::

To format a drive:

1. Inicie el %%array|matriz%%.
2. Identify unmountable drives (they appear as **unmountable**).
3. Verify that all unmountable drives are the ones you want to format.
4. Check the confirmation box, read the warning dialog, and click **Format**.
5. Monitor the process. For new disks, Unraid first rewrites the partition table.
6. Wait for completion. If progress stalls, refresh the **Main** tab.

Una vez que se complete el formateo, la unidad estará lista para almacenar archivos.

---

## Cambiar un tipo de sistema de archivos

Es posible que desee cambiar el tipo de sistema de archivos en una unidad específica para aprovechar las nuevas características o asegurar la compatibilidad con tus otras unidades.

:::warning

Cambiar el tipo de sistema de archivos **borrará todos los datos existentes** en la unidad. Siempre haz copias de seguridad de cualquier archivo importante antes de proceder.

:::

Para cambiar el tipo de sistema de archivos en una unidad particular:

1. Detenga el %%array|array%%.
2. In the **Main** tab, click the drive you want to change.
3. Choose the new file system from the drop-down (repeat for multiple drives as needed).
4. Inicie el %%array|matriz%%.
5. In the **Main** tab, review the unmountable drives list and ensure only the intended drives are included.
6. Check the confirmation box and click **Format**.
7. Wait for completion. If status doesn’t update, refresh the **Main** tab.

Si encuentras algún problema, no dudes en visitar los [foros de Unraid](https://forums.unraid.net/). Adjunta el archivo zip de diagnósticos del sistema (encontrado en ***Tools → Diagnostics***) para obtener asistencia.

---

## Convirtiendo a un nuevo tipo de sistema de archivos

:::important

The ***Main*** page will warn if any array or pool drives are formatted in legacy filesystems:

- Any drives formatted in ReiserFS need to be migrated to another filesystem ASAP as they will not be usable in future releases of Unraid.
- Any drives formatted in older XFS versions need to be migrated before 2030.

:::

Para cambiar el tipo de sistema de archivos de una unidad pero conservar sus datos, debe migrar el contenido antes de reformatear. Este proceso es especialmente común para usuarios que se alejan del ReiserFS obsoleto (utilizado en versiones antiguas de Unraid) hacia %%XFS|xfs%% o %%BTRFS|btrfs%%, pero se aplica a cualquier conversión de sistema de archivos.

:::important

Este proceso requiere mover temporalmente sus datos a otra ubicación. Asegúrese de tener suficiente espacio libre en otro lugar de su %%array|array%% o en un dispositivo externo antes de comenzar.

:::

Reformatear una unidad en Unraid borrará todos sus datos y creará un nuevo y vacío sistema de archivos. Este proceso es útil para resolver errores persistentes del sistema de archivos o empezar de nuevo con un nuevo formato.

1. Move all data off the drive to another location (another %%array|array%% drive, %%cache pool|cache-pool%%, or external backup). Use one of these methods:

   **Via the WebGUI:**

   - Navega a ***Main → Array Operation*** y detiene la matriz
   - Navega a ***Settings → Global Share Settings***. En el área de **Vaciado de disco(s)**, selecciona el/los discos a vaciar y **Aplica**. Nota: este estado se eliminará automáticamente cuando se detenga la matriz.
   - Navega a ***Main → Array Operation*** y inicia la matriz
   - En ***Main → Array Operation*** haz clic en **Mover** (o espera hasta que el mover se ejecute según su horario normal)
   - Mover vaciará el disco de acuerdo con tus configuraciones de Compartir. Nota que los archivos en la raíz del disco están fuera de cualquier Compartir y no serán movidos.
   - Revisa ***Tools → System Log*** para ver mensajes sobre archivos que no se pudieron mover debido a su uso o falta de espacio libre

   **Or via the command line:**

   - Move files [using 'mover' to empty an array disk](../../release-notes/7.0.0.md#using-mover-to-empty-an-array-disk) to other array drives

   **Or manually:**

   - Move files manually to another location

   Once completed, navigate to ***Main → Array Devices*** and browse the disk to confirm it is empty. Proceed only when you are certain the disk is empty.
2. Follow the procedure for [changing a file system type](#changing-a-file-system-type). This formats the drive and erases all content, leaving a blank drive in the new format.
3. (Optional) Move your data back to the newly formatted drive, depending on where you moved the files.
4. If you have multiple drives to convert, repeat these steps for each drive.

:::note\[Timing]

El proceso puede tardar varias horas, dependiendo de la cantidad de datos y la velocidad de sus unidades. La mayor parte del tiempo se invierte en copiar archivos, lo cual puede ejecutarse sin supervisión.

:::

---

## Reformateando una unidad

Reformatear una unidad en Unraid borrará todos sus datos y creará un nuevo y vacío sistema de archivos. Este proceso es útil para resolver errores persistentes del sistema de archivos o empezar de nuevo con un nuevo formato.

:::warning

Reformatear borrará permanentemente todos los datos en la unidad. Siempre haga una copia de seguridad de los archivos importantes antes de comenzar.

:::

Para **reformatear de manera segura** su unidad:

1. **Detén el array**.
2. **Cambie el tipo de sistema de archivos**:
   - Vaya a la pestaña **Principal** y haga clic en la unidad que desea reformatear.
   - Seleccione un tipo diferente de sistema de archivos (por ejemplo, cambie de %%XFS|xfs%% a %%BTRFS|btrfs%%).
   - Inicie el %%array|array%%, y la unidad se mostrará como **no montable**.
   - Cuando se le indique, formatee la unidad.
3. **(Opcional) Cambie nuevamente a su tipo de sistema de archivos original**:
   - Detenga el %%array|array%% nuevamente.
   - Cambie el sistema de archivos de nuevo a su tipo preferido.
   - Inicie el %%array|array%% y formatee la unidad una vez más.

Este sencillo proceso asegura que la unidad esté completamente borrada y formateada como desee. El proceso de formateo generalmente toma solo unos minutos.

### Reformatear una unidad de cache

A veces, necesitará reformatear una unidad de %%cache|cache%% por las siguientes razones:

- Para cambiar el tipo de sistema de archivos (por ejemplo, de %%BTRFS|btrfs%% a %%XFS|xfs%% o viceversa)
- Para corregir errores persistentes del sistema de archivos
- Para comenzar de cero para nuevas cargas de trabajo

#### Preparation

Before reformatting, prepare the system:

1. Detenga el %%array|array%%.
2. Go to **Settings** and disable Docker and %%VM|vm%% services (this prevents their tabs from appearing during the process).
3. Start the %%array|array%% again.

#### Move data off the cache

Para mover datos fuera del cache:

1. Establezca el almacenamiento compartido y la acción de Mover (caché → array):
   - Ve a la pestaña **Comparticiones**.
   - For each share with files in the %%cache|cache%%, set **Primary storage** to the source %%cache|cache%% pool and **Secondary storage** to the %%array|array%%.
   - Establezca **Acción de Mover** en **caché → array**.
   - Note the shares you changed and their original settings.
2. In the **Main** tab, click **Move Now** and wait for completion. Ensure the %%cache|cache%% is empty.
   - If files remain, stop and check the forums for help.

#### Reformat the cache drive

Mantener sus pools %%BTRFS|btrfs%% en Unraid es esencial para mantenerlos funcionando bien y asegurar que sus datos estén seguros. Dos herramientas clave que querrá usar regularmente son **Balance** y **Scrub**. Estas operaciones ayudan a resolver problemas de asignación de espacio, optimizan el uso de su almacenamiento y protegen sus datos de la corrupción oculta.

1. Detenga el %%array|array%%.
2. Set the cache drive format:
   - In the **Main** tab, click the cache drive.
   - Choose between %%XFS|xfs%%, EXT4, or %%BTRFS|btrfs%%.
   - For a single-drive %%cache|cache%%, %%XFS|xfs%% or EXT4 are recommended.
   - Note that %%XFS|xfs%% and EXT4 are only available with one %%cache|cache%% slot.
3. Inicie el %%array|matriz%%.
4. Formatea la unidad de caché:
   - Confirm only the %%cache|cache%% drive is listed as unmountable.
   - Check the confirmation box and click **Format**.

#### Restore data and settings

Para restaurar datos y configuraciones:

1. For each share you changed, set **Primary storage** and **Secondary storage** back to their original values.
2. Move data back (array → cache):
   - For each share you changed, set **Primary storage** to the destination %%cache|cache%% pool and **Secondary storage** to the %%array|array%%.
   - Configura la **acción del Mover** a **conjunto → caché**.
   - In the **Main** tab, click **Move Now** to move data back to the %%cache|cache%%.
3. Detenga el %%array|array%%.
4. Go to **Settings** and re-enable Docker and %%VM|vm%% services.
5. Start the %%array|array%% to complete the process.

:::note\[Timing]

El tiempo que lleva mover datos con el %%Mover|mover%% y formatear la unidad puede variar de varios minutos a varias horas, dependiendo de la cantidad de datos y la velocidad de la unidad.

:::

---

## Operaciones de BTRFS

Mantener sus pools %%BTRFS|btrfs%% en Unraid es esencial para mantenerlos funcionando bien y asegurar que sus datos estén seguros. Dos herramientas clave que querrá usar regularmente son **Balance** y **Scrub**. Estas operaciones ayudan a resolver problemas de asignación de espacio, optimizan el uso de su almacenamiento y protegen sus datos de la corrupción oculta.

Let's break down what each operation does and when to use them:

### Equilibrio

The **Balance** operation redistributes data and metadata chunks across your %%BTRFS|btrfs%% pool. This process helps free up space, resolves allocation issues, and can fix "no space left on device" errors even when space seems available.

#### Cuándo ejecutar Balance

- When you encounter "no space left on device" errors but have free space.
- Después de añadir o quitar unidades en un pool.
- Para optimizar el uso del espacio y mejorar el rendimiento.

#### Cómo ejecutar Balance

1. In the %%WebGUI|web-gui%%, click the pool in the **Main** tab and select **Balance**.
2. (Optional) Add parameters for advanced use (refer to Unraid Help for details).
3. Click **Start** to begin.

:::note\[Timing]

Las operaciones de balance pueden llevar desde unos pocos minutos hasta varias horas, dependiendo del tamaño del pool y la cantidad de datos.

:::

### Depurar

The **Scrub** operation reads all data and metadata, checks the integrity of checksums, and repairs any corrupt blocks using available redundant copies. Scrubbing helps identify and fix silent data corruption, known as "bit rot," before it becomes a significant issue.

#### Cuándo ejecutar el Escrutinio

- Como parte del mantenimiento de rutina (consulta el programa recomendado a continuación).
- Después de apagados no limpios o si sospechas de corrupción.
- Con más frecuencia en pools de alto uso.

#### Programación recomendada

- Pools de alto uso: **Una vez a la semana**
- Todos los demás pools: **Una vez al mes**

#### Cómo ejecutar el Escrutinio

1. In the %%WebGUI|web-gui%%, click the pool in the **Main** tab and select **Scrub**.
2. Click **Start** to initiate.

:::note\[Timing]

Las operaciones de limpieza suelen ser más rápidas que un escaneo completo del disco porque solo verifican los datos asignados. Según el tamaño y uso del pool, espera que esto tome de unos pocos minutos a unas pocas horas.

:::

:::tip

Tanto **Balance** como **Scrub** pueden realizarse mientras el sistema está en línea, pero tenga en cuenta que el rendimiento puede verse afectado durante estas operaciones. Puede monitorear el progreso en el %%WebGUI|web-gui%%.

:::

Para más detalles sobre características avanzadas de %%BTRFS|btrfs%%, consulta la [documentación oficial de BTRFS](https://btrfs.readthedocs.io/en/latest/Introduction.html).

---

## Unidades no asignadas

Las unidades no asignadas son dispositivos de almacenamiento conectados a su servidor Unraid que no forman parte del %%array|array%% principal ni de ningún %%cache pool|cache-pool%%. Puede usar estas unidades para transferir archivos, crear copias de seguridad, o proporcionar almacenamiento rápido para %%virtual machines|vm%%.

:::note

All drives connected to your server when the %%array|array%% starts count toward your Unraid Attached Devices license limit, even if they aren't assigned to the %%array|array%% or a pool.

:::

### Usos comunes para unidades no asignadas

- Conecta unidades removibles para transferencias de archivos o copias de seguridad fáciles.
- Usa unidades dedicadas para tareas de alto rendimiento como ejecutar %%máquinas virtuales|vm%% o almacenamiento temporal de datos.

### Uso de los plugins de dispositivos no asignados

Para aprovechar al máximo tus unidades no asignadas, considera instalar los siguientes plugins desde la pestaña **Aplicaciones**:

- **[Unassigned Devices](https://unraid.net/community/apps?q=dlandon\&r=0#:~:text=and%20iso%20files.-,Unassigned%20Devices,-dlandon):** Este plugin te permite montar, compartir y gestionar unidades con sistemas de archivos que Unraid soporta, como %%XFS|xfs%%, %%BTRFS|btrfs%%, o NTFS.

- **[Unassigned Devices Plus](https://unraid.net/community/apps?q=dlandon\&r=0#:~:text=and%20iso%20files.-,Unassigned%20Devices%20Plus,-\(Addon\)):** Esta extensión amplía tus opciones al soportar sistemas de archivos adicionales, incluyendo ExFAT y HFS+.

Estos plugins permiten:

- Montar y desmontar unidades fácilmente desde la interfaz web de Unraid.
- Compartir tus unidades no asignadas por medio de la red.
- Automatizar el proceso de montaje cuando el servidor se inicia.
- Formatear o borrar unidades para uso futuro.
- Desconectar de manera segura unidades USB o externas sin complicaciones.

Para más detalles sobre la instalación y gestión de plugins, consulta [Plugins](../customize-your-experience/plugins.mdx).

---

## Solución de problemas

### La unidad se muestra como no montable

Si ves que una unidad en Unraid es **no montable**, podría deberse a una de dos razones principales:

1. If you just added a new drive to your setup, it will show as unmountable until you format it. Formatting creates a file system that allows the drive to store files. You can find the steps to format a drive [here](#creating-a-file-system-formatting).

2. If a drive that was previously working suddenly shows as unmountable, it likely has a file system issue. This can happen due to unexpected shutdowns, problems while writing data, or if the drive has been marked as disabled (which appears as a red 'x' in the %%WebGUI|web-gui%%).

:::important

No formatee una unidad no montable a menos que esté bien con perder todos los datos en ella. Formatear borrará todo y actualizará la información de %%parity|parity%%, haciendo que la recuperación sea imposible. Siempre intente primero reparar el sistema de archivos.

:::

Si tu unidad es no montable:

1. Determine if it's a new drive or a previously working drive.
2. For new drives: Format the drive to create a new file system (see [formatting steps](#creating-a-file-system-formatting)).
3. For previously working drives: Perform a file system check or repair (see [Checking a file system](#checking-a-file-system)). Avoid formatting if you want to keep the data.

:::note

Si una unidad está tanto no montable como deshabilitada (x roja), primero ejecute la verificación/reparación en la unidad **emulada**. Si la unidad emulada también es no montable y intenta reconstruirla, la nueva unidad también será no montable.

:::

A partir de Unraid 7.0, la reparación del sistema de archivos XFS ahora está completamente automatizada a través del WebGUI:

:::important[Why ¿la paridad no es suficiente?]

Aunque %%parity|parity%% ayuda a recuperar una unidad fallida, no puede corregir problemas del sistema de archivos. Si el sistema de archivos está dañado, %%parity|parity%% simplemente replicará ese daño en la nueva unidad.

Si no estás seguro:

- Descarga tus registros del sistema navegando a ***Herramientas → Diagnósticos***.
- Para obtener ayuda experta, publica tu problema junto con los diagnósticos en los [foros de Unraid](https://forums.unraid.net/).

:::

:::note[Just para reiterar]

- Solo formatea unidades no montables si son completamente nuevas o si quieres borrar todos los datos.
- Usa la comprobación/reparación del sistema de archivos para corregir archivos corruptos; no relies en %%parity|parity%% para resolver estos problemas.
- Para %%cache pools|cache-pool%% con múltiples unidades, considera usar ya sea %%BTRFS|btrfs%% o %%ZFS|zfs%%.
- Siempre verifica antes de formatear o reparar unidades para evitar pérdidas accidentales de datos.

:::

---

### Comprobación de un sistema de archivos

Si un disco que anteriormente se montaba sin problemas ahora se muestra como **no montable**, generalmente indica corrupción del sistema de archivos. Esto puede resultar de un apagado no limpio, una fallida operación de escritura, o el disco siendo marcado como deshabilitado en el %%WebGUI|web-gui%%. Revisar y reparar el sistema de archivos es generalmente más rápido y seguro que realizar una reconstrucción, por lo que se recomienda intentarlo antes de formatear o reconstruir el disco.

:::important

If the %%WebGUI|web-gui%% suggests formatting an unmountable drive, **do not format** unless you intend to erase all data. Formatting will destroy the contents of the drive and update %%parity|parity%%, making recovery impossible.

:::

#### Preparándose para comprobar o reparar

1. Identifica el tipo de sistema de archivos:
   - In the **Main** tab, select your disk (e.g., Disk 3, Cache).
   - Find the **File system type** (should be %%XFS|xfs%%, EXT4, %%BTRFS|btrfs%%, or %%ZFS|zfs%%).

2. Inicie el array en el modo correcto:
   - For **%%XFS|xfs%%** or **EXT4**, start the %%array|array%% in **%%Maintenance Mode|maintenance-mode%%**.
   - Para **%%BTRFS|btrfs%%**, inicie el %%array|array%% en **modo Normal** para un %%scrub|scrub%% o **%%modo de Mantenimiento|maintenance-mode%%** para una reparación.
   - Para **%%ZFS|zfs%%**, consulta la sección de %%ZFS|zfs%% a continuación.

3. If the disk is disabled and being emulated, run the check/repair on the %%emulated disk|emulated-disk%% before attempting a rebuild. If the %%emulated disk|emulated-disk%% is unmountable, the rebuilt disk will also be unmountable.

#### Mensajes de error comunes

| Mensaje                                                                  | Significado / Acción                                                               |
| ------------------------------------------------------------------------ | ---------------------------------------------------------------------------------- |
| **El superbloque tiene un número mágico malo**                           | Corrupción severa; intenta una reparación del sistema de archivos.                 |
| **El sistema de archivos está sucio**                                    | Apagado no limpio; ejecuta una comprobación del sistema de archivos.               |
| **Detectada corrupción de metadatos**                                    | Las estructuras del sistema de archivos están dañadas; inicia una reparación.      |
| **No se encontró una %%BTRFS\|btrfs%% válida**                           | El disco puede no pertenecer a un pool válido; verifica las asignaciones del pool. |
| **Montar: tipo de sistema de archivos erróneo, opción incorrecta, etc.** | Selección incorrecta del sistema de archivos o disco sin formatear.                |
| **No se puede montar /dev/mdX: la estructura necesita limpieza**         | El sistema de archivos está corrompido; realiza una reparación.                    |

#### Checking via the WebGUI

1. Start the %%array|array%% in the correct mode (refer to the steps above).
2. In the **Main** tab, select the disk you wish to check.
3. Scroll to **Check Filesystem Status**.
4. For XFS: You will see a **CHECK** button without any options to enter. The system automatically determines the necessary actions based on the check results.
5. For other file systems: Enter any necessary options (for details, see **Help** in the upper right).
6. Click **Check** to initiate the process.
7. Monitor progress in the output box. Use **Refresh** if required.
8. Review results. If uncertain, copy the output and post it on the [forums](https://forums.unraid.net/) for advice.

#### XFS automatic repair workflow

XFS file system repair is fully automated through the WebGUI:

1. Click the **CHECK** button (no options to enter)
2. Check results:
   - **No se detectó corrupción**: Muestra "no se detectó corrupción del sistema de archivos" y el botón **CHECK** permanece
   - **Se detectó corrupción**: Muestra "se detectó corrupción del sistema de archivos" y aparece un botón **FIX**
3. Click **FIX** to automatically repair the file system
4. If needed, a **ZERO LOG** button may appear
5. Shows "filesystem repaired" when the process is complete

Este sistema automatizado elimina la necesidad de que los usuarios ingresen manualmente las opciones de reparación y asegura que se siga la secuencia de reparación correcta.

#### Checking via the command line

<Tabs>
  <TabItem value="xfs" label="XFS">
    <FsCheckCliXfs />
  </TabItem>

  <TabItem value="btrfs" label="BTRFS">
    <FsCheckCliBtrfs />
  </TabItem>

  <TabItem value="zfs" label="ZFS">
    <FsCheckCliZfs />
  </TabItem>
</Tabs>

:::tip

- Las reparaciones de sistemas de archivos generalmente son más rápidas que una reconstrucción completa y pueden restaurar el acceso sin pérdida de datos.
- Reconstruir un disco **no** resuelve la corrupción del sistema de archivos; siempre ejecute una verificación o reparación primero.
- Si tiene dudas, publique sus diagnósticos y mensajes de error en los [foros](https://forums.unraid.net/) de Unraid para recibir asistencia experta.

:::

---

### Reparación de un sistema de archivos

Si un chequeo de su sistema de archivos encuentra errores, es posible que deba ejecutar una reparación para volver a tener acceso a sus datos. Las reparaciones generalmente toman menos tiempo que una reconstrucción total, pero es importante leer la salida con cuidado y buscar ayuda en los [foros](https://forums.unraid.net/) si no está seguro de algo.

:::note\[Timing]

Las reparaciones pueden tardar desde varios minutos hasta varias horas, especialmente para sistemas de archivos más grandes o muy corruptos. El progreso puede parecer lento, pero puede verificar la actividad mirando las estadísticas de lectura/escritura en la Página Principal.

:::

#### Preparación para reparar

1. In the **Main** tab, click the disk and identify the file system type (%%XFS|xfs%%, EXT4, %%BTRFS|btrfs%%, or %%ZFS|zfs%%).

2. Inicie el array en el modo correcto:

   - **For %%XFS|xfs%% or EXT4:** Use **%%Maintenance Mode|maintenance-mode%%**.
   - **Para %%BTRFS|btrfs%%:** Use **Modo Normal** para un %%scrub|fregado%%; use **Modo de Mantenimiento** para una reparación.
   - **For %%ZFS|zfs%%:** Use **Normal mode** and run a %%scrub|scrub%% to check for errors. See the [ZFS storage page](../../advanced-configurations/optimize-storage/zfs-storage.mdx) for guidance on %%ZFS|zfs%% pool maintenance and repair procedures.

3. If the disk is disabled and being emulated, run the repair on the %%emulated disk|emulated-disk%% before trying to do a rebuild.

#### Repairing via the WebGUI

1. Start the %%array|array%% in the correct mode (refer to the section above).
2. In the **Main** tab, click the disk you want to repair.
3. Scroll down to **Check Filesystem Status**.
4. For XFS: The repair process is fully automated. Click **CHECK**, then **FIX** if corruption is detected, and **ZERO LOG** if prompted.
5. For other file systems: Remove any options that would run the process in check-only mode (like `--readonly` for %%BTRFS|btrfs%%).
6. If prompted, add the suggested options as indicated in the check output.
7. Click **Check** to begin the repair.
8. Monitor progress in the output box. Use **Refresh** if needed.
9. If you notice a `lost+found` folder after the repair, it may contain files or folders that couldn't be fully recovered. Use backups or the Linux `file` command to identify the contents if necessary.

:::info

Si no está seguro acerca de la salida, cópiela y compártala en los [foros de Unraid](https://forums.unraid.net/) para obtener ayuda de expertos. Use la opción de formato de código para mantenerlo legible.

:::

#### Repairing via the command line

<Tabs>
  <TabItem value="xfs" label="XFS">
    <FsRepairCliXfs />
  </TabItem>

  <TabItem value="btrfs" label="BTRFS">
    <FsRepairCliBtrfs />
  </TabItem>

  <TabItem value="zfs" label="ZFS">
    <FsRepairCliZfs />
  </TabItem>
</Tabs>

:::info[After la reparación]

- Detenga y reinicie el %%array|array%% en **Modo Normal**.
- La unidad ahora debería montar y ser accesible.
- Si ve una carpeta `lost+found`, verifique su contenido para cualquier archivo importante.

:::

Si no entiende la salida de la reparación o si el proceso falla, comparta sus diagnósticos y el registro de reparación en los [foros de Unraid](https://forums.unraid.net/) para obtener más ayuda.
