---
sidebar_position: 3
sidebar_label: Piscinas de caché
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import RemoveDiskGui from './partials/remove-disk-gui.mdx';
import RemoveDiskCommandLine from './partials/remove-disk-command-line.mdx';
import PoolSingleDeviceMode from './partials/pool-single-device-mode.mdx';
import PoolMultiDeviceMode from './partials/pool-multi-device-mode.mdx';
import MovePoolToArray from './partials/move-pool-to-array.mdx';
import MoveArrayToPool from './partials/move-array-to-pool.mdx';
import MoveBetweenPoolsUsingMover from './partials/move-between-pools-using-mover.mdx';
import MoveBetweenPoolsManual from './partials/move-between-pools-manual.mdx';

# Piscinas de caché

In Unraid, a %%cache pool|cache-pool%% is a collection of one or more drives, typically SSDs or high-speed HDDs. These drives temporarily store data before it's moved to your main [%%array|array%%](./array-configuration.mdx). Using %%cache pools|cache-pool%% can significantly enhance write speeds, protect your data, and provide dedicated storage for specific tasks like running Docker containers or [%%virtual machines|vm%%](../create-virtual-machines/overview-and-system-prep.mdx).

%%Cache pools|cache-pool%% offer several advantages, making them a valuable addition to your Unraid setup, such as:

1. **Faster write speeds:** %%Cache pools|cache-pool%% allow you to quickly write data to faster drives before it gets transferred to the main %%array|array%%. This greatly enhances perceived performance when saving files.

2. **Protección de datos para archivos en caché:** Al utilizar múltiples unidades en una %%cache pool|cache-pool%% (configurándolas en %%RAID 1|raid1%%), agregas redundancia. Esto significa que tus datos en caché están protegidos de fallos de unidad antes de llegar a la %%array|array%% principal.

3. **Optimized storage for applications:** Storing applications like Docker containers or %%virtual machines|vm%% on a %%cache pool|cache-pool%% improves their performance, reduces wear on your main %%array|array%%, and minimizes the time it takes to access frequently-used files.

4. **Flexible and dedicated storage:** With multiple %%cache pools|cache-pool%%, you can assign specific pools for different tasks. For instance, you could have one pool dedicated to downloads and another for %%virtual machines|vm%%, reducing competition for resources and boosting efficiency.

:::info[Keep en Mente]

- **Múltiples piscinas:** Puede crear y nombrar diferentes %%cache pools|cache-pool%%, adaptándolas a sus necesidades específicas.
- **SSD vs. HDD:** Los SSD son excelentes para la velocidad, mientras que puedes usar HDD para cargas de trabajo de datos grandes y secuenciales. Además, los HDD pueden ayudar a prolongar la vida útil de tus SSD.
- **La redundancia importa:** Para proteger tus datos, utiliza más de una unidad en una %%cache pool|cache-pool%%. Un pool de una sola unidad no te protegerá de posibles fallos en la unidad.
- **Elección del sistema de archivos:** El sistema de archivos predeterminado para %%cache pools|cache-pool%% es %%BTRFS|btrfs%%, que admite varias opciones de %%RAID|raid%% para mayor redundancia y flexibilidad. Para más detalles sobre la selección del sistema de archivos, consulta [Sistemas de archivos](./file-systems.mdx).
- **Integración de %%Mover|mover%%:** Los datos escritos en una %%cache pool|cache-pool%% se transfieren automáticamente a tu %%array|array%% principal según un horario que configures. Esto mantiene tus [%%user shares|user-share%%](./shares.mdx) organizados y fáciles de gestionar.
- **Rendimiento de la aplicación:** Al colocar contenedores Docker, datos de aplicaciones y discos de %%VM|vm%% en una %%cache pool|cache-pool%%, mejora la velocidad de acceso y minimiza el desgaste en su almacenamiento principal.
  :::

---

## Modos de piscina

Las %%cache pools|cache-pool%% en Unraid pueden operar en dos modos principales: **modo dispositivo único** y **modo multi-dispositivo**. Conocer la diferencia entre estos modos te ayudará a encontrar el equilibrio adecuado entre rendimiento, flexibilidad y protección de datos para tus necesidades.

<Tabs>
  <TabItem value="dispositivo único" label="Modo de dispositivo único" default>
    <PoolSingleDeviceMode />
  </TabItem>

  <TabItem value="multi-dispositivo" label="Modo multi-dispositivo">
    <PoolMultiDeviceMode />
  </TabItem>
</Tabs>

Tareas comunes para la %%cache pool|cache-pool%% incluyen:

- Respaldar su piscina al %%array|array%%
- Cambiar entre modos de dispositivo único y multi-dispositivo
- Agregar discos a una piscina
- Reemplazar discos en una piscina

## Respaldando su piscina de caché al array

Backing up your %%cache pool|cache-pool%% to the main %%array|array%% is a crucial step before making any upgrades, reformatting, or replacing your cache devices. This process ensures that important data - like Docker containers, app data, and %%virtual machine|vm%% files - are securely stored on the main %%array|array%%, minimizing the risk during maintenance.

<h3>¿Por qué respaldar su %%cache pool|cache-pool%%?</h3>

- **Protección de datos:** Salvaguarde sus archivos importantes antes de realizar cambios o actualizaciones de hardware.
- **Prevención de pérdida accidental:** Reduzca el riesgo de perder datos mientras reformatea o reemplaza dispositivos.
- **Restauración sencilla:** Asegúrese de poder restaurar rápidamente sus datos de aplicaciones y %%máquinas virtuales|vm%% después del mantenimiento.

:::important
Este proceso detendrá todos los contenedores Docker y las %%máquinas virtuales|vm%%, así que asegúrate de planificar un tiempo de inactividad y notificar a los usuarios si es necesario. Para obtener más información sobre la gestión de contenedores Docker, consulta [Gestionar y personalizar contenedores](../run-docker-containers/managing-and-customizing-containers.mdx).
:::

Para respaldar su %%cache pool|cache-pool%%:

1. **Detenga todos los contenedores Docker en ejecución y %%máquinas virtuales|vm%%:** Esto es esencial para un proceso de respaldo fluido.
2. **Deshabilite %%máquinas virtuales|vm%%:**
   - Vaya a ***Configuración → VM Manager***.
   - Apague %%VMs|vm%% y haga clic en **Aplicar**.
3. **Deshabilite Docker**:
   - Navegue a ***Configuración → Docker***.
   - Apague Docker y haga clic en **Aplicar**.
4. **Establezca el almacenamiento compartido y la acción de Mover (caché → array)**:
   - Ve a la pestaña **Comparticiones**.
   - Para cada %%user share|user-share%% que desee mover, establezca **Almacenamiento primario** en el %%cache pool|cache-pool%% de origen y **Almacenamiento secundario** en el %%array|array%%.
   - Establezca **Acción de Mover** en **caché → array**.
5. **Verifique el espacio en el %%array|array%%:** Asegúrese de que haya suficiente espacio libre para sus archivos.
6. **Mover archivos a la %%array|array%%**: Desde la página **Principal**, haga clic en **Mover ahora**. Esto transfiere archivos de la %%cache pool|cache-pool%% a la %%array|array%% según la acción de Mover.
7. **Verifique que su piscina esté vacía:** Una vez que el %%Mover|mover%% haya terminado, verifique que no queden archivos en la %%cache pool|cache-pool%%.

:::note
Recuerde que los archivos ubicados directamente en el dispositivo de la piscina (no forman parte de ningún share) deben moverse manualmente.
:::

### Restaurar archivos a la piscina de caché

Después de completar su mantenimiento o de haber reemplazado su dispositivo, puede restaurar archivos del %%array|array%% de vuelta a la %%cache pool|cache-pool%% siguiendo estos pasos:

1. \*\*Establezca el almacenamiento compartido y la acción de Mover (array → caché):
   - Ve a la pestaña **Comparticiones**.
   - Para cada %%user share|user-share%% que desee restaurar, establezca **Almacenamiento primario** en el %%cache pool|cache-pool%% de destino y **Almacenamiento secundario** en el %%array|array%%.
   - Configura la **acción del Mover** a **conjunto → caché**.
2. **Verifique el espacio en la piscina:** Asegúrese de que haya suficiente espacio libre en la %%cache pool|cache-pool%%.
3. **Mueva archivos de vuelta a la piscina:** Vaya a la página principal **Main** y haga clic en **Mover ahora** para transferir archivos de vuelta a la %%cache pool|cache-pool%%.
4. **Verifique el contenido en la piscina:** Después de que el movimiento se complete, verifique que su %%cache pool|cache-pool%% contenga los archivos esperados y que los %@shares@% estén vacíos en el %%array|array%%.
5. **Vuelva a habilitar Docker:** Navegue a ***Configuración → Docker*** y encienda Docker nuevamente, luego haga clic en **Aplicar**.
6. **Vuelva a habilitar %%máquinas virtuales|vm%%:** Vaya a ***Configuración → VM Manager*** y encienda %%VMs|vm%% nuevamente, luego haga clic en **Aplicar**.
7. **Reinicie contenedores Docker y %%VMs|vm%%:** Finalmente, inicie cualquier contenedor Docker o %%máquinas virtuales|vm%% que desee ejecutar nuevamente.

---

## Cambio a modo multi-dispositivo

%%Cache pools|cache-pool%% in Unraid can be expanded from a single device to multiple devices, allowing for increased capacity and redundancy. To take advantage of multi-device mode, your pool must be formatted as %%BTRFS|btrfs%% or %%ZFS|zfs%%.

### Convertir una piscina a BTRFS o ZFS

Si su %%cache pool|cache-pool%% aún no está formateada como %%BTRFS|btrfs%% o %%ZFS|zfs%%, siga estos pasos sencillos:

1. **Haz una copia de seguridad de tus datos**: Primero, asegúrate de hacer una copia de seguridad de cualquier contenido importante. (Consulta [Hacer una copia de seguridad de tu cache pool en la array](#backing-up-your-cache-pool-to-the-array))
2. **Detener el %%array|array%%:** Asegúrese de detener el %%array|array%% para comenzar el proceso de conversión.
3. **Cambiar el sistema de archivos:** Haga clic en la piscina en la pestaña **Main** y seleccione **BTRFS** o **ZFS** como el formato del sistema de archivos.
4. **Iniciar el %%array|array%%:** Después de cambiar el formato, inicie el %%array|array%%.
5. **Formatear el pool**: El pool aparecerá como **no montable** y ofrecerá la opción para formatear. Confirma y haz clic en el botón **Formatear**.
6. **Completar el formateo:** Una vez que el formateo esté completo, tendrá una piscina %%BTRFS|btrfs%% o %%ZFS|zfs%%, aunque solo tendrá un dispositivo en esta etapa.
7. **Agregar más discos si lo desea:** Puede proceder a agregar más discos a su piscina si lo desea.
8. **Restaurar sus datos:** Finalmente, siga los pasos de restauración del procedimiento de respaldo para mover sus datos de vuelta a la piscina.

### Agregar discos para crear una piscina multi-dispositivo

Una vez que su piscina esté formateada como %%BTRFS|btrfs%% o %%ZFS|zfs%%, puede agregar más discos para aumentar la redundancia y ampliar el almacenamiento.

Para agregar más discos para redundancia:

1. **Detener el %%array|array%%:** Nuevamente, comience deteniendo el %%array|array%%.
2. **Asignar discos adicionales:** En la pestaña **Main**, puede asignar uno o más dispositivos nuevos a su piscina.
3. **Iniciar el %%array|array%%:** Una vez que los discos están asignados, inicie el %%array|array%%.
4. **Balanceo/resilver automáticamente:** Unraid incorporará automáticamente los nuevos dispositivos a la piscina e iniciará un **balanceo** (%%BTRFS|btrfs%%) o **resilver** (%%ZFS|zfs%%) para distribuir y proteger los datos entre los dispositivos.
5. **Monitorear el progreso:** En la pestaña **Main**, haga clic en el primer dispositivo de piscina, luego verifique el **Estado del Balanceo** (para %%BTRFS|btrfs%%) o **zpool status** (para %%ZFS|zfs%%) para seguir el progreso y confirmar que el nuevo dispositivo se agregó con éxito.
6. **Piscina ahora en modo multi-dispositivo:** Una vez que el balanceo se complete, su piscina estará operando en **modo multi-dispositivo** con capacidad y redundancia mejoradas.

:::tip
Puede utilizar el [Calculador de uso de discos BTRFS](http://carfax.org.uk/btrfs-usage/) para estimar espacio disponible y redundancia según su nivel de %%RAID|raid%% elegido y tamaños de dispositivos.
:::

---

## Agregar discos a una piscina

A medida que crecen tus necesidades de almacenamiento, es posible que desees expandir tu pool de caché agregando discos adicionales. Este proceso te permite aumentar tanto la capacidad como el rendimiento mientras mantienes la protección de datos a través de configuraciones de RAID.

:::note
Si deseas agregar discos a tu pool, solo asegúrate de que tu pool ya esté formateado como %%BTRFS|btrfs%% o %%ZFS|zfs%%. Si no lo está, deberás formatearlo primero, como se explica en [la sección anterior](#converting-a-pool-to-btrfs-or-zfs).
:::

Para agregar un disco a una piscina:

1. **Detener el %%array|array%%:** Empiece por detener el %%array|array%% actual para asegurar que el proceso se desarrolle sin problemas.
2. **Abre la pestaña principal**: Ve a la pestaña **Principal** en el %%WebGUI|web-gui%%. Aquí es donde gestionarás tus discos.
3. **Encuentra la sección Dispositivos del pool**: Desplázate hacia abajo hasta que veas la sección *Dispositivos del pool*. Aquí es donde puedes realizar cambios en la configuración de tus discos.
4. **Ajusta el número de ranuras**: Establece **Ranuras** exactamente al número de dispositivos adicionales que estés agregando. No puedes dejar ranuras vacías adicionales; la array no comenzará con ranuras de pool no usadas.
5. **Asigne sus dispositivos:** Elija qué dispositivos (discos) desea agregar a la piscina y asígnelos a las ranuras disponibles.
6. **Iniciar el %%array|array%%:** Después de haber asignado sus dispositivos, inicie el %%array|array%% de nuevo para habilitar estos cambios.

---

## Eliminar discos de una piscina

Eliminar un disco de una %%BTRFS|btrfs%% o %%ZFS|zfs%% multi-dispositivo %%cache pool|cache-pool%% puede ayudarte a recuperar hardware, reemplazar un disco defectuoso o reconfigurar tu almacenamiento. Este proceso solo es posible si tu pool está configurado para redundancia (como %%RAID 1|raid1%% tanto para datos como para metadatos) y los dispositivos restantes tienen suficiente espacio para contener todos tus datos.

<Tabs>
  <TabItem value="gui" label="Usando el WebGUI" default>
    <RemoveDiskGui />
  </TabItem>

  <TabItem value="línea de comandos" label="Usando la línea de comandos (Avanzado)">
    <RemoveDiskCommandLine />
  </TabItem>
</Tabs>

### Cambio de niveles RAID del grupo

%%BTRFS|btrfs%% proporciona la capacidad de cambiar niveles de %%RAID|raid%% para %%cache pools|cache-pool%% de manera dinámica, permitiéndote ajustar configuraciones sin detener la %%array|array%% o perder datos. Esta flexibilidad te permite optimizar para rendimiento, redundancia o eficiencia de almacenamiento a medida que cambian tus requisitos.

<h4>Niveles %%RAID|raid%% Soportados</h4>

| Nivel %%RAID\|raid%% | Protección de Datos | Eficiencia Espacial | Caso de Uso                                                                                                             |
| -------------------- | ------------------- | ------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| Único                | Ninguno             | 100%                | Almacenamiento temporal o datos no críticos donde no se necesita redundancia.                                           |
| %%RAID 0\|raid0%%    | Ninguno             | 100%                | Maximiza el rendimiento y la capacidad, pero no se recomienda para datos críticos.                                      |
| %%RAID 1\|raid1%%    | 1 fallo de disco    | 50%                 | Predeterminado para los pools de Unraid. Ideal para almacenamiento de Docker/%%VM\|vm%% y datos críticos.               |
| %%RAID 10\|raid10%%  | 1 fallo de disco    | 50%                 | Combina la velocidad de %%RAID 0\|raid0%% con la redundancia de %%RAID 1\|raid1%% para necesidades de alto rendimiento. |
| %%RAID 5\|raid5%%\*  | 1 fallo de disco    | 67-94%              | **Experimental.** Equilibra capacidad y redundancia para almacenamiento de medios grande.                               |
| %%RAID 6\|raid6%%\*  | 2 fallos de disco   | 50-88%              | **Experimental.** Proporciona protección extra para almacenamiento de archivo con discos grandes.                       |

:::important
%%RAID 5|raid 5%% y %%RAID 6|raid 6%% se consideran experimentales en %%BTRFS|btrfs%%. %%ZFS|zfs%% proporciona un soporte más maduro para estos niveles de %%RAID|raid%%. Úsalo con precaución y asegúrate de tener copias de seguridad. Evita usar niveles experimentales de %%RAID|raid%% para datos críticos.
:::

Para cambiar el nivel %%RAID|raid%% de una agrupación:

1. **Inicia la %%array|array%%** en modo normal si no está ya en ejecución.
2. **Haz clic en el nombre de la agrupación** en la pestaña **Principal**.
3. **Desplázate al Estado de Equilibrio**: Visualiza los niveles %%RAID|raid%% actuales para datos y metadatos.
4. **Selecciona el nuevo perfil %%RAID|raid%%**: Escoge de un menú desplegable de perfiles predefinidos.
5. **Inicia la operación de equilibrio**: Haz clic en **Equilibrio** para comenzar la conversión.

<div style={{ margen: 'auto', maxAnchura: '600px', display: 'flex', flexDirection: 'columna', alignItems: 'centro' }}>
  ![Conversión de %%RAID 1|raid1%% a perfil único](/img/Btrfs-raid1.jpg)
  <p class="caption-center">*Ejemplo: Conversión de %%RAID 1|raid1%% a perfil único*</p>
</div>

6. **Supervisa el progreso**: Las operaciones de equilibrio pueden durar desde varias horas hasta días, dependiendo de la cantidad de datos en la agrupación, velocidades de los discos y la complejidad del nivel %%RAID|raid%% seleccionado.

<details>
  <summary>Solucionar problemas de operaciones de equilibrio si se atascan - Haz clic para expandir/colapsar</summary>

  Si una operación de equilibrio parece atascada o no responde, sigue estos pasos:

  1. **Revisa los registros**: Ve a **Herramientas → Registros** y filtra entradas `btrfs`.
  2. **Detén y reanuda la operación**:
     - Haz clic en **Cancelar Equilibrio**.
     - Reinicia la %%array|array%%.
     - Inicia nuevamente la operación de equilibrio.
  3. **Verifica el estado de salud del disco**: Realiza pruebas %%SMART|smart%% en todos los dispositivos del pool. Para más información sobre el monitoreo del estado de salud del disco, consulta [Reportes SMART y salud del disco](../../system-administration/monitor-performance/smart-reports-and-disk-health.mdx).
  4. **Verifica espacio libre**: Asegura que haya al menos 10-15% de espacio libre disponible en la agrupación.
  5. **Diagnósticos posteriores**: Comparte los registros en los [foros de Unraid](https://forums.unraid.net/) si los problemas persisten. Para obtener orientación sobre cómo capturar diagnósticos, consulta [Captura de diagnósticos y registros](../../troubleshooting/diagnostics/capture-diagnostics-and-logs.mdx).
</details>

Para detalles avanzados de configuración de %%BTRFS|btrfs%%, consulta la [wiki BTRFS](https://btrfs.wiki.kernel.org/index.php/Using_Btrfs_with_Multiple_Devices).

---

## Reemplazar un disco en una agrupación

Reemplazar un disco en tu %%cache pool|cache-pool%% es una tarea importante que ayuda a mantener el rendimiento y la fiabilidad de tu sistema de almacenamiento.

:::note\[Prerequisites]

- **Verifica la configuración de tu pool**: Asegúrate de que tu pool esté configurado con un perfil de %%RAID|raid%% redundante, como %%RAID 1|raid1%%. Puedes hacer esto yendo a ***Principal → Pool → Estado de Balance*** (para %%BTRFS|btrfs%%) o estado del pool ZFS (para %%ZFS|zfs%%) en tu interfaz de gestión.
- **Elige el disco de reemplazo adecuado:** El nuevo disco debe ser del mismo tamaño o más grande que el que estás reemplazando.
- **Capacidad de intercambio en caliente:** Si tu hardware es compatible con el intercambio en caliente, no necesitarás apagar tu sistema para reemplazar el disco.

Para reemplazar un disco en una agrupación:

1. **Detén la %%array|array%%**: Ve a la pestaña **Principal**, encuentra la sección **Operación de la Array** y haz clic en el botón **Detener**. Esto detendrá de manera segura la %%array|array%% para prepararse para el reemplazo del disco.
2. **(Opcional) Quitar el disco antiguo**: Si no tienes una configuración capaz de intercambiar en caliente, necesitarás desconectar físicamente el disco antiguo. Asegúrate de hacer esto con cuidado para evitar cualquier daño.
3. **Instala el disco de reemplazo**: Inserta el nuevo disco en tu sistema. Asegúrate de que esté debidamente conectado y asegurado.
4. **Actualiza el %%WebGUI|web-gui%%**: Vuelve a la pestaña **Principal** y actualiza la página para que el sistema detecte tu nuevo disco.
5. **Asigna el nuevo disco**: Una vez detectado, encuentra la ranura de la agrupación donde estaba ubicado el disco antiguo y asigna el nuevo disco a esa ranura.
6. **Inicia la %%array|array%%**: Haz clic en el botón **Iniciar** para comenzar el proceso de integrar el nuevo disco en la %%array|array%%.
7. **Monitorea la reconstrucción**: El sistema comenzará automáticamente a reconstruir los datos en el nuevo disco. Puedes seguir el progreso en el %%WebGUI|web-gui%%.

:::important[Timing]
La reconstrucción puede tardar algún tiempo, dependiendo del tamaño del disco y la carga actual en tu sistema. Por ejemplo, reconstruir un SSD de 4TB en una configuración %%RAID 1|raid1%% puede llevar aproximadamente de 3 a 6 horas. Es una buena idea planificar esto cuando puedas dejar que el sistema trabaje sin interrupciones.
:::

---

## Espacio libre mínimo para una agrupación de caché

Establecer un espacio mínimo libre para tu %%cache pool|cache-pool%% puede proporcionar un mejor control sobre la colocación de archivos, especialmente cuando se trata de archivos grandes como videos de alta resolución. Esta configuración ayuda a que Unraid sepa cuándo dejar de escribir en el pool y comenzar a escribir directamente en la %%array|array%% de almacenamiento más grande, evitando interrupciones o corrupción de datos.

:::tip[Example]
Si a menudo descargas archivos de alrededor de 10 GB, establece el espacio libre mínimo en al menos 10 GB, pero idealmente 20 GB para permitir ajustes.
:::

Puedes acceder al Espacio Libre Mínimo haciendo clic en el nombre de la agrupación en la pestaña **Principal** y yendo a **Configuraciones Individuales de la Agrupación**.

<h4>Cómo funciona</h4>

- Cuando transfieres un archivo a una carpeta compartida que incluye una agrupación, Unraid respetará primero el ajuste de mínima cantidad de espacio libre que encuentre (ya sea el mínimo de espacio libre de la carpeta o el mínimo de espacio libre de la agrupación, lo que se alcance primero).
- La configuración de espacio libre mínimo le indica a Unraid que deje de usar el %%cache pool|cache-pool%% cuando el espacio libre caiga por debajo de esta cantidad.
- If your share uses a %%cache pool|cache-pool%% as **Primary storage**, files go to the pool until it reaches the minimum free space, then they are sent directly to the %%array|array%%.
- Si se configura para usar una %%cache pool|cache-pool%% exclusivamente (sin **almacenamiento secundario**), esta configuración no se aplica.
- Si está configurado para usar sólo la %%array|array%% como **Almacenamiento Primario**, los archivos van directamente a la %%array|array%%.

:::tip[Use ejemplo de caso]
La participación de medios tiene el nivel establecido en 20GB, lo cual es apropiado para los archivos en esa participación. Sin embargo, si también usas el pool para una VM y deseas dejar un margen en caso de que el vdisk crezca, podrías establecer el nivel del pool en 50GB. De esta manera, cualquier transferencia a la participación de medios después de que el pool tenga menos de 50GB libres iría directamente a la array.
:::

:::tip[Best práctica]
Establece el espacio mínimo libre al menos al tamaño del archivo más grande que esperas, preferentemente el doble de ese tamaño. Por ejemplo, si tu archivo más grande es de 30 GB, establece el mínimo en 60 GB.
:::

:::caution
**No establezcas el espacio mínimo libre en 0.** Esto puede causar errores de disco lleno. Siempre usa un valor razonable.
:::

---

## Mover archivos entre un pool y la matriz

Hay ocasiones en las que es posible que necesites mover archivos entre tu %%cache pool|cache-pool%% y la %%array|array%% principal, como al prepararte para el mantenimiento, actualizar hardware u optimizar el rendimiento. Unraid proporciona una herramienta integrada llamada %%Mover|mover%% para automatizar este proceso para [%%user shares|user-share%%](./shares.mdx).

:::tip
Siempre desactiva los servicios de Docker y %%VM|vm%% antes de mover archivos con el %%Mover|mover%%. Esto evita que se omitan archivos abiertos durante la transferencia.
:::

<Tabs>
  <TabItem value="pool-a-matriz" label="Pool a matriz" default>
    <MovePoolToArray />
  </TabItem>

  <TabItem value="matriz-a-pool" label="Matriz a pool">
    <MoveArrayToPool />
  </TabItem>
</Tabs>

<details>
  <summary><strong>¿Por qué a veces los archivos terminan en el pool o la caché incorrecta?</strong> - Haga clic para expandir/contraer</summary>

  Cuando mueves archivos entre [%%user shares|user-share%%](./shares.mdx) a nivel de Linux (por ejemplo, usando `mv` o dentro de un contenedor de Docker), Linux intenta optimizar la operación. Si tanto la fuente como el destino aparecen en el mismo punto de montaje (`/mnt/user`), Linux podría renombrar el archivo en lugar de moverlo. Esto puede resultar en archivos que permanecen en el disco o pool original, incluso si la configuración "Usar caché" del compartir está en "No".

  Para asegurarte de que los archivos se muevan como se espera, considera las siguientes opciones:

  - Usar la herramienta %%Mover|mover%%.
  - Copiar archivos y luego eliminar los originales.
  - Mover archivos a través de la red.

  Estos métodos ayudan a prevenir que los archivos terminen en la ubicación incorrecta.
</details>

---

## Múltiples pools

Unraid te permite crear y gestionar hasta 35 pools de almacenamiento separados, cada uno con hasta 60 dispositivos. Múltiples pools te brindan flexibilidad para asignar almacenamiento para diferentes tareas, mejorar el rendimiento y personalizar la redundancia según tus necesidades. Cada pool puede usar un sistema de archivos diferente, nivel de %%RAID|raid%% y tipo de dispositivo (SSD, HDD, NVMe, etc.).

<h4>¿Por qué usar múltiples pooles?</h4>

- **Optimizar el rendimiento:** Pools separados para %%VMs|vm%%, contenedores Docker, descargas o contenido multimedia pueden mejorar la velocidad y reducir conflictos.
- **Proteger datos:** Asignar diferentes niveles de %%RAID|raid%% o sistemas de archivos a cada pool para opciones de redundancia y respaldo personalizadas.
- **Aislar cargas de trabajo:** Mantenga aplicaciones críticas en pools más rápidos y redundantes y almacene datos masivos en dispositivos más grandes y rentables.
- **Gestionar con flexibilidad:** Puedes expandir, reducir o formatear pooles de forma independiente sin afectar a otros.

<h4>Casos de uso comunes</h4>

| Caso de uso                          | Ejemplo de configuración                                                     | Beneficio                                          |
| ------------------------------------ | ---------------------------------------------------------------------------- | -------------------------------------------------- |
| VM de alto rendimiento               | Pool SSD NVMe, %%RAID 1\|raid1%%, %%BTRFS\|btrfs%% o %%ZFS\|zfs%%            | Entrada/salida rápida con redundancia              |
| Almacenamiento Docker/Aplicaciones   | Pool SSD, %%RAID 1\|raid1%%, %%BTRFS\|btrfs%% o %%ZFS\|zfs%%                 | Acceso rápido y protección de datos                |
| Descargas de medios masivos          | Large HDD pool, %%RAID 0\|raid0%% or single, %%XFS\|xfs%%/%%BTRFS\|btrfs%%   | Alta capacidad con menos redundancia               |
| Aislamiento de proyectos/equipos     | Pooles separados para cada equipo/proyecto                                   | Reduce conflictos de recursos                      |
| Instantáneas y objetivos de respaldo | Pool %%ZFS\|zfs%%, %%RAIDZ1\|raidz1%%/%%RAIDZ2\|raidz2%% (multi-dispositivo) | Soporta instantáneas y copias de seguridad nativas |

:::info[Supported Sistemas de Archivos]

- %%BTRFS|btrfs%%: Mejor para pooles de múltiples dispositivos (soporta %%RAID 0|raid0%%, %%RAID 1|raid1%%, %%RAID 10|raid10%%, %%RAID 5|raid5%%, %%RAID 6|raid6%%).
- %%ZFS|zfs%%: Excelente tanto para pools de un solo dispositivo como para múltiples dispositivos (Unraid 6.12+), con soporte maduro para %%RAIDZ1|raidz1%% y %%RAIDZ2|raidz2%%. Para características avanzadas de ZFS y configuración, consulta [Almacenamiento ZFS](../../advanced-configurations/optimize-storage/zfs-storage.mdx).
- %%XFS|xfs%%: Adecuado para pools de un solo dispositivo.
  :::

Al acceder a una [%%user share|user-share%%](./shares.mdx) desde múltiples pools y discos %%array|array%%, Unraid fusiona los listados de directorios en este orden:

1. Pool asignado a la compartición.
2. Discos %%array|array%% (disk1, disk2, ..., disk28)
3. Otros pooles (en orden)

### Mover archivos entre pooles

Unraid no permite el movimiento directo de archivos entre pooles a través del WebGUI, pero puedes hacerlo usando la herramienta %%Mover|mover%% o a través del comando de línea.

:::note[Remember]
Si alguno de los archivos pertenece a un contenedor de Docker y/o %%VM|vm%%, los servicios deben desactivarse para que los archivos se muevan con éxito.
:::

<Tabs>
  <TabItem value="usando-mover" label="Usando Mover" default>
    <MoveBetweenPoolsUsingMover />
  </TabItem>

  <TabItem value="transferencia-manual" label="Transferencia manual de archivos (Avanzado)">
    <MoveBetweenPoolsManual />
  </TabItem>
</Tabs>

:::warning
Si eliminas un dispositivo de un pool %%BTRFS|btrfs%% o %%ZFS|zfs%% y lo mueves a un nuevo pool, Unraid borrará todos los datos en él cuando la %%array|array%% se reinicie. Siempre realiza una copia de seguridad de los datos importantes antes de cambiar las configuraciones del pool.
:::
