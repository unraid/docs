---
sidebar_position: 3
sidebar_label: Cache-Pools
---

import RemoveDiskGui from './partials/remove-disk-gui.mdx';
import RemoveDiskCommandLine from './partials/remove-disk-command-line.mdx';
import PoolSingleDeviceMode from './partials/pool-single-device-mode.mdx';
import PoolMultiDeviceMode from './partials/pool-multi-device-mode.mdx';
import MovePoolToArray from './partials/move-pool-to-array.mdx';
import MoveArrayToPool from './partials/move-array-to-pool.mdx';
import MoveBetweenPoolsUsingMover from './partials/move-between-pools-using-mover.mdx';
import MoveBetweenPoolsManual from './partials/move-between-pools-manual.mdx';

# Cache-Pools

In Unraid, a %%cache pool|cache-pool%% is a collection of one or more drives, typically SSDs or high-speed HDDs. These drives temporarily store data before it's moved to your main [%%array|array%%](./array/overview.mdx). Using %%cache pools|cache-pool%% can significantly enhance write speeds, protect your data, and provide dedicated storage for specific tasks like running Docker containers or [%%virtual machines|vm%%](../create-virtual-machines/overview-and-system-prep.mdx).

%%Cache-Pools|cache-pool%% bieten mehrere Vorteile, die sie zu einer wertvollen Ergänzung Ihres Unraid-Setups machen, wie z. B.:

1. **Faster write speeds:** %%Cache pools|cache-pool%% allow you to quickly write data to faster drives before it gets transferred to the main %%array|array%%. This greatly enhances perceived performance when saving files.

2. **Data protection for cached files:** By using multiple drives in a %%cache pool|cache-pool%% (like setting them up in %%RAID 1|raid1%%), you add redundancy. This means your cached data is protected from drive failure before it even reaches the main %%array|array%%.

3. **Optimized storage for applications:** Storing applications like Docker containers or %%virtual machines|vm%% on a %%cache pool|cache-pool%% improves their performance, reduces wear on your main %%array|array%%, and minimizes the time it takes to access frequently-used files.

4. **Flexible and dedicated storage:** With multiple %%cache pools|cache-pool%%, you can assign specific pools for different tasks. For instance, you could have one pool dedicated to downloads and another for %%virtual machines|vm%%, reducing competition for resources and boosting efficiency.

:::info[Keep im Sinn]

- **Multiple pools:** You can create and name different %%cache pools|cache-pool%%, tailoring them to match your specific needs.
- **SSD vs. HDD:** SSDs bieten hohe Geschwindigkeit, während Sie HDDs für große, sequentielle Datenlasten nutzen können. HDDs tragen zudem dazu bei, die Lebensdauer Ihrer SSDs zu verlängern.
- **Redundancy matters:** To protect your data, use more than one drive in a %%cache pool|cache-pool%%. A single drive pool won't protect you from potential drive failure.
- **File system choice:** The default file system for %%cache pools|cache-pool%% is %%BTRFS|btrfs%%, which supports various %%RAID|raid%% options for added redundancy and flexibility. For more details on file system selection, see [File systems](./file-systems.mdx).
- **%%Mover|mover%% integration:** Data written to a %%cache pool|cache-pool%% is automatically transferred to your main %%array|array%% based on a schedule you set. This keeps your [%%user shares|user-share%%](./shares.mdx) organized and easy to manage.
- **Application performance:** By placing Docker containers, app data, and %%VM|vm%% disks on a %%cache pool|cache-pool%%, you enhance access speed and minimize strain on your main storage.
  :::

:::

---

## Pool-Modi

Unraid %%cache pools|cache-pool%% can operate in two main modes: **single device mode** and **multi-device mode**. Knowing the difference between these modes will help you find the right balance between performance, flexibility, and data protection for your needs.

### Einzelgerätmodus

<PoolSingleDeviceMode />

### Multi-Gerät-Modus

<PoolMultiDeviceMode />

Common tasks for the %%cache pool|cache-pool%% include:

- Wechseln zwischen Einzel- und Mehrgerätmodi
- Hinzufügen von Datenträgern zu einem Pool
- Ersetzen von Datenträgern in einem Pool
- Moving files between the pool and the %%array|array%% (see [Moving files between a pool and the array](#moving-files-between-a-pool-and-the-array))

---

## Hinzufügen von Laufwerken zur Erstellung eines Mehrgerätepools

Die %%Cache-Pools|cache-pool%% in Unraid können von einem Einzelgerät auf mehrere Geräte erweitert werden, was eine erhöhte Kapazität und Redundanz ermöglicht. Um den Mehrgerätemodus zu nutzen, muss Ihr Pool als %%BTRFS|btrfs%% oder %%ZFS|zfs%% formatiert sein.

### Umwandlung eines Pools in BTRFS oder ZFS

If your %%cache pool|cache-pool%% isn't already formatted as %%BTRFS|btrfs%% or %%ZFS|zfs%%, you can convert it using the following steps.

To convert a pool to BTRFS or ZFS:

1. Back up important content. See [Moving files between a pool and the array](#moving-files-between-a-pool-and-the-array) to move files from your pool to the %%array|array%%.
2. Stoppen Sie das %%array|array%%.
3. In the **Main** tab, click the pool and select **BTRFS** or **ZFS** as the file system format.
4. Starten Sie das %%array|array%%.
5. When the pool shows as **unmountable**, confirm and click **Format**.
6. After formatting, you’ll have a %%BTRFS|btrfs%% or %%ZFS|zfs%% pool (single device at this stage).
7. (Optional) Add additional drives as needed.
8. Restore your data by moving files back to the pool.

### Hinzufügen von Laufwerken zur Erstellung eines Mehrgerätepools

Sobald Ihr Pool als %%BTRFS&#124;btrfs%% oder %%ZFS&#124;zfs%% formatiert ist, können Sie weitere Laufwerke für Redundanz und zur Speichererweiterung hinzufügen.

Wenn Ihr Speicherbedarf wächst, möchten Sie vielleicht Ihren Cache-Pool durch das Hinzufügen zusätzlicher Festplatten erweitern. Dieser Prozess ermöglicht Ihnen, sowohl die Kapazität als auch die Leistung zu erhöhen und gleichzeitig den Datenschutz durch RAID-Konfigurationen zu gewährleisten.

1. Stoppen Sie das %%array|array%%.
2. In the **Main** tab, assign one or more new devices to your pool.
3. Starten Sie das %%array|array%%.
4. Unraid automatically incorporates the new devices and starts a **balance** (%%BTRFS|btrfs%%) or **resilver** (%%ZFS|zfs%%).
5. In the **Main** tab, click the first pool device and check **Balance Status** (%%BTRFS|btrfs%%) or **zpool status** (%%ZFS|zfs%%) to follow progress.
6. When complete, the pool operates in **multi-device mode** with enhanced capacity and redundancy.

:::tip

Sie können den [BTRFS-Disknutzungsrechner](http://carfax.org.uk/btrfs-usage/) verwenden, um den verfügbaren Speicherplatz und die Redundanz basierend auf Ihrem gewählten %%RAID|raid%%-Level und den Gerätegrößen zu schätzen.

:::

---

## Hinzufügen von Datenträgern zu einem Pool

Wenn Ihr Speicherbedarf wächst, möchten Sie vielleicht Ihren Cache-Pool durch das Hinzufügen zusätzlicher Festplatten erweitern. Dieser Prozess ermöglicht Ihnen, sowohl die Kapazität als auch die Leistung zu erhöhen und gleichzeitig den Datenschutz durch RAID-Konfigurationen zu gewährleisten.

:::note

If you want to add disks to your pool, make sure your pool is already formatted as %%BTRFS|btrfs%% or %%ZFS|zfs%%. If it's not, you'll need to format it first, as explained in [Converting a pool to BTRFS or ZFS](#converting-a-pool-to-btrfs-or-zfs).

:::

Zum Hinzufügen einer Festplatte zu einem Pool:

1. Stoppen Sie das %%array|array%%.
2. In the **Main** tab, open the pool.
3. In the Pool Devices section, set **Slots** to the exact number of additional devices.
4. Assign the new devices to the available slots.
5. Start the %%array|array%% to enable the changes.

---

## Entfernen von Datenträgern aus einem Pool

Removing a disk from a %%BTRFS|btrfs%% or %%ZFS|zfs%% multi-device %%cache pool|cache-pool%% can help you reclaim hardware, replace a failing drive, or reconfigure your storage. This process is only possible if your pool is set up for redundancy (like %%RAID 1|raid1%% for both data and metadata) and the remaining devices have enough space to hold all of your data.

### Über das WebGUI

<RemoveDiskGui />

### Using the command line (Advanced)

<RemoveDiskCommandLine />

### Ändern von Pool-RAID-Leveln

%%BTRFS|btrfs%% provides the ability to change %%RAID|raid%% levels for %%cache pools|cache-pool%% dynamically, allowing you to adjust settings without stopping the %%array|array%% or losing any data. This flexibility lets you optimize for performance, redundancy, or storage efficiency as your requirements change.

<h4>Unterstützte %%RAID&#124;raid%% Level</h4>

| %%RAID\|raid%% Level | Datenschutz         | Speichereffizienz | Anwendungsfall                                                                                                             |
| -------------------- | ------------------- | ----------------- | -------------------------------------------------------------------------------------------------------------------------- |
| Single               | Keine               | 100%              | Temporäre Speicherung oder nicht-kritische Daten, bei denen keine Redundanz erforderlich ist.                              |
| %%RAID 0\|raid0%%    | Keine               | 100%              | Maximiert Leistung und Kapazität, aber nicht für kritische Daten empfohlen.                                                |
| %%RAID 1\|raid1%%    | 1 Festplattenfehler | 50%               | Standard für Unraid Pools. Ideal für Docker/%%VM\|vm%% Speicherung und kritische Daten.                                    |
| %%RAID 10\|raid10%%  | 1 Festplattenfehler | 50%               | Kombiniert die Geschwindigkeit von %%RAID 0\|raid0%% mit der Redundanz von %%RAID 1\|raid1%% für Hochleistungsbedürfnisse. |
| %%RAID 5\|raid5%%\*  | 1 Festplattenfehler | 67-94%            | **Experimentell.** Balanciert Kapazität und Redundanz für große Medienlager.                                               |
| %%RAID 6\|raid6%%\*  | 2 Festplattenfehler | 50-88%            | **Experimentell.** Bietet zusätzlichen Schutz für Archivspeicher mit großen Festplatten.                                   |

:::important

%%RAID 5|raid5%% and %%RAID 6|raid6%% are considered experimental in %%BTRFS|btrfs%%. %%ZFS|zfs%% provides more mature support for these %%RAID|raid%% levels. Use with caution and ensure you have backups. Avoid using experimental %%RAID|raid%% levels for critical data.

:::

So ändern Sie das %%RAID|raid%% Level eines Pools:

1. Start the %%array|array%% in normal mode.
2. In the **Main** tab, click the pool name.
3. Scroll to **Balance Status** to view current %%RAID|raid%% levels for data and metadata.
4. Select the new %%RAID|raid%% profile from the drop-down.
5. Click **Balance** to begin the conversion.

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![Umwandlung von %%RAID 1&#124;raid1%% zu Einzelprofil](/img/Btrfs-raid1.jpg)
  <p class="caption-center">*Beispiel: Umwandlung von %%RAID 1&#124;raid1%% zu Einzelprofil*</p>
</div>

6. Monitor progress in the %%WebGUI|web-gui%%.

:::note\[Timing]

Balance operations can take several hours to days, depending on the amount of data in the pool, drive speeds, and the complexity of the selected %%RAID|raid%% level.

:::

<details>
  <summary>Probleme bei Balancevorgängen bei Blockaden beheben - Klicken zum Erweitern/Zusammenklappen</summary>

  Wenn ein Balance-Vorgang festzustecken scheint oder nicht reagiert, befolgen Sie diese Schritte:

  1. In ***Tools → Logs***, filter for `btrfs` entries.
  2. Stoppen und Fortsetzen des Vorgangs:
     - Klicken Sie auf **Balance abbrechen**.
     - Restart the %%array|array%%.
     - Initiieren Sie den Balance-Vorgang erneut.
  3. Run %%SMART|smart%% tests on all devices in the pool. For more information on disk health monitoring, see [SMART reports and disk health](../../system-administration/monitor-performance/smart-reports-and-disk-health.mdx).
  4. Ensure there is at least 10-15% free space available on the pool.
  5. If issues persist, share the logs on the [Unraid forums](https://forums.unraid.net/). For guidance on capturing diagnostics, see [Capture diagnostics and logs](../../troubleshooting/diagnostics/capture-diagnostics-and-logs.mdx).
</details>

Für erweiterte %%BTRFS|btrfs%% Konfigurationsdetails siehe das [BTRFS-Wiki](https://btrfs.wiki.kernel.org/index.php/Using_Btrfs_with_Multiple_Devices).

---

## Mindestfreier Speicherplatz für einen Cache-Pool

Das Ersetzen einer Festplatte in Ihrem %%cache pool|cache-pool%% ist eine wichtige Aufgabe, die dazu beiträgt, die Leistung und Zuverlässigkeit Ihres Speichersystems aufrechtzuerhalten.

:::note\[Prerequisites]

- **Check your pool configuration:** Make sure your pool is set up with a redundant %%RAID|raid%% profile, like %%RAID 1|raid1%%. You can do this by going to ***Main → Pool → Balance Status*** (for %%BTRFS|btrfs%%) or ZFS pool status (for %%ZFS|zfs%%) in your management interface.
- **Die richtige Ersatzfestplatte wählen:** Die neue Festplatte muss gleich groß oder größer als die zu ersetzende sein.
- **Hot-Swap-Fähigkeit:** Wenn Ihre Hardware Hot-Swapping unterstützt, müssen Sie Ihr System nicht herunterfahren, um die Festplatte zu ersetzen.

:::

Sie können den Minimumfreier Speicherplatz aufrufen, indem Sie auf den Poolnamen in der Registerkarte **Main** klicken und zu den **Individuellen Pooleinstellungen** gehen.

1. In the **Main** tab, stop the %%array|array%% (Array Operation → **Stop**).
2. (Optional) If you don’t have hot-swap, physically remove the old disk.
3. Install the replacement disk and ensure proper connection.
4. Refresh the **Main** tab to detect the new disk.
5. Assign the new disk to the previous slot.
6. Starten Sie das %%array|array%%.
7. Monitor the rebuild progress in the %%WebGUI|web-gui%%.

:::important\[Timing]

Der Wiederaufbau kann einige Zeit in Anspruch nehmen, je nach Größe der Festplatte und aktueller Systemlast. Beispielsweise kann der Wiederaufbau eines 4TB-SSDs in einem %%RAID 1|raid1%%-Setup etwa 3-6 Stunden dauern. Es ist ratsam, dies zu planen, wenn Sie dem System erlauben können, ungestört zu arbeiten.

:::

---

## Mindestfreier Speicherplatz für einen Cache-Pool

Setting a minimum free space for your %%cache pool|cache-pool%% can provide better control over file placement, especially when dealing with large files like high-resolution videos. This setting helps Unraid know when to stop writing to the pool and start writing directly to the larger storage %%array|array%%, avoiding interruptions or data corruption.

:::tip\[Example]

Wenn Sie häufig Dateien um die 10 GB herunterladen, legen Sie den Mindestfreien Speicherplatz auf mindestens 10 GB fest, idealerweise 20 GB, um Anpassungen zu ermöglichen.

:::

Sie können den Minimumfreier Speicherplatz aufrufen, indem Sie auf den Poolnamen in der Registerkarte **Main** klicken und zu den **Individuellen Pooleinstellungen** gehen.

<h4>Wie es funktioniert</h4>

- Wenn Sie eine Datei in ein Freigabe laden, das einen Pool umfasst, respektiert Unraid die erste angezeigte Einstellung (entweder den Mindestfreien Speicherplatz der Freigabe oder den des Pools, je nachdem, welcher zuerst erreicht wird).
- Die Mindestfreier Speicherplatz-Einstellung sagt Unraid, dass der %%cache pool|cache-pool%% nicht mehr verwendet werden soll, wenn der freie Speicherplatz unter diese Menge fällt.
- If your share uses a %%cache pool|cache-pool%% as **Primary storage**, files go to the pool until it reaches the minimum free space, then they are sent directly to the %%array|array%%.
- If set to use a %%cache pool|cache-pool%% exclusively (no **Secondary storage**), this setting is not applied.
- If set to use only the %%array|array%% as **Primary storage**, files go straight to the %%array|array%%.

:::tip[Use Fallbeispiel]

Die Medienshare hat eine Freigrenze von 20 GB, was für die Dateien in diesem Share passend ist. Wenn Sie jedoch den Pool auch für eine VM verwenden und für den Fall, dass die VDisk wächst, ein Polster lassen möchten, könnten Sie die Pool-Grenze auf 50 GB setzen. So wird jeder Übertrag an das Medienshare nach dem Pool bei weniger als 50 GB freiem Platz direkt an das Array geleitet.

:::

:::tip[Best Praxis]

Setzen Sie den Mindestfreiraum auf mindestens die Größe der größten Datei, die Sie erwarten, vorzugsweise das Doppelte dieser Größe. Wenn Ihre größte Datei beispielsweise 30 GB groß ist, setzen Sie das Minimum auf 60 GB.

:::

:::caution

When accessing a [%%user share|user-share%%](./shares.mdx) from multiple pools and %%array|array%% disks, Unraid merges the directory listings in this order:

:::

---

## Dateien zwischen einem Pool und dem Array verschieben

There are times when you may need to move files between your %%cache pool|cache-pool%% and the main %%array|array%%, such as when preparing for maintenance, upgrading hardware, or optimizing performance. This process is also useful for backing up your %%cache pool|cache-pool%% before making configuration changes or replacing drives. Unraid provides a built-in tool called %%Mover|mover%% to automate this process for [%%user shares|user-share%%](./shares.mdx).

:::tip

Deaktivieren Sie beim Verschieben von Dateien mit dem %%Mover|mover%% immer Docker- und %%VM|vm%%-Dienste. Dadurch wird verhindert, dass offene Dateien während der Übertragung übersprungen werden.

:::

### Move from pool to array

<MovePoolToArray />

### Move from array to pool

<MoveArrayToPool />

<details>
  <summary><strong>Warum landen Dateien manchmal im falschen Pool oder Cache?</strong> - Klicken, um zu erweitern/zuklappen</summary>

  When you move files between [%%user shares|user-share%%](./shares.mdx) at the Linux level (for example, using `mv` or within a Docker container), Linux tries to optimize the operation. If both the source and destination appear on the same mount point (`/mnt/user`), Linux might rename the file instead of moving it. This can result in files remaining on the original disk or pool, even if the share's "Use cache" setting is set to "No."

  Um sicherzustellen, dass Dateien wie beabsichtigt verschoben werden, erwägen Sie folgende Optionen:

  - Verwenden Sie das %%Mover|mover%%-Werkzeug.
  - Dateien kopieren und dann die Originale löschen.
  - Dateien über das Netzwerk verschieben.

  Diese Methoden helfen, zu verhindern, dass Dateien im falschen Verzeichnis landen.
</details>

---

## Mehrere Pools

Unraid erlaubt es Ihnen, bis zu 35 separate Speicher-Pools zu erstellen und zu verwalten, jeder mit bis zu 60 Geräten. Mehrfache Pools bieten Ihnen die Flexibilität, Speicher für unterschiedliche Aufgaben zuzuweisen, die Leistung zu verbessern und die Redundanz an Ihre Bedürfnisse anzupassen. Jeder Pool kann ein anderes Dateisystem, %%RAID|raid%%-Level und Gerätetyp (SSD, HDD, NVMe usw.) verwenden.

<h4>Warum mehrere Pools verwenden?</h4>

- **Leistung optimieren:** Separate Pools für %%VMs|vm%%, Docker-Container, Downloads oder Medien können die Geschwindigkeit erhöhen und Konflikte reduzieren.
- **Daten schützen:** Weisen Sie jedem Pool unterschiedliche %%RAID|raid%%-Level oder Dateisysteme zu, um maßgeschneiderte Redundanz- und Backup-Optionen zu erhalten.
- **Arbeitslasten isolieren:** Halten Sie kritische Anwendungen auf schnelleren, redundanten Pools und speichern Sie Massendaten auf größeren, kosteneffizienten Geräten.
- **Flexible Verwaltung:** Sie können Pools unabhängig erweitern, reduzieren oder formatieren, ohne andere zu beeinflussen.

<h4>Gemeinsame Anwendungsfälle</h4>

| Anwendungsfall              | Konfigurationsbeispiel                                                        | Vorteil                                  |
| --------------------------- | ----------------------------------------------------------------------------- | ---------------------------------------- |
| Leistungsstarke %%VMs\|vm%% | NVMe SSD-Pool, %%RAID 1\|raid1%%, %%BTRFS\|btrfs%% oder %%ZFS\|zfs%%          | Schnelle I/O mit Redundanz               |
| Docker/Appdata-Speicher     | SSD-Pool, %%RAID 1\|raid1%%, %%BTRFS\|btrfs%% oder %%ZFS\|zfs%%               | Schneller Zugriff und Datenschutz        |
| Massenmedien-Downloads      | Großer HDD-Pool, %%RAID 0\|raid0%% oder Einzel, %%XFS\|xfs%%/%%BTRFS\|btrfs%% | Hohe Kapazität mit weniger Redundanz     |
| Projekt-/Team-Isolation     | Separate Pools für jedes Team/Projekt                                         | Reduziert Ressourcenkonflikte            |
| Snapshots und Backup-Ziele  | %%ZFS\|zfs%%-Pool, %%RAIDZ1\|raidz1%%/%%RAIDZ2\|raidz2%% (mehrere Geräte)     | Unterstützt native Snapshots und Backups |

:::info[Supported Dateisysteme]

- %%BTRFS|btrfs%%: Am besten für Multi-Device-Pools (unterstützt %%RAID 0|raid0%%, %%RAID 1|raid1%%, %%RAID 10|raid10%%, %%RAID 5|raid5%%, %%RAID 6|raid6%%).
- %%ZFS|zfs%%: Hervorragend für sowohl Einzel- als auch Mehrgerät-Pools (Unraid 6.12+), mit ausgereifter Unterstützung für %%RAIDZ1|raidz1%% und %%RAIDZ2|raidz2%%. Für erweiterte ZFS-Funktionen und Konfigurationen siehe [ZFS-Speicher](../../advanced-configurations/optimize-storage/zfs-storage.mdx).
- %%XFS|xfs%%: Geeignet für Einzelgeräte-Pools.

:::

When accessing a [%%user share|user-share%%](./shares.mdx) from multiple pools and %%array|array%% disks, Unraid merges the directory listings in this order:

1. Pool dem Share zugewiesen
2. %%Array|array%%-Festplatten (disk1, disk2, ..., disk28)
3. Andere Pools (in dieser Reihenfolge)

### Dateien zwischen Pools verschieben

Unraid erlaubt keinen direkten Dateitransfer zwischen Pools über das %%WebGUI|web-gui%%, aber Sie können es mit dem %%Mover|mover%%-Werkzeug oder über die Befehlszeile tun.

:::note\[Remember]

Wenn einer der Dateien zu einem Docker-Container und/oder %%VM|vm%% gehört, müssen die Dienste deaktiviert sein, damit die Dateien erfolgreich verschoben werden können.

:::

### Mover verwenden

<MoveBetweenPoolsUsingMover />

### Manuelle Dateiverlagerung (fortgeschritten)

<MoveBetweenPoolsManual />

:::warning

If you remove a device from a %%BTRFS|btrfs%% or %%ZFS|zfs%% pool and move it to a new pool, Unraid will erase all data on it when the %%array|array%% restarts. Always back up important data before changing pool configurations.

:::
