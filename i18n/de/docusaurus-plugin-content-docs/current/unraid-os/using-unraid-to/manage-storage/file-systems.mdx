---
sidebar_position: 4
sidebar_label: Dateisysteme
---

# Dateisysteme

## Auswahl eines Dateisystemtyps

Die Wahl des richtigen Dateisystems für Ihr Unraid-%%array|array%% oder %%cache pool|cache-pool%% ist entscheidend. Es hilft Ihnen, ein Gleichgewicht zwischen Leistung, Datenschutz und erweiterten Funktionen zu erreichen. Unraid unterstützt mehrere moderne Linux-Dateisysteme, von denen jedes seine eigenen Stärken und spezifischen Anwendungsfälle hat:

| Dateisystem      | Datenschutz                                                                                | Speichereffizienz                     | Erweiterte Funktionen                                            | Bester Anwendungsfall                                             |
| ---------------- | ------------------------------------------------------------------------------------------ | ------------------------------------- | ---------------------------------------------------------------- | ----------------------------------------------------------------- |
| %%XFS\|xfs%%     | Keine eingebaute Redundanz                                                                 | 100%                                  | Robust gegen Korruption                                          | Standard für Array-Laufwerke; hohe Zuverlässigkeit                |
| %%ZFS\|zfs%%     | Keine eingebaute Redundanz                                                                 | 100%                                  | %%Checksums\|checksum%%, %%Snapshots\|snapshot%%, %%RAID\|raid%% | Multigeräte-Pools, %%VMs\|vm%%, Docker, fortgeschrittene Benutzer |
| %%ZFS\|zfs%%     | %%RAIDZ1\|raidz1%%/%%RAIDZ2\|raidz2%%/%%RAIDZ3\|raidz3%%, Spiegel, usw.                    | Variiert je nach %%RAID\|raid%%-Level | %%Checksums\|checksum%%, %%Snapshots\|snapshot%%, %%RAID\|raid%% | Multigeräte-Pools, gemischte SSD/HDD, flexible Pools              |
| %%BTRFS\|btrfs%% | %%RAID 0\|raid0%%/%%RAID 1\|raid1%%/%%10\|raid10%%/%%5\|raid5%%/%%6\|raid6%%, Spiegelungen | Variiert je nach %%RAID\|raid%%-Level | %%Checksums\|checksum%%, %%Snapshots\|snapshot%%, %%RAID\|raid%% | Multigeräte-Pools, gemischte SSD/HDD, flexible Pools              |
| NTFS             | Keine eingebaute Redundanz                                                                 | 100%                                  | Windows-Kompatibilität                                           | Hinzufügen vorhandener Windows-Laufwerke ohne Datenmigration      |
| exFAT            | Keine eingebaute Redundanz                                                                 | 100%                                  | Plattformübergreifende Kompatibilität                            | Hinzufügen vorhandener exFAT-Laufwerke ohne Datenmigration        |

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import FsCheckCliXfs from './partials/fs-check-cli-xfs.mdx';
import FsCheckCliBtrfs from './partials/fs-check-cli-btrfs.mdx';
import FsCheckCliZfs from './partials/fs-check-cli-zfs.mdx';
import FsRepairCliXfs from './partials/fs-repair-cli-xfs.mdx';
import FsRepairCliBtrfs from './partials/fs-repair-cli-btrfs.mdx';
import FsRepairCliZfs from './partials/fs-repair-cli-zfs.mdx';

### XFS

%%XFS|xfs%% is the default file system for %%array|array%% drives in Unraid. It's known for its robustness and ability to recover from corruption after unexpected shutdowns or crashes. Each drive formatted with %%XFS|xfs%% acts as a self-contained file system, making data recovery straightforward on any Linux system.

- Mixing different file system types in your Unraid system is perfectly acceptable; the Unraid %%parity|parity%% system works independently of the file system used.
- Immer innerhalb von Unraid formatieren und partitionieren, um Kompatibilität zu gewährleisten.
- Linux-Systeme können diese Dateisysteme nativ lesen; Windows und macOS benötigen jedoch zusätzliche Software für den Zugriff.

### %%ZFS|zfs%%

EXT4 ist ein reifes und stabiles Dateisystem, das exzellente Kompatibilität und Zuverlässigkeit bietet. Es wird vollständig unterstützt und steht auf Augenhöhe mit %%XFS|xfs%%, %%BTRFS|btrfs%% und %%ZFS|zfs%%, was es zu einer starken Wahl für Array-Laufwerke oder Einzellaufwerkspools macht.

- **Datenschutz:** Es verfügt nicht über eingebaute Redundanz und verlässt sich auf die %%parity|parity%% von Unraid zum Schutz.
- **Leistung:** Es bietet konsistente und zuverlässige Leistung mit Journaling, um die Datenintegrität sicherzustellen.
- **Best for:** %%Array|array%% drives or single-drive pools when you are looking for an alternative to %%XFS|xfs%%.

### ZFS

%%ZFS|zfs%% is a modern file system that comes with advanced features such as %%checksums|checksum%% to detect %%bit rot|bit-rot%%, %%snapshots|snapshot%% for backups, and native %%RAID|raid%% support options like %%RAIDZ1|raidz1%%/%%RAIDZ2|raidz2%%/%%RAIDZ3|raidz3%% and mirrors. %%ZFS|zfs%% can be utilized for both single-device and multi-device pools.

- **Datenschutz:** Unterstützt verschiedene %%RAID|raid%%-Level für Redundanz.
- **Leistung:** Hervorragend, besonders bei Multigeräte-Pools.
- **Am besten geeignet für:** Hochleistungsumgebungen, %%virtual machines|vm%%, Docker oder wenn erweiterte Funktionen wie %%snapshots|snapshot%% erforderlich sind.

Für umfassende Anleitungen zu %%ZFS|zfs%%-Funktionen, Konfiguration und Best Practices, besuchen Sie die [ZFS-Speicher](../../advanced-configurations/optimize-storage/zfs-storage.mdx) Seite.

### BTRFS

%%BTRFS|btrfs%% provides flexible %%RAID|raid%% support, %%checksums|checksum%% for data integrity, and efficient management of mixed-size drives in pools. It serves as the default file system for %%cache pools|cache-pool%% and supports both single-device and multi-device configurations.

- **Datenschutz:** Unterstützt %%RAID 0|raid0%%/%%1|raid1%%/%%10|raid10%%/%%5|raid5%%/%%6|raid6%% (beachten Sie, dass %%RAID 5|raid5%%/%%6|raid6%% noch experimentell sind).
- **Leistung:** Gut, mit Flexibilität für Erweiterung und Verkleinerung.
- **Am besten geeignet für:** %%Cache pools|cache-pool%%, insbesondere wenn Sie planen, SSDs und HDDs zu mischen oder eine einfache Möglichkeit zur Erweiterung benötigen.

### NTFS und exFAT (eingeschränkte Unterstützung)

NTFS- und exFAT-Dateisysteme werden mit einigen Einschränkungen unterstützt. Dies soll hauptsächlich helfen, vorhandene Laufwerke mit Daten hinzuzufügen, ohne Daten auf Ihr Unraid-System übertragen zu müssen.

:::warning

Drives formatted with NTFS or exFAT must be added to the %%array|array%% **before** you add any parity drives. Once a parity drive has been added to your %%array|array%%, any new data drives you add will be zeroed out, regardless of their file system format.

Wenn Sie vorhandene NTFS- oder exFAT-Laufwerke verwenden möchten:

- Fügen Sie sie zuerst dem %%array|array%% hinzu (oder führen Sie ***Tools → Neue Konfiguration*** aus, um Ihre Array-Konfiguration zurückzusetzen).
- Nachdem Sie Ihre NTFS-/exFAT-Datenlaufwerke hinzugefügt haben, können Sie dann Paritätslaufwerke hinzufügen.
- Die vorhandenen Daten auf diesen Laufwerken werden erhalten und durch Parität geschützt.

:::

- **Datenschutz:** Diese Laufwerke bieten keine eingebaute Redundanz; sie verlassen sich auf die %%parity|parity%% von Unraid, sobald Parität hinzugefügt wurde.
- **Leistung:** Ausreichend für grundlegende Speicheranforderungen.
- **Am besten für:** Hinzufügen vorhandener Windows-formatierter Laufwerke (NTFS) oder plattformübergreifend formatierter Laufwerke (exFAT) ohne Migrationsbedarf. Sie können auch für Einzellaufwerkspools genutzt werden.
- **Einschränkungen:** Diese Dateisysteme sind nicht für den regelmäßigen Gebrauch empfohlen; sie sind hauptsächlich zum Migrieren bestehender Laufwerke gedacht. Für neue Laufwerke erwägen Sie die Verwendung von %%XFS|xfs%%, EXT4, %%BTRFS|btrfs%% oder %%ZFS|zfs%%.

Um den Dateisystemtyp eines bestimmten Laufwerks zu ändern:

:::note[Additional Anmerkungen]

- Mixing different file system types in your Unraid system is perfectly acceptable; the Unraid %%parity|parity%% system works independently of the file system used.
- Immer innerhalb von Unraid formatieren und partitionieren, um Kompatibilität zu gewährleisten.
- Linux-Systeme können diese Dateisysteme nativ lesen; Windows und macOS benötigen jedoch zusätzliche Software für den Zugriff.
- Sie können Laufwerke **verschlüsseln**, um die Sicherheit zu erhöhen, beachten Sie jedoch, dass verschlüsselte Laufwerke Herausforderungen beim Wiederherstellen darstellen können, wenn es zu Beschädigungen kommt.
- Für Übertragungslaufwerke oder externe Geräte wird empfohlen, das **[Nicht zugewiesene Geräte](#using-the-unassigned-devices-plugins)** Plugin zu verwenden, welches zusätzliche Dateisysteme unterstützt.
  :::

:::

:::tip[Still Brauchen Sie Hilfe bei der Auswahl?]

- **Für Array-Laufwerke:** %%XFS|xfs%% ist im Allgemeinen die beste Wahl für die meisten Benutzer. EXT4 ist auch eine solide Option, wenn Sie ein traditionelleres Linux-Dateisystem bevorzugen.
- **For high-performance or advanced features:** Choose %%ZFS|zfs%% or %%BTRFS|btrfs%% for %%cache pools|cache-pool%% or multi-device setups. See the [ZFS storage](../../advanced-configurations/optimize-storage/zfs-storage.mdx) page for detailed %%ZFS|zfs%% guidance.
- **Für gemischte oder erweiternde Pools:** %%BTRFS|btrfs%% ist ideal, wenn Sie unterschiedliche Laufwerksgrößen verwenden oder Geräte einfach hinzufügen oder entfernen möchten.
- **Für bestehende Laufwerke:** Verwenden Sie NTFS oder exFAT nur, wenn Sie vorhandene Laufwerke mit Daten hinzufügen; fügen Sie sie hinzu, bevor Sie Parität hinzufügen.

If you're uncertain, starting with the defaults is a good approach: use %%XFS|xfs%% for %%array|array%% drives and %%BTRFS|btrfs%% for %%cache pools|cache-pool%%.

:::

---

## Festlegen eines Dateisystemtyps

Beim Hinzufügen eines neuen Laufwerks zu Unraid können Sie den Dateisystemtyp auswählen, der am besten zu Ihren Anforderungen passt. Das Dateisystem bestimmt, wie Daten auf der Festplatte organisiert und geschützt werden.

To set the file system type globally, navigate to ***Settings → Disk Settings*** to set the default file system for new %%array|array%% drives only. Unraid defaults to %%XFS|xfs%% for %%array|array%% drives.

:::note

Es gibt derzeit keine globale Standardeinstellung für %%cache pools|cache-pool%%. Sie werden immer auf %%BTRFS|btrfs%% standardmäßig gesetzt, wenn auf "auto" gelassen.

:::

:::important

Wenn Sie Laufwerke mit vorhandenen NTFS- oder exFAT-Daten hinzufügen, müssen diese vor dem Hinzufügen von Paritätslaufwerken dem %%array|array%% hinzugefügt werden. Sobald Parität vorhanden ist, werden alle neu hinzugefügten Datenlaufwerke gelöscht, unabhängig vom Dateisystemtyp.

:::

Um Ihre Festplatte **sicher** neu zu formatieren:

1. Stoppen Sie das %%array|array%%, bevor Sie Änderungen vornehmen.
2. **Ändern Sie den Dateisystemtyp:**
3. **(Optional) Wechseln Sie zurück zum ursprünglichen Dateisystemtyp:**
4. (Optional) Wenn Sie **auto** auswählen, verwendet Unraid die globale Standardeinstellung.
5. Für Mehrgerätige %%cache pools|cache-pool%% werden nur %%BTRFS|btrfs%% oder %%ZFS|zfs%% unterstützt.
6. Wenn Sie bestehende NTFS- oder exFAT-Datenlaufwerke zum %%array|array%% hinzufügen, fügen Sie diese vor dem Hinzufügen von Paritätslaufwerken hinzu.

---

## Neues Format eines Cache-Laufwerks

Bevor Sie eine neue Festplatte in Unraid verwenden können, müssen Sie sie mit dem ausgewählten Dateisystem formatieren.

:::warning

Durch das Formatieren werden alle vorhandenen Inhalte auf dem Laufwerk gelöscht. Stellen Sie sicher, dass Sie alle wichtigen Daten gesichert haben, bevor Sie fortfahren.

:::

Um Daten vom Cache zu verschieben:

1. Starten Sie das %%array|array%%.
2. **Run %%Mover|mover%%**: Run %%Mover|mover%% from the **Main** tab. Wait for it to finish and ensure that the %%cache|cache%% is empty.
3. Stellen Sie sicher, dass alle nicht montierbaren Laufwerke die sind, die Sie formatieren möchten.
4. Aktivieren Sie das Bestätigungsfeld, lesen Sie den Warnhinweis, und klicken Sie auf **Format**.
5. Überwachen Sie den Fortschritt. Bei neuen Festplatten überschreibt Unraid zunächst die Partitionstabelle.
6. Warten Sie auf die Fertigstellung. Wenn der Fortschritt ins Stocken gerät, aktualisieren Sie den **Main**-Tab.

Um das Cache-Laufwerk neu zu formatieren:

---

## Ändern eines Dateisystemtyps

Um den Dateisystemtyp eines bestimmten Laufwerks zu ändern:

:::warning

Die Zeit, die das Verschieben von Daten mit dem %%Mover|mover%% und das Formatieren des Laufwerks in Anspruch nimmt, kann je nach Datenmenge und Laufwerksgeschwindigkeit von mehreren Minuten bis zu mehreren Stunden variieren.

:::

Um den Dateisystemtyp eines bestimmten Laufwerks zu ändern:

1. Stoppen Sie das %%array|array%%.
2. Klicken Sie im **Main**-Tab auf das Laufwerk, das Sie ändern möchten.
3. Wählen Sie das neue Dateisystem aus dem Dropdown aus (wiederholen Sie dies für mehrere Laufwerke, falls erforderlich).
4. Starten Sie das %%array|array%%.
5. Überprüfen Sie im **Main**-Tab die Liste der nicht montierbaren Laufwerke und stellen Sie sicher, dass nur die beabsichtigten Laufwerke enthalten sind.
6. Markieren Sie das Bestätigungsfeld und klicken Sie auf **Format**.
7. Warten Sie auf die Fertigstellung. Wenn der Status nicht aktualisiert wird, aktualisieren Sie den **Main**-Tab.

Maintaining your %%BTRFS|btrfs%% pools in Unraid is essential for keeping them running well and ensuring your data stays safe. Two key tools you’ll want to use regularly are **Balance** and **Scrub**. These operations help solve space allocation problems, optimize your storage use, and protect your data from hidden corruption.

---

## Konvertierung in einen neuen Dateisystemtyp

:::important

For more details on advanced %%BTRFS|btrfs%% features, check out the [official BTRFS documentation](https://btrfs.readthedocs.io/en/latest/Introduction.html).

- Alle in ReiserFS formatierten Laufwerke müssen so bald wie möglich auf ein anderes Dateisystem migriert werden, da sie in zukünftigen Unraid-Versionen nicht mehr nutzbar sein werden.
- Alle in älteren XFS-Versionen formatierten Laufwerke müssen vor 2030 migriert werden.

:::

Dieser Prozess ist besonders häufig bei Nutzern, die vom veralteten ReiserFS (in älteren Unraid-Versionen verwendet) zu %%XFS|xfs%% oder %%BTRFS|btrfs%% wechseln, gilt aber für jede Dateisystemkonvertierung.

:::important

This process requires temporarily moving your data to another location. Make sure you have enough free space elsewhere in your %%array|array%% or on an external device before you begin.

:::

Um sicher in einen neuen Dateisystemtyp zu konvertieren:

1. Move all data off the drive to another location (another %%array|array%% drive, %%cache pool|cache-pool%%, or external backup). Use one of these methods:

   **Über die WebGUI (Unraid 7.2+):**

   - Navigieren Sie zu ***Haupt → Array-Betrieb*** und stoppen Sie das Array
   - Navigieren Sie zu ***Einstellungen → Globale Freigabeeinstellungen***. Wählen Sie im Bereich **Leeren von Festplatte(n)** die zu leerende(n) Festplatte(n) aus und **Anwenden**. Hinweis: Dieser Status wird automatisch entfernt, wenn das Array gestoppt wird.
     - In Unraid 7.2.0 werden alle Daten auf dieser Festplatte aus den Benutzershares ausgeblendet, bis dieser Status entfernt wird.
     - Ab Unraid 7.2.1 bleiben die Daten für die Benutzershares verfügbar, jedoch werden keine neuen Dateien auf die Festplatte geschrieben, bis dieser Status entfernt wird.
   - Navigieren Sie zu ***Haupt → Array-Betrieb*** und starten Sie das Array
   - Klicken Sie auf ***Haupt → Array-Betrieb*** auf **Verschieben** (oder warten Sie, bis der Mover über seinen normalen Zeitplan läuft)
   - Mover wird die Festplatte leeren, indem Dateien entsprechend Ihren Share-Einstellungen auf andere Array-Laufwerke verschoben werden. Beachten Sie, dass Dateien im Stammverzeichnis des Laufwerks außerhalb von Shares liegen und nicht verschoben werden.
   - Überprüfen Sie ***Werkzeuge → Systemprotokoll*** auf Nachrichten über Dateien, die aufgrund von Verwendung oder mangelndem Speicherplatz nicht verschoben werden konnten.

   **Oder über die Befehlszeile (nur Unraid 7.0 und 7.1):**

   - Bewegen Sie Dateien [mithilfe des 'mover', um eine Array-Festplatte zu leeren](../../release-notes/7.0.0.md#using-mover-to-empty-an-array-disk) auf andere Array-Laufwerke

   **Oder manuell:**

   - Bewegen Sie Dateien manuell an einen anderen Ort

   Nachdem der Vorgang abgeschlossen ist, navigieren Sie zu ***Main → Array Devices*** und durchsuchen Sie die Festplatte, um zu bestätigen, dass sie leer ist. Fahren Sie nur fort, wenn Sie sicher sind, dass die Festplatte leer ist.
2. Befolgen Sie die Verfahren zum [Ändern eines Dateisystemtyps](#changing-a-file-system-type). Dies formatiert das Laufwerk und löscht alle Inhalte, sodass ein leeres Laufwerk im neuen Format bleibt.
3. (Optional) Verschieben Sie Ihre Daten je nach Speicherort, an den Sie die Dateien verschoben haben, zurück auf das neu formatierte Laufwerk.
4. Wenn Sie mehrere Laufwerke konvertieren möchten, wiederholen Sie diese Schritte für jedes Laufwerk.

:::note\[Timing]

Diese Plugins ermöglichen:

:::

---

## Neusformatiert eines Laufwerks

Ein Laufwerk in Unraid neu zu formatieren, löscht alle Ihre Daten und erstellt ein neues leeres Dateisystem. Dieser Prozess ist nützlich, um anhaltende Dateisystemfehler zu beheben oder mit einem neuen Format von vorne zu beginnen.

:::warning

Wenn Sie sehen, dass ein Laufwerk in Unraid als **nicht mountbar** angezeigt wird, könnte dies an einem der beiden Hauptgründe liegen:

:::

Um das Cache-Laufwerk neu zu formatieren:

1. **Stoppen Sie die Array**.
2. **Stellen Sie das Cache-Laufwerksformat ein** (wählen Sie zwischen %%XFS|xfs%% oder %%BTRFS|btrfs%%).
   - Für ein Einzellaufwerks-%%cache|cache%% wird %%XFS|xfs%% empfohlen.
   - Wählen Sie einen anderen Dateisystemtyp (zum Beispiel Wechsel von %%XFS|xfs%% zu %%BTRFS|btrfs%%).
   - Starten Sie das %%array|array%%, und das Laufwerk wird als **nicht einbindbar** angezeigt.
   - Wenn Sie dazu aufgefordert werden, formatieren Sie das Laufwerk.
3. **Starten Sie die Array**.
   - Stoppen Sie das %%array|array%% erneut.
   - Ändern Sie den Dateisystemtyp zurück zu Ihrem bevorzugten Typ.
   - Starten Sie das %%array|array%% und formatieren Sie das Laufwerk erneut.

Um Daten und Einstellungen wiederherzustellen:

### Neues Format eines Cache-Laufwerks

Sometimes, you'll need to reformat a %%cache|cache%% drive for the following reasons:

- Um den Dateisystemtyp zu ändern (zum Beispiel Wechsel von %%BTRFS|btrfs%% zu %%XFS|xfs%% oder umgekehrt)
- Um anhaltende Dateisystemfehler zu beheben
- Um frisch für neue Workloads zu starten

#### Vorbereitung

Vor der Neuformatierung, bereiten Sie das System vor:

1. Stoppen Sie das %%array|array%%.
2. Gehen Sie zu **Einstellungen** und deaktivieren Sie Docker und %%VM|vm%%-Dienste (dies verhindert, dass ihre Registerkarten während des Prozesses angezeigt werden).
3. Starten Sie das %%array|array%% erneut.

#### Daten vom Cache verschieben

Um Daten vom Cache zu verschieben:

1. Speicherfreigabe und Verschiebeaktion festlegen (Cache → Array):
   - Gehen Sie zur **Shares**-Registerkarte.
   - For each share with files in the %%cache|cache%%, set **Primary storage** to the source %%cache|cache%% pool and **Secondary storage** to the %%array|array%%.
   - Setzen Sie die **Mover-Aktion** auf **Cache → Array**.
   - Merken Sie sich die Freigaben, die Sie geändert haben und deren ursprüngliche Einstellungen.
2. Klicken Sie im **Main**-Tab auf **Jetzt verschieben** und warten Sie auf die Fertigstellung. Stellen Sie sicher, dass der %%cache|cache%% leer ist.
   - Wenn Dateien verbleiben, stoppen Sie und suchen Sie im Forum nach Hilfe.

#### Cache-Laufwerk neu formatieren

Schauen wir uns an, was jede Operation macht und wann sie verwendet wird:

1. Stoppen Sie das %%array|array%%.
2. Cache-Laufwerksformat festlegen:
   - Klicken Sie im **Main**-Tab auf das Cache-Laufwerk.
   - Wählen Sie zwischen %%XFS|xfs%%, EXT4 oder %%BTRFS|btrfs%%.
   - For a single-drive %%cache|cache%%, %%XFS|xfs%% or EXT4 are recommended.
   - Note that %%XFS|xfs%% and EXT4 are only available with one %%cache|cache%% slot.
3. Starten Sie das %%array|array%%.
4. Formatieren Sie das Cache-Laufwerk:
   - Confirm only the %%cache|cache%% drive is listed as unmountable.
   - Markieren Sie das Bestätigungsfeld und klicken Sie auf **Format**.

#### Daten und Einstellungen wiederherstellen

Um Daten und Einstellungen wiederherzustellen:

1. Für jede geänderte Freigabe setzen Sie **Primärspeicher** und **Sekundärspeicher** auf ihre ursprünglichen Werte zurück.
2. Daten zurückverschieben (Array → Cache):
   - For each share you changed, set **Primary storage** to the destination %%cache|cache%% pool and **Secondary storage** to the %%array|array%%.
   - Setzen Sie **Mover-Aktion** auf **Array → Cache**.
   - Klicken Sie im **Main**-Tab auf **Jetzt verschieben** um die Daten zurück auf den %%cache|cache%% zu verschieben.
3. Stoppen Sie das %%array|array%%.
4. Wechseln Sie zu **Einstellungen** und aktivieren Sie Docker und %%VM|vm%%-Dienste erneut.
5. Starten Sie das %%array|array%%, um den Vorgang abzuschließen.

:::note\[Timing]

Die Zeit, die das Verschieben von Daten mit dem %%Mover|mover%% und das Formatieren des Laufwerks in Anspruch nimmt, kann je nach Datenmenge und Laufwerksgeschwindigkeit von mehreren Minuten bis zu mehreren Stunden variieren.

:::

---

## BTRFS-Aktionen

Maintaining your %%BTRFS|btrfs%% pools in Unraid is essential for keeping them running well and ensuring your data stays safe. Two key tools you’ll want to use regularly are **Balance** and **Scrub**. These operations help solve space allocation problems, optimize your storage use, and protect your data from hidden corruption.

Lassen Sie uns aufschlüsseln, was jede Operation tut und wann sie zu verwenden ist:

### Gleichgewicht

The **Balance** operation redistributes data and metadata chunks across your %%BTRFS|btrfs%% pool. This process helps free up space, resolves allocation issues, and can fix "no space left on device" errors even when space seems available.

#### Wann Balance durchgeführt werden sollte

- Wenn Sie "Kein Speicherplatz mehr auf dem Gerät"-Fehler haben, aber noch freier Speicherplatz vorhanden ist.
- Nach dem Hinzufügen oder Entfernen von Laufwerken in einem Pool.
- Um den Platzverbrauch zu optimieren und die Leistung zu verbessern.

#### Reparatur eines Dateisystems

1. Klicken Sie im %%WebGUI|web-gui%% auf den Pool im **Main**-Tab und wählen Sie **Balance**.
2. (Optional) Fügen Sie Parameter für den erweiterten Gebrauch hinzu (siehe Unraid-Hilfe für Details).
3. Klicken Sie auf **Start**, um zu beginnen.

:::note\[Timing]

Reparaturen können je nach Größe oder starkem Schaden des Dateisystems von mehreren Minuten bis zu mehreren Stunden dauern. Der Fortschritt mag langsam erscheinen, aber Sie können die Aktivität überprüfen, indem Sie die Lese-/Schreibstatistiken auf der Hauptseite betrachten.

:::

### Scrub

Die **Scrub**-Operation liest alle Daten- und Metadaten, überprüft die Integrität der Prüfsummen und repariert beschädigte Blöcke mithilfe vorhandener redundanter Kopien. Scrubbing hilft, stille Datenbeschädigungen, auch bekannt als "Bit Rot", zu identifizieren und zu beheben, bevor sie zu einem signifikanten Problem werden.

#### Über das WebGUI

- **Start the array**: Start the %%array|array%% in the correct mode (refer to the section above).
- **Wählen Sie die Festplatte aus**: Gehen Sie zum **Main** Tab und klicken Sie auf die Festplatte, die Sie reparieren möchten.
- **Zugriff auf Reparaturoptionen**: Blättern Sie zu **Dateisystemstatus überprüfen**.

#### Empfohlener Zeitplan

- Hoch genutzte Pools: **Einmal pro Woche**
- Alle anderen Pools: **Einmal pro Monat**

#### Wie man Scrub durchführt

1. Klicken Sie im %%WebGUI|web-gui%% auf den Pool im **Main**-Tab und wählen Sie **Scrub**.
2. Klicken Sie auf **Start**, um den Betrieb zu starten.

:::note\[Timing]

Wenn Sie die Reparaturausgabe nicht verstehen oder der Prozess fehlschlägt, teilen Sie Ihre Diagnosen und das Reparaturlog im [Unraid Forum](https://forums.unraid.net/) für weitere Unterstützung.

:::

:::tip

Sowohl **Balance** als auch **Scrub** können bei laufendem System durchgeführt werden, jedoch beachten Sie, dass die Leistung während dieser Operationen beeinträchtigt werden kann. Sie können den Fortschritt im %%WebGUI|web-gui%% überwachen.

:::

For more details on advanced %%BTRFS|btrfs%% features, check out the [official BTRFS documentation](https://btrfs.readthedocs.io/en/latest/Introduction.html).

---

## Fehlerbehebung

Unassigned drives are storage devices connected to your Unraid server that aren't part of the main %%array|array%% or any %%cache pool|cache-pool%%. You can use these drives to transfer files, create backups, or provide fast storage for %%virtual machines|vm%%.

:::note

Alle Laufwerke, die bei Beginn Ihres %%array|array%% mit Ihrem Server verbunden sind, zählen zu Ihrem Unraid-Attached-Devices-Lizenzlimit, auch wenn sie nicht dem %%array|array%% oder einem Pool zugewiesen sind.

:::

### Häufige Verwendungen für nicht zugewiesene Laufwerke

- **Identifizieren Sie die Situation**: Bestimmen Sie, ob es sich um ein neues oder ein zuvor funktionierendes Laufwerk handelt.
- **Für neue Laufwerke**: Formatieren Sie das Laufwerk, um ein neues Dateisystem zu erstellen (siehe die [Formatierungsschritte](#creating-a-file-system-formatting)).

### Verwendung der Plugins für nicht zugewiesene Geräte

Die Behebung des Dateisystems dauert in der Regel weniger Zeit als der Neuaufbau des Laufwerks, sodass Sie auf Ihre Daten zugreifen können, ohne etwas zu verlieren. Denken Sie daran, dass der Neuaufbau eines Laufwerks **nicht** Dateisystemprobleme behebt; er stellt lediglich sicher, dass das physische Laufwerk dem emulierten entspricht und alle bestehenden Probleme mitübernimmt.

- **[Unassigned Devices](https://unraid.net/community/apps?q=dlandon\&r=0#:~:text=and%20iso%20files.-,Unassigned%20Devices,-dlandon):** Dieses Plugin ermöglicht es Ihnen, Laufwerke mit Dateisystemen, die von Unraid unterstützt werden, wie %%XFS|xfs%%, %%BTRFS|btrfs%% oder NTFS, zu mounten, freizugeben und zu verwalten.

- **[Unassigned Devices Plus](https://unraid.net/community/apps?q=dlandon\&r=0#:~:text=and%20iso%20files.-,Unassigned%20Devices%20Plus,-\(Addon\)):** Diese Erweiterung bietet Unterstützung für zusätzliche Dateisysteme, einschließlich ExFAT und HFS+.

Wenn Sie unsicher sind:

- Einfaches Mounten und Unmounten von Laufwerken über die Unraid-Weboberfläche.
- Für fachkundige Hilfe posten Sie Ihr Problem zusammen mit den Diagnosen im [Unraid-Forum](https://forums.unraid.net/).
  :::
- Automatisierung des Mount-Vorgangs beim Serverstart.
- Formatieren oder Löschen von Laufwerken für die zukünftige Nutzung.
- Sicheres Entfernen von USB- oder externen Laufwerken ohne Probleme.

Für weitere Details zur Installation und Verwaltung von Plugins, schauen Sie sich [Plugins](../customize-your-experience/plugins.mdx) an.

---

## Fehlerbehebung

### Überprüfen eines Dateisystems

Wenn Sie sehen, dass ein Laufwerk in Unraid als **nicht mountbar** angezeigt wird, könnte dies an einem der beiden Hauptgründe liegen:

1. Wenn Sie gerade ein neues Laufwerk zu Ihrer Konfiguration hinzugefügt haben, wird es als nicht montierbar angezeigt, bis Sie es formatieren. Formatieren erstellt ein Dateisystem, das das Laufwerk zur Speicherung von Dateien verwendet. Die Schritte zum Formatieren eines Laufwerks finden Sie [hier](#creating-a-file-system-formatting).

2. Wenn ein zuvor funktionierendes Laufwerk plötzlich als nicht montierbar angezeigt wird, hat es wahrscheinlich ein Dateisystemproblem. Dies kann aufgrund unerwarteter Ausschaltungen, Problemen beim Schreiben von Daten oder wenn das Laufwerk als deaktiviert markiert wird (was als rotes 'x' im %%WebGUI|web-gui%% angezeigt wird) auftreten.

:::important

Do not format an unmountable drive unless you are okay with losing all the data on it. Formatting will erase everything and update the %%parity|parity%% information, making recovery impossible. Always try to fix the file system first.

:::

Wenn Ihr Laufwerk nicht montierbar ist:

1. Bestimmen Sie, ob es sich um ein neues Laufwerk oder ein zuvor funktionierendes Laufwerk handelt.
2. Für neue Laufwerke: Formatieren Sie das Laufwerk, um ein neues Dateisystem zu erstellen (siehe [Formatierungsschritte](#creating-a-file-system-formatting)).
3. Für zuvor funktionierende Laufwerke: Führen Sie eine Dateisystemüberprüfung oder -reparatur durch (siehe [Überprüfung eines Dateisystems](#checking-a-file-system)). Vermeiden Sie das Formatieren, wenn Sie die Daten behalten möchten.

:::note

Wenn ein Laufwerk sowohl nicht montierbar als auch deaktiviert ist (rotes 'x'), führen Sie zuerst die Dateisystemprüfung/-reparatur auf dem **emulierten** Laufwerk durch. Wenn das emulierte Laufwerk ebenfalls nicht montierbar ist und Sie versuchen, es wiederherzustellen, wird das neue Laufwerk ebenfalls nicht montierbar sein.

:::

Die Behebung des Dateisystems dauert in der Regel weniger Zeit als der Neuaufbau des Laufwerks, sodass Sie auf Ihre Daten zugreifen können, ohne etwas zu verlieren. Denken Sie daran, dass der Neuaufbau eines Laufwerks **nicht** Dateisystemprobleme behebt; er stellt lediglich sicher, dass das physische Laufwerk dem emulierten entspricht und alle bestehenden Probleme mitübernimmt.

:::important[Why Ist Parität nicht genug?]

Während %%parity|Parität%% beim Wiederherstellen eines ausgefallenen Laufwerks hilft, kann es keine Dateisystemprobleme beheben. Wenn das Dateisystem beschädigt ist, wird %%parity|Parität%% diese Beschädigung einfach auf das neue Laufwerk replizieren.

Wenn Sie unsicher sind:

- Laden Sie Ihre Systemprotokolle herunter, indem Sie zu ***Tools → Diagnosen*** navigieren.
- Für fachkundige Hilfe posten Sie Ihr Problem zusammen mit den Diagnosen im [Unraid-Forum](https://forums.unraid.net/).

:::

:::note[Just Um es noch einmal zu sagen]

- Formatieren Sie nur nicht montierbare Laufwerke, wenn sie neu sind oder wenn Sie alle Daten löschen möchten.
- Verwenden Sie die Dateisystemprüfung/-reparatur, um beschädigte Dateien zu beheben; verlassen Sie sich nicht auf %%parity|parity%%, um diese Probleme zu lösen.
- Für %%cache pools|cache-pool%% mit mehreren Laufwerken sollten Sie entweder %%BTRFS|btrfs%% oder %%ZFS|zfs%% verwenden.
- Überprüfen Sie immer doppelt, bevor Sie Laufwerke formatieren oder reparieren, um versehentlichen Datenverlust zu vermeiden.

:::

---

### Überprüfen eines Dateisystems

Wenn ein zuvor ohne Probleme gemountetes Laufwerk jetzt als **nicht mountierbar** angezeigt wird, deutet dies typischerweise auf eine Dateisystemkorruption hin. Dies kann durch einen unsaubere Abschaltung, einen fehlgeschlagenen Schreibvorgang oder die Deaktivierung der Festplatte im %%WebGUI|web-gui%% verursacht werden. Das Überprüfen und Reparieren des Dateisystems ist in der Regel schneller und sicherer als ein vollständiger Wiederaufbau, daher wird empfohlen, dies vor dem Formatieren oder Wiederaufbau des Laufwerks zu versuchen.

:::important

Wenn das %%WebGUI|web-gui%% vorschlägt, ein nicht montierbares Laufwerk zu formatieren, **formatieren Sie nicht**, es sei denn, Sie möchten alle Daten löschen. Formatieren zerstört den Inhalt des Laufwerks und aktualisiert die %%parity|parity%%, wodurch die Wiederherstellung unmöglich wird.

:::

#### Vorbereitung zum Überprüfen oder Reparieren

1. Bestimmen Sie den Dateisystemtyp:
   - Im **Main**-Tab wählen Sie Ihre Festplatte aus (z.B. Disk 3, Cache).
   - Finden Sie den **Dateisystemtyp** (sollte %%XFS|xfs%%, EXT4, %%BTRFS|btrfs%% oder %%ZFS|zfs%% sein).

2. Starten Sie das Array im richtigen Modus:
   - Für **%%XFS|xfs%%** oder **EXT4**, starten Sie das %%array|array%% im **%%Maintenance Mode|maintenance-mode%%**.
   - Für **%%BTRFS|btrfs%%** starten Sie das %%array|array%% im **Normalmodus** für einen %%scrub|scrub%% oder im **%%Wartungsmodus|maintenance-mode%%** für eine Reparatur.
   - Für **%%ZFS|zfs%%**, siehe den %%ZFS|zfs%%-Abschnitt unten.

3. Wenn die Festplatte deaktiviert ist und emuliert wird, führen Sie die Prüfung/Reparatur auf der %%emulated disk|emulated-disk%% durch, bevor Sie versuchen, eine Wiederherstellung durchzuführen. Wenn die %%emulated disk|emulated-disk%% nicht montierbar ist, wird auch die wiederhergestellte Festplatte nicht montierbar sein.

#### Häufige Fehlermeldungen

| Nachricht                                                       | Bedeutung / Aktion                                                                                  |
| --------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- |
| **Superblock hat eine schlechte magische Zahl**                 | Schwere Beschädigung; versuchen Sie, das Dateisystem zu reparieren.                                 |
| **Dateisystem ist schmutzig**                                   | Unsauberer Shutdown; führen Sie eine Dateisystemprüfung durch.                                      |
| **Metadatabeschädigung erkannt**                                | Dateisystemstrukturen sind beschädigt; initialisieren Sie eine Reparatur.                           |
| **Kein gültiges %%BTRFS\|btrfs%% gefunden**                     | Festplatte gehört möglicherweise nicht zu einem gültigen Pool; überprüfen Sie die Pool-Zuweisungen. |
| **Mount: falscher FS-Typ, schlechte Option, etc.**              | Falsche Auswahl des Dateisystems oder die Festplatte ist nicht formatiert.                          |
| **Kann /dev/mdX nicht mounten: Struktur muss gereinigt werden** | Dateisystem ist beschädigt; führen Sie eine Reparatur durch.                                        |

#### Überprüfung über die WebGUI

1. Starten Sie das %%array|array%% im richtigen Modus (siehe Steps oben).
2. Wählen Sie im **Main**-Tab die Festplatte aus, die Sie überprüfen möchten.
3. Scrollen Sie zu **Dateisystemstatus überprüfen**.
4. Für XFS: Sie werden eine **CHECK**-Schaltfläche sehen, ohne dass Optionen einzugeben sind. Das System bestimmt automatisch die notwendigen Maßnahmen basierend auf den Prüfergebnissen.
5. Für andere Dateisysteme: Geben Sie alle notwendigen Optionen ein (für Details, siehe **Hilfe** oben rechts).
6. Klicken Sie auf **Check**, um den Prozess zu initiieren.
7. Verfolgen Sie den Fortschritt im Ausgabefeld. Verwenden Sie **Aktualisieren**, falls erforderlich.
8. Überprüfen Sie die Ergebnisse. Wenn Sie unsicher sind, kopieren Sie die Ausgabe und posten Sie sie im [Forum](https://forums.unraid.net/) zur Beratung.

#### XFS automatisierter Reparaturworkflow

Die XFS-Dateisystemreparatur ist vollständig über das WebGUI automatisiert:

1. Klicken Sie auf die **CHECK**-Schaltfläche (keine Optionen einzugeben)
2. **Prüfergebnisse**:
   - **Keine Beschädigung erkannt**: Zeigt "keine Dateisystembeschädigung erkannt" an und der **PRÜFEN**-Button bleibt
   - **Beschädigung erkannt**: Zeigt "Dateisystembeschädigung erkannt" an und ein **FIX**-Button erscheint
3. Klicken Sie auf **FIX**, um das Dateisystem automatisch zu reparieren.
4. Bei Bedarf kann eine **ZERO LOG**-Schaltfläche erscheinen.
5. Zeigt "Dateisystem repariert" an, wenn der Prozess abgeschlossen ist.

Dieses automatisierte System eliminiert die Notwendigkeit für Benutzer, manuell Reparaturoptionen einzugeben, und stellt sicher, dass die korrekte Reparatursequenz eingehalten wird.

#### Überprüfung über die Befehlszeile

<Tabs>
  <TabItem value="xfs" label="XFS">
    <FsCheckCliXfs />
  </TabItem>

  <TabItem value="btrfs" label="BTRFS">
    <FsCheckCliBtrfs />
  </TabItem>

  <TabItem value="zfs" label="ZFS">
    <FsCheckCliZfs />
  </TabItem>
</Tabs>

:::tip

- Dateisystemreparaturen sind im Allgemeinen schneller als ein vollständiger Wiederaufbau und können den Zugriff ohne Datenverlust wiederherstellen.
- Wiederaufbau einer Festplatte löst **nicht** die Dateisystembeschädigung; führen Sie immer zuerst eine Überprüfung oder Reparatur durch.
- Wenn Sie Zweifel haben, posten Sie Ihre Diagnosen und Fehlermeldungen im Unraid [Forums](https://forums.unraid.net/) für fachkundigen Rat.

:::

---

### Reparatur eines Dateisystems

Wenn eine Überprüfung Ihres Dateisystems Fehler findet, müssen Sie möglicherweise eine Reparatur durchführen, um wieder Zugriff auf Ihre Daten zu erhalten. Reparaturen dauern normalerweise weniger Zeit als ein vollständiger Wiederaufbau, aber es ist wichtig, den Ausgabe sorgfältig zu lesen und bei Unsicherheiten Hilfe in den [Foren](https://forums.unraid.net/) zu suchen.

:::note\[Timing]

Reparaturen können je nach Größe oder starkem Schaden des Dateisystems von mehreren Minuten bis zu mehreren Stunden dauern. Der Fortschritt mag langsam erscheinen, aber Sie können die Aktivität überprüfen, indem Sie die Lese-/Schreibstatistiken auf der Hauptseite betrachten.

:::

#### Vorbereitungen zur Reparatur

1. Klicken Sie im **Main**-Tab auf die Festplatte und bestimmen Sie den Dateisystemtyp (%%XFS|xfs%%, EXT4, %%BTRFS|btrfs%% oder %%ZFS|zfs%%).

2. Starten Sie das Array im richtigen Modus:

   - **Für %%XFS|xfs%% oder EXT4:** Verwenden Sie **%%Maintenance Mode|maintenance-mode%%**.
   - **Für %%BTRFS|btrfs%%:** Verwenden Sie den **Normalmodus** für ein %%scrub|scrub%%; verwenden Sie den **%%Wartungsmodus|maintenance-mode%%** für eine Reparatur.
   - **For %%ZFS|zfs%%:** Use **Normal mode** and run a %%scrub|scrub%% to check for errors. See the [ZFS storage page](../../advanced-configurations/optimize-storage/zfs-storage.mdx) for guidance on %%ZFS|zfs%% pool maintenance and repair procedures.

3. Wenn die Festplatte deaktiviert ist und emuliert wird, führen Sie die Reparatur auf der %%emulated disk|emulated-disk%% durch, bevor Sie versuchen, eine Wiederherstellung vorzunehmen.

#### Reparatur über die WebGUI

1. Starten Sie das %%array|array%% im richtigen Modus (siehe Abschnitt oben).
2. Klicken Sie im **Main**-Tab auf die Festplatte, die Sie reparieren möchten.
3. Scrollen Sie nach unten zu **Dateisystemstatus überprüfen**.
4. Für XFS: Der Reparaturvorgang ist vollständig automatisiert. Klicken Sie auf **PRÜFEN** und dann auf **REPARIEREN**, wenn eine Beschädigung erkannt wird, und auf **LOG NULLEN**, wenn Sie dazu aufgefordert werden.
5. Für andere Dateisysteme: Entfernen Sie alle Optionen, die den Vorgang nur im Prüfmodus ausführen würden (wie `--readonly` für %%BTRFS|btrfs%%).
6. Fügen Sie gegebenenfalls die im Prüfbericht angegebenen Optionen hinzu.
7. Klicken Sie auf **Prüfen**, um mit der Reparatur zu beginnen.
8. Überwachen Sie den Fortschritt im Ausgabefeld. Verwenden Sie **Aktualisieren** bei Bedarf.
9. Wenn Sie nach der Reparatur einen `lost+found`-Ordner bemerken, kann dieser Dateien oder Ordner enthalten, die nicht vollständig wiederhergestellt werden konnten. Verwenden Sie Backups oder den Linux-Befehl `file`, um den Inhalt bei Bedarf zu identifizieren.

:::info

Wenn Sie unsicher bezüglich der Ausgabe sind, kopieren und teilen Sie sie in den [Unraid-Foren](https://forums.unraid.net/) für professionelle Hilfe. Verwenden Sie die Codeformatierungsoption, um sie lesbar zu halten.

:::

#### Reparatur über die Befehlszeile

<Tabs>
  <TabItem value="xfs" label="XFS">
    <FsRepairCliXfs />
  </TabItem>

  <TabItem value="btrfs" label="BTRFS">
    <FsRepairCliBtrfs />
  </TabItem>

  <TabItem value="zfs" label="ZFS">
    <FsRepairCliZfs />
  </TabItem>
</Tabs>

:::info[After die Reparatur]

- Stop and restart the %%array|array%% in **Normal mode**.
- Das Laufwerk sollte jetzt gemountet und zugänglich sein.
- Wenn Sie einen `lost+found`-Ordner sehen, überprüfen Sie dessen Inhalt auf wichtige Dateien.

:::

Wenn Sie die Reparaturausgabe nicht verstehen oder der Prozess fehlschlägt, teilen Sie Ihre Diagnosen und das Reparaturlog im [Unraid Forum](https://forums.unraid.net/) für weitere Unterstützung.
