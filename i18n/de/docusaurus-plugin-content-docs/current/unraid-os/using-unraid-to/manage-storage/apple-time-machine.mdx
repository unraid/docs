---
sidebar_position: 5
sidebar_label: Apple Time Machine
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Apple Time Machine

Apples Time Machine ist ein Sicherungstool, das bei jedem Mac enthalten ist. Es erleichtert den Schutz Ihrer Dateien, Anwendungen und Systemeinstellungen, indem es sie automatisch sichert. Indem Sie Time Machine mit Ihrem Unraid-Server verbinden, können Sie diese Sicherungen sicher auf Ihrer eigenen Hardware speichern. Diese Einrichtung gibt Ihnen nicht nur mehr Kontrolle, sondern ermöglicht auch eine einfachere Skalierbarkeit und zusätzlicher Seelenfrieden.

:::note[macOS kompatibilität]

This guide applies to macOS Ventura (13.x), Sonoma (14.x), and Sequoia (15.x) versions. Some features, such as %%SMB|samba%% enhancements and Time Machine support over %%SMB|samba%%, require macOS versions that support these protocols.

Für die besten Ergebnisse sollten Sie Ihren Mac auf die neueste mit Ihrer Hardware kompatible macOS-Version aktualisieren.
:::caution[macOS Sequoia (15.x)-Überlegungen]

Einige Nutzer berichten von sporadischen Problemen mit Time Machine und Netzlaufwerken auf macOS Sequoia. Sollte es bei Ihnen zu Backup-Fehlern kommen, ziehen Sie in Betracht, den [Time Machine Docker-Container](https://unraid.net/community/apps?q=time+machine#r) als Alternative zu nutzen.

:::
:::

:::

:::

:::

:::

:::

## Erstellen einer Time Machine-Freigabe

:::caution[Before Sie beginnen]

Stellen Sie sicher, dass **%%SMB|samba%%** im %%WebGUI|web-gui%% aktiviert ist:

1. Gehen Sie im %%WebGUI|web-gui%% zu **Shares** und klicken Sie auf **%%user share|user-share%% hinzufügen**.
2. Setzen Sie **%%SMB|samba%% aktivieren** auf **Ja** (Sie müssen das %%array|array%% anhalten, um dies zu ändern).
3. Klicken Sie auf **Anwenden**, um die %%usershare|user-share%% zu erstellen.

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![Erweiterte MacOS-Interoperabilität](/img/enhancedmacos.png)
</div>

:::

Um sich von Ihrem Mac mit Ihrer %%usershare|user-share%% zu verbinden:

1. Gehen Sie im %%WebGUI|web-gui%% zu **Shares** und klicken Sie auf **%%user share|user-share%% hinzufügen**.

2. Enter the %%SMB|samba%% address of your Unraid server. For example, use the format `smb://[server-ip]/[Time Machine share name]` and click **Connect**.

   | Einstellung                                     | Beschreibung                                                                                                                                                                                                                                                                         |
   | ----------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
   | **%%Benutzerfreigabe\|benutzerfreigabe%% Name** | Benennen Sie Ihren %%user share\|user-share%% (z. B. Time Machine).                                                                                                                                                                                                                  |
   | **Mindestfreier Speicherplatz**                 | Stellen Sie auf **1** (1 KB) für beste Ergebnisse ein. Dies verhindert, dass Time Machine fehlschlägt, wenn sich Festplatten der Kapazitätsgrenze nähern.                                                                                                                            |
   | **Eingeschlossene Festplatte(n)**               | Wählen Sie die Festplatte(n) im %%array\|array%% aus, die für die Time Machine %%user share\|user-share%% verwendet werden sollen.                                                                                                                                                   |
   | **Copy-on-write aktivieren**                    | Lassen Sie es auf **Auto** für beste Leistung.                                                                                                                                                                                                                                       |
   | **%%SMB\|samba%% Export**                       | Setzen Sie auf **Ja (Time Machine)**, um die Unterstützung für Time Machine zu aktivieren.                                                                                                                                                                                           |
   | **Time Machine-Volume-Größe**                   | Stellen Sie die gewünschte Maximalgröße ein oder lassen Sie sie ungestellt. Wenn Sie keinen Mindestfreiraum auf 1 setzen, wenden Sie die Freigabe zuerst an, dann erneut bearbeiten und die Volumengröße auf weniger als den berechneten Mindestfreiraum setzen, der angezeigt wird. |
   | **Sicherheitseinstellungen**                    | Konfigurieren Sie die %%SMB\|samba%% Sicherheitsparameter nach Wunsch.                                                                                                                                                                                                               |

3. Klicken Sie auf **Anwenden**, um die %%usershare|user-share%% zu erstellen.

Für weitere Details zum Erstellen und Verwalten von Freigaben siehe [Benutzerfreigaben](./shares.mdx).

## Vom macOS aus verbinden

Um sich von Ihrem Mac mit Ihrer %%usershare|user-share%% zu verbinden:

1. Drücken Sie im **Finder** **Command + K**, um das Fenster „Mit Server verbinden“ zu öffnen.
2. Enter the %%SMB|samba%% address of your Unraid server. For example, use the format `smb://[server-ip]/[Time Machine share name]` and click **Connect**.
3. Wenn Sie dazu aufgefordert werden, geben Sie Ihren Unraid-Benutzernamen und Ihr Passwort ein, das Zugriff auf die Freigabe hat, und klicken Sie dann auf **Verbinden**.
4. Öffnen Sie **Systemeinstellungen**, wenn Sie macOS Ventura 13.0 oder später verwenden, oder **Systemeinstellungen**, wenn Sie macOS Monterey 12.x oder älter verwenden. Navigieren Sie dann zu **Time Machine**.
5. Klicken Sie auf **Datenträger auswählen** oder **Sicherungsdatenträger hinzufügen**, wählen Sie Ihre Unraid Time Machine %%usershare|user-share%% aus, und klicken Sie dann auf **Disk verwenden**.
6. (Optional) Wenn Sie Ihre Sicherung mit einem Passwort sichern möchten, aktivieren Sie **Verschlüsselung**.
7. Falls Sie dazu aufgefordert werden, bestätigen Sie die Verbindung und geben Sie ggf. erneut die Unraid %%root user|root-user%%-Anmeldedaten ein.
8. Time Machine startet das anfängliche Backup automatisch. Beachten Sie, dass das erste Backup eine Weile dauern kann, spätere Backups werden jedoch schneller, da sie inkrementell sind.

:::tip

Um separate Backups für verschiedene Benutzer oder Macs auf Ihrem Unraid-Server zu erstellen:

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![Time Machine Editor](/img/TimeMachineEditor.png)
</div>

:::

## Fehlerbehebung

:::tip

Für Familien oder Umgebungen mit mehreren Macs bietet diese Methode eine klare Trennung von Backups, verbessert die Sicherheit und vereinfacht die Verwaltung.

:::

Um separate Backups für verschiedene Benutzer oder Macs auf Ihrem Unraid-Server zu erstellen:

1. **Erstellen Sie einzigartige Unraid %%root Benutzer|root-user%%-Konten** für jede Person oder jeden Mac, der Daten sichern wird. Zum Beispiel Benutzer namens `larry`, `curly` und `moe`. Dies stellt sicher, dass jeder Benutzer eine eigene Identität und Berechtigungen hat.

2. **Erstellen Sie individuelle Time Machine %%usershare|user-share%%** für jeden Benutzer, und benennen Sie sie klar, um mit dem Benutzer übereinzustimmen, z. B. `tm-larry`, `tm-curly` und `tm-moe`.

3. **Weisen Sie geeignete Benutzerberechtigungen** für jede %%usershare|user-share%% zu:
   - Set the %%user share|user-share%%'s %%SMB|samba%% security settings to ensure that only the corresponding user has access.
   - Stellen Sie sicher, dass nur der beabsichtigte Benutzer auf seine Time Machine %%user-share&#124;user-share%% lesend und schreibend zugreifen kann.

4. **Konfigurieren Sie Time Machine auf jedem Mac**, um sich mit seiner vorgesehenen %%user-share|user-share%% zu verbinden:
   - On each Mac, connect to the Unraid server using the %%SMB|samba%% path for their specific %%user share|user-share%% (e.g., `smb://unraid-server/tm-larry`).
   - Befolgen Sie die üblichen Schritte zum Einrichten von Time Machine, um die %%usershare|user-share%% als Sicherungsdisk auszuwählen.

5. **Überwachen und verwalten Sie die Speichernutzung**:
   - Sie können optional Volumengrößenlimits für jede Time Machine %%user-share|user-share%% einstellen, um zu verhindern, dass ein Benutzer zu viel Speicherplatz einnimmt.
   - Überprüfen Sie regelmäßig die Nutzung und passen Sie die Quoten bei Bedarf an.

Weitere Informationen zum Benutzer- und Sicherheitsmanagement finden Sie unter [Benutzerverwaltung](../../system-administration/secure-your-server/user-management.mdx).

## Fehlerbehebung

Wenn Time Machine-Sicherungen fehlschlagen oder unzuverlässig werden:

1. **Versuchen Sie den Time Machine Docker-Container**: [Verfügbar über Community-Anwendungen](https://unraid.net/community/apps?q=time+machine#r), diese Option kann stabilere Sicherungen bereitstellen als direkte %%SMB|samba%% %%user-share|user-share%%.
2. **Überprüfen Sie die macOS-Firewall**: Deaktivieren Sie vorübergehend die Firewall, um zu sehen, ob Verbindungen blockiert werden.
3. **Erstellen Sie ein frisches Sicherungsziel**: Löschen und erneuern Sie die Time Machine %%user-share|user-share%%, falls die Probleme weiterhin bestehen.

Für zusätzliche Hilfe bei der Fehlerbehebung siehe [Fehlerbehebung](../../troubleshooting/troubleshooting.mdx) oder besuchen Sie die [Unraid-Foren](https://forums.unraid.net/).
