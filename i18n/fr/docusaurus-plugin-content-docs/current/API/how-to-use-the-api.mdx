---
title: Utilisation de l'API Unraid
description: Apprenez √† interagir avec votre serveur Unraid √† travers l'API GraphQL
sidebar_position: 2
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import ManageApiKeysGui from './partials/manage-api-keys-gui.mdx';
import ManageApiKeysCli from './partials/manage-api-keys-cli.mdx';

# Utilisation de l'API Unraid

:::tip[Quick Commencer]

L'API Unraid fournit une interface GraphQL puissante pour g√©rer votre serveur. Ce guide couvre l'authentification, les requ√™tes courantes et les meilleures pratiques.

:::

L'API Unraid fournit une interface GraphQL qui vous permet d'interagir avec votre serveur Unraid. Ce guide vous aidera √† d√©buter l'exploration et l'utilisation de l'API.

## üéÆ Activation du bac √† sable GraphQL

### M√©thode par l'interface Web (Recommand√©)

:::info[Preferred M√©thode]

Utiliser l'interface WebGUI est le moyen le plus simple pour activer le bac √† sable GraphQL.

:::

1. Acc√©dez √† **Param√®tres** ‚Üí **Acc√®s √† la gestion** ‚Üí **Options pour d√©veloppeur**
2. Activez le bouton bascule **Bac √† sable GraphQL**
3. Acc√©dez au terrain de jeu GraphQL en naviguant vers :

   ```txt
   http://YOUR_SERVER_IP/graphql
   ```

### M√©thode CLI

Alternativement, vous pouvez activer le mode d√©veloppeur en utilisant le CLI :

```bash
unraid-api developer --sandbox true
```

Ou utilisez le mode interactif :

```bash
unraid-api developer
```

## üîë Authentification

:::warning[Required pour la plupart des op√©rations]

La plupart des requ√™tes et mutations n√©cessitent une authentification. N'oubliez pas d'inclure les identifiants appropri√©s dans vos requ√™tes.

:::

Vous pouvez vous authentifier en utilisant :

1. **Cl√©s API** - Pour un acc√®s programmatique
2. **Cookies** - Automatique lors de la connexion √† l'interface WebGUI
3. **SSO/OIDC** - Lorsqu'il est configur√© avec des fournisseurs externes

### Gestion des Cl√©s API

<Tabs>
  <TabItem value="gui" label="Web GUI (Recommended)" default>
    <ManageApiKeysGui />
  </TabItem>

  <TabItem value="cli" label="M√©thode CLI">
    <ManageApiKeysCli />
  </TabItem>
</Tabs>

### Utilisation des Cl√©s API

La cl√© API g√©n√©r√©e doit √™tre incluse dans vos requ√™tes GraphQL en tant qu'en-t√™te :

```json
{
    "x-api-key": "YOUR_API_KEY"
}
```

## üìä Sch√©mas Disponibles

L'API offre un acc√®s √† divers aspects de votre serveur Unraid :

### Informations syst√®me

- Interrogez les d√©tails syst√®me y compris le CPU, la m√©moire, et les informations sur le syst√®me d'exploitation
- Surveillez le statut et la sant√© du syst√®me
- Acc√©dez aux informations de la carte m√®re et du mat√©riel

### Gestion des Arrays

- Interrogez le statut et la configuration de l'array
- G√©rez les op√©rations d'array (d√©marrer/arr√™ter)
- Surveillez le statut et la sant√© des disques
- Effectuez des v√©rifications de parit√©

### Gestion des Docker

- Listez et g√©rez les conteneurs Docker
- Surveillez le statut des conteneurs
- G√©rez les r√©seaux Docker

### Acc√®s Distant

- Configurez et g√©rez les param√®tres d'acc√®s √† distance
- G√©rez la configuration SSO
- G√©rez les origines autoris√©es

### üíª Exemples de Requ√™tes

#### V√©rifiez le Statut du Syst√®me

```graphql
query {
    info {
        os {
            platform
            distro
            release
            uptime
        }
        cpu {
            manufacturer
            brand
            cores
            threads
        }
    }
}
```

#### Surveillez le Statut de l'Array

```graphql
query {
    array {
        state
        capacity {
            disks {
                free
                used
                total
            }
        }
        disks {
            name
            size
            status
            temp
        }
    }
}
```

#### Liste des Conteneurs Docker

```graphql
query {
    dockerContainers {
        id
        names
        state
        status
        autoStart
    }
}
```

## üèóÔ∏è Types de Sch√©ma

L'API comprend plusieurs types de base :

### Types de Base

- `Node`: Interface pour les objets avec des identifiants uniques - veuillez consulter [Identification des Objets](https://graphql.org/learn/global-object-identification/)
- `JSON`: Pour les donn√©es JSON complexes
- `DateTime`: Pour les valeurs de timestamp
- `Long`: Pour les entiers 64 bits

### Types de Ressource

- `Array`: Gestion des arrays et des disques
- `Docker`: Gestion des conteneurs et des r√©seaux
- `Info`: Informations syst√®me
- `Config`: Configuration du serveur
- `Connect`: Param√®tres d'acc√®s √† distance

### Acc√®s Bas√© sur les R√¥les

R√¥les disponibles :

- `admin`: Acc√®s complet
- `connect`: Fonctionnalit√©s d'acc√®s √† distance
- `guest`: Acc√®s en lecture limit√©

## ‚ú® Bonnes Pratiques

:::tip[Pro Conseils]

1. Utilisez le bac √† sable Apollo pour explorer le sch√©ma et tester les requ√™tes
2. Commencez avec de petites requ√™tes et ajoutez progressivement des champs selon les besoins
3. Surveillez la complexit√© de vos requ√™tes pour maintenir la performance
4. Utilisez les r√¥les et permissions appropri√©s pour vos cl√©s API
5. Gardez vos cl√©s API s√©curis√©es et tournez-les p√©riodiquement

:::

## ‚è±Ô∏è Limitation des Taux

:::caution[Rate Limites]

L'API applique une limitation du taux pour pr√©venir les abus. Assurez-vous que vos applications g√®rent correctement les r√©ponses li√©es √† la limitation du taux.

:::

## üö® Gestion des Erreurs

L'API renvoie des erreurs GraphQL standard dans le format suivant :

```json
{
  "errors": [
    {
      "message": "Error description",
      "locations": [...],
      "path": [...]
    }
  ]
}
```

## üìö Ressources Suppl√©mentaires

:::info[Learn Plus]

- Utilisez l'explorateur de sch√©ma d'Apollo Sandbox pour parcourir tous les types et champs disponibles
- Consultez l'onglet documentation dans Apollo Sandbox pour des descriptions de champs d√©taill√©es
- Surveillez la sant√© de l'API en utilisant `unraid-api status`
- G√©n√©rez des rapports en utilisant `unraid-api report` pour le d√©pannage

Pour plus d'informations sur des commandes sp√©cifiques et les options de configuration, consultez la [documentation CLI](cli.mdx) ou ex√©cutez `unraid-api --help`.

:::
