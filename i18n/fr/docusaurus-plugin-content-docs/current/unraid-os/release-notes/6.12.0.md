# Version 6.12.0 2023-06-14

## Notes de mise à niveau

Au démarrage, si tous les périphériques PCI spécifiés dans `config/vfio-pci.cfg` ne se lient pas correctement, le démarrage automatique du VM est empêché. Vous pouvez toujours démarrer des machines virtuelles individuelles. Ceci est prévu pour éviter un crash de l'hôte Unraid si les ID PCI matériels ont changé à cause d'une mise à jour du noyau ou d'un changement matériel physique. Pour restaurer le démarrage automatique du VM, examinez `/var/log/vfio-pci-errors` et retirez les IDs PCI fautifs du fichier `config/vfio-pci.cfg` puis redémarrez.

Si vous revenez de la version 6.12 à 6.11.5 ou antérieure, vous devez forcer la mise à jour de tous vos containers Docker et les démarrer manuellement après la rétrogradation. Cela est nécessaire en raison du changement sous-jacent à cgroup v2 à partir de la version 6.12.0-rc1.

Linux [Multi-Gen LRU](https://lwn.net/Articles/856931/) est une fonctionnalité relativement nouvelle maintenant incluse mais non activée par défaut. Vous pouvez l'activer en ajoutant cette ligne à votre fichier 'config/go' :

`echo y > /sys/kernel/mm/lru_gen/enabled`

Si vous revenez de la version 6.12 à la version 6.11.5 ou antérieure, il peut être nécessaire de supprimer cette ligne.

Si vous avez créé des zpools en utilisant la version 6.12.0-beta5, veuillez effacer ces pools et recréer.

### Plugins obsolètes/cassés

Il existe quelques plugins connus pour être incompatibles avec Unraid 6.12, et lors du démarrage, ils ne seront pas installés. Vous recevrez une notification pour chaque plugin affecté et pourrez passer en revue la liste en allant dans **Plugins/Plugin File Install Errors**.

- version disklocation-master 2022.06.18 (`Localisation de Disque` par olehj, casse le tableau de bord)
  - Mettez à jour ce plugin avant la mise à niveau du système
- version plexstreams 2022.08.31 (`Plex Streams` par dorgan, casse le tableau de bord)
  - Mettez à jour ce plugin avant la mise à niveau du système
- version corsairpsu 2021.10.05 (`Statistiques de l'alimentation Corsair` par Fma965, casse le tableau de bord)
  - Mettez à jour ce plugin avant la mise à niveau du système
- version gpustat 2022.11.30a (`Statistiques GPU` par b3rs3rk, casse le tableau de bord)
  - Passez à `Statistiques GPU` par SimonF
- version ipmi 2021.01.08 (`Outils IPMI` par dmacias72, casse le tableau de bord)
  - Passez à `Outils IPMI` par SimonF
- version nut 2022.03.20 (`NUT - Outils UPS Réseau` par dmacias72, casse le tableau de bord)
  - Passez à `NUT - Outils UPS Réseau` par SimonF
- version NerdPack 2021.08.11 (`Outils Nerd` par dmacias72)
  - Passez à `NerdTools` par UnRAIDES
- version upnp-monitor 2020.01.04c (`Moniteur UPnP` par ljm42, non compatible avec PHP 8)
- version ZFS-companion 2021.08.24 (`ZFS-Companion` par campusantu, casse le tableau de bord)

Certains des plugins affectés ont été repris par différents développeurs, nous recommandons d'aller à la page **Applications** et de rechercher des remplacements. Veuillez poser des questions spécifiques aux plugins dans le fil de support de ce plugin.

### Problèmes connus

#### Pannes liées au pilote i915

Remarque : ce problème n'existe plus depuis Unraid [6.12.6](6.12.6.md#bug-fixes-and-improvements).

Nous sommes conscients que certains systèmes Intel Rocket Lake de 11e génération rencontrent des plantages liés au iGPU i915. Si votre système Rocket Lake se plante sous Unraid 6.12.0-6.12.5, ouvrez un terminal web et tapez ceci, puis redémarrez :

`echo "options i915 enable_dc=0" >> /boot/config/modprobe.d/i915.conf`

Activer cette option peut entraîner une consommation d'énergie plus élevée mais peut résoudre ce problème pour ces GPU.

#### Traces d'appels liés à macvlan

Si vous obtenez des traces d'appel liées à macvlan, en premier lieu nous vous recommandons de naviguer vers _**Paramètres > Docker**_, de passer en vue avancée, et de changer le **type de réseau Docker personnalisé** de **macvlan** à **ipvlan**. C'est la configuration par défaut qu'Unraid propose depuis la version 6.11.5 et elle devrait fonctionner pour la plupart des systèmes.

Cependant, certains utilisateurs ont signalé des problèmes avec le transfert de port de certains routeurs (Fritzbox) et une fonctionnalité réduite avec des outils de gestion de réseau avancés (Ubiquity) en mode ipvlan.

Dans 6.12.0, la méthode de segmentation [docker à deux interfaces réseau](https://forums.unraid.net/topic/137048-guide-comment-résoudre-les-problèmes-macvlan-et-ipvlan-avec-les-conteneurs-sur-un-réseau-personnalisé/) est une solution viable, mais notre recommandation est de passer à Unraid [6.12.4](6.12.4.md) qui offre une meilleure solution.

#### Plex

Si les conteneurs Docker rencontrent des problèmes de démarrage après un certain temps, et que vous utilisez Plex, allez dans les paramètres de votre conteneur Plex Docker,
passez en vue avancée et ajoutez ceci aux paramètres supplémentaires : `--no-healthcheck`

### Rétrogradation

Voir les commentaires sous [Notes de mise à niveau](#upgrade-notes)

## Pools ZFS

Nouveau dans cette version, la possibilité de créer un système de fichiers ZFS dans un pool défini par l'utilisateur. Vous pouvez également formater tout périphérique de données dans l'array Unraid avec un système de fichiers ZFS à un seul périphérique. Pour avoir une bonne vue d'ensemble de ZFS, consultez [cet article](https://arstechnica.com/information-technology/2020/05/zfs-101-understanding-zfs-storage-and-performance/).

Nous répartissons la mise en œuvre complète de ZFS sur deux versions du système d'exploitation Unraid. Le support initial dans cette version inclut :

- Prise en charge des profils racines raid0, miroir, raidz1, raidz2 et raidz3. Jusqu'à 4 miroirs en mode miroir vdev. Groupes vdev multiples.
- Support pour la suppression d'un appareil unique : si l'appareil est toujours présent dans le serveur, 'wipefs' est utilisé pour effacer la table de partitions.
- Support pour le remplacement d'un appareil manquant unique par un nouvel appareil de même taille ou plus grand.
- Prise en charge de la taille programmée des pools ZFS.
- Support du renommage des pools.
- Les noms de pools doivent commencer par une lettre minuscule et ne contenir que des lettres minuscules, des chiffres, le trait de soulignement et le tiret. Les noms de pools ne doivent pas se terminer par un chiffre.
- Les vdev non-root ne peuvent pas être configurés dans cette version, cependant, ils peuvent être importés. Remarque: les pools hybrides importés peuvent ne pas être étendus dans cette version.
- Les pools créés sur d'autres systèmes peuvent ou non être importés selon la façon dont le pool a été créé. Une mise à jour future permettra d'importer des pools de n'importe quel système.

Un pool ZFS a trois variables :

- profil - l'organisation des données de base: raid0, miroir (jusqu'à 4 voies), raidz1, raidz2, raidz3
- largeur - le nombre d'appareils par vdev racine
- groupes - le nombre de vdev racines dans la piscine

Au moment de la création du pool ZFS, le WebGUI présentera toutes les options de topologie en fonction du nombre d'appareils assignés au pool.

Traitement spécial pour les miroirs à vdev unique :

- Un pool ZFS à un seul appareil peut être converti en miroir à plusieurs appareils en ajoutant jusqu'à 3 appareils supplémentaires en une seule opération.
- Un miroir à 2 appareils peut être augmenté à 3 appareils en ajoutant un seul appareil ; de même, un miroir à 3 appareils peut être augmenté en miroir à 4 appareils en ajoutant un seul appareil.

Pour ajouter un vdev racine supplémentaire, vous devez assigner un nombre 'width' de nouveaux périphériques au pool en même temps. Le nouveau vdev sera créé avec le même `profil` que les vdev actuels. Une flexibilité supplémentaire dans l'ajout/l'élargissement des vdevs sera fournie dans une mise à jour future.

Les pools créés avec le plugin **steini84** peuvent être importés comme suit : Tout d'abord, créez un nouveau pool avec un nombre de slots correspondant au nombre de périphériques dans le pool à importer. Ensuite, assignez tous les périphériques au nouveau pool. Au démarrage de l'array, le pool devrait être reconnu, bien que certaines topologies zpool puissent ne pas être reconnues (veuillez le signaler). Veuillez noter que seuls les pools utilisant la partition n°1 peuvent être importés dans cette version, par exemple cet output `lsblk` :

```bash
# lsblk
NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
sdb           8:16   0   7.3T  0 disk
├─sdb1        8:17   0     2G  0 part
└─sdb2        8:18   0   7.3T  0 part
```

indique que la seconde partition (`sdb2`) du disque est utilisée pour les données, et **ne peut pas** être importée.

Les topologies mixtes ne sont pas prises en charge. Par exemple, un pool avec à la fois un vdev racine en miroir et un vdev racine raidz n'est pas reconnu.

L'autotrim peut être configuré en **activé** ou **désactivé** (sauf pour les volumes ZFS à un appareil dans la matrice unRAID).

La compression peut être configurée sur **on** ou **off**, où **on** sélectionne **lz4**. Une mise à jour future permettra de spécifier d'autres algorithmes/niveaux.

Lors de la création d'un nouveau pool ZFS, vous pouvez choisir **zfs - crypté**, qui, comme les autres volumes cryptés, applique le cryptage au niveau du périphérique via LUKS. Le cryptage natif ZFS n'est pas supporté pour le moment.

Lors du démarrage du système, le fichier /etc/modprobe.d/zfs.conf est généré automatiquement pour limiter le ZFS ARC à 1/8 de la mémoire installée. Cela peut être contourné si nécessaire en créant un fichier 'config/modprobe.d/zfs.conf' personnalisé. Une mise à jour future inclura la capacité de configurer l'ARC via WebGUI, y compris l'auto-ajustement selon la pression mémoire, par exemple le démarrage/arrêt des machines virtuelles.

Les partages d'utilisateur de niveau supérieur dans un pool ZFS sont créés en tant qu'ensembles de données au lieu de répertoires ordinaires.

## Changement conceptuel de stockage de partage

Nouveau dans cette version, un changement conceptuel dans la manière dont le stockage est attribué aux partages. L'ancien concept du stockage principal étant l'array Unraid avec un "Cache" optionnel est déroutant pour de nombreux nouveaux utilisateurs, d'autant plus que _cache_ a une signification spécifique dans ZFS.

Également détaillé ci-dessous, nous avons introduit le concept de _partage exclusif_. Il s'agit simplement d'un partage où toutes les données se trouvent dans un pool nommé unique. Dans ce cas, le système de fichiers de partage utilisateur basé sur FUSE retourne un **lien symbolique** au répertoire de partage réel dans le pool. Toutes les opérations au sein du partage, y compris le transfert de données, contournent donc FUSE, ce qui entraîne des performances accrues. Cette fonctionnalité vise principalement à maximiser l'I/O pour les grands pools ZFS rapides accessibles via un réseau rapide.

C'est un changement d'interface uniquement; les partages existants seront consultés avec cette nouvelle structure automatiquement lors de la mise à niveau,
et reviendront automatiquement au style précédent si vous revenez à une version antérieure.

La configuration des options de stockage pour un partage est spécifiée à l'aide de deux entrées :

- Stockage principal
- Stockage secondaire

Le stockage principal est l'endroit où **nouveaux** fichiers/dossiers sont créés. Si le stockage principal est en dessous du paramètre d'espace libre minimum, alors les nouveaux fichiers et dossiers seront créés dans le stockage secondaire, si configuré.

Chaque entrée présente une liste déroulante qui répertorie "array", "none", et chaque groupe nommé comme une sélection selon certaines règles de configuration :

Pour la liste déroulante de stockage principal :

- l'option "none" est omise, c'est-à-dire, le stockage principal doit être sélectionné.
- n'importe quelle piscine nommée peut être sélectionnée
- "Array" peut être sélectionné (signifiant la matrice unRAID)

Pour la liste déroulante de stockage secondaire :

- l'option "none" est incluse, c'est-à-dire, le stockage secondaire est optionnel
- si le stockage principal est un nom de pool, alors les seules options sont "aucun" et "Array". À l'avenir, d'autres pools seront également listés ici.
- si le stockage principal est "Array", alors seul "none" apparaît comme option

Lorsque "Array" est sélectionné pour le stockage principal ou secondaire, un ensemble de paramètres supplémentaires glisse :

- Méthode d'allocation
- Disque(s) inclus
- Disque(s) exclus
- Niveau de découpe

Lorsqu'un groupe nommé _btrfs_ est sélectionné pour le stockage principal ou secondaire, un paramètre supplémentaire glisse :

- Activer la copie à l'écriture

Lorsqu'un pool nommé _ZFS_ est sélectionné pour le stockage primaire ou secondaire, il n'y a pas de paramètres supplémentaires pour le moment mais il pourrait y en avoir à l'avenir. Par exemple, comme un partage est créé en tant que dataset ZFS, il pourrait avoir un paramètre de compression différent de celui du pool parent si nous devons mettre cela en œuvre.

### Action du déplaceur

Lorsque le stockage secondaire est configuré pour un partage, le paramètre "Action du déplaceur" est activé, permettant à l'utilisateur
de sélectionner la direction de transfert du déplaceur :

- Primaire à Secondaire (par défaut)
- Secondaire vers principal

### Partages exclusifs

Nous avons ajouté un nouveau paramètre : "Paramètres / Paramètres globaux de partage / Permettre des partages exclusifs" \[Oui/Non] par défaut : Non. Si défini sur Oui et si le stockage principal pour un partage est un pool et le stockage secondaire est défini sur "aucun", alors un lien symbolique est créé dans /mnt/user/_share_ pointant directement vers le répertoire de partage du pool. (Une vérification supplémentaire est effectuée pour garantir que le partage n'existe pas non plus sur d'autres volumes.)

Il y a un nouveau drapeau d'état, "Accès exclusif" qui est réglé sur "Oui" lorsqu'un lien symbolique est en place ; et, "Non" autrement. Les partages exclusifs sont également indiqués sur la page des Partages.

L'avantage de configurer des symlinks est que les E/S contournent le système de fichiers de partage d'utilisateur basé sur FUSE (shfs) ce qui peut augmenter significativement
la performance.

Il y a quelques restrictions :

- Le paramètre de l'espace libre minimum du partage et du groupe est ignoré lors de la création de nouveaux fichiers sur un partage exclusif.
- Si un partage est exporté NFS, il ne peut pas être exclusif, c'est-à-dire que le lien symbolique n'est pas créé. Ceci est dû au fait que les liens symboliques sont résolus dans le client NFS, pas le serveur. Nous espérons lever cette restriction dans une mise à jour future.

### Bouton de nettoyage

Apparaissant sur la page des Partages, un bouton appelé CLEAN UP, lorsqu'il est activé, indique qu'il y a des fichiers config/share/_partage_.cfg pour des partages qui n'existent pas. Cliquer sur ce bouton supprimera ces fichiers.

## Autres améliorations

### btrfs

L'autotrim peut être configuré en **activé** ou **désactivé** lorsqu'il est utilisé dans un groupe.

La compression peut être configurée sur **on** ou **off**. **on** sélectionne **zstd**. Une future mise à jour permettra de spécifier d'autres algorithmes/niveaux.

### xfs

L'autotrim peut être configuré en **activé** ou **désactivé** lorsqu'il est utilisé comme pool à un seul slot.

### Docker

Il est possible de configurer le **dossier racine de données Docker** pour être placé dans un répertoire sur un pool de stockage ZFS. Dans ce cas, Docker utilisera le pilote de stockage 'zfs'. Ce pilote crée un dataset distinct pour chaque couche d'image. Pour cette raison, voici notre recommandation pour configurer Docker en utilisant **répertoire** :

Tout d'abord, créez un partage utilisateur **docker** configuré comme suit :

- Nom du partage : **docker**
- Stockage principal : _**nom de votre pool ZFS**_
- Stockage secondaire : **aucun**

Ensuite, sur la page de paramètres de **Docker** :

- Activer docker : **Oui**
- Docker data-root : **répertoire**
- Répertoire Docker : **/mnt/user/docker**

Si vous devez un jour supprimer l'état persistant de docker, alors accédez à la page des paramètres Docker et réglez **Activer docker** sur **Non** et cliquez sur **Appliquer**. Une fois que docker est arrêté, cliquez sur la case **Supprimer le répertoire** puis sur **Supprimer**. Cela entraînera la suppression non seulement des divers fichiers et répertoires, mais aussi de toutes les couches stockées en tant que datasets.

Avant de réactiver Docker, assurez-vous de recréer le partage **docker** comme décrit ci-dessus.

#### Autres modifications Docker

- CreateDocker : l'étiquette **Docker Hub URL** a été changée en **Registry URL** en raison de la popularité croissante de GHCR et d'autres nouveaux registres de conteneurs.
- Respecter le paramètre d'arrêt prolongé défini par l'utilisateur.
- Accepter les images au format OCI.
- Ajouter une option pour désactiver readmore-js sur le tableau des conteneurs.
- Correction : la console des conteneurs Docker n'utilisera pas bash si sélectionnée.
- Corriger le problème de détection de l'arrêt correct de docker.
- rc.docker : donner 30 sec au lieu de 15 pour démarrer dockerd.

### Gestionnaire de VM

Si vous activez le copier/coller pour les consoles virtuelles, vous devez installer un logiciel supplémentaire sur le client en plus de l'agent QEMU si celui-ci a été installé. [Voici l'emplacement](https://www.spice-space.org/download.html) pour spice-vdagent pour Windows et Linux. Notez que la fonction de copier/coller ne fonctionnera pas avec le visualiseur Web spice, vous devez utiliser virt-viewer.

#### Autres modifications de VM

- Ajouter une option série au vdisque.
- Correction du bug Spice pour les utilisateurs avec des ports GUI non standard définis.
- OVMF pour QEMU : version stable202302
- Correction pour le texte du bus.
- Activer l'option copier/coller pour les consoles virtuelles.
- Mettre à jour le traitement de sauvegarde de la mémoire pour Virtiofs.
- Corriger le blocage lorsque aucune VM n'est présente.
- Ajouter le support pour le modèle réseau rtl8139.
- corriger omission de traduction.
- ajout d'un verrouillage/déverrouillage pour les éléments triables.
- Correction pour la souris Spice si le Copier coller est activé.
- Laisser la page se charger même lorsque les périphériques PCI apparaissent comme manquants ou mal assignés.
- Rendre les options du visualiseur distant et de la console Web sélectionnables.
- Option de téléchargement du fichier .vv et démarrage du visualiseur distant si le navigateur est configuré pour ouvrir le fichier .vv à son téléchargement.
- Ajouter un support de console de visionneuse distante.
- Retirer-lock-posix='on'-flock='on'/-
- Corriger le problème de démarrage des VM marquées comme Autostart après un démarrage manuel de l'array.
- Correction du problème de mémoire maximale > 1 To.
- Corrigez les problèmes de chargement de la page VM si les utilisateurs ont supprimé le brochement vcpu.
- ovmf-stable : version 202305 (build 3).
- sujet de notification corrigé.

### Tableau de Bord

Le tableau de bord WebGUI a été redessiné et il est désormais possible de déplacer les éléments (tuiles) de haut en bas et entre les colonnes. Cela permet à l'utilisateur d'organiser les tuiles de la manière qu'il souhaite. Il y a une petite icône **verrou** sur la barre de menu qui doit être cliquée pour activer cette fonction :

- Vert est l'état normal (page verrouillée)
- Rouge est l'état d'attention (page déverrouillée)

Remarque : l'icône **verrou** apparaît également sur les pages Docker et VM et doit être cliquée pour réorganiser l'ordre de démarrage.

### Améliorations du réseau

Nous avons ajouté une nouvelle section : Paramètres/Paramètres réseau/Interface Extra

Cette nouvelle section permet à l'utilisateur de définir quelles interfaces sont utilisées par les services Unraid. Par défaut, toutes les interfaces régulières avec une adresse IP sont incluses dans la liste des interfaces d'écoute.

Les tunnels de la fonction WireGuard intégrée d'Unraid sont automatiquement ajoutés ou retirés de la liste lorsque les tunnels Wireguard sont activés ou désactivés. L'utilisateur peut exclure ces tunnels de la liste des interfaces d'écoute.

Pour utiliser l'interface Tailscale ou Zerotier, il est nécessaire d'ajouter le nom de l'interface ou l'adresse IP de la communication à la liste des interfaces d'écoute incluses. **Important :** Il est impératif que le container Tailscale ou Zerotier soit en cours d'exécution avant que l'interface ne soit ajoutée à la liste. Pour plus d'informations, consultez [ce post du forum communautaire](https://forums.unraid.net/bug-reports/prereleases/unraid-os-version-6120-rc7-available-r2427/?tab=comments#comment-24235).

#### Autres modifications du réseau

- Support des interfaces personnalisées (par exemple, tunnel VPN Tailscale ou tunnel L2 zerotier)
- create\_network\_ini - redémarrer smb lorsque les modifications du réseau sont effectuées
- rc.inet1 - ajouter le traitement des iptables pour ponts d'interfaces afin de les faire fonctionner comme les interfaces macvlan
- rc.avahidaemon - écouter uniquement sur les interfaces régulières qui ont une adresse IP, cela inclut l'interface principale + définir le support ipv4 / ipv6
- rc.docker - supprimer l'adresse ipv6 lien-local pour docker0 et les interfaces shim lorsqu'elles sont configurées comme ipv4 uniquement
- rc.samba - laisser smb, service nmb écouter uniquement sur les interfaces régulières qui ont une adresse IP, cela inclut l'interface principale + définir le support ipv4 / ipv6 (également pour wsdd2)
- rc.ssh - écouter uniquement sur les interfaces régulières qui ont une adresse IP, cela inclut l'interface principale + définir le support ipv4 / ipv6
- Corriger le problème où /etc/resolve.conf peut être supprimé lors du changement de serveur DNS entre auto/statique.
- Corriger le bug dans la gestion du champ de description.
- corriger nginx reconnaissant l'adresse IP des serveurs DHCP lents

### Autres améliorations/corrections de bugs

- Augmentation du nombre maximal de périphériques par pool de 30 à 60. Dans une prochaine version, nous éliminerons complètement le maximum supérieur.
- webTerminal : Pour une meilleure lisibilité, la couleur de fond a été changée dans les listings de répertoires où 'w+o' est défini. Le rendu a également été changé de webgl à canvas pour atténuer le problème avec les dernières versions de Chrome.
- Correction de la sauvegarde/restauration du fichier de dérive NTP depuis le répertoire 'config' USB flash persistant.
- Fichier /root/.config/remmina extrané supprimé
- Édition de partage : avertir lorsque un nom ZFS invalide est utilisé
- Édition de partage : permettre les noms d'une lettre
- Ajouter un [Pushbits Agent](https://github.com/pushbits/server) pour l'intégration Matrix/Synapse.
- cgroup2 est maintenant par défaut
- les images de boucle ne sont plus montées en utilisant directio
- le script newperms est restreint pour fonctionner uniquement sur /mnt/.
- le paquetage upgradepkg a été patché pour empêcher le remplacement d'un paquetage existant par une version plus ancienne.
- les informations de bus/périphérique PCI actuelles sont enregistrées dans le fichier '/boot/previous/hardware' lors de la mise à niveau de l'OS Unraid.
- NFS : activer le transport UPD
- emhttp : corriger les chaînes syslog de la piscine de cache (null)
- emhttp : corriger l'affichage de la taille incorrecte de l'appareil de remplacement dans le pool de cache
- mover : corriger la mauvaise gestion des liens symboliques
- mover : corriger le format des entrées de journal de syslog du déménageur différent des versions précédentes
- plugin : afficher retval de la commande Run dans le message d'erreur
- shfs : ignorer les répertoires cachés de niveau supérieur (noms commençant par '.')
- terminal : OpenTerminal : modifier le signal de terminaison (arrêt forcé)
- mise à niveau de l'OS Unraid : vérifier une mise à jour antérieure sans redémarrage
- WebGUI : support PHP8, augmenter la mémoire maximale PHP de 128M à 256M
- WebGUI : ManagementAccess : désactiver les boutons Provisionner/Renouveler/Mettre à jour lorsqu'il n'y a pas d'IP sur eth0
- WebGUI : ManagementAccess : Supporter les adresses IP locales de wireguard en combinaison avec le certificat SSL myservers.unraid.net
- WebGUI : Déplacer l'icône "afficher" sur les pages principales et de partages à gauche
- WebGUI : garder les bannières rejetées cachées pendant un mois
- WebGUI : Tableau de bord : corriger l'erreur de régression dans "select case"
- WebGUI : Tableau de bord : rendre les éléments déplaçables entre les colonnes
- WebGUI : Tableau de bord : API pour ajouter des tuiles personnalisées
- WebGUI : Tableau de bord : réorganiser les informations sur le processeur
- WebGUI : Tableau de bord : réorganiser les infos APS
- WebGUI : Tableau de bord : réorganiser informations sur la mémoire
- WebGUI : Tableau de bord : réorganiser l'en-tête VPN
- WebGUI : Tableau de bord : réorganisations d'en-têtes
- WebGUI : ajouter jqueryUI touch punch pour appareils mobiles
- WebGUI : changer ID en CLASS pour éléments apparaissant plus d'une fois
- WebGUI : faire défiler l'en-tête dans les thèmes blanc et noir
  - Lorsque plus d'éléments sont présents que d'espace d'écran, l'utilisateur peut maintenant les faire défiler (auparavant ces éléments étaient invisibles)
- WebGUI : Tableau de bord et Docker : introduire un bouton de verrouillage pour les éléments triables
  - Par défaut, les éléments triables sont verrouillés, ce qui permet aux appareils mobiles de faire défiler la page. Sur demande, les éléments peuvent être rendus triables.
- WebGUI : Utilisateurs : ajouter une icône à la barre de titre
- WebGUI : Outils : nouvelle fonction -> Paramètres PHP
  - Voir les informations PHP
  - Configurer les rapports d'erreurs
  - Ouvrir le LOG pour voir les erreurs en temps réel
- WebGUI : Infos système : corriger la lecture des ports inactifs
- WebGUI : Plugin : Inclure la commande réelle exécutée
- WebGUI : Infos système : amélioration du cache
- WebGUI : Infos système : amélioration de la mémoire
- WebGUI : DeviceInfo : désactiver les boutons lors de l'exécution de l'opération de suppression
- WebGUI : Docker : corrections de l'arborescence des fichiers
- WebGUI : Tableau de bord : alarme de chaleur fixe par pool
- WebGUI : Notifications : opération révisée
  - Fermeture automatique des nouvelles notifications après 3 secondes.
  - Corriger les notifications réapparaissant après la fermeture
- WebGUI : DeviceList : ajouter le type de FS en état hors connexion
- WebGUI : Ajouter un agent de notification pour Bark
- WebGUI : Main : masquer l'icône de navigation lorsque le disque n'est pas monté
- WebGUI : Diagnostics : ajouter des informations supplémentaires sur btrfs et zfs
- WebGUI : Tableau de bord : ajouter l'utilisation de la mémoire ZFS
- WebGUI : Autres autorisations révisées
  - Sélectionner soit les disques soit les partages (pas les deux)
- WebGUI : Ajouter testparm aux diagnostics
- WebGUI : Prise en charge du nouveau point de montage réservé UD /mnt/addons
- WebGUI : corriger le problème d'affichage des attributs lorsque l'affichage de la température est réglé sur Fahrenheit
- WebGUI : modifications du Tableau de bord :
  - verrouiller complètement le Tableau de bord : L'édition/déplacement ne devient possible qu'en déverrouillant la page
  - Une colonne vide est remplie lorsque les tuiles correspondantes sont rendues visibles à nouveau, pas besoin de tout réinitialiser
  - ajout d'un indicateur de déplacement visuel sur la page Docker et VM, pour indiquer plus clairement que les lignes peuvent être déplacées maintenant.
  - changer la forme du curseur lorsque le déplacement est activé
  - utiliser le titre de la tuile comme index
- WebGUI : correction : Les messages post ne fonctionnant pas avec le compte local Firefox
- WebGUI : Le test SMART ne peut pas être exécuté sur un disque UD car il n'y a pas de sélection de délai d'arrêt
- WebGUI : le pied de page de statut reste bloqué sur "Démarrage des services" lors de l'application des modifications de configuration de partage.
- WebGUI : corriger la disposition du tableau pour les images orphelines
- WebGUI : Plugin : ne pas afficher le bouton de mise à jour si incompatible
- WebGUI : Plugin : rendre la détection de pourcentage de wget plus robuste
- WebGUI : OpenTerminal : limiter les clients
- WebGUI : Menu contextuel : placement automatique du triangle
- WebGUI : Tableau de bord : corriger les avertissements du pool
- WebGUI : Autoriser le test SMART long pour UD
- WebGUI : Lire le type de processeur à partir de /proc/cpuinfo
- WebGUI : CSS : résoudre le problème de barre de défilement dans Firefox
- WebGUI : Ajouter un partage : corriger la vérification des noms de partages cachés
- WebGUI : Paramètres d'affichage : ajouter les valeurs par défaut manquantes
- WebGUI : Opération de tableau : empêcher le double clic sur le bouton Démarrer
- WebGUI : Informations sur l'appareil : afficher shareFloor avec des unités
- WebGUI : Informations sur l'appareil : ajouté un calcul automatique du floor
- WebGUI : Message de redimensionnement automatique ajouté
- WebGUI : Partages : icône d'information ajoutée
- WebGUI : Page des informations sur l'appareil et des partages mise à jour
- WebGUI : Correction de l'affichage des aberrations réseau.
- WebGUI : Remplissage automatique de l'espace libre minimum pour les nouveaux partages
- WebGUI : feat(upc) : mise à jour vers v3 pour se connecter
- WebGUI : Calcul de la taille Gestion/Pool : afficher et permettre les valeurs en pourcentage
- wireguard : ajouter le support SSL pour les adresses IP du tunnel WG (certificats joker myunraid.net uniquement)
- wireguard : corriger le problème nginx avec configuration partielle de WireGuard

### Publier les différences de fichiers _bz_

Unraid OS est composé d'un ensemble de 5 fichiers _bz_ situés à la racine du périphérique USB Flash de démarrage :

- bzimage - le noyau Linux
- bzroot - le système de fichiers racine, sans bureau console
- bzroot-gui - fichiers supplémentaires nécessaires pour le bureau console
- bzmodules - modules (pilotes) associés au noyau Linux
- bzfirmware - firmware des appareils requis par certains modules

À partir de la version 6.12, le contenu de ces fichiers a été réorganisé :

- bzimage - le noyau Linux (inchangé)
- bzroot - le système de fichiers racine à l'exclusion de l'arborescence du répertoire /usr
- bzroot-gui - un fichier unique qui démarre automatiquement le bureau console (pour la compatibilité)
- bzmodules - modules (pilotes) associés au noyau Linux et firmware des appareils requis par certains modules
- bzfirmware - le répertoire /usr et tous les fichiers qu'il contient, y compris le bureau console

Ces changements accélèrent le processus de démarrage et libèrent près de 1 Go de RAM. Cela nous permet également d'ajouter plus de "choses" au système d'exploitation Unraid à l'avenir sans nécessiter plus de RAM. Enfin, lorsqu'il est démarré en mode **non-GUI**, le bureau peut être lancé en se connectant à la console et en tapant la commande 'slim'.

#### Mise à jour manuelle

La mise à jour manuelle fait référence à la mise à jour du système d'exploitation Unraid sur votre périphérique de démarrage USB sans utiliser la fonction **Outils/Mise à jour du système d'exploitation**. Typiquement, on ferait l'un des choix suivants :

- ouvrir une fenêtre Terminal, wget le fichier zip de publication, décompresser la version, puis 'cp' les fichiers _bz_ à la racine du périphérique de démarrage.

ou

- exporter le partage 'flash' sur votre réseau et glisser les fichiers _bz_ depuis un PC directement vers le flash.

L'une ou l'autre méthode, à partir de 6.12 **peut échouer** car le fichier _bzfirmware_ sera écrasé pendant qu'il est encore monté - pas bon.

Pour contourner cela, vous devez d'abord créer un répertoire temporaire sur le périphérique USB et ensuite 'mv' (ou glisser) tous les fichiers _bz_ existants dans ce répertoire temporaire. Maintenant, vous pouvez copier les nouveaux fichiers _bz_ à la racine du périphérique USB et redémarrer.

## Noyau Linux

- version 6.1.33
- md/unraid : version 2.9.27.
- CONFIG\_FS\_DAX: Support de l'accès direct (DAX) basé sur le système de fichiers
- CONFIG\_VIRTIO\_FS: Système de fichiers Virtio
- CONFIG\_ZONE\_DEVICE: Prise en charge de la mémoire de périphérique (pmem, HMM, etc...) hotplug
- CONFIG\_USBIP\_HOST: Pilote hôte
- CONFIG\_INTEL\_MEI: Interface moteur de gestion Intel
- CONFIG\_INTEL\_MEI\_ME: Jeux de puces Intel avec ME activé
- CONFIG\_INTEL\_MEI\_GSC: Dispositif intégré Intel MEI GSC
- CONFIG\_INTEL\_MEI\_PXP: Services PXP d'interface ME d'Intel
- CONFIG\_INTEL\_MEI\_HDCP: Services HDCP2.2 d'interface ME d'Intel
- CONFIG\_INTEL\_PMC\_CORE: Pilote principal PMC Intel
- CONFIG\_DRM\_I915\_PXP: Activer le support Intel PXP
- CONFIG\_SCSI\_FC\_ATTRS: Attributs de transport FiberChannel
- CONFIG\_FUSION\_SPI: Pilotes ScsiHost Fusion MPT pour SPI
- CONFIG\_FUSION\_FC: Pilotes ScsiHost Fusion MPT pour FC
- CONFIG\_FUSION\_CTL: Pilote de périphérique divers (ioctl) Fusion MPT
- CONFIG\_FUSION\_LOGGING: Facilite de journalisation Fusion MPT
- CONFIG\_X86\_AMD\_PSTATE: Pilote P-State pour processeur AMD
- CONFIG\_LRU\_GEN: Multi-Gen LRU
- CONFIG\_SERIAL\_8250\_NR\_UARTS=32: Nombre maximum de ports série 8250/16550
- CONFIG\_SERIAL\_8250\_RUNTIME\_UARTS=4: Nombre de ports série 8250/16550 à enregistrer au moment de l'exécution
- CONFIG\_FANOTIFY: Notification d'accès à l'échelle du système de fichiers

## Mises à jour de la distribution de base

- aaa\_glibc-solibs: version 2.37
- adwaita-icon-theme : version 43
- at-spi2-core : version 2.46.0
- bash : version 5.2.015
- bash\_completion: version 2.11
- bind : version 9.18.12
- btrfs-progs : version 6.2.1
- ca-certificates : version 20221205
- cryptsetup : version 2.6.1
- curl : version 7.88.1
- dbus : version 1.14.6
- diffutils : version 3.9
- dnsmasq : version 2.89
- docker : version 23.0.6
- e2fsprogs : version 1.47.0
- encodings : version 1.0.7
- file : version 5.44
- firefox : version 111.0 (AppImage)
- freetype : version 2.13.0
- fuse3 : version 3.12.0
- gawk : version 5.2.1
- git : version 2.39.2
- glib2 : version 2.74.6
- glibc : version 2.37
- glibc-zoneinfo : version 2022g
- gnutls : version 3.7.9
- gptfdisk : version 1.0.9
- gtk+3 : version 3.24.37
- harfbuzz : version 7.1.0
- htop : version 3.2.2
- iproute2 : version 6.2.0
- iptables : version 1.8.9
- iputils : version 20221126
- kernel-firmware: 20230531\_fc90c59
- less : version 612
- libICE : version 1.1.1
- libSM : version 1.2.4
- libX11 : version 1.8.4
- libXau : version 1.0.11
- libXcomposite : version 0.4.6
- libXdamage : version 1.1.6
- libXdmcp : version 1.1.4
- libXpm : version 3.5.15
- libXrandr : version 1.5.3
- libXres : version 1.2.2
- libXxf86dga : version 1.1.6
- libarchive : version 3.6.2
- libdrm : version 2.4.115
- libfontenc : version 1.1.7
- libglvnd : version 1.6.0
- libjpeg-turbo : version 2.1.5.1
- libpcap : version 1.10.3
- libpng : version 1.6.39
- libpsl : version 0.21.2
- liburcu : version 0.14.0
- libwebp : version 1.3.0
- libxkbcommon : version 1.5.0
- libxkbfile : version 1.1.2
- libxshmfence : version 1.3.2
- lmdb : version 0.9.30
- logrotate : version 3.21.0
- lsof : version 4.98.0
- lz4 : version 1.9.4
- lzlib : version 1.13
- mc : version 4.8.29
- mcelog : version 191
- mpfr : version 4.2.0
- nano : version 7.2
- ncurses : version 6.4
- nginx : version 1.23.3
- nghttp2 : version 1.52.0
- openssh : version 9.2p1
- openssl : version 1.1.1t
- openssl-solibs : version 1.1.1t
- openzfs : version 2.1.12
- pango : version 1.50.14
- pciutils : version 3.9.0
- pcre2 : version 10.42
- php : version 8.2.4
- php-libvirt : version 0.5.7
- php-markdown : version 2.0.0
- samba : version 4.17.7
- sqlite : version 3.41.0
- sudo : version 1.9.13p2
- sysstat : version 12.7.2
- tdb : version 1.4.8
- tevent : version 0.14.1
- traceroute : version 2.1.2
- transset : version 1.0.3
- tree : version 2.1.0
- usbutils : version 015
- xcb-util : version 0.4.1
- xdriinfo : version 1.0.7
- xf86-video-vesa : version 2.6.0
- xfsprogs : version 6.1.1
- xhost : version 1.0.9
- xinit : version 1.4.2
- xkbcomp : version 1.4.6
- xkeyboard-config : version 2.38
- xorg-server : version 21.1.7
- xprop : version 1.2.6
- xrandr : version 1.5.2
- xset : version 1.2.5
- xterm : version 379
- xz : version 5.4.1
- zstd : version 1.5.4

## Correctifs

Avec le plugin Unraid Patch installé, visitez _**Outils → Unraid Patch**_ pour obtenir les correctifs / corrections à chaud suivants :

- Un sous-ensemble de mises à jour de sécurité, voir [ce blog post](https://unraid.net/blog/cvd) pour les détails. Nous recommandons de mettre à niveau vers la dernière version stable pour des mises à jour de sécurité supplémentaires.
