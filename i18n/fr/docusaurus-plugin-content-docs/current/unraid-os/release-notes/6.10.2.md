## Version 6.10.2 2022-05-27

### Corruption de données possible avec le pilote tg3 lorsque Intel VT-d est activé

La combinaison du noyau Linux 5.15, du pilote tg3 et de l'activation de l'Intel VT-d semble causer des corruptions de données. Cela a été vérifié sur plusieurs plateformes incluant une carte réseau Ethernet gigabit Broadcom NetXtreme (note : il peut y en avoir d'autres). Cette version comprend la solution de contournement suivante :

Très tôt dans le démarrage du serveur (rc.S), si Intel VT-d est détecté comme activé, le script créera inconditionnellement le fichier :

`/etc/modprobe.d/tg3.conf`

avec le contenu suivant :

`liste noire tg3`

Ainsi, par défaut, si VT-d est activé, ce qui veut dire qu'il n'a pas été désactivé ni dans le BIOS ni via le noyau "intel\*iommu=off", nous allons mettre le pilote tg3 sur liste noire sur toutes les plateformes. Que faire si quelqu'un possède une plateforme où tg3 ne pose pas de problème avec VT-d activé ? Dans ce cas, ils doivent créer un fichier vide sur leur dispositif flash :

`config/modprobe.d/tg3.conf`

Lorsque la séquence de démarrage continue, elle arrivera au point où elle exécute :

`install -p -m 0644 /boot/config/modprobe.d/* /etc/modprobe.d`

Un fichier tg3.conf _vierge_ stocké sur le flash lève alors efficacement la mise sur liste noire.

Il y aura des utilisateurs qui perdront la connectivité réseau parce que leur carte réseau est sur liste noire. Si vous utilisez une plateforme problématique, vous devriez entrer dans votre BIOS et désactiver VT-d. Si c'est une plateforme sans problème, vous devrez créer le fichier tg3.conf vide dans votre répertoire config/modprobe.d de la clef USB.

Cela peut prendre du temps pour identifier et intégrer une correction appropriée à ce problème, à ce moment-là nous retirerons le code qui met automatiquement en liste noire.

#### Comment désactiver l'Intel VT-d sur un HP MicroServer Gen 8 avec un E3-1265LV2

Redémarrer le serveur, puis :

- Pendant le démarrage, appuyez sur F9 pour entrer dans le BIOS.
- Une fois le BIOS chargé, entrez dans le menu Options système → Options processeur → Intel(R) VT-d
- Réglez-le sur désactivé
- Appuyez sur Échap pour revenir au menu principal
- Appuyez sur F10 pour quitter le BIOS et sauvegarder

Le serveur devrait maintenant démarrer à nouveau normalement. Chapeau bas au membre de la communauté Oceanic pour les
instructions.

### Modifications liées à la sécurité

- Le navigateur Firefox a été mis à jour vers la version 100.0.2 pour
  adresser une importante faille de sécurité. Si vous utilisez Firefox, nous
  vous recommandons également de faire la mise à jour sur toutes les plateformes.
- Nous avons corrigé un problème où la connexion WebGUI pouvait accepter un mot de passe d’un utilisateur autre que 'root', si le nom d'utilisateur incluait la chaîne 'root'.
- Le noyau Linux a été mis à jour vers la version 5.15.43 pour résoudre une vulnérabilité de « contournement de sécurité ».

### Autres changements

- Sur la page d'accès à la gestion, pour le paramètre "Utiliser SSL/TLS", nous avons remplacé le mot "Automatique" par "Strict" dans le menu déroulant. Cela décrit mieux l'action de ce paramètre.
- Le gestionnaire Docker utilise maintenant l'étiquette Docker pour les icônes comme solution de repli.
- Le gestionnaire de VM donne maintenant l'option d'utiliser des réseaux libvirt en addition aux ponts sans avoir à éditer le XML des VM.
- Amélioration de la gestion des certificats SSL personnalisés.
- \[6.10.1] Correction de régression : support de démarrage USB flash depuis autre que la partition 1
- autres corrections de bugs diverses

## Journal des changements par rapport à Unraid OS 6.10.1

#### Distro de base

- firefox AppImage: version: 100.0.r20220519220738 (CVE-2022-1802 CVE-2022-1529)

#### Noyau Linux

- version 5.15.43-Unraid (CVE-2022-21499)

#### Gestion

- nginx : éviter d’ajouter le numéro de port par défaut aux URLs de redirection
- nginx : fichier cert auto-signé : accepter le nom commun et tous les noms alternatifs
- démarrage : corriger plusieurs interfaces réseau qui se voyaient assigner la même adresse MAC
- démarrage : mise en liste noire par défaut de tg3 si Intel VT-d est activé
- WebGUI: Accès à la gestion : Utilisation du paramètre SSL/TLS : changer le mot 'Auto' en 'Strict'.
- WebGUI : Fixed : smGlue non inclus lors de la sélection d'un contrôleur
- WebGUI : Fixed : autoriser les noms de partage avec un esperluette intégrée
- WebGUI : ajout de support de terminal LXC (pour le Plugin LXC)
- WebGUI : Docker Web UI pour utiliser l'étiquette Docker pour les icônes comme solution de repli
- WebGUI : Gestionnaire de VM : support des réseaux libvirt (rendre les réseaux libvirt accessibles via gui)
- WebGUI : correction du problème où le login 'root' fonctionne avec le mot de passe d'un autre nom d'utilisateur qui inclut la chaîne 'root'.
- WebGUI : Mise à jour de la page de l'OS : correction orthographique : warninging → warning
- WebGUI : Révision du texte d'aide : corrections mineures

## Correctifs

Avec le plugin Unraid Patch installé, visitez _**Outils → Unraid Patch**_ pour obtenir les correctifs / corrections à chaud suivants :

- Un sous-ensemble de mises à jour de sécurité, voir [ce blog post](https://unraid.net/blog/cvd) pour les détails. Nous recommandons de mettre à niveau vers la dernière version stable pour des mises à jour de sécurité supplémentaires.
