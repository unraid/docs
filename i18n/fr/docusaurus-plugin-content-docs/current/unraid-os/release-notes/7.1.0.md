# Version 7.1.0 2025-05-05

Cette version ajoute la mise en réseau sans fil, la possibilité d'importer TrueNAS et d'autres pools étrangers, plusieurs améliorations pour les machines virtuelles, les premiers pas vers un webGUI réactif, et plus encore.

## Mise à niveau

### Problèmes connus

Cette version présente un problème potentiel de perte de données où la fonctionnalité récente "mover empty disk" ne gère pas correctement les niveaux de division sur les partages. Corrigé dans la version 7.1.2.

#### Plugins

Veuillez mettre à jour tous les plugins, notamment Unraid Connect et le pilote Nvidia.

Pour d'autres problèmes connus, voir les [notes de version 7.0.0](7.0.0.md#known-issues).

### Rétrogradation

Nous apportons des améliorations à la manière dont nous distribuons les correctifs entre les versions, donc le plugin Patch autonome sera désinstallé à partir de cette version. Si vous revenez à une version antérieure, nous vous recommandons de le réinstaller. Plus de détails à venir.

Si vous revenez en arrière à une version antérieure à 7.0.0, veuillez également voir les [notes de version 7.0.0](7.0.0.md#rolling-back).

## Changements par rapport à [7.0.1](7.0.1.md)

### Stockage

- Importer des pools ZFS étrangers tels que TrueNAS, Proxmox, Ubuntu, QNAP.
- Importer la plus grande partition sur le disque plutôt que la première.
- Supprimer l'appareil d'un raid1 btrfs ou d'un miroir zfs à un seul vdev réduira maintenant le nombre d'emplacements dans le pool.

#### Autres modifications de stockage

- Correction : Les disques désactivés n'étaient pas affichés sur le tableau de bord.
- Correction : Au départ, seul le premier appareil du pool s'arrêtait après l'ajout d'un réglage d'arrêt personnalisé.
- Correction : Le démarrage de l'array était permis même avec 2 appareils de parité et aucun appareil de données.
- Correction : La notification de vérification de parité affichait souvent la vérification précédente et non l'actuelle.
- Correctif : Résolution de certains cas de *Mauvais état du pool. Trop de dispositifs erronés ou manquants* lors de la mise à niveau.
- Correction : Remplacement d'un appareil zfs par un vdev plus petit impossible.
- mover :
  - Correction : Résolu le problème avec les anciens fichiers share.cfg qui empêchait le mover de fonctionner.
  - Correction : Le mover échouerait à recréer le lien dur si le répertoire parent n'existait pas déjà.
  - Correction : Le mover se bloquait sur les pipes nommés.
  - Correction : [Utiliser le mover pour vider un disque de l'array](7.0.0.md#using-mover-to-empty-an-array-disk) ne déplace maintenant que les dossiers de premier niveau qui ont un fichier share.cfg correspondant, a également corrigé un bug empêchant la liste des fichiers *non déplacés* d'être affichée.

### Réseau

#### Réseau sans fil

Unraid prend désormais en charge le WiFi ! Une connexion filaire est généralement préférable, mais si cela n'est pas possible pour votre situation, vous pouvez maintenant configurer le WiFi.

Pour la configuration initiale, vous aurez besoin soit d'un clavier/écran local (démarrer en mode GUI) soit d'une connexion filaire. À l'avenir, l'outil USB Creator pourra configurer le réseau sans fil avant le premier démarrage.

- Accédez au webGUI et allez dans ***Réglages → Paramètres Réseau → Sans fil wlan0***
  - Tout d'abord, activez le WiFi
  - La **Région Réglementaire** peut généralement être laissée en **Automatique**, mais définissez-la sur votre emplacement si le réseau auquel vous souhaitez vous connecter n'est pas disponible
  - Trouvez votre réseau préféré et cliquez sur l'icône **Se connecter à un réseau WiFi**
  - Renseignez votre mot de passe WiFi et autres réglages, puis appuyez sur **Rejoindre ce réseau**
  - Remarque : si votre objectif est d'utiliser des conteneurs Docker via WiFi, débranchez toute connexion filaire avant de démarrer Docker

Détails supplémentaires

- WPA2/WPA3 et WPA2/WPA3 Enterprise sont pris en charge, si à la fois WPA2 et WPA3 sont disponibles alors WPA3 est utilisé.
- Il n'est pas recommandé d'utiliser à la fois le filaire et le sans fil à long terme, il vaut mieux opter pour l'un ou l'autre. Mais si les deux connexions utilisent DHCP et que vous (dé)branchez un câble réseau alors que le sans fil est configuré, le système (à l'exception de Docker) devrait s'ajuster dans un délai de 45 à 60 secondes.
- Prise en charge des chipsets sans fil : Nous prévoyons un succès avec les adaptateurs WiFi modernes, mais les adaptateurs plus anciens peuvent ne pas fonctionner. Si votre adaptateur WiFi n'est pas détecté, veuillez créer un nouveau fil de discussion sur le forum et fournir vos diagnostics pour qu'il puisse être étudié.
- Si vous souhaitez utiliser un adaptateur WiFi USB, consultez cette liste d'[adaptateurs WiFi USB qui sont pris en charge avec les pilotes intégrés au noyau Linux](https://github.com/morrownr/USB-WiFi/blob/main/home/USB_WiFi_Adapters_that_are_supported_with_Linux_in-kernel_drivers.md)
- Avancé : Les nouveaux fichiers de microprogramme placés dans `/boot/config/firmware/` seront copiés dans `/lib/firmware/` avant le chargement des modules de pilotes (les fichiers existants ne seront pas écrasés).

Limitations : il existe des limitations réseau lors de l'utilisation du sans fil, car un wlan ne peut avoir qu'une seule adresse MAC.

- Un seul NIC sans fil est pris en charge, wlan0
- wlan0 n'est pas capable de participer à un bond
- Conteneurs Docker
  - Sur ***Réglages → Docker***, notez que lorsque le sans fil est activé, le système ignorera le réglage de **Type de réseau Docker personnalisé** et utilisera toujours **ipvlan** (macvlan n'est pas possible car le sans fil ne prend pas en charge plusieurs adresses MAC sur une seule interface)
  - ***Réglages → Docker***, **Accès de l'hôte aux réseaux personnalisés** doit être désactivé
  - Le **Type de réseau** d'un conteneur Docker ne peut pas utiliser br0/bond0/eth0
  - Docker a une limitation qui l'empêche de participer à deux réseaux partageant le même sous-réseau. Si vous changez entre filaire et sans fil, vous devrez redémarrer Docker et reconfigurer tous les conteneurs existants pour utiliser la nouvelle interface. Nous recommandons de configurer soit le filaire soit le sans fil et de ne pas changer.
- VMs
  - Nous vous recommandons de définir la **Source Réseau** de votre VM sur **virbr0**, il n'y a pas de limite au nombre de VM que vous pouvez exécuter dans ce mode. Les VM auront un accès réseau complet, mais l'inconvénient est qu'elles ne seront pas accessibles depuis le réseau. Vous pouvez toujours y accéder via VNC vers l'hôte.
  - Avec quelques configurations manuelles, une seule VM peut être rendue accessible sur le réseau :
    - Configurez la VM avec une adresse IP statique
    - Configurez la même adresse IP sur l'interface ipvtap, tapez : `ip addr add ADRESSE-IP dev shim-wlan0`

#### Autres modifications réseau

- Dans ***Paramètres → Paramètres Réseau***, vous pouvez maintenant ajuster les réglages DNS du serveur sans arrêter d'autres services d'abord. Voir le haut de la section **eth0**.
- Quand vous configurez une interface réseau, chaque interface a un bouton **Info** montrant les détails de la connexion actuelle.
- Lors de la configuration d'une interface réseau, le champ **MTU souhaité** est désactivé jusqu'à ce que vous cliquiez sur **Activer les trames jumbo**. Passez la souris sur l'icône pour un avertissement concernant la modification du MTU, dans la plupart des cas il doit être laissé à la valeur par défaut.
- Lors de la configuration de plusieurs interfaces réseau, par défaut les interfaces supplémentaires verront leur passerelle désactivée, ce qui est un paramètre par défaut sûr qui fonctionne sur la plupart des réseaux où une seule passerelle est requise. Si une passerelle supplémentaire est activée, elle se verra attribuer un métrique supérieur aux passerelles existantes afin d'éviter tout conflit. Vous pouvez ajuster cela si nécessaire.
- Les anciennes interfaces réseau sont automatiquement supprimées des fichiers de configuration lorsque vous enregistrez les modifications dans ***Réglages → Paramètres Réseau***.
- Corriger divers problèmes avec le DHCP.

### Gestionnaire de VM

#### Pilote GPU Nouveau

Le pilote Nouveau pour les GPU Nvidia est maintenant inclus, désactivé par défaut car nous supposons que la plupart des utilisateurs préféreront le pilote Nvidia. Pour l'activer, désinstallez le plugin du pilote Nvidia et exécutez `touch /boot/config/modprobe.d/nouveau.conf` puis redémarrez.

#### VirGL

Vous pouvez désormais partager des GPU Intel et AMD entre plusieurs VM Linux en même temps en utilisant VirGL, le moteur de rendu 3D OpenGL virtuel. Utilisé de cette manière, le GPU fournira des graphismes accélérés mais n'affichera pas sur le moniteur. Notez que cela ne fonctionne pas encore avec les VM Windows ou le plugin standard Nvidia (cela fonctionne cependant avec les GPU Nvidia utilisant le pilote Nouveau).

Pour utiliser le GPU virtuel dans une VM Linux, modifiez le modèle de VM et réglez la **Carte Graphique** sur **Virtuelle**. Ensuite, réglez le **Pilote Vidéo de la Console VM** sur **Virtio(3d)** et sélectionnez le **GPU de Rendu** approprié dans la liste des GPU disponibles (notez que les GPU liés à VFIO-PCI ou passés à d'autres VM ne peuvent pas être choisis ici, et les GPU Nvidia sont disponibles uniquement si le pilote Nouveau est activé).

#### QXL GPUs virtuels

Pour utiliser cette fonctionnalité dans une VM, éditez le modèle de VM et définissez la **Carte Graphique** sur **Virtuel** et le **Pilote Vidéo de la Console VM** sur **QXL (Meilleur)**, vous pouvez alors choisir combien d'écrans il prend en charge et quelle quantité de mémoire lui allouer.

#### Le choix des CPU est optionnel

Le choix des CPU est désormais optionnel, si aucun cœur n'est attribué à une VM, le système d'exploitation choisit quels cœurs utiliser.

Depuis ***Réglages → Paramètres CPU*** ou lors de l'édition d'une VM, appuyez sur **Deselect All** pour désélectionner tous les cœurs pour cette VM et définissez le nombre de vCPUs à 1, augmentez selon le besoin.

### Modèles VM utilisateur

Pour créer un modèle utilisateur :

- Éditez la VM, choisissez **Créer Modifier le Modèle** et attribuez-lui un nom. Il sera désormais enregistré en tant que **Modèle Utilisateur**, disponible sur l'écran **Ajouter une VM**.

Pour utiliser un modèle utilisateur :

- Dans la liste des VM, appuyez sur **Ajouter VM**, puis choisissez le modèle dans la zone **Modèles Utilisateur**.

Importer/Exporter

- Depuis l'écran **Ajouter VM**, survolez un modèle utilisateur et cliquez sur la flèche pour exporter le modèle vers un emplacement sur le serveur ou le télécharger.
- Sur un autre système Unraid appuyez sur **Importer depuis le fichier** ou **Télécharger** pour utiliser le modèle.

#### Autres modifications de VM

- Lorsque le GPU **Principal** est assigné en passthrough pour une VM, avertissez qu'il peut ne pas fonctionner sans charger un vBIOS compatible.
- Correction : Retirer le message **Chemin n'existe pas** déroutant lors de l'installation du service de VM
- Fonct : Les VMs d'Unraid peuvent désormais démarrer en mode GUI, lors de l'utilisation du pilote vidéo QXL
- Correction : Impossible de changer l'icône de VM lors de l'utilisation de la vue XML

### WebGUI

#### Changements CSS

Dans le cadre de l'amélioration de la réactivité du webGUI, nous avons retravaillé le CSS. Dans l'ensemble, cela ne devrait pas être perceptible à part quelques ajustements mineurs de couleur. Nous prévoyons que la plupart des plugins s'en accommodera, bien que les auteurs de plugins puissent vouloir consulter [cette documentation](https://github.com/unraid/webgui/blob/master/emhttp/plugins/dynamix/styles/themes/README.md). La réactivité continuera d'être améliorée dans les futures versions.

Si vous remarquez des problèmes d'alignement ou de couleur dans un thème officiel, veuillez nous en informer.

#### problèmes de mémoire partagée nchan

Nous avons apporté plusieurs changements qui devraient prévenir ce problème, et si nous détectons qu'il se produit, nous redémarrons nginx pour tenter de récupérer automatiquement.

Si votre page principale ne se remplit jamais, ou si vous voyez "nchan : Mémoire partagée insuffisante" dans vos journaux, veuillez créer un nouveau fil de discussion sur le forum et fournir vos diagnostics. Vous pouvez éventuellement naviguer vers ***Paramètres → Paramètres d'Affichage*** et désactiver **Autoriser les mises à jour en temps réel sur les navigateurs inactifs** ; cela empêche votre navigateur de demander certaines mises à jour une fois qu'il perd le focus. Dans cet état, vous verrez une bannière indiquant **Mises à Jour en Temps Réel Suspendues**, il suffit de cliquer sur le webGUI pour le ramener au premier plan et réactiver les mises à jour en temps réel. Certaines pages rechargeront automatiquement pour s'assurer qu'elles affichent les dernières informations.

#### Autres modifications du WebGUI

- Correction : les outils de blocage de publicités pouvaient empêcher le tableau de bord de se charger
- Correction : Dans certaines circonstances, l'utilisation de la mémoire du navigateur sur le tableau de bord pouvait croître de façon exponentielle
- Correction : Empêcher un fichier de configuration corrompu de casser le tableau de bord

## Divers

### Autres changements

- Sur ***Réglages → Date et Heure*** vous pouvez maintenant synchroniser votre horloge avec un serveur **PTP** (nous prévoyons que la plupart des utilisateurs continueront à utiliser **NTP**)
- Mise à niveau vers jQuery 3.7.1 et jQuery UI 1.14.1
- Correction : Visiter boot.php n'arrêtera plus le serveur
- Correction : Sur l'onglet Docker, le menu déroulant pour le dernier conteneur était tronqué dans certaines situations
- Correction : Sur ***Réglages → Docker***, la suppression d'un **répertoire Docker** stocké sur un volume ZFS fonctionne maintenant correctement
- Correction : Au démarrage, la configuration SSH personnalisée est à nouveau copiée de `/boot/config/ssh/` vers `/etc/ssh/`
- Correction : Le Gestionnaire de Fichiers peut copier des fichiers d'un partage utilisateur vers un montage de disque non assigné
- Correction : Retirer le message déroutant **Chemin n'existe pas** lors de l'installation du service Docker
- Correction : mise à jour de `rc.messagebus` pour corriger le traitement de `/etc/machine-id`
- Diagnostics
  - Correction : Amélioration de l'anonymisation des adresses IPv6 dans les diagnostics
  - Correction : Amélioration de l'anonymisation des noms d'utilisateur dans certains fichiers de configuration dans les diagnostics
  - Correction : les diagnostics pouvaient échouer en raison de chaînes multi-octets dans le syslog
  - Fonct : les diagnostics enregistrent maintenant les erreurs dans logs/diagnostics.error.log

### Noyau Linux

- version 6.12.24-Unraid
  - Appliquer : \[PATCH] [Revert "PCI : Éviter la réinitialisation lorsque désactivé via sysfs"](https://lore.kernel.org/lkml/20250414211828.3530741-1-alex.williamson@redhat.com/)
  - CONFIG\_NR\_CPUS : augmenté de 256 à 512
  - CONFIG\_TEHUTI\_TN40 : Adaptateurs Ethernet 10G Tehuti Networks TN40xx
  - CONFIG\_DRM\_XE : Graphiques Intel Xe
  - CONFIG\_UDMABUF : pilote divers dmabuf espace utilisateur
  - CONFIG\_DRM\_NOUVEAU : cartes Nouveau (NVIDIA)
  - CONFIG\_DRM\_QXL : QXL GPU virtuel
  - CONFIG\_EXFAT\_FS : prise en charge du système de fichiers exFAT
  - CONFIG\_PSI : suivi des informations de blocage de pression
  - CONFIG\_PSI\_DEFAULT\_DISABLED : besoin du paramètre de démarrage pour activer le suivi des informations de blocage de pression, c'est-à-dire `psi=1`
  - CONFIG\_ENCLOSURE\_SERVICES : Services d'enceinte
  - CONFIG\_SCSI\_ENCLOSURE : Support de l'enceinte SCSI
  - CONFIG\_DRM\_ACCEL : Cadre d'accélération de calcul
  - CONFIG\_DRM\_ACCEL\_HABANALABS : Accélérateurs AI HabanaLabs
  - CONFIG\_DRM\_ACCEL\_IVPU : NPU (Unité de Traitement Neuronal) Intel
  - CONFIG\_DRM\_ACCEL\_QAIC : Accélérateurs AI Cloud Qualcomm
  - zfs : version 2.3.1

- Support sans fil
  - Atheros/Qualcomm
  - Broadcom
  - Intel
  - Marvell
  - Microtek
  - Realtek

### Mises à jour de la distribution de base

- aaa\_glibc-solibs : version 2.41
- adwaita-icon-theme : version 48.0
- at-spi2-core : version 2.56.1
- bind : version 9.20.8
- btrfs-progs : version 6.14
- ca-certificates : version 20250425
- cairo : version 1.18.4
- cifs-utils : version 7.3
- coreutils : version 9.7
- dbus : version 1.16.2
- dbus-glib : version 0.114
- dhcpcd : version 9.5.2
- diffutils : version 3.12
- dnsmasq : version 2.91
- docker : version 27.5.1
- e2fsprogs : version 1.47.2
- elogind : version 255.17
- elfutils : version 0.193
- ethtool : version 6.14
- firefox : version 128.10 (AppImage)
- floppy : version 5.6
- fontconfig : version 2.16.2
- gdbm : version 1.25
- git : version 2.49.0
- glib2 : version 2.84.1
- glibc : version 2.41
- glibc-zoneinfo : version 2025b
- grep : version 3.12
- gtk+3 : version 3.24.49
- gzip : version 1.14
- harfbuzz : version 11.1.0
- htop : version 3.4.1
- icu4c : version 77.1
- inih : version 60
- intel-microcode : version 20250211
- iperf3 : version 3.18
- iproute2 : version 6.14.0
- iw : version 6.9
- jansson : version 2.14.1
- firmware du noyau : version 20250425\_cf6ea3d
- kmod : version 34.2
- less : version 674
- libSM : version 1.2.6
- libX11 : version 1.8.12
- libarchive : version 3.7.8
- libcgroup : version 3.2.0
- libedit : version 20250104\_3.1
- libevdev : version 1.13.4
- libffi : version 3.4.8
- libidn : version 1.43
- libnftnl : version 1.2.9
- libnvme : version 1.13
- libgpg-error : version 1.55
- libpng : version 1.6.47
- libseccomp : version 2.6.0
- liburing : version 2.9
- libusb : version 1.0.28
- libuv : version 1.51.0
- libvirt : version 11.2.0
- libXft : version 2.3.9
- libxkbcommon : version 1.9.0
- libxml2 : version 2.13.8
- libxslt : version 1.1.43
- libzip : version 1.11.3
- linuxptp : version 4.4
- lvm2 : version 2.03.31
- lzip : version 1.25
- lzlib : version 1.15
- mcelog : version 204
- mesa : version 25.0.4
- mpfr : version 4.2.2
- nano: version 8.4
- ncurses : version 6.5\_20250419
- nettle : version 3.10.1
- nghttp2 : version 1.65.0
- nghttp3 : version 1.9.0
- noto-fonts-ttf : version 2025.03.01
- nvme-cli : version 2.13
- oniguruma : version 6.9.10
- openssh : version 10.0p1
- openssl : version 3.5.0
- ovmf : version stable202502
- pam: version 1.7.0
- pango : version 1.56.3
- parted : version 3.6
- patch : version 2.8
- pcre2 : version 10.45
- perl : version 5.40.2
- php : version 8.3.19
- procps-ng : version 4.0.5
- qemu : version 9.2.3
- rsync : version 3.4.1
- samba : version 4.21.3
- shadow : version 4.17.4
- spice : version 0.15.2
- spirv-llvm-translator : version 20.1.0
- sqlite : version 3.49.1
- sysstat : version 12.7.7
- sysvinit : version 3.14
- talloc : version 2.4.3
- tdb : version 1.4.13
- tevent : version 0.16.2
- tree : version 2.2.1
- userspace-rcu : version 0.15.2
- utempter : version 1.2.3
- util-linux: version 2.41
- virglrenderer : version 1.1.1
- virtiofsd : version 1.13.1
- which : version 2.23
- wireless-regdb : version 2025.02.20
- wpa\_supplicant : version 2.11
- xauth : version 1.1.4
- xf86-input-synaptics : version 1.10.0
- xfsprogs : version 6.14.0
- xhost : version 1.0.10
- xinit : version 1.4.4
- xkeyboard-config : version 2.44
- xorg-server : version 21.1.16
- xterm : version 398
- xtrans : version 1.6.0
- xz: version 5.8.1
- zstd : version 1.5.7

## Correctifs

Aucun correctif n'est actuellement disponible pour cette version.
