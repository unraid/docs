---
sidebar_position: 5
sidebar_label: Dépannage de Docker
---

# Dépannage de Docker

:::info

This page offers troubleshooting guidance specifically for Docker containers on Unraid, managed by the Unraid team. For advanced troubleshooting, in-depth technical details, or topics beyond the Unraid-specific implementation, please refer to the [official Docker documentation](https://docs.docker.com/).

:::

Docker makes it easy to run a variety of applications on your Unraid server, but issues can arise, such as containers not starting, corrupted Docker image files, or network problems. This page addresses some common issues related to Docker on Unraid and offers best practices for effectively resolving them.

---

## Recréer le fichier image Docker

A corrupted Docker image file (`docker.img`) is a common issue, often caused by the %%cache pool|cache-pool%% running out of space or an unclean shutdown. Luckily, a well-configured container stores all variable data outside the image file (usually in the `appdata` share), so you can safely recreate the image without losing your application settings or data.

Pour recréer le fichier image Docker :

1. Allez dans ***Settings → Docker*** dans le %%WebGUI|web-gui%%.
2. Réglez **Activer Docker** sur **Non** et cliquez sur **Appliquer** pour arrêter le service Docker.
3. Select the option to delete the Docker vdisk file, then click **Apply**. You can also manually delete the file if needed.
4. Confirm the location and filename for the new Docker vdisk file. This setting includes both the folder path and the filename.
5. Set the desired size for the new image file. The default size is typically sufficient for most users.
6. Set **Enable Docker** to **Yes** and click **Apply**. Unraid will create and format a new `docker.img` file using %%BTRFS|btrfs%%.

Vous êtes maintenant prêt à réinstaller vos conteneurs en utilisant leurs paramètres sauvegardés.

---

## Réinstaller des applications Docker

Unraid automatically saves a template for each installed container on your flash drive. These templates store your configuration, making it easy to restore containers after recreating the Docker image file.

Pour réinstaller vos conteneurs :

1. Allez à l'onglet **Apps** dans le %%WebGUI|web-gui%%.
2. Ouvrez la section **Applications Précédentes**.
3. Sélectionnez les conteneurs que vous souhaitez réinstaller.
4. Proceed with the installation. Unraid will re-download each container and apply your previous settings automatically.

:::important

Ce processus restaure vos conteneurs à leur état précédent, à condition que toutes les données variables soient mappées en dehors du fichier image Docker (par exemple, dans le partage `appdata`).

:::

:::tip

Si un conteneur ne démarre pas après la réinstallation, vérifiez ses journaux dans le menu contextuel de l'onglet **Docker** pour des messages d'erreur et des indices de dépannage.

:::

:::note

Verify that all mapped host paths exist and have the correct permissions after restoring your containers. Incorrect mappings or permissions are a common cause of startup issues.

:::

---

## Restaurer les réseaux personnalisés de Docker

Custom Docker networks do not persist if the Docker image file is deleted. Before removing the image, document your custom network names by opening a terminal and running:

```
docker network ls
```

Notez les noms de tous les réseaux que vous avez créés (à l'exclusion des réseaux par défaut `bridge`, `host`, et `none`).

Pour restaurer les réseaux personnalisés :

1. Après avoir recréé le fichier image Docker, recréez chaque réseau personnalisé en utilisant :

   ```
   docker network create <network-name>
   ```

   Remplacez `<network-name>` par le nom exact que vous avez noté plus tôt.

2. Mettez à jour vos conteneurs pour utiliser les réseaux restaurés si nécessaire.

:::note

Vous pouvez activer l'accès hôte aux réseaux personnalisés sous ***Settings → Docker*** en réglant **Accès hôte aux réseaux personnalisés** sur **Activé** si votre configuration l'exige.

:::

:::tip

Si les conteneurs ne peuvent pas communiquer comme prévu après la restauration, inspectez vos paramètres de réseau Docker pour des conflits ou des problèmes de connectivité.

:::
