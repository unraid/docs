---
sidebar_position: 1
sidebar_label: Stockage ZFS
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Stockage ZFS

:::important[Special merci]

%%ZFS|zfs%% apporte une intégrité des données avancée, des configurations de stockage flexibles et de hautes performances à votre système Unraid. Ce guide explique les concepts fondamentaux de %%ZFS|zfs%% et vous guide dans la gestion des pools %%ZFS|zfs%% directement à partir du %%WebGUI|web-gui%% d'Unraid. Que vous configuriez un nouveau stockage %%ZFS|zfs%% ou intégriez un pool existant, vous trouverez les étapes et le contexte nécessaires pour commencer en toute confiance.

:::

%%ZFS|zfs%% apporte une intégrité des données avancée, des configurations de stockage flexibles et de hautes performances à votre système Unraid. Ce guide explique les concepts fondamentaux de %%ZFS|zfs%% et vous guide dans la gestion des pools %%ZFS|zfs%% directement à partir du %%WebGUI|web-gui%% d'Unraid. Que vous configuriez un nouveau stockage %%ZFS|zfs%% ou intégriez un pool existant, vous trouverez les étapes et le contexte nécessaires pour commencer en toute confiance.

---

## Pourquoi ZFS ?

%%ZFS|zfs%% est un système de fichiers moderne et un gestionnaire de volumes conçu pour protéger vos données, prévenir la corruption et simplifier la gestion du stockage.

Avec %%ZFS|zfs%%, vous bénéficiez de :

- Vérifications automatiques de l'intégrité des données et auto-réparation
- Support %%RAID|raid%% intégré (miroirs, RAIDZ)
- %%Snapshots|snapshot%% et clones pour faciliter les sauvegardes et les retours arrière
- Envoi/réception %%ZFS|zfs%% pour une réplication efficace
- Compression à la volée

Unraid supports %%ZFS|zfs%% for any storage pool. You can create a new %%ZFS|zfs%% pool, import one from another system, or use Unraid’s unique hybrid %%ZFS|zfs%% setup: add a %%ZFS|zfs%%-formatted disk directly to the Unraid %%array|array%% (not a pool) and combine %%ZFS|zfs%% features with Unraid’s %%parity|parity%% protection.

:::info\[Example]

Vous pouvez utiliser les %%snapshots|snapshot%% %%ZFS|zfs%% et la réplication sur un seul disque comme cible de sauvegarde, ou répliquer un pool rapide ZFS de SSD vers un disque %%ZFS|zfs%% dans l'%%array|array%% protégé par la %%parity|parity%% d'Unraid - profitant ainsi du meilleur des deux mondes.

:::

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs1.png)
</div>

:::note

L'approche hybride %%ZFS|zfs%%-in-array est utile pour des scénarios de sauvegarde ou de réplication spécifiques, mais elle ne remplace pas un pool %%ZFS|zfs%% complet. Les disques %%ZFS|zfs%% dans l'%%array|array%% sont gérés individuellement; vous ne bénéficiez pas de la performance combinée, de la redondance ou de l'auto-guérison d'un vrai pool multi-disques %%ZFS|zfs%%. Pour une fonctionnalité complète %%ZFS|zfs%%, utilisez toujours des pools %%ZFS|zfs%% dédiés.

:::

### Pools, vdevs et redondance

Un pool %%ZFS|zfs%% (appelé "zpool") est composé d'un ou de plusieurs vdevs (périphériques virtuels). Chaque vdev est un groupe de disques physiques avec son propre niveau de redondance. %%ZFS|zfs%% écrit des données à travers les vdevs, mais chaque vdev est responsable de sa tolérance aux pannes.

:::caution

La redondance est toujours par vdev. Si un vdev échoue, l'ensemble du pool échoue, même si d'autres vdevs sont sains. Planifiez vos vdevs avec soin!

:::

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs2.png)
</div>

---

## Créer un pool ZFS

Pour créer un pool %%ZFS|zfs%% à l'aide du %%WebGUI|web-gui%% :

1. Arrêtez le %%array|array%%.
2. Cliquez sur **Ajouter un pool**.

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs3.png)
</div>

3. Choisissez un nom pour votre pool (par exemple, `raptor`).
4. Définissez le nombre d'emplacements pour correspondre au nombre de disques que vous souhaitez dans votre ou vos vdev(s) de données principal(aux).

:::note

Ce nombre initial d'emplacements est uniquement pour les vdevs de données. Les vdevs de support (comme les disques de journal ou de cache) peuvent être ajoutés séparément après la création du pool.

:::

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs8.png)
</div>

5. Assignez les disques au pool (l'ordre des disques n'a pas d'importance).

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs5.png)
</div>

6. Cliquez sur le nom du pool (par exemple, `raptor`) pour ouvrir son écran de configuration.
7. Définissez le type de système de fichiers sur `zfs` ou `zfs-encrypted` (pour le cryptage LUKS).

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs6.png)
</div>

8. Choisissez votre profil d'allocation - cela détermine la redondance et les performances de votre pool.

:::tip

Avant de finaliser, consultez les sections sur les profils d'allocation et la topologie pour faire un choix éclairé.

:::

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs7.png)
</div>

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs9.png)
</div>

9. Activez la compression si désiré (recommandé pour la plupart des charges de travail).
10. Cliquez sur **Terminé**, puis démarrez l'%%array|array%%.

---

## Ajout d'un disque ZFS à l'array (configuration hybride)

Vous pouvez ajouter un disque %%ZFS|zfs%% autonome à votre %%array|array%% Unraid (pas un pool %%ZFS|zfs%%) pour combiner les fonctionnalités %%ZFS|zfs%% avec la protection %%parity|parity%% d'Unraid.

:::info[What [cette activation vous permettra]

- **Protection de parité :** Le disque ZFS est protégé par la %%parity|parity%% de l'%%array|array%% d'Unraid, garantissant que vos données sont sécurisées contre les défaillances d'un (ou plusieurs, selon vos %%parity drives|parity-drives%%) disques.

- **Intégrité des données:** %%ZFS|zfs%% fournit des contrôles d'intégrité au niveau des blocs (checksums). Bien qu'un seul disque ne puisse pas s'auto-réparer du rot bit, %%ZFS|zfs%% détectera la corruption et vous alertera, vous permettant de restaurer à partir d'une sauvegarde avant que des pertes de données silencieuses ne se produisent.

- **Fonctionnalités %%ZFS|zfs%% :** Vous pouvez utiliser les %%snapshots|snapshot%% %%ZFS|zfs%% et la réplication sur ce disque, ce qui le rend idéal pour des cibles de sauvegarde, des ensembles de données spécifiques ou des scénarios où vous souhaitez des fonctionnalités %%ZFS|zfs%% aux côtés du stockage traditionnel Unraid.

:::

Pour ajouter un disque %%ZFS|zfs%% à l'%%array|array%% :

1. Allez dans l'onglet **Main** du %%WebGUI|web-gui%%.
2. Arrêtez le %%array|array%%.
3. Cliquez sur un emplacement vide sous **Appareils de l'array**.
4. Sélectionnez le disque que vous souhaitez ajouter.

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs9.png)
</div>

5. Sous **Système de fichiers**, choisissez `zfs` ou `zfs-encrypted`.

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs10.png)
</div>

6. Cliquez sur **Appliquer**.
7. Démarrez l'%%array|array%% et laissez le disque être formaté si nécessaire.

---

## Choisir un profil d'allocation

Lorsque vous configurez un pool %%ZFS|zfs%%, votre profil d'allocation détermine comment vos données sont protégées, comment votre pool fonctionne et comment vous pouvez l'étendre. Voici une simple comparaison pour vous aider à décider quel profil correspond à vos besoins:

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs11.png)
</div>

| Profil | Redondance                    | Performance                                                                        | Extension                 | Efficacité de l'espace | Cas d'utilisation typique                                   | Nombre recommandé de disques par vdev    |
| ------ | ----------------------------- | ---------------------------------------------------------------------------------- | ------------------------- | ---------------------- | ----------------------------------------------------------- | ---------------------------------------- |
| Bande  | Aucune                        | Rapide, mais risqué                                                                | Ajouter plus de disques   | 100 %                  | Stockage temporaire/d'échange                               | N'importe quel nombre                    |
| Miroir | 1:1 (style %%RAID 1\|raid1%%) | Excellente pour les E/S aléatoires                                                 | Ajouter plus de miroirs   | 50%                    | Haute performance, extension facile                         | 2 disques (peut ajouter plus de miroirs) |
| RAIDZ1 | 1 disque par vdev             | Rapide pour les gros fichiers. Pas idéal pour les écritures petites ou aléatoires. | Ajouter de nouveaux vdevs | Élevée                 | Usage général, tolérance aux pannes de 1 disque             | 3-6 disques (max 8)                      |
| RAIDZ2 | 2 disques par vdev            | Comme Z1 mais écritures légèrement plus lentes (parité supplémentaire)             | Ajouter de nouveaux vdevs | Modérée                | Données importantes, tolérance aux pannes de 2 disques      | 6-12 disques (max 14)                    |
| RAIDZ3 | 3 disques par vdev            | Comme Z2, avec plus de surcharge d'écriture (pour une sécurité maximale)           | Ajouter de nouveaux vdevs | Inférieure             | Critique pour la mission, tolérance aux pannes de 3 disques | 10-16 disques (max 20)                   |

:::tip[Optimizing comptes de disques]

Les nombres de disques recommandés dans le tableau ci-dessus conviennent à la plupart des utilisateurs. Pour une performance encore meilleure, vous pouvez optimiser dans ces plages en choisissant des configurations où le nombre de disques de données (disques totaux moins les disques de parité) est une **puissance de 2** (ex : 2, 4, 8, 16). Cela aide à aligner correctement les bandes de données, empêchant le gaspillage d'espace et des E/S inégales.

**Exemples de configurations optimisées :**

- **RAIDZ1** : 3, 5 ou 9 disques (disques de données = 2, 4 ou 8)
- **RAIDZ2** : 4, 6 ou 10 disques (disques de données = 2, 4 ou 8)
- **RAIDZ3** : 5, 9 ou 17 disques (disques de données = 2, 6 ou 14)

Notez que ces optimisations sont facultatives - les recommandations ci-dessus devraient fonctionner pour la plupart des cas d'utilisation.

:::

:::important[How [à choisir]

- Utilisez **Miroir** si vous voulez la meilleure performance et une extension facile et flexible, et que vous êtes d'accord pour utiliser plus d'espace disque pour la redondance.
- Choisissez **RAIDZ1/2/3** si vous voulez maximiser l'espace utilisable et stocker de gros fichiers, mais gardez à l'esprit que l'extension est moins flexible et que la performance d'écriture aléatoire est plus faible.
- **Bande** n'est adaptée que pour les données non critiques, temporaires - si un disque tombe en panne, vous perdez tout.

:::

---

## Topologie et extension

La façon dont vous regroupez les disques dans des vdevs affecte à la fois la sécurité des données et la vitesse.

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs12.png)
</div>

- Si vous placez tous vos disques dans un grand vdev RAIDZ2, vous pouvez perdre deux disques sans perte de données. Cependant, l'expansion signifie ajouter un autre vdev complet.
- Vous gagnerez une meilleure performance parallèle si vous divisez les disques en plusieurs petits vdevs RAIDZ1. Soyez prudent; si deux disques échouent dans le même vdev, vous perdrez l'ensemble du pool.
- %%ZFS|zfs%% distribue les données à travers des vdevs, pas des disques individuels, donc plus de vdevs peuvent conduire à de meilleures performances pour les charges de travail comprenant de nombreux petits fichiers ou des I/O aléatoires.
- L'extension d'un pool %%ZFS|zfs%% signifie généralement ajouter un nouveau vdev de la même configuration, pas seulement un seul disque.

:::tip

Planifiez la disposition de votre pool pour répondre à vos besoins et à votre croissance future. Contrairement à l'%%array|array%% d'Unraid, vous ne pouvez pas ajouter un seul disque à un vdev existant en utilisant le %%WebGUI|web-gui%%.

:::

---

## Compression et RAM

%%ZFS|zfs%% offre des fonctionnalités avancées qui peuvent améliorer significativement l'efficacité et la performance du stockage d'Unraid. Deux sujets d'intérêt courants sont la compression et les exigences en mémoire.

La compression %%ZFS|zfs%% est transparente - elle fonctionne en arrière-plan, réduisant la taille des données avant qu'elles n'atteignent le disque.

Cela présente deux avantages majeurs :

- **Réduction de l'utilisation du disque :** Moins d'espace de stockage est consommé.
- **Amélioration des performances :** Écrire et lire moins de données peut entraîner des opérations plus rapides, surtout sur les processeurs modernes.

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs13.png)
</div>

:::tip

Activez la compression %%ZFS|zfs%% pour la plupart des pools %%ZFS|zfs%% d'Unraid. C'est sûr, efficace et n'impacte que rarement la compatibilité ou la stabilité.

:::

<details>
  <summary><strong>Le mythe RAM de ZFS</strong> - Cliquez pour développer/réduire</summary>

  Vous avez peut-être rencontré le conseil obsolète : « %%ZFS|zfs%% nécessite 1 GB de RAM pour 1 TB de stockage. » Ceci n'est plus applicable pour la plupart des utilisateurs. %%ZFS|zfs%% utilise la RAM pour son Cache de Remplacement Adaptatif (ARC), ce qui accélère les lectures fréquemment accédées.

  Unraid limite automatiquement %%ZFS|zfs%% à utiliser une portion raisonnable de la RAM de votre système (généralement 1/8ème de la RAM totale). Cela permet à %%ZFS|zfs%% de bien fonctionner sans affecter les conteneurs Docker, les %%VMs|vm%% ou l'OS Unraid.

  <div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
    ![](/img/zfs14.png)
  </div>
</details>

:::info

%%ZFS|zfs%% s'adapte bien à la mémoire disponible. Plus de RAM peut améliorer la performance du cache, mais %%ZFS|zfs%% fonctionne de manière fiable avec un matériel modeste. Ne laissez pas les anciennes recommandations vous empêcher d'utiliser %%ZFS|zfs%% sur Unraid.

:::

---

## Importer des pools %%ZFS|zfs%% créés sur d'autres systèmes

Unraid peut importer des pools %%ZFS|zfs%% créés sur d'autres plateformes avec un minimum de tracas.

<details>
  <summary><strong>Comment importer un pool ZFS</strong> - Cliquez pour développer/réduire</summary>

  1. **Arrêtez l'array :** Assurez-vous que votre %%array|array%% Unraid est arrêté.
  2. **Ajoutez un nouveau pool :** Cliquez sur **Ajouter un pool**.
  3. **Assignez tous les disques :**
     - Définissez **Nombre d'emplacements de données** sur le nombre total de disques de votre pool %%ZFS|zfs%% (y compris les vdevs de données et les vdevs de support).
     - Assignez chaque disque à l'emplacement correct.
     - *Exemple:* Pour un pool avec un vdev miroir de 4 disques et un vdev L2ARC de 2 disques, définissez 6 emplacements et attribuez les six disques.
  4. **Définissez le système de fichiers sur "Auto" :** Cliquez sur le nom du pool (par exemple, `raptor`) et définissez **Système de fichiers** sur **Auto**.
  5. **Terminez et démarrez l'array :** Cliquez sur **Terminé**, puis démarrez l'%%array|array%%.

  :::info[Détection automatique]
  Unraid détectera et importera automatiquement le pool %%ZFS|zfs%%. Les vdevs de support (comme log, cache/L2ARC, spécial/dedup) sont listés sous **Subpools** dans le %%WebGUI|web-gui%%. Il n'est pas nécessaire d'ajouter des sous-pools séparément après l'initialisation de l'importation. Unraid les importera automatiquement avec les disques de données principaux lorsque tous les disques requis sont assignés.
  :::

  Après l'importation, il est fortement recommandé d'exécuter un %%scrub|scrub%% pour vérifier l'intégrité des données.

  - Cliquez sur le nom de la piscine (p. ex., `raptor`) pour ouvrir sa configuration.
  - Sous **État de la piscine**, vérifiez l'état et cliquez sur **Scrub**.

  <div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
    ![](/img/zfs15.png)
  </div>
</details>

---

## Vdevs de support (sous-piscines)

Unraid se réfère aux vdevs de support %%ZFS|zfs%% comme des sous-pools. La plupart des utilisateurs n'en ont **pas** besoin, mais les utilisateurs avancés peuvent les rencontrer :

<div style={{ margin: 'auto', maxWidth: '600px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![](/img/zfs16.png)
</div>

| Vdev de support (sous-piscine) | But                                                           | Risque/Notes                                                                                                                    |
| ------------------------------ | ------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| Vdev spécial                   | Stocke les métadonnées et les petits fichiers                 | La piscine devient illisible si elle est perdue.                                                                                |
| Vdev de déduplication          | Active la déduplication                                       | Requiert de grandes quantités de RAM ; risqué pour la plupart des utilisateurs. Évitez, sauf si vous avez des besoins d'expert. |
| Vdev de log (SLOG)             | Améliore les performances d'écriture synchrone                | Optionnel. Seulement bénéfique pour certaines charges de travail.                                                               |
| Vdev de cache (L2ARC)          | Fournit un cache de lecture basé sur SSD                      | Optionnel. Peut améliorer les vitesses de lecture pour des ensembles de travail volumineux.                                     |
| Vdev de réserve                | Non pris en charge dans Unraid (à partir de la version 7.1.2) |                                                                                                                                 |

:::caution

La plupart des utilisateurs d'Unraid devraient éviter les vdevs de support/sous-pools à moins que vous n'ayez un besoin spécifique et bien compris. Ils sont conçus pour des charges de travail spécialisées et peuvent introduire de la complexité ou du risque s'ils sont mal utilisés.

:::

---

## Lecteurs critiques de vdevs de support non assignés pendant l'importation

Lorsque vous importez un pool %%ZFS|zfs%% dans Unraid, vous devez assigner chaque disque de votre pool d'origine, y compris ceux utilisés pour les vdevs de support, aux emplacements du pool. Unraid reconnaîtra automatiquement le rôle de chaque disque (données, log, cache, spécial, ou dedup) une fois que l'%%array|array%% démarre. Vous n'avez pas besoin de spécifier manuellement quel disque remplit quel rôle.

Si vous oubliez d'inclure un lecteur qui faisait partie d'un vdev de support lors de l'importation, le résultat dépendra de la fonction du vdev :

| Type de vdev                     | Si le lecteur manque pendant l'importation                                | Résultat                                                                                                                                             |
| -------------------------------- | ------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| Vdev spécial ou de déduplication | La piscine ne s'importera pas ou sera inutilisable                        | Ces vdevs stockent des métadonnées critiques ou des tables de déduplication. Sans eux, %%ZFS\|zfs%% ne peut pas monter le pool en toute sécurité.    |
| Vdev de log (SLOG)               | La piscine importe, mais les performances d'écriture synchrone diminuent. | La piscine reste accessible, mais vous pouvez observer des performances réduites pour les charges de travail qui dépendent des écritures synchrones. |
| Vdev de cache (L2ARC)            | La piscine importe, mais le cache de lecture est perdu                    | Le pool fonctionne normalement, mais vous perdez le gain de performance du cache L2ARC. Aucune donnée n'est perdue.                                  |

:::tip

Assignez toujours chaque disque physique de votre pool %%ZFS|zfs%% original, y compris tous les vdevs de support, lors de l'importation dans Unraid. Cela garantit une détection et une intégration fluide. Pour les nouveaux pools créés dans Unraid, les vdevs de support sont optionnels et généralement inutiles pour la plupart des utilisateurs.

:::

---

## Expansion du stockage

%%ZFS|zfs%% est puissant, mais il est important de comprendre comment son expansion de stockage fonctionne - surtout si vous prévoyez une future croissance.

Historiquement, les vdevs %%ZFS|zfs%% ont une largeur fixe. Vous ne pouvez pas ajouter un disque à un vdev RAIDZ existant pour le rendre plus grand.

Des moyens pour étendre votre piscine incluent :

- **Ajouter un nouveau vdev :** Augmentez votre pool en ajoutant un autre vdev (comme un nouveau mirroir ou un groupe RAIDZ). Cela augmente la capacité, mais vous devez ajouter les disques par ensembles correspondant à la configuration du vdev.
- **Remplacement des disques par des plus grands :** Remplacez chaque disque dans un vdev, un à la fois, par un disque plus grand. Voir [remplacement de disque](../../using-unraid-to/manage-storage/array/replacing-disks-in-array.mdx#replacing-faileddisabled-disks) pour les procédures détaillées. Après le remplacement de tous les disques et la résolution du pool, la capacité du vdev augmente.
- **Créer une nouvelle piscine :** Démarrer une nouvelle piscine %%ZFS|zfs%% maintient l'organisation et l'indépendance pour différents types de données ou charges de travail.

:::tip[Planning [en avant]

Avant de construire votre pool, considérez combien de stockage vous aurez besoin - non seulement aujourd'hui, mais à l'avenir. %%ZFS|zfs%% récompense une bonne planification, surtout si vous souhaitez éviter des mises à niveau perturbatrices plus tard.

:::

---

## Utilisation de piscines ZFS sur un serveur Unraid existant

Si vous utilisez un %%array|array%% Unraid traditionnel et souhaitez ajouter des piscines %%ZFS|zfs%%, voici quelques moyens efficaces de les intégrer :

| Cas d'utilisation                                 | Description                                                                                                                                                                                                                                                      | Détails / Exemples                                                                                                                         |
| ------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| Piscine SSD/NVMe rapide pour appdata & Docker     | Stockez la part appdata pour des conteneurs et des bases de données rapides et réactifs. Cela supporte les %%snapshot\|snapshot%%s pour des retours en arrière faciles et peut aussi héberger des %%VM\|vm%%s pour un I/O élevé.                                 | De nombreux utilisateurs choisissent un miroir %%ZFS\|zfs%% à 2 disques pour cela. C'est facile à étendre et offre de bonnes performances. |
| Pool %%ZFS\|zfs%% pour des données importantes    | Utilisez un miroir %%ZFS\|zfs%% ou un pool RAIDZ2 pour des fichiers irremplaçables comme des photos, des documents fiscaux et des données de %%user-share\|partage-utilisateur%%. %%ZFS\|zfs%% vérifie les corruptions et se guérit lui-même avec la redondance. | Cette configuration protège les données critiques avec des vérifications d'intégrité automatiques et des capacités d'auto-réparation.      |
| Cible de sauvegarde quotidienne ou de réplication | Utilisez un disque %%ZFS\|zfs%% (même dans l'%%array\|array%% d'Unraid) comme cible de réplication. Vous pouvez répliquer d'autres pools localement ou à partir d'un autre serveur Unraid.                                                                       | Utilisez `zfs send/receive` ou des outils comme Syncoid pour des sauvegardes et récupérations rapides et fiables.                          |
| [%Snapshot\|snapshot%-based recovery pool]        | Gardez des %%snapshot\|snapshot%%s ponctuels de données ou de conteneurs critiques. Les %%snapshot\|snapshot%%s peuvent être auto-planifiés et sont économes en espace.                                                                                          | Cette fonctionnalité permet une récupération rapide des suppressions accidentelles ou des erreurs de configuration.                        |

## Éviter les erreurs communes de ZFS

%%ZFS|zfs%% est un système de fichiers puissant, mais il y a plusieurs pièges courants qui peuvent compromettre ses avantages. Il est important de garder à l'esprit les points suivants avant de configurer votre pool pour une expérience plus fluide :

- **Incompatibilité de taille des disques dans RAIDZ :** %%ZFS|zfs%% traite tous les disques d'un vdev RAIDZ comme la taille du plus petit. Pour garantir la meilleure efficacité, utilisez toujours des disques de taille identique dans chaque vdev.

- **Expansion des vdevs RAIDZ via le %%WebGUI|web-gui%%:** Bien qu'Unraid 7.1.x et plus récent prennent en charge l'extension RAIDZ via la ligne de commande, cette fonctionnalité n'est pas encore disponible dans le %%WebGUI|web-gui%%. Pour l'instant, développez via CLI ou ajoutez de nouveaux vdevs par l'interface GUI.

- **%%ZFS|zfs%% disk vs. full zpool:** A single %%ZFS|zfs%%-formatted disk in the Unraid %%array|array%% does not offer the redundancy or features of a dedicated %%ZFS|zfs%% pool. To leverage advanced functionality, use standalone pools.

- **Deduplication sans RAM adéquate :** La déduplication nécessite une mémoire significative, et l'activer sans assez de RAM peut gravement impacter la performance. Activez la déduplication seulement si vous comprenez pleinement les exigences.

- **La redondance des vdevs est locale :** La redondance dans %%ZFS|zfs%% est locale à chaque vdev et non partagée à travers le pool. Assurez-vous de planifier la disposition de vos vdevs pour atteindre le niveau de résilience dont vous avez besoin.
