---
sidebar_position: 5
sidebar_label: Sant√© et maintenance de l'array
---

import ArrayCheckParity from "../partials/array-check-parity.mdx";
import ArrayCheckRead from "../partials/array-check-read.mdx";
import TroubleshootMissingDisks from "../partials/troubleshoot-missing-disks.mdx";
import TroubleshootDeviceLimit from "../partials/troubleshoot-device-limit.mdx";
import TroubleshootLicenseIssues from "../partials/troubleshoot-license-issues.mdx";
import TroubleshootKeyServer from "../partials/troubleshoot-key-server.mdx";
import TroubleshootWithdrawnRelease from "../partials/troubleshoot-withdrawn-release.mdx";

# Sant√© et maintenance de l'array

V√©rifier r√©guli√®rement votre array Unraid est crucial pour maintenir l'int√©grit√© des donn√©es et identifier les probl√®mes potentiels avant qu'ils ne conduisent √† une perte de donn√©es. Cette page couvre les outils de surveillance et les proc√©dures de d√©pannage pour votre array.

## V√©rification des appareils du tableau

You can initiate a check using the **Check** button under ***Array Operations***. Depending on your array's configuration, this button allows you to conduct either a %%parity check|parity-check%% or a %%read check|read-check%%.

<div
  style={{
   margin: "auto",
   maxWidth: "400px",
   display: "flex",
   flexDirection: "column",
   alignItems: "center",
  }}
>
  ![Le bouton de v√©rification vous permet d'effectuer des v√©rifications de parit√© et de lecture](/img/Check_button.PNG)
</div>

Pour plus de commodit√©, vous pouvez programmer ces v√©rifications pour qu'elles s'ex√©cutent automatiquement √† des intervalles qui vous conviennent en naviguant vers ***Param√®tres ‚Üí Planificateur***. Il est conseill√© d'effectuer des v√©rifications automatiques et correctrices sur une base mensuelle ou trimestrielle pour assurer la sant√© continue de vos donn√©es et corriger les erreurs de synchronisation trouv√©es.

### V√©rifications de parit√©

<ArrayCheckParity />

### V√©rifications de lecture

<ArrayCheckRead />

### V√©rifiez l'historique

Whenever the system performs a %%parity check|parity-check%% or a %%read check|read-check%%, it keeps a record of what happened. You can view these details easily by clicking the **History** button found under ***Array Operations*** in the interface.

Unraid propose divers modes d'√©criture pour g√©rer les op√©rations sur l'array, chacun ayant ses propres avantages et inconv√©nients en termes de vitesse, de consommation d'√©nergie et d'usure des disques. Savoir comment ces modes fonctionnent, ainsi que le r√¥le d'un disque ou d'un pool de cache, peut vous aider √† affiner votre serveur pour r√©pondre au mieux √† vos besoins.

## Arr√™ter ou d√©marrer les disques tournants

Unraid allows you to control the power states of your hard drives. You can easily %%spin them up or down|spin-state%%, and manage SSDs to be active or in standby. This helps save energy, extend the life of your drives, and reduce noise when the disks are not being used.

### Pourquoi activer ou d√©sactiver ?

Mettre en veille les disques peu utilis√©s √©conomise de l'√©nergie et les aide √† durer plus longtemps. R√©veiller les disques √† l'avance r√©duit les temps d'attente lorsque vous avez besoin de fichiers rapidement.

### Comment contr√¥ler les √©tats d'activation

Contr√¥lez les √©tats de rotation des disques via l'onglet **Principal** :

1. Allez √† l'onglet **Principal** et localisez vos dispositifs d'array.
2. Chaque disque affiche des boutons de contr√¥le de rotation :
   - üîò bouton - **D√©marrer la rotation** (si actuellement en veille)
   - üü¢ bouton - **Arr√™ter la rotation** (si en cours de rotation)
3. Cliquez sur le bouton appropri√© pour l'action souhait√©e.

N'oubliez pas que si un disque est en cours d'acc√®s (par exemple si vous ouvrez un fichier), il restera actif et ignorera toute demande de d√©sactivation.

Lorsque un disque est d√©sactiv√©, sa temp√©rature ne s'affiche pas dans le %%WebGUI|web-gui%%. Cependant, d√®s qu'une application ou un utilisateur y acc√®de, il se r√©activera automatiquement.

:::tip

Pour changer le Mode d'√âcriture :

:::

## R√©initialiser la configuration de la matrice

R√©initialiser la configuration de votre array est une √©tape importante qui doit √™tre entreprise avec soin. Ce processus est g√©n√©ralement n√©cessaire lors du retrait d'un disque, de la mise en place d'une nouvelle configuration de l'array, ou de la r√©solution de probl√®mes d'attribution de disque. Veuillez noter que cette action peut avoir un impact sur la protection des donn√©es et la parit√©, alors assurez-vous de n'y proc√©der que lorsque c'est r√©ellement n√©cessaire.

R√©initialisez votre array lorsque :

- Retrait ou remplacement de disques
- D√©marrage avec une nouvelle disposition de l'array
- Correction des erreurs d'assignation de disque
- R√©cup√©ration de probl√®mes de configuration

<div
  style={{
   margin: "auto",
   maxWidth: "650px",
   display: "flex",
   flexDirection: "column",
   alignItems: "center",
  }}
>
  ![R√©initialiser votre configuration de disque peut √™tre effectu√© via la page de nouvelle config](/img/Newconfig.png)
</div>

Pour r√©initialiser votre configuration de matrice :

1. Allez √† **Outils ‚Üí Nouvelle configuration**.
2. Conservez √©ventuellement certaines assignations de disque existantes pour des ajustements mineurs.
3. Cochez la case de confirmation et cliquez sur **Appliquer**.
4. Retournez √† l'onglet **Principal**.
5. Assignez ou d√©sassignez les disques selon les besoins.
6. D√©marrez l'array en mode Normal ou %%Mode Maintenance|maintenance-mode%%.

:::important

- Unraid tente de reconna√Ætre les lecteurs pr√©c√©demment utilis√©s et de pr√©server les donn√©es autant que possible.
- Retirer un disque de donn√©es invalide la parit√© √† moins que ce disque ait √©t√© vid√© avant le retrait.
- Changer l'ordre des disques n'affectera pas la parit√©1, mais cela peut invalider la parit√©2.

:::

:::caution

Lorsque vous voyez le bouton **D√©marrer**, il y a une case √† cocher √©tiquet√©e **Parit√© est valide**. Ne cochez cette case que si vous √™tes certain qu'elle est correcte ou si un utilisateur exp√©riment√© d'Unraid vous a conseill√© de le faire lors de la r√©cup√©ration. Cocher cette option incorrectement peut entra√Æner une perte de donn√©es.

N'utilisez pas **Nouvelle Config** si votre objectif est de reconstruire un disque. Effectuer une Nouvelle Config efface l'historique de la matrice requis pour une reconstruction, et Unraid ne proposera pas de reconstruire le disque par la suite. Suivez plut√¥t la proc√©dure de reconstruction du disque.

:::

### Annuler une r√©initialisation

Pour annuler une r√©initialisation :

1. **Pas de protection par parit√© :** Les donn√©es ne sont pas prot√©g√©es tant qu'elles ne sont pas d√©plac√©es vers l‚Äôensemble.
2. Ouvrez le dossier `config`.
3. Renommez `super.old` en `super.dat`.
4. Red√©marrez votre serveur pour r√©tablir la configuration pr√©c√©dente.

## Rapports d'√©tat

Unraid fournit des rapports de statut qui vous aident √† suivre la sant√© de votre matrice de stockage. Ces rapports sont un moyen rapide de v√©rifier si l'un de vos disques est d√©sactiv√© ou rencontre des probl√®mes de lecture ou d'√©criture de donn√©es.

- **Statut actuel :** Les rapports de statut affichent l'√©tat actuel de votre array. Il est important de noter que ces informations sont r√©initialis√©es apr√®s le red√©marrage du syst√®me, elles ne conserveront donc pas un historique des probl√®mes pass√©s.

- **Aucune donn√©e historique :** Si vous souhaitez voir ce qui s'est pass√© avant un red√©marrage, vous devrez chercher ailleurs, car ces rapports ne sauvegardent pas les √©tats pass√©s.

:::important

Rappelez-vous que les rapports de statut n'incluent pas les donn√©es %%SMART|smart%%. Les rapports %%SMART|smart-report%% vous offrent une vue plus d√©taill√©e de la sant√© de chaque disque. Ainsi, m√™me si votre rapport de statut indique que tout est en ordre, il est toujours judicieux de v√©rifier r√©guli√®rement les rapports %%SMART|smart-report%% pour d√©tecter tout probl√®me potentiel d√®s le d√©but.

:::

## D√©pannage des √©checs de d√©marrage de l'ensemble

Si votre array ne d√©marre pas, suivez ces √©tapes pour identifier et corriger les probl√®mes courants. Recherchez les messages d'erreur sous ***Principal ‚Üí Op√©ration sur l'Array***.

### Disques manquants

<TroubleshootMissingDisks />

### Limite de p√©riph√©rique

<TroubleshootDeviceLimit />

### Probl√®mes de licence

<TroubleshootLicenseIssues />

### Connexion au serveur de cl√©s

<TroubleshootKeyServer />

### Version retir√©e

<TroubleshootWithdrawnRelease />

## √âchec de disque pendant une reconstruction

Si un second disque √©choue pendant que vous en reconstruisez un autre, ce que vous pouvez faire d√©pendra de votre configuration de parit√©.

### Disque de parit√© unique

Si un disque √©choue pendant la reconstruction d‚Äôun autre, la reconstruction s‚Äôarr√™tera car les donn√©es ne peuvent pas √™tre restaur√©es avec pr√©cision. Malheureusement, vous ne pourrez pas r√©cup√©rer vos donn√©es dans cette situation.

### Double disque de parit√©

If you have two %%parity drives|parity-drives%%, you have more options:

- Vous pouvez attendre la fin de la premi√®re reconstruction puis g√©rer le deuxi√®me disque d√©faillant.
- Ou, vous pouvez arr√™ter la reconstruction actuelle, remplacer le second disque d√©faillant, puis d√©marrer l'ensemble pour reconstruire les deux disques en m√™me temps.

Si la premi√®re reconstruction est presque termin√©e, il est g√©n√©ralement pr√©f√©rable de la laisser se terminer. Si elle vient de commencer, il peut √™tre plus rapide de reconstruire les deux en m√™me temps.

:::warning

La reconstruction des disques sollicite beaucoup tous les disques, ce qui augmente le risque de nouvelles d√©faillances. V√©rifiez toujours la sant√© des disques √† l'aide des rapports %%SMART|smart-report%% avant de commencer une reconstruction.

:::

:::info[Rebuild Temps

Pr√©parez-vous √† ce que le processus de reconstruction prenne plusieurs heures. Le temps peut varier en fonction de la taille du disque et de l'activit√© de votre syst√®me. Les disques plus grands et les syst√®mes occup√©s peuvent prendre plus de temps.

:::
