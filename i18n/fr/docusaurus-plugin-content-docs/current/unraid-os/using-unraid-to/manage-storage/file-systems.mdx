---
sidebar_position: 4
sidebar_label: Systèmes de fichiers
---

# Systèmes de fichiers

## Sélection d'un type de système de fichiers

Sélectionner le bon système de fichiers pour votre %%array|array%% Unraid ou %%cache pool|cache-pool%% est crucial. Cela vous aide à obtenir un équilibre entre performance, protection des données et fonctionnalités avancées. Unraid supporte plusieurs systèmes de fichiers modernes Linux, chacun avec ses propres forces uniques et cas d'utilisation spécifiques.

| Système de fichiers | Protection des données                                                                | Efficacité de l'espace                  | Fonctionnalités avancées                                         | Meilleur cas d'utilisation                                       |
| ------------------- | ------------------------------------------------------------------------------------- | --------------------------------------- | ---------------------------------------------------------------- | ---------------------------------------------------------------- |
| %%XFS\|xfs%%        | Aucune redondance intégrée                                                            | 100 %                                   | Résistant à la corruption                                        | Par défaut pour les disques d'une baie ; haute fiabilité         |
| EXT4                | Aucune redondance intégrée                                                            | 100 %                                   | Mature, stable, journaled                                        | Array drives or single-drive pools; alternative to XFS           |
| %%ZFS\|zfs%%        | %%RAIDZ1\|raidz1%%/%%RAIDZ2\|raidz2%%/%%RAIDZ3\|raidz3%%, miroirs, etc.               | Varie selon le niveau de %%RAID\|raid%% | %%Checksums\|checksum%%, %%Snapshots\|snapshot%%, %%RAID\|raid%% | Baies multi-appareils, %%VMs\|vm%%, Docker, utilisateurs avancés |
| %%BTRFS\|btrfs%%    | %%RAID 0\|raid0%%/%%RAID 1\|raid1%%/%%10\|raid10%%/%%5\|raid5%%/%%6\|raid6%%, miroirs | Varie selon le niveau de %%RAID\|raid%% | %%Checksums\|checksum%%, %%Snapshots\|snapshot%%, %%RAID\|raid%% | Baies multi-appareils, mélange SSD/HDD, baies flexibles          |
| NTFS                | Aucune redondance intégrée                                                            | 100 %                                   | Windows compatibility                                            | Adding existing Windows drives without data migration            |
| exFAT               | Aucune redondance intégrée                                                            | 100 %                                   | Compatibilité multiplateforme                                    | Adding existing exFAT drives without data migration              |

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import FsCheckCliXfs from './partials/fs-check-cli-xfs.mdx';
import FsCheckCliBtrfs from './partials/fs-check-cli-btrfs.mdx';
import FsCheckCliZfs from './partials/fs-check-cli-zfs.mdx';
import FsRepairCliXfs from './partials/fs-repair-cli-xfs.mdx';
import FsRepairCliBtrfs from './partials/fs-repair-cli-btrfs.mdx';
import FsRepairCliZfs from './partials/fs-repair-cli-zfs.mdx';

### XFS

%%XFS|xfs%% is the default file system for %%array|array%% drives in Unraid. It's known for its robustness and ability to recover from corruption after unexpected shutdowns or crashes. Each drive formatted with %%XFS|xfs%% acts as a self-contained file system, making data recovery straightforward on any Linux system.

- **Protection des données :** Pas de redondance intégrée ; s'appuie sur la %%parité|parity%% d'Unraid pour la protection.
- **Performance :** Cohérent et fiable.
- **Meilleur pour :** Disques %%Array|array%%, surtout lorsque la stabilité et la facilité de récupération de données sont des priorités.

### EXT4

EXT4 is a mature and stable file system that offers excellent compatibility and reliability. It is fully supported and stands on par with %%XFS|xfs%%, %%BTRFS|btrfs%%, and %%ZFS|zfs%%, making it a strong choice for array drives or single-drive pools.

- **Data protection:** It does not have built-in redundancy and relies on Unraid's %%parity|parity%% for protection.
- **Performance:** It provides consistent and reliable performance with journaling to ensure data integrity.
- **Best for:** %%Array|array%% drives or single-drive pools when you are looking for an alternative to %%XFS|xfs%%.

### ZFS

%%ZFS|zfs%% is a modern file system that comes with advanced features such as %%checksums|checksum%% to detect %%bit rot|bit-rot%%, %%snapshots|snapshot%% for backups, and native %%RAID|raid%% support options like %%RAIDZ1|raidz1%%/%%RAIDZ2|raidz2%%/%%RAIDZ3|raidz3%% and mirrors. %%ZFS|zfs%% can be utilized for both single-device and multi-device pools.

- **Protection des données :** Supporte divers niveaux de %%RAID|raid%% pour la redondance.
- **Performance :** Excellent, en particulier pour les pools multi-appareils.
- **Idéal pour :** environnements haute performance, %%virtual machines|machines virtuelles%%, Docker, ou lorsqu'il est nécessaire d'utiliser des fonctionnalités avancées comme les %%snapshots|instantanés%%.

For comprehensive guidance on %%ZFS|zfs%% features, configuration, and best practices, see the dedicated [ZFS storage](../../advanced-configurations/optimize-storage/zfs-storage.mdx) page.

### BTRFS

%%BTRFS|btrfs%% offre un support %%RAID|raid%% flexible, des %%checksums|checksum%% pour l'intégrité des données, et une gestion efficace des lecteurs de tailles mixtes dans les pools. Il sert de système de fichiers par défaut pour les %%cache pools|cache-pool%% et prend en charge les configurations à un ou plusieurs dispositifs.

- **Protection des données :** Supporte %%RAID 0|raid0%%/%%1|raid1%%/%%10|raid10%%/%%5|raid5%%/%%6|raid6%% (notez que %%RAID 5|raid5%%/%%6|raid6%% sont encore expérimentaux).
- **Performance :** Bonne, avec flexibilité pour l'expansion et la contraction.
- **Meilleur pour :** %%Cache pools|cache-pool%%, surtout si vous prévoyez de mélanger des SSD et HDD ou avez besoin d'un moyen facile d'étendre.

### NTFS and exFAT (limited support)

NTFS and exFAT file systems are supported with some limitations. This is mainly to help you add existing drives with data to your Unraid system without needing to transfer the data elsewhere first.

:::warning

Drives formatted with NTFS or exFAT must be added to the %%array|array%% **before** you add any parity drives. Once a parity drive has been added to your %%array|array%%, any new data drives you add will be zeroed out, regardless of their file system format.

If you want to use existing NTFS or exFAT drives:

- Add them to the %%array|array%% first (or run ***Tools → New Config*** to reset your array configuration).
- After adding your NTFS/exFAT data drives, you can then add parity drives.
- The existing data on these drives will be preserved and protected by parity.

:::

- **Data protection:** These drives do not offer built-in redundancy; they rely on Unraid's %%parity|parity%% for protection once parity is added.
- **Performance:** Adequate for basic storage needs.
- **Best for:** Adding existing Windows-formatted drives (NTFS) or cross-platform formatted drives (exFAT) without the need for data migration. They can also be used for single-drive pools.
- **Limitations:** These file systems are not recommended for regular use; they are intended primarily for migrating existing drives. For new drives, consider using %%XFS|xfs%%, EXT4, %%BTRFS|btrfs%%, or %%ZFS|zfs%% instead.

For more details on adding existing drives, see the [release notes](../../release-notes/7.2.0.md#ext234-ntfs-and-exfat-support).

:::note[Additional Notes]

- Mélanger différents types de systèmes de fichiers dans votre système Unraid est tout à fait acceptable ; le système de %%parité|parity%% d'Unraid fonctionne indépendamment du système de fichiers utilisé.
- Formatez toujours et partitionnez les disques dans Unraid pour assurer la compatibilité.
- Les systèmes Linux peuvent lire ces systèmes de fichiers nativement ; cependant, Windows et macOS nécessitent des logiciels supplémentaires pour y accéder.
- You can **encrypt** drives for enhanced security, but keep in mind that encrypted drives might pose challenges for recovery if corruption occurs.
- Pour les disques de transfert ou les appareils externes, il est recommandé d'utiliser le plugin **[Unassigned Devices](#using-the-unassigned-devices-plugins)**, qui prend en charge des systèmes de fichiers supplémentaires.
  :::

:::

:::tip[Still besoin d'aide pour choisir?

- **For array drives:** %%XFS|xfs%% is generally the best choice for most users. EXT4 is also a solid option if you prefer a more traditional Linux file system.
- **For high-performance or advanced features:** Choose %%ZFS|zfs%% or %%BTRFS|btrfs%% for %%cache pools|cache-pool%% or multi-device setups. See the [ZFS storage](../../advanced-configurations/optimize-storage/zfs-storage.mdx) page for detailed %%ZFS|zfs%% guidance.
- **Pour les baies mixtes ou en expansion :** %%BTRFS|btrfs%% est idéal si vous voulez utiliser différentes tailles de disques ou ajouter ou retirer facilement des appareils.
- **For existing drives:** Use NTFS or exFAT only when adding existing drives with data; add them before adding parity.

Si vous êtes incertain, commencer avec les paramètres par défaut est une bonne approche : utilisez %%XFS|xfs%% pour les disques %%array|array%% et %%BTRFS|btrfs%% pour les %%cache pools|cache-pool%%.

:::

---

## Définir un type de système de fichiers

Lors de l'ajout d'un nouveau disque à Unraid, vous pouvez sélectionner le type de système de fichiers qui correspond le mieux à vos besoins. Le système de fichiers détermine comment les données sont organisées et protégées sur le disque.

To set the file system type globally, navigate to ***Settings → Disk Settings*** to set the default file system for new %%array|array%% drives only. Unraid defaults to %%XFS|xfs%% for %%array|array%% drives.

:::note

There is currently no global default setting for %%cache pools|cache-pool%%. They will always default to %%BTRFS|btrfs%% if left to "auto".

:::

:::important

If you're adding drives with existing NTFS or exFAT data, they must be added to the %%array|array%% before any parity drives are added. Once parity is present, all newly added data drives will be zeroed out regardless of their file system type.

:::

To set the file system for an individual drive:

1. Stop the %%array|array%% before making changes.
2. In the **Main** tab, click the drive you want to configure.
3. Select the desired file system type from the drop-down menu.
4. (Optional) If you select **auto**, Unraid uses the global default.
5. Pour les %%cache pools|cache-pool%% multi-appareils, seuls %%BTRFS|btrfs%% ou %%ZFS|zfs%% sont pris en charge.
6. If adding existing NTFS or exFAT data drives to the %%array|array%%, add them before adding any parity drives.

---

## Création d'un système de fichiers (formatage)

Avant d'utiliser un nouveau disque dans Unraid, vous devez le formater avec le système de fichiers sélectionné.

:::warning

Formatting will erase all existing content on the drive. Make sure you've backed up any important data before proceeding.

:::

To format a drive:

1. Démarrez l’%%array|array%%.
2. Identify unmountable drives (they appear as **unmountable**).
3. Verify that all unmountable drives are the ones you want to format.
4. Check the confirmation box, read the warning dialog, and click **Format**.
5. Monitor the process. For new disks, Unraid first rewrites the partition table.
6. Wait for completion. If progress stalls, refresh the **Main** tab.

Une fois le formatage terminé, le disque est prêt à stocker des fichiers.

---

## Changer un type de système de fichiers

Vous pourriez vouloir changer le type de système de fichiers sur un disque spécifique pour profiter de nouvelles fonctionnalités ou pour assurer la compatibilité avec vos autres disques.

:::warning

Changer le type de système de fichiers **effacera toutes les données existantes** sur le disque. Pensez toujours à sauvegarder les fichiers importants avant de commencer.

:::

Pour changer le type de système de fichiers sur un disque particulier :

1. Arrêtez le %%array|array%%.
2. In the **Main** tab, click the drive you want to change.
3. Choose the new file system from the drop-down (repeat for multiple drives as needed).
4. Démarrez l’%%array|array%%.
5. In the **Main** tab, review the unmountable drives list and ensure only the intended drives are included.
6. Check the confirmation box and click **Format**.
7. Wait for completion. If status doesn’t update, refresh the **Main** tab.

Si vous rencontrez des problèmes, n'hésitez pas à visiter les [forums Unraid](https://forums.unraid.net/). Joignez votre fichier de diagnostic système zip (trouvé sous ***Outils → Diagnostics***) pour obtenir de l'aide.

---

## Conversion vers un nouveau type de système de fichiers

:::important

The ***Main*** page will warn if any array or pool drives are formatted in legacy filesystems:

- Any drives formatted in ReiserFS need to be migrated to another filesystem ASAP as they will not be usable in future releases of Unraid.
- Any drives formatted in older XFS versions need to be migrated before 2030.

:::

Ce processus est particulièrement courant pour les utilisateurs passant du ReiserFS obsolète (utilisé dans les anciennes versions d'Unraid) au %%XFS|xfs%% ou au %%BTRFS|btrfs%%, mais il s'applique à toute conversion de système de fichiers.

:::important

Ce processus nécessite de déplacer temporairement vos données vers un autre emplacement. Assurez-vous d'avoir suffisamment d'espace libre ailleurs dans votre %%array|array%% ou sur un appareil externe avant de commencer.

:::

Reformater un lecteur dans Unraid effacera toutes vos données et créera un nouveau système de fichiers vide. Ce processus est utile pour résoudre les erreurs de système de fichiers persistantes ou pour repartir à zéro avec un nouveau format.

1. Move all data off the drive to another location (another %%array|array%% drive, %%cache pool|cache-pool%%, or external backup). Use one of these methods:

   **Via the WebGUI:**

   - Naviguez vers ***Principal → Opération de la matrice*** et arrêtez la matrice.
   - Naviguez vers ***Paramètres → Paramètres de partage global***. Dans la zone **Vider disque(s)**, sélectionnez le(s) disque(s) à vider et **Appliquer**. Note : ce statut sera automatiquement supprimé lorsque la matrice est arrêtée.
   - Naviguez vers ***Principal → Opération de la matrice*** et démarrez la matrice.
   - Sur ***Principal → Opération de la matrice*** cliquez sur **Déplacer** (ou attendez que le mover s'exécute selon son calendrier normal).
   - Mover vide le disque selon vos paramètres de partage. Notez que les fichiers à la racine du lecteur sont en dehors de tout partage et ne seront pas déplacés.
   - Vérifiez ***Outils → Journal du système*** pour les messages concernant les fichiers qui n'ont pas pu être déplacés en raison d'une utilisation ou d'un manque d'espace libre.

   **Or via the command line:**

   - Move files [using 'mover' to empty an array disk](../../release-notes/7.0.0.md#using-mover-to-empty-an-array-disk) to other array drives

   **Or manually:**

   - Move files manually to another location

   Once completed, navigate to ***Main → Array Devices*** and browse the disk to confirm it is empty. Proceed only when you are certain the disk is empty.
2. Follow the procedure for [changing a file system type](#changing-a-file-system-type). This formats the drive and erases all content, leaving a blank drive in the new format.
3. (Optional) Move your data back to the newly formatted drive, depending on where you moved the files.
4. If you have multiple drives to convert, repeat these steps for each drive.

:::note\[Timing]

Le processus peut prendre plusieurs heures, en fonction de la quantité de données et de la vitesse de vos lecteurs. La majeure partie du temps est consacrée à la copie des fichiers, qui peut être effectuée sans surveillance.

:::

---

## Reformatage d'un disque

Reformater un lecteur dans Unraid effacera toutes vos données et créera un nouveau système de fichiers vide. Ce processus est utile pour résoudre les erreurs de système de fichiers persistantes ou pour repartir à zéro avec un nouveau format.

:::warning

Le reformatage effacera définitivement toutes les données sur le lecteur. Sauvegardez toujours les fichiers importants avant de commencer.

:::

Pour reformater **en toute sécurité** votre disque :

1. **Arrêtez la matrice**.
2. **Changez le type de système de fichiers** :
   - Allez à l'onglet **Principal** et cliquez sur le disque que vous souhaitez reformater.
   - Sélectionnez un type de système de fichiers différent (par exemple, changez de %%XFS|xfs%% à %%BTRFS|btrfs%%).
   - Démarrez le %%array|array%%, et le disque s'affichera comme **non montable**.
   - Lorsque vous y êtes invité, formatez le disque.
3. **(Optionnel) Revenez à votre type de système de fichiers d'origine** :
   - Arrêtez à nouveau le %%array|array%%.
   - Changez le système de fichiers à votre type préféré.
   - Démarrez le %%array|array%% et formatez à nouveau le disque.

Ce processus simple garantit que le lecteur est complètement effacé et formaté comme vous le souhaitez. Le processus de formatage prend généralement juste quelques minutes.

### Reformatage d'un disque cache

Parfois, il est nécessaire de reformater un disque %%cache|cache%% pour les raisons suivantes :

- Pour changer le type de système de fichiers (par exemple, de %%BTRFS|btrfs%% à %%XFS|xfs%% ou vice versa)
- Pour corriger des erreurs persistantes du système de fichiers
- Pour démarrer à neuf pour de nouvelles charges de travail

#### Preparation

Before reformatting, prepare the system:

1. Arrêtez le %%array|array%%.
2. Go to **Settings** and disable Docker and %%VM|vm%% services (this prevents their tabs from appearing during the process).
3. Start the %%array|array%% again.

#### Move data off the cache

Pour déplacer les données hors du cache :

1. Set share storage and Mover action (cache → array):
   - Allez dans l'onglet **Partages**.
   - For each share with files in the %%cache|cache%%, set **Primary storage** to the source %%cache|cache%% pool and **Secondary storage** to the %%array|array%%.
   - Définissez **Action du Mover** sur **cache → tableau**.
   - Note the shares you changed and their original settings.
2. In the **Main** tab, click **Move Now** and wait for completion. Ensure the %%cache|cache%% is empty.
   - If files remain, stop and check the forums for help.

#### Reformat the cache drive

Maintenir vos pools %%BTRFS|btrfs%% dans Unraid est essentiel pour assurer leur bon fonctionnement et la sécurité de vos données. Deux outils clés que vous voudrez utiliser régulièrement sont **Balance** et **Scrub**. Ces opérations aident à résoudre les problèmes d'allocation d'espace, à optimiser l'utilisation de votre stockage, et à protéger vos données contre la corruption cachée.

1. Arrêtez le %%array|array%%.
2. Set the cache drive format:
   - In the **Main** tab, click the cache drive.
   - Choose between %%XFS|xfs%%, EXT4, or %%BTRFS|btrfs%%.
   - For a single-drive %%cache|cache%%, %%XFS|xfs%% or EXT4 are recommended.
   - Note that %%XFS|xfs%% and EXT4 are only available with one %%cache|cache%% slot.
3. Démarrez l’%%array|array%%.
4. Format the cache drive:
   - Confirm only the %%cache|cache%% drive is listed as unmountable.
   - Check the confirmation box and click **Format**.

#### Restore data and settings

Pour restaurer les données et les paramètres :

1. For each share you changed, set **Primary storage** and **Secondary storage** back to their original values.
2. Move data back (array → cache):
   - For each share you changed, set **Primary storage** to the destination %%cache|cache%% pool and **Secondary storage** to the %%array|array%%.
   - Définissez **Action du Mover** sur **array → cache**.
   - In the **Main** tab, click **Move Now** to move data back to the %%cache|cache%%.
3. Arrêtez le %%array|array%%.
4. Go to **Settings** and re-enable Docker and %%VM|vm%% services.
5. Start the %%array|array%% to complete the process.

:::note\[Timing]

Le temps nécessaire pour déplacer les données avec le **Mover** et formater le disque peut varier de plusieurs minutes à plusieurs heures, selon la quantité de données et la vitesse du disque.

:::

---

## Opérations BTRFS

Maintenir vos pools %%BTRFS|btrfs%% dans Unraid est essentiel pour assurer leur bon fonctionnement et la sécurité de vos données. Deux outils clés que vous voudrez utiliser régulièrement sont **Balance** et **Scrub**. Ces opérations aident à résoudre les problèmes d'allocation d'espace, à optimiser l'utilisation de votre stockage, et à protéger vos données contre la corruption cachée.

Let's break down what each operation does and when to use them:

### Équilibre

The **Balance** operation redistributes data and metadata chunks across your %%BTRFS|btrfs%% pool. This process helps free up space, resolves allocation issues, and can fix "no space left on device" errors even when space seems available.

#### Quand exécuter le Balance

- When you encounter "no space left on device" errors but have free space.
- Après avoir ajouté ou retiré des disques dans un pool.
- Pour optimiser l'utilisation de l'espace et améliorer les performances.

#### Comment exécuter le Balance

1. In the %%WebGUI|web-gui%%, click the pool in the **Main** tab and select **Balance**.
2. (Optional) Add parameters for advanced use (refer to Unraid Help for details).
3. Click **Start** to begin.

:::note\[Timing]

Les opérations de Balance peuvent prendre de quelques minutes à plusieurs heures, selon la taille du pool et la quantité de données.

:::

### Nettoyer

The **Scrub** operation reads all data and metadata, checks the integrity of checksums, and repairs any corrupt blocks using available redundant copies. Scrubbing helps identify and fix silent data corruption, known as "bit rot," before it becomes a significant issue.

#### Quand exécuter le Scrub

- Dans le cadre de la maintenance régulière (voir le programme recommandé ci-dessous).
- Après des arrêts imprévus ou si vous suspectez une corruption.
- Plus fréquemment sur les pools à utilisation intensive.

#### Calendrier recommandé

- Pools à utilisation intensive : **Une fois par semaine**
- Tous les autres pools : **Une fois par mois**

#### Comment exécuter le Scrub

1. In the %%WebGUI|web-gui%%, click the pool in the **Main** tab and select **Scrub**.
2. Click **Start** to initiate.

:::note\[Timing]

Les opérations de vérification sont généralement plus rapides qu'une analyse complète du disque car elles ne vérifient que les données allouées. En fonction de la taille et de l'utilisation du pool, cela peut prendre de quelques minutes à quelques heures.

:::

:::tip

Tant **Balance** que **Scrub** peuvent être effectués pendant que le système est en ligne, mais gardez à l'esprit que la performance peut être affectée pendant ces opérations. Vous pouvez surveiller l'avancement dans le %%WebGUI|web-gui%%.

:::

Pour plus de détails sur les fonctionnalités avancées %%BTRFS|btrfs%%, consultez [la documentation officielle BTRFS](https://btrfs.readthedocs.io/en/latest/Introduction.html).

---

## Disques non assignés

Les lecteurs non assignés sont des dispositifs de stockage connectés à votre serveur Unraid qui ne font pas partie de l'%%array|array%% principal ou de tout %%cache pool|cache-pool%%. Vous pouvez utiliser ces lecteurs pour transférer des fichiers, créer des backups, ou fournir un stockage rapide pour des %%machines virtuelles|vm%%.

:::note

All drives connected to your server when the %%array|array%% starts count toward your Unraid Attached Devices license limit, even if they aren't assigned to the %%array|array%% or a pool.

:::

### Utilisations courantes pour les disques non assignés

- Connectez des disques amovibles pour des transferts de fichiers ou des sauvegardes faciles.
- Utilisez des disques dédiés pour des tâches haute performance comme exécuter des machines virtuelles ou pour du stockage temporaire de données.

### Utilisation des plugins Unassigned Devices

Pour tirer le meilleur parti de vos disques non assignés, envisagez d'installer les plugins suivants depuis l'onglet **Apps** :

- **[Périphériques non attribués](https://unraid.net/community/apps?q=dlandon\&r=0#:~:text=and%20iso%20files.-,Unassigned%20Devices,-dlandon):** Ce plugin vous permet de monter, partager et gérer des disques avec des systèmes de fichiers pris en charge par Unraid, comme %%XFS|xfs%%, %%BTRFS|btrfs%% ou NTFS.

- **[Unassigned Devices Plus](https://unraid.net/community/apps?q=dlandon\&r=0#:~:text=and%20iso%20files.-,Unassigned%20Devices%20Plus,-\(Addon\))** : Cette extension élargit vos options en supportant des systèmes de fichiers supplémentaires, y compris ExFAT et HFS+.

Ces plugins permettent :

- De monter et démonter facilement des disques depuis l'interface web d'Unraid.
- Partager vos disques non assignés sur le réseau.
- D'automatiser le montage lors du démarrage du serveur.
- De formater ou d'effacer des disques pour une utilisation future.
- De déconnecter en toute sécurité les disques USB ou externes sans tracas.

Pour plus de détails sur l'installation et la gestion des plugins, consultez [Plugins](../customize-your-experience/plugins.mdx).

---

## Dépannage

### Le disque apparaît comme non montable

Si vous voyez qu'un disque dans Unraid est **non montable**, cela peut être dû à deux raisons principales :

1. If you just added a new drive to your setup, it will show as unmountable until you format it. Formatting creates a file system that allows the drive to store files. You can find the steps to format a drive [here](#creating-a-file-system-formatting).

2. If a drive that was previously working suddenly shows as unmountable, it likely has a file system issue. This can happen due to unexpected shutdowns, problems while writing data, or if the drive has been marked as disabled (which appears as a red 'x' in the %%WebGUI|web-gui%%).

:::important

Do not format an unmountable drive unless you are okay with losing all the data on it. Formatting will erase everything and update the %%parity|parity%% information, making recovery impossible. Always try to fix the file system first.

:::

Si votre disque est non montable :

1. Determine if it's a new drive or a previously working drive.
2. For new drives: Format the drive to create a new file system (see [formatting steps](#creating-a-file-system-formatting)).
3. For previously working drives: Perform a file system check or repair (see [Checking a file system](#checking-a-file-system)). Avoid formatting if you want to keep the data.

:::note

Si un lecteur est à la fois non montable et désactivé ('x' rouge), exécutez d'abord la vérification/réparation du système de fichiers sur le lecteur **émulé**. Si le lecteur émulé est également non montable et que vous tentez de le reconstruire, le nouveau lecteur sera également non montable.

:::

À partir d'Unraid 7.0, la réparation du système de fichiers XFS est maintenant entièrement automatisée via le WebGUI :

:::important[Why la parité n'est-elle pas suffisante?]

Bien que la %%parité|parity%% aide à récupérer un disque défectueux, elle ne peut pas résoudre les problèmes de système de fichiers. Si le système de fichiers est corrompu, la %%parité|parity%% ne fera que reproduire cette corruption sur le nouveau disque.

Si vous n'êtes pas sûr :

- Téléchargez les journaux de votre système en naviguant vers **Outils → Diagnostiques**.
- Pour une assistance experte, postez votre problème ainsi que les diagnostics sur les [forums d'Unraid](https://forums.unraid.net/).

:::

:::note[Just pour réitérer]

- Ne formatez que les disques non montables s'ils sont neufs ou si vous souhaitez effacer toutes les données.
- Utilisez la vérification/réparation du système de fichiers pour corriger les fichiers corrompus ; ne comptez pas sur la %%parité|parity%% pour résoudre ces problèmes.
- Pour les %%cache pools|cache-pool%% avec plusieurs disques, envisagez d'utiliser soit le %%BTRFS|btrfs%% soit le %%ZFS|zfs%%.
- Vérifiez toujours avant de formater ou de réparer des disques pour éviter la perte accidentelle de données.

:::

---

### Vérifier un système de fichiers

Si un disque qui montait sans problème auparavant montre maintenant comme **non montable**, cela indique généralement une corruption du système de fichiers. Cela peut résulter d'un arrêt inapproprié, d'une opération d'écriture échouée, ou du disque étant marqué comme désactivé dans le %%WebGUI|web-gui%%. Vérifier et réparer le système de fichiers est généralement plus rapide et plus sûr que de reconstruire, il est donc conseillé d'essayer cela avant de formater ou reconstruire le disque.

:::important

If the %%WebGUI|web-gui%% suggests formatting an unmountable drive, **do not format** unless you intend to erase all data. Formatting will destroy the contents of the drive and update %%parity|parity%%, making recovery impossible.

:::

#### Préparer à vérifier ou réparer

1. Identify the file system type:
   - In the **Main** tab, select your disk (e.g., Disk 3, Cache).
   - Find the **File system type** (should be %%XFS|xfs%%, EXT4, %%BTRFS|btrfs%%, or %%ZFS|zfs%%).

2. Start the array in the correct mode:
   - For **%%XFS|xfs%%** or **EXT4**, start the %%array|array%% in **%%Maintenance Mode|maintenance-mode%%**.
   - Pour **%%BTRFS|btrfs%%**, démarrez l'%%array|array%% en **mode normal** pour un %%scrub|scrub%% ou en **mode maintenance** pour une réparation.
   - Pour **ZFS**, référez-vous à la section **ZFS** ci-dessous.

3. If the disk is disabled and being emulated, run the check/repair on the %%emulated disk|emulated-disk%% before attempting a rebuild. If the %%emulated disk|emulated-disk%% is unmountable, the rebuilt disk will also be unmountable.

#### Messages d'erreur courants

| Message                                                                 | Signification / Action                                                                |
| ----------------------------------------------------------------------- | ------------------------------------------------------------------------------------- |
| **Superblock a un mauvais nombre magique**                              | Corruption sévère; tentez une réparation du système de fichiers.                      |
| **Système de fichiers est sale**                                        | Arrêt non net ; effectuez une vérification du système de fichiers.                    |
| **Corruption de métadonnées détectée**                                  | Les structures du système de fichiers sont endommagées ; initier une réparation.      |
| **Aucun %%BTRFS\|btrfs%% valide trouvé**                                | Le disque peut ne pas appartenir à un pool valide; vérifiez les assignations de pool. |
| **Montage: mauvais type fs, mauvaise option, etc.**                     | Sélection incorrecte du système de fichiers ou disque non formaté.                    |
| **Impossible de monter /dev/mdX: La structure a besoin d'un nettoyage** | Le système de fichiers est corrompu; effectuez une réparation.                        |

#### Checking via the WebGUI

1. Start the %%array|array%% in the correct mode (refer to the steps above).
2. In the **Main** tab, select the disk you wish to check.
3. Scroll to **Check Filesystem Status**.
4. For XFS: You will see a **CHECK** button without any options to enter. The system automatically determines the necessary actions based on the check results.
5. For other file systems: Enter any necessary options (for details, see **Help** in the upper right).
6. Click **Check** to initiate the process.
7. Monitor progress in the output box. Use **Refresh** if required.
8. Review results. If uncertain, copy the output and post it on the [forums](https://forums.unraid.net/) for advice.

#### XFS automatic repair workflow

XFS file system repair is fully automated through the WebGUI:

1. Click the **CHECK** button (no options to enter)
2. Check results:
   - **Aucune corruption détectée** : Affiche "aucune corruption du système de fichiers détectée" et le bouton **VÉRIFIER** reste
   - **Corruption détectée** : Affiche "corruption du système de fichiers détectée" et un bouton **RÉPARER** apparaît
3. Click **FIX** to automatically repair the file system
4. If needed, a **ZERO LOG** button may appear
5. Shows "filesystem repaired" when the process is complete

Ce système automatisé élimine le besoin pour les utilisateurs d'entrer manuellement des options de réparation et garantit que la séquence de réparation correcte est suivie.

#### Checking via the command line

<Tabs>
  <TabItem value="xfs" label="XFS">
    <FsCheckCliXfs />
  </TabItem>

  <TabItem value="btrfs" label="BTRFS">
    <FsCheckCliBtrfs />
  </TabItem>

  <TabItem value="zfs" label="ZFS">
    <FsCheckCliZfs />
  </TabItem>
</Tabs>

:::tip

- Les réparations du système de fichiers sont généralement plus rapides qu'une reconstruction complète et peuvent restaurer l'accès sans perte de données.
- Reconstruire un disque ne résout **pas** la corruption du système de fichiers ; effectuez toujours une vérification ou une réparation d'abord.
- Si vous avez des doutes, publiez vos diagnostics et messages d'erreur sur les [forums d'Unraid](https://forums.unraid.net/) pour obtenir de l'aide d'experts.

:::

---

### Réparation d'un système de fichiers

Si une vérification de votre système de fichiers trouve des erreurs, vous devrez peut-être exécuter une réparation pour retrouver l'accès à vos données. Les réparations prennent généralement moins de temps qu'une reconstruction complète, mais il est important de lire attentivement la sortie et de demander de l'aide sur les [forums](https://forums.unraid.net/) si vous n'êtes pas sûr de quelque chose.

:::note\[Timing]

Les réparations peuvent prendre de quelques minutes à plusieurs heures, surtout pour les systèmes de fichiers plus grands ou lourdement corrompus. Le progrès peut sembler lent, mais vous pouvez vérifier l'activité en regardant les statistiques de lecture/écriture sur la page principale.

:::

#### Préparer la réparation

1. In the **Main** tab, click the disk and identify the file system type (%%XFS|xfs%%, EXT4, %%BTRFS|btrfs%%, or %%ZFS|zfs%%).

2. Start the array in the correct mode:

   - **For %%XFS|xfs%% or EXT4:** Use **%%Maintenance Mode|maintenance-mode%%**.
   - **Pour %%BTRFS|btrfs%% :** Utilisez **mode normal** pour un %%scrub|scrub%% ; utilisez **module de maintenance** pour une réparation.
   - **For %%ZFS|zfs%%:** Use **Normal mode** and run a %%scrub|scrub%% to check for errors. See the [ZFS storage page](../../advanced-configurations/optimize-storage/zfs-storage.mdx) for guidance on %%ZFS|zfs%% pool maintenance and repair procedures.

3. If the disk is disabled and being emulated, run the repair on the %%emulated disk|emulated-disk%% before trying to do a rebuild.

#### Repairing via the WebGUI

1. Start the %%array|array%% in the correct mode (refer to the section above).
2. In the **Main** tab, click the disk you want to repair.
3. Scroll down to **Check Filesystem Status**.
4. For XFS: The repair process is fully automated. Click **CHECK**, then **FIX** if corruption is detected, and **ZERO LOG** if prompted.
5. For other file systems: Remove any options that would run the process in check-only mode (like `--readonly` for %%BTRFS|btrfs%%).
6. If prompted, add the suggested options as indicated in the check output.
7. Click **Check** to begin the repair.
8. Monitor progress in the output box. Use **Refresh** if needed.
9. If you notice a `lost+found` folder after the repair, it may contain files or folders that couldn't be fully recovered. Use backups or the Linux `file` command to identify the contents if necessary.

:::info

Si vous n'êtes pas sûr de la sortie, copiez-la et partagez-la sur les [forums Unraid](https://forums.unraid.net/) pour une aide experte. Utilisez l'option de formatage de code pour la rendre lisible.

:::

#### Repairing via the command line

<Tabs>
  <TabItem value="xfs" label="XFS">
    <FsRepairCliXfs />
  </TabItem>

  <TabItem value="btrfs" label="BTRFS">
    <FsRepairCliBtrfs />
  </TabItem>

  <TabItem value="zfs" label="ZFS">
    <FsRepairCliZfs />
  </TabItem>
</Tabs>

:::info[After la réparation]

- Arrêtez et redémarrez le %%array|array%% en **mode normal**.
- Le lecteur devrait maintenant être monté et accessible.
- Si vous voyez un dossier `lost+found`, vérifiez son contenu pour d'éventuels fichiers importants.

:::

Si vous ne comprenez pas le résultat de la réparation ou si le processus échoue, partagez vos diagnostics et le journal de réparation sur les [forums d'Unraid](https://forums.unraid.net/) pour obtenir de l'aide supplémentaire.
