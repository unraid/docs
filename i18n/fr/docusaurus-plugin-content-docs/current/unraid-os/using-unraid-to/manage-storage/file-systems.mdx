---
sidebar_position: 4
sidebar_label: Systèmes de fichiers
---

# Systèmes de fichiers

### Sélection d'un type de système de fichiers

Sélectionner le bon système de fichiers pour votre %%array|array%% Unraid ou %%cache pool|cache-pool%% est crucial. Cela vous aide à obtenir un équilibre entre performance, protection des données et fonctionnalités avancées. Unraid supporte plusieurs systèmes de fichiers modernes Linux, chacun avec ses propres forces uniques et cas d'utilisation spécifiques.

| Système de fichiers | Protection des données                                                                | Efficacité de l'espace                  | Fonctionnalités avancées                                         | Meilleur cas d'utilisation                                       |
| ------------------- | ------------------------------------------------------------------------------------- | --------------------------------------- | ---------------------------------------------------------------- | ---------------------------------------------------------------- |
| %%XFS\|xfs%%        | Aucune redondance intégrée                                                            | 100 %                                   | Résistant à la corruption                                        | Par défaut pour les disques d'une baie ; haute fiabilité         |
| %%ZFS\|zfs%%        | %%RAIDZ1\|raidz1%%/%%RAIDZ2\|raidz2%%/%%RAIDZ3\|raidz3%%, miroirs, etc.               | Varie selon le niveau de %%RAID\|raid%% | %%Checksums\|checksum%%, %%Snapshots\|snapshot%%, %%RAID\|raid%% | Baies multi-appareils, %%VMs\|vm%%, Docker, utilisateurs avancés |
| %%BTRFS\|btrfs%%    | %%RAID 0\|raid0%%/%%RAID 1\|raid1%%/%%10\|raid10%%/%%5\|raid5%%/%%6\|raid6%%, miroirs | Varie selon le niveau de %%RAID\|raid%% | %%Checksums\|checksum%%, %%Snapshots\|snapshot%%, %%RAID\|raid%% | Baies multi-appareils, mélange SSD/HDD, baies flexibles          |

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import FileSystemXfs from './partials/file-system-xfs.mdx';
import FileSystemZfs from './partials/file-system-zfs.mdx';
import FileSystemBtrfs from './partials/file-system-btrfs.mdx';
import BtrfsBalance from './partials/btrfs-balance.mdx';
import BtrfsScrub from './partials/btrfs-scrub.mdx';
import FsCheckCliXfs from './partials/fs-check-cli-xfs.mdx';
import FsCheckCliBtrfs from './partials/fs-check-cli-btrfs.mdx';
import FsCheckCliZfs from './partials/fs-check-cli-zfs.mdx';
import FsRepairCliXfs from './partials/fs-repair-cli-xfs.mdx';
import FsRepairCliBtrfs from './partials/fs-repair-cli-btrfs.mdx';
import FsRepairCliZfs from './partials/fs-repair-cli-zfs.mdx';

<Tabs>
  <TabItem value="xfs" label="XFS" default>
    <FileSystemXfs />
  </TabItem>

  <TabItem value="zfs" label="ZFS">
    <FileSystemZfs />
  </TabItem>

  <TabItem value="btrfs" label="BTRFS">
    <FileSystemBtrfs />
  </TabItem>
</Tabs>

:::note[Additional Notes]

- Mélanger différents types de systèmes de fichiers dans votre système Unraid est tout à fait acceptable ; le système de %%parité|parity%% d'Unraid fonctionne indépendamment du système de fichiers utilisé.
- Formatez toujours et partitionnez les disques dans Unraid pour assurer la compatibilité.
- Les systèmes Linux peuvent lire ces systèmes de fichiers nativement ; cependant, Windows et macOS nécessitent des logiciels supplémentaires pour y accéder.
- Vous pouvez <u>chiffrer</u> des disques pour une sécurité accrue, mais gardez à l'esprit que les disques chiffrés peuvent poser des défis pour la récupération en cas de corruption.
- For transfer drives or external devices, it's recommended to use the **[Unassigned Devices](#using-the-unassigned-devices-plugins)** plugin, which supports additional file systems.

:::

:::tip[Still need help choosing?]

- **For array drives:** %%XFS|xfs%% is generally the best choice for most users.
- **For high-performance or advanced features:** Choose %%ZFS|zfs%% or %%BTRFS|btrfs%% for %%cache pools|cache-pool%% or multi-device setups.
- **For mixed or expanding pools:** %%BTRFS|btrfs%% is ideal if you want to use different drive sizes or easily add or remove devices.

If you're uncertain, starting with the defaults is a good approach: use %%XFS|xfs%% for %%array|array%% drives and %%BTRFS|btrfs%% for %%cache pools|cache-pool%%.

:::

---

## Setting a file system type

When adding a new drive to Unraid, you can select the file system type that works best for your needs. The file system determines how data is organized and protected on the disk.

To set the file system type:

1. **Set the default globally**:
   - Navigate to ***Settings → Disk Settings*** to set the default file system for new %%array|array%% drives only.
   - Unraid defaults to %%XFS|xfs%% for %%array|array%% drives.
   - **Note:** There is currently no global default setting for %%cache pools|cache-pool%%. They will always default to %%BTRFS|btrfs%% if left to "auto".

2. **Set the file system for an individual drive**:
   - Arrêtez le %%array|array%%.
   - Click on the drive in the **Main** tab.
   - Choose your desired file system type from the drop-down menu.
   - If you select **auto**, Unraid will use the global default.
   - For multi-device %%cache pools|cache-pool%%, only %%BTRFS|btrfs%% or %%ZFS|zfs%% are supported.

---

## Creating a file system (formatting)

Before using a new disk in Unraid, you must format it with the selected file system. **Remember, formatting will erase all existing content on the drive.**

To begin with formatting:

1. **Start the %%array|array%%**.
2. **Identify unmountable drives**: Drives that are not recognized will appear as **unmountable**.
3. **Verify drive selection**: Verify that all unmountable drives are the ones you want to format.
4. **Confirm and format**: Check the box to confirm, read the warning dialog carefully, and click **Format**.
5. **Monitor the process**: The format process will begin. For new disks, Unraid will first rewrite the partition table.
6. **Wait for completion**: Formatting usually takes a few minutes. If you don't see progress, refresh the **Main** tab.

Once formatting is complete, the drive is ready to store files.

---

## Changing a file system type

You may want to change the file system type on a specific drive to take advantage of new features or to ensure compatibility with your other drives.

:::warning

Changing the file system type will **erase all existing data** on the drive. Always back up any important files before proceeding.

:::

To change the file system type on a particular drive:

1. **Stop the array**: Begin by stopping your %%array|array%% to ensure no operations are occurring during the change.
2. **Select the drive**: In the **Main** tab, click on the drive that you want to change the format for.
3. **Choose the new file system**: From the drop-down menu, select the desired file system format. If you have multiple drives to change, repeat this step for each one.
4. **Start the array**: Once you have selected the new file systems, start your %%array|array%% again.
5. **Format unmountable drives**: The **Main** tab will display an option to format unmountable drives. Take a moment to check the list and ensure that only the drives you intend to change are included.
6. **Confirm and format**: Check the confirmation box to acknowledge the change, then click the **Format** button to proceed.
7. **Wait for the process to finish**: Formatting usually takes just a few minutes. If you notice that the status isn't updating, you can refresh the **Main** tab to check the progress.

If you encounter any issues, feel free to visit the [Unraid forums](https://forums.unraid.net/). Attach your system diagnostics zip file (found under ***Tools → Diagnostics***) for assistance.

---

## Converting to a new file system type

:::important

Starting with Unraid 7.2, the ***Main*** page will warn if any array or pool drives are formatted in legacy filesystems:

- Tous les disques formatés en ReiserFS doivent être migrés vers un autre système de fichiers dès que possible, car ils ne seront plus utilisables dans une future version d'Unraid (probablement Unraid 7.3).
- Any drives formatted in an older version of XFS need to be migrated before 2030.

:::

Ce processus est particulièrement courant pour les utilisateurs passant du ReiserFS obsolète (utilisé dans les anciennes versions d'Unraid) au %%XFS|xfs%% ou au %%BTRFS|btrfs%%, mais il s'applique à toute conversion de système de fichiers.

:::important

Ce processus nécessite de déplacer temporairement vos données vers un autre emplacement. Assurez-vous d'avoir suffisamment d'espace libre ailleurs dans votre %%array|array%% ou sur un appareil externe avant de commencer.

:::

Pour convertir en toute sécurité vers un nouveau type de système de fichiers :

1. **Copiez toutes les données du lecteur :** Déplacez vos fichiers vers un autre emplacement. Cela pourrait être un autre lecteur dans votre %%array|array%%, un %%cache pool|cache-pool%%, ou une sauvegarde externe.
   - Avant Unraid 7.0, vous devrez déplacer les fichiers manuellement.
   - À partir de Unraid 7.0, vous pouvez déplacer des fichiers [utiliser 'mover' pour vider un disque de la matrice](../../release-notes/7.0.0.md#using-mover-to-empty-an-array-disk) vers d'autres disques de la matrice via la ligne de commande.
   - À partir de Unraid 7.2, vous pouvez vider un disque de la matrice vers d'autres disques de la matrice via le WebGUI :
     - Naviguez vers ***Principal → Opération de la matrice*** et arrêtez la matrice.
     - Naviguez vers ***Paramètres → Paramètres de partage global***. Dans la zone **Vider disque(s)**, sélectionnez le(s) disque(s) à vider et **Appliquer**. Note : ce statut sera automatiquement supprimé lorsque la matrice est arrêtée.
     - Naviguez vers ***Principal → Opération de la matrice*** et démarrez la matrice.
     - Sur ***Principal → Opération de la matrice*** cliquez sur **Déplacer** (ou attendez que le mover s'exécute selon son calendrier normal).
     - Mover vide le disque selon vos paramètres de partage. Notez que les fichiers à la racine du lecteur sont en dehors de tout partage et ne seront pas déplacés.
     - Vérifiez ***Outils → Journal du système*** pour les messages concernant les fichiers qui n'ont pas pu être déplacés en raison d'une utilisation ou d'un manque d'espace libre.
   - Naviguez vers ***Principal → Périphériques de la matrice*** et explorez le disque pour confirmer qu'il est vide. Ne continuez que lorsque vous êtes certain que le disque est vide.
2. **Changez le type de système de fichiers :** Suivez la procédure pour [changer un type de système de fichiers](#changing-a-file-system-type). Cela formatera le lecteur et effacera tout le contenu, vous laissant avec un lecteur vierge dans le nouveau format.
3. **Copiez vos données arrière** : (Facultatif) Selon l'endroit où vous avez déplacé les fichiers, vous voudrez peut-être les déplacer de nouveau sur le disque nouvellement formaté.
4. **Répétez au besoin** : Si vous avez plus d'un disque à convertir, répétez ces étapes pour chaque disque, en transférant les données selon les besoins.

:::note\[Timing]

Le processus peut prendre plusieurs heures, en fonction de la quantité de données et de la vitesse de vos lecteurs. La majeure partie du temps est consacrée à la copie des fichiers, qui peut être effectuée sans surveillance.

:::

---

## Reformatage d'un disque

Reformater un lecteur dans Unraid effacera toutes vos données et créera un nouveau système de fichiers vide. Ce processus est utile pour résoudre les erreurs de système de fichiers persistantes ou pour repartir à zéro avec un nouveau format.

:::warning

Le reformatage effacera définitivement toutes les données sur le lecteur. Sauvegardez toujours les fichiers importants avant de commencer.

:::

Pour reformater **en toute sécurité** votre disque :

1. **Arrêtez la matrice**.
2. **Changez le type de système de fichiers** :
   - Allez à l'onglet **Principal** et cliquez sur le disque que vous souhaitez reformater.
   - Sélectionnez un type de système de fichiers différent (par exemple, changez de %%XFS|xfs%% à %%BTRFS|btrfs%%).
   - Démarrez le %%array|array%%, et le disque s'affichera comme **non montable**.
   - Lorsque vous y êtes invité, formatez le disque.
3. **(Optionnel) Revenez à votre type de système de fichiers d'origine** :
   - Arrêtez à nouveau le %%array|array%%.
   - Changez le système de fichiers à votre type préféré.
   - Démarrez le %%array|array%% et formatez à nouveau le disque.

Ce processus simple garantit que le lecteur est complètement effacé et formaté comme vous le souhaitez. Le processus de formatage prend généralement juste quelques minutes.

### Reformatage d'un disque cache

Parfois, il est nécessaire de reformater un disque %%cache|cache%% pour les raisons suivantes :

- Pour changer le type de système de fichiers (par exemple, de %%BTRFS|btrfs%% à %%XFS|xfs%% ou vice versa)
- Pour corriger des erreurs persistantes du système de fichiers
- Pour démarrer à neuf pour de nouvelles charges de travail

<h4>Procédure recommandée pour reformater un disque de cache</h4>

1. **Arrêtez la matrice**.
2. **Désactivez les services Docker et %%VM|vm%%** dans **Paramètres**.
3. **Démarrez la baie** (cela empêchera les onglets Docker et %%VM|vm%% d'apparaître).

Pour déplacer les données hors du cache :

4. **Définissez le stockage partagé et l'action du Mover (cache → array) :** Pour chaque partage ayant des fichiers dans le %%cache|cache%%, définissez le **Stockage principal** à la source %%cache|cache%% pool et le **Stockage secondaire** à l'%%array|array%%. Réglez l'**action du Mover** sur **cache → array**.
   - Notez tout partage que vous modifiez et leurs réglages d'origine.
5. **Exécutez le %%Mover|mover%% :** Exécutez le %%Mover|mover%% depuis l'onglet **Principal**. Attendez qu'il finisse et assurez-vous que le %%cache|cache%% est vide.
   - Si des fichiers restent, arrêtez et consultez les forums pour obtenir de l'aide.

Pour reformater le disque cache :

6. **Arrêtez la matrice**.
7. **Définissez le format du disque de cache** (choisissez entre %%XFS|xfs%% ou %%BTRFS|btrfs%%).
   - Pour un %%cache|cache%% à un seul disque, %%XFS|xfs%% est l'option recommandée.
   - Notez que %%XFS|xfs%% est disponible uniquement si vous avez un seul emplacement de %%cache|cache%%.
8. **Démarrez la matrice**.
9. **Formatez le disque cache** :
   - Confirmez que seul le disque du %%cache|cache%% est répertorié comme non montable.
   - Procéder au formatage du disque.

Pour restaurer les données et les paramètres :

10. **Restaurez les paramètres de partage** : Pour chaque partage que vous avez modifié, rétablissez les valeurs originales de **Stockage principal** et **Stockage secondaire**.
11. **Déplacez les données (array → cache) :** Réglez le **Stockage principal** à la destination %%cache|cache%% pool et le **Stockage secondaire** à l'%%array|array%% pour chaque partage que vous avez changé. Réglez l'**action du Mover** sur **array → cache**, puis exécutez à nouveau le %%Mover|mover%% pour déplacer vos données de retour vers le %%cache|cache%%.
12. **Arrêtez la matrice**.
13. **Réactivez les services Docker et VM**.
14. **Démarrez la matrice**.

:::note\[Timing]

Le temps nécessaire pour déplacer les données avec le **Mover** et formater le disque peut varier de plusieurs minutes à plusieurs heures, selon la quantité de données et la vitesse du disque.

:::

---

## Opérations BTRFS

Maintenir vos pools %%BTRFS|btrfs%% dans Unraid est essentiel pour assurer leur bon fonctionnement et la sécurité de vos données. Deux outils clés que vous voudrez utiliser régulièrement sont **Balance** et **Scrub**. Ces opérations aident à résoudre les problèmes d'allocation d'espace, à optimiser l'utilisation de votre stockage, et à protéger vos données contre la corruption cachée.

Décomposons ce que fait chaque opération et quand les utiliser :

<Tabs>
  <TabItem value="équilibre" label="Équilibre" default>
    <BtrfsBalance />
  </TabItem>

  <TabItem value="nettoyer" label="Nettoyer">
    <BtrfsScrub />
  </TabItem>
</Tabs>

:::tip

Tant **Balance** que **Scrub** peuvent être effectués pendant que le système est en ligne, mais gardez à l'esprit que la performance peut être affectée pendant ces opérations. Vous pouvez surveiller l'avancement dans le %%WebGUI|web-gui%%.

:::

Pour plus de détails sur les fonctionnalités avancées %%BTRFS|btrfs%%, consultez [la documentation officielle BTRFS](https://btrfs.readthedocs.io/en/latest/Introduction.html).

---

## Disques non assignés

Les lecteurs non assignés sont des dispositifs de stockage connectés à votre serveur Unraid qui ne font pas partie de l'%%array|array%% principal ou de tout %%cache pool|cache-pool%%. Vous pouvez utiliser ces lecteurs pour transférer des fichiers, créer des backups, ou fournir un stockage rapide pour des %%machines virtuelles|vm%%.

:::note

Tous les lecteurs connectés à votre serveur au démarrage de l'%%array|array%% comptent vers votre limite de licence de périphériques attachés Unraid, même s'ils ne sont pas assignés à l'%%array|array%% ou à un pool.

:::

<h4>Utilisations courantes pour les disques non assignés</h4>

- Connectez des disques amovibles pour des transferts de fichiers ou des sauvegardes faciles.
- Utilisez des disques dédiés pour des tâches haute performance comme exécuter des machines virtuelles ou pour du stockage temporaire de données.

### Utilisation des plugins Unassigned Devices

Pour tirer le meilleur parti de vos disques non assignés, envisagez d'installer les plugins suivants depuis l'onglet **Apps** :

- **[Périphériques non attribués](https://unraid.net/community/apps?q=dlandon\&r=0#:~:text=and%20iso%20files.-,Unassigned%20Devices,-dlandon):** Ce plugin vous permet de monter, partager et gérer des disques avec des systèmes de fichiers pris en charge par Unraid, comme %%XFS|xfs%%, %%BTRFS|btrfs%% ou NTFS.

- **[Unassigned Devices Plus](https://unraid.net/community/apps?q=dlandon\&r=0#:~:text=and%20iso%20files.-,Unassigned%20Devices%20Plus,-\(Addon\))** : Cette extension élargit vos options en supportant des systèmes de fichiers supplémentaires, y compris ExFAT et HFS+.

Ces plugins permettent :

- De monter et démonter facilement des disques depuis l'interface web d'Unraid.
- Partager vos disques non assignés sur le réseau.
- D'automatiser le montage lors du démarrage du serveur.
- De formater ou d'effacer des disques pour une utilisation future.
- De déconnecter en toute sécurité les disques USB ou externes sans tracas.

Pour plus de détails sur l'installation et la gestion des plugins, consultez [Plugins](../customize-your-experience/plugins.mdx).

---

## Dépannage

### Le disque apparaît comme non montable

Si vous voyez qu'un disque dans Unraid est **non montable**, cela peut être dû à deux raisons principales :

1. **Nouveau lecteur ajouté :** Si vous venez d'ajouter un nouveau lecteur à votre configuration, il apparaîtra comme non montable jusqu'à ce que vous le formatiez. Le formatage crée un système de fichiers qui permet au disque de stocker des fichiers. Vous pouvez trouver les étapes pour formater un lecteur [ici](#creating-a-file-system-formatting).

2. **Problèmes de système de fichiers :** Si un lecteur qui fonctionnait auparavant montre soudainement comme non montable, il a probablement un problème de système de fichiers. Cela peut arriver en raison d'arrêts inattendus, de problèmes lors de l'écriture de données, ou si le lecteur a été marqué comme désactivé (ce qui apparaît comme un 'x' rouge dans le %%WebGUI|web-gui%%).

:::important

Do not format an unmountable drive unless you are okay with losing all the data on it. Formatting will erase everything and update the %%parity|parity%% information, making recovery impossible. Always try to fix the file system first.

:::

Si votre disque est non montable :

1. **Identifiez la situation** : Déterminez s'il s'agit d'un nouveau disque ou d'un disque fonctionnant précédemment.
2. **Pour les nouveaux disques** : Formatez le disque pour créer un nouveau système de fichiers (consultez les [étapes de formatage](#creating-a-file-system-formatting)).
3. **Pour les lecteurs qui fonctionnaient auparavant :** Effectuez une vérification ou une réparation du système de fichiers (voir [Vérification d'un système de fichiers](#checking-a-file-system)). Évitez de formater si vous souhaitez conserver les données.

:::note

Si un lecteur est à la fois non montable et désactivé ('x' rouge), exécutez d'abord la vérification/réparation du système de fichiers sur le lecteur **émulé**. Si le lecteur émulé est également non montable et que vous tentez de le reconstruire, le nouveau lecteur sera également non montable.

:::

Réparer le système de fichiers prend généralement moins de temps que de reconstruire le lecteur, vous permettant d'accéder à vos données sans rien perdre. Rappelez-vous, reconstruire un lecteur ne résout **pas** les problèmes de système de fichiers ; il assure simplement que le lecteur physique correspond à celui émulé, en conservant les problèmes existants.

:::important[Why la parité n'est-elle pas suffisante?]

While %%parity|parity%% helps recover a failed drive, it cannot fix file system problems. If the file system is corrupted, %%parity|parity%% will simply replicate that corruption to the new drive.

Si vous n'êtes pas sûr :

- Téléchargez les journaux de votre système en naviguant vers **Outils → Diagnostiques**.
- For expert help, post your issue along with the diagnostics on the [Unraid forums](https://forums.unraid.net/).

:::

:::note[Just pour réitérer]

- Ne formatez que les disques non montables s'ils sont neufs ou si vous souhaitez effacer toutes les données.
- Utilisez la vérification/réparation du système de fichiers pour corriger les fichiers corrompus ; ne comptez pas sur la %%parité|parity%% pour résoudre ces problèmes.
- Pour les %%cache pools|cache-pool%% avec plusieurs disques, envisagez d'utiliser soit le %%BTRFS|btrfs%% soit le %%ZFS|zfs%%.
- Always double-check before formatting or repairing drives to avoid accidental loss of data.

:::

---

### Vérifier un système de fichiers

Si un disque qui montait sans problème auparavant montre maintenant comme **non montable**, cela indique généralement une corruption du système de fichiers. Cela peut résulter d'un arrêt inapproprié, d'une opération d'écriture échouée, ou du disque étant marqué comme désactivé dans le %%WebGUI|web-gui%%. Vérifier et réparer le système de fichiers est généralement plus rapide et plus sûr que de reconstruire, il est donc conseillé d'essayer cela avant de formater ou reconstruire le disque.

:::important

Si le %%WebGUI|web-gui%% suggère de formater un lecteur non montable, <strong>ne formatez pas</strong> à moins que vous n'ayez l'intention d'effacer toutes les données. Le formatage détruira le contenu du lecteur et mettra à jour la %%parité|parity%%, rendant la récupération impossible.

:::

<h4>Préparation à la vérification ou à la réparation</h4>

1. **Identifiez le type de système de fichiers** :
   - Accédez à l'onglet **Principal** et sélectionnez votre disque (ex : Disque 3, Cache).
   - Trouvez le **type de système de fichiers** (doit être %%XFS|xfs%%, %%BTRFS|btrfs%% ou %%ZFS|zfs%%).

2. **Démarrez le réseau en mode correct** :
   - Pour **%%XFS|xfs%%**, démarrez la %%array|array%% en mode **%%maintenance|maintenance-mode%%**.
   - Pour **%%BTRFS|btrfs%%**, démarrez l'%%array|array%% en **mode normal** pour un %%scrub|scrub%% ou en **mode maintenance** pour une réparation.
   - Pour **ZFS**, référez-vous à la section **ZFS** ci-dessous.

3. **Handle emulated disks**: If the disk is disabled and being emulated, run the check/repair on the %%emulated disk|emulated-disk%% before attempting a rebuild. If the %%emulated disk|emulated-disk%% is unmountable, the rebuilt disk will also be unmountable.

<h4>Messages d'erreur courants</h4>

| Message                                                                 | Signification / Action                                                                |
| ----------------------------------------------------------------------- | ------------------------------------------------------------------------------------- |
| **Superblock a un mauvais nombre magique**                              | Corruption sévère; tentez une réparation du système de fichiers.                      |
| **Système de fichiers est sale**                                        | Arrêt non net ; effectuez une vérification du système de fichiers.                    |
| **Corruption de métadonnées détectée**                                  | Les structures du système de fichiers sont endommagées ; initier une réparation.      |
| **Aucun %%BTRFS\|btrfs%% valide trouvé**                                | Le disque peut ne pas appartenir à un pool valide; vérifiez les assignations de pool. |
| **Montage: mauvais type fs, mauvaise option, etc.**                     | Sélection incorrecte du système de fichiers ou disque non formaté.                    |
| **Impossible de monter /dev/mdX: La structure a besoin d'un nettoyage** | Le système de fichiers est corrompu; effectuez une réparation.                        |

#### Via le WebGUI

1. **Démarrez l'array :** Démarrez l'%%array|array%% en mode correct (reportez-vous aux étapes ci-dessus).
2. **Sélectionnez le disque** : Allez à l'onglet **Principal** et sélectionnez le disque à vérifier.
3. **Accédez aux options de vérification** : Faites défiler jusqu'à **Vérifier l'état du système de fichiers**.
4. **Pour XFS (Unraid 7.0+) :** Vous verrez un bouton **VÉRIFIER** sans options à entrer. Le système détermine automatiquement les actions nécessaires en fonction des résultats de la vérification.
5. **Pour d'autres systèmes de fichiers** : Entrez toute option nécessaire (pour les détails, consultez **Aide** en haut à droite).
6. **Commencez la vérification** : Cliquez sur **Vérifier** pour lancer.
7. **Surveillez les progrès :** Surveillez les progrès dans la boîte de sortie. Utilisez **Rafraîchir** si nécessaire.
8. **Passez en revue les résultats :** Passez en revue les résultats. Si vous n'êtes pas sûr, copiez la sortie et postez-la sur les [forums](https://forums.unraid.net/) pour obtenir des conseils.

#### Flux de travail de réparation automatique XFS (Unraid 7.0+)

À partir d'Unraid 7.0, la réparation du système de fichiers XFS est maintenant entièrement automatisée via le WebGUI :

1. **Vérification initiale** : Cliquez sur le bouton **VÉRIFIER** (aucune option à entrer)
2. **Résultats de la vérification** :
   - **Aucune corruption détectée** : Affiche "aucune corruption du système de fichiers détectée" et le bouton **VÉRIFIER** reste
   - **Corruption détectée** : Affiche "corruption du système de fichiers détectée" et un bouton **RÉPARER** apparaît
3. **Processus de réparation** : Cliquez sur **RÉPARER** pour réparer automatiquement le système de fichiers
4. **Actions supplémentaires** : Si nécessaire, un bouton **ZERO LOG** peut apparaître
5. **Achèvement** : Affiche "système de fichiers réparé" lorsque le processus est terminé

Ce système automatisé élimine le besoin pour les utilisateurs d'entrer manuellement des options de réparation et garantit que la séquence de réparation correcte est suivie.

#### Via la ligne de commande

<Tabs>
  <TabItem value="xfs" label="XFS">
    <FsCheckCliXfs />
  </TabItem>

  <TabItem value="btrfs" label="BTRFS">
    <FsCheckCliBtrfs />
  </TabItem>

  <TabItem value="zfs" label="ZFS">
    <FsCheckCliZfs />
  </TabItem>
</Tabs>

:::tip

- Les réparations du système de fichiers sont généralement plus rapides qu'une reconstruction complète et peuvent restaurer l'accès sans perte de données.
- Reconstruire un disque ne résout **pas** la corruption du système de fichiers ; effectuez toujours une vérification ou une réparation d'abord.
- If you have doubts, post your diagnostics and error messages on the Unraid [forums](https://forums.unraid.net/) for expert assistance.

:::

---

### Réparation d'un système de fichiers

Si une vérification de votre système de fichiers trouve des erreurs, vous devrez peut-être exécuter une réparation pour retrouver l'accès à vos données. Les réparations prennent généralement moins de temps qu'une reconstruction complète, mais il est important de lire attentivement la sortie et de demander de l'aide sur les [forums](https://forums.unraid.net/) si vous n'êtes pas sûr de quelque chose.

:::note\[Timing]

Les réparations peuvent prendre de quelques minutes à plusieurs heures, surtout pour les systèmes de fichiers plus grands ou lourdement corrompus. Le progrès peut sembler lent, mais vous pouvez vérifier l'activité en regardant les statistiques de lecture/écriture sur la page principale.

:::

<h4>Préparation à la réparation</h4>

1. **Identifier le type de système de fichiers** : Allez à l'onglet **Principal**, cliquez sur le disque, et découvrez de quel type de système de fichiers il s'agit (%%XFS|xfs%%, %%BTRFS|btrfs%%, ou %%ZFS|zfs%%).

2. **Démarrez le réseau en mode correct** :

   - **Pour %%XFS|xfs%% :** Utilisez **module de maintenance**.
   - **Pour %%BTRFS|btrfs%% :** Utilisez **mode normal** pour un %%scrub|scrub%% ; utilisez **module de maintenance** pour une réparation.
   - **Pour %%ZFS|zfs%% :** Utilisez le **mode normal** et exécutez un %%scrub|scrub%% pour vérifier les erreurs. Consultez la [page de stockage ZFS](../../advanced-configurations/optimize-storage/zfs-storage.mdx) pour obtenir des conseils sur l'entretien et les procédures de réparation des pools %%ZFS|zfs%%.

3. **Gérer les disques émulés** : Si le disque est désactivé et est en cours d'émulation, effectuez la réparation sur le %%emulated disk|disque émulé%% avant de tenter une reconstruction.

#### Via le WebGUI

1. **Démarrez le réseau**: Démarrez le %%array|array%% en mode correct (voir la section ci-dessus).
2. **Sélectionnez le disque**: Allez à l'onglet **Principal** et cliquez sur le disque que vous souhaitez réparer.
3. **Accéder aux options de réparation**: Faites défiler vers le bas jusqu'à **Vérification de l'état du système de fichiers**.
4. **Pour XFS (Unraid 7.0+) :** Le processus de réparation est entièrement automatisé. Cliquez sur **VÉRIFIER**, puis **RÉPARER** si une corruption est détectée, et **ZERO LOG** si on vous le demande.
5. **Pour d'autres systèmes de fichiers** : Supprimez toutes les options qui exécuteraient le processus en mode vérification seule (comme `--readonly` pour %%BTRFS|btrfs%%).
6. **Ajoutez les options suggérées** : Si vous y êtes incité, ajoutez les options suggérées comme indiqué dans les résultats de vérification.
7. **Commencer la réparation** : Cliquez sur **Vérifier** pour commencer la réparation.
8. **Surveillez les progrès :** Gardez un œil sur les progrès dans la boîte de sortie. Utilisez **Rafraîchir** si nécessaire.
9. **Vérifiez les fichiers perdus :** Si vous remarquez un dossier `lost+found` après la réparation, il peut contenir des fichiers ou dossiers qui n'ont pas pu être entièrement récupérés. Utilisez des sauvegardes ou la commande `file` de Linux pour identifier le contenu si nécessaire.

:::info

Si vous n'êtes pas sûr de la sortie, copiez-la et partagez-la sur les [forums Unraid](https://forums.unraid.net/) pour une aide experte. Utilisez l'option de formatage de code pour la rendre lisible.

:::

#### Via la ligne de commande

<Tabs>
  <TabItem value="xfs" label="XFS">
    <FsRepairCliXfs />
  </TabItem>

  <TabItem value="btrfs" label="BTRFS">
    <FsRepairCliBtrfs />
  </TabItem>

  <TabItem value="zfs" label="ZFS">
    <FsRepairCliZfs />
  </TabItem>
</Tabs>

:::info[After la réparation]

- Arrêtez et redémarrez le %%array|array%% en **mode normal**.
- Le lecteur devrait maintenant être monté et accessible.
- If you see a `lost+found` folder, check its contents for any important files.

:::

Si vous ne comprenez pas le résultat de la réparation ou si le processus échoue, partagez vos diagnostics et le journal de réparation sur les [forums d'Unraid](https://forums.unraid.net/) pour obtenir de l'aide supplémentaire.
