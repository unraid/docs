---
sidebar_position: 2
sidebar_label: Configuration de l'Array
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import AddDataDiskParityProtected from './partials/add-data-disk-parity-protected.mdx';
import AddDataDiskNoParity from './partials/add-data-disk-no-parity.mdx';
import ParitySwapWhat from './partials/parity-swap-what.mdx';
import ParitySwapWhen from './partials/parity-swap-when.mdx';
import RemoveDataDiskStandard from './partials/remove-data-disk-standard.mdx';
import RemoveDataDiskParityPreserve from './partials/remove-data-disk-parity-preserve.mdx';
import ArrayCheckParity from './partials/array-check-parity.mdx';
import ArrayCheckRead from './partials/array-check-read.mdx';
import TroubleshootMissingDisks from './partials/troubleshoot-missing-disks.mdx';
import TroubleshootDeviceLimit from './partials/troubleshoot-device-limit.mdx';
import TroubleshootLicenseIssues from './partials/troubleshoot-license-issues.mdx';
import TroubleshootKeyServer from './partials/troubleshoot-key-server.mdx';
import TroubleshootWithdrawnRelease from './partials/troubleshoot-withdrawn-release.mdx';

# Configuration de l'Array

Le syst√®me de stockage d'Unraid combine flexibilit√© et protection des donn√©es gr√¢ce √† son architecture %%array|array%% et %%cache|cache%%. L'%%array|array%% g√®re votre stockage principal avec une protection %%parity|parity%% optionnelle, tandis que les caches pools acc√©l√®rent les performances.

Voici quelques principes importants de configuration de l'array :

<details>
  <summary><strong>Utilisez toujours vos plus grands disques pour la parit√©.</strong></summary>

  Lorsque vous ajoutez plus de disques √† votre %%array|tableau%% plus tard, rappelez-vous que vous ne pouvez pas utiliser un disque de donn√©es plus grand que vos %%parity disks|disques de parit√©%%. Il est pr√©f√©rable d‚Äôacheter le plus gros disque dur pour vos %%parity disks|disques de parit√©%% d√®s le d√©but. Ainsi, vous ne serez pas limit√© par de plus petites tailles lors de l'expansion par la suite.

  Si vous utilisez deux %%parity disks|disques de parit√©%%, ils peuvent √™tre de tailles diff√©rentes. Cependant, gardez √† l'esprit qu'aucun disque de votre %%array|tableau%% ne peut √™tre plus grand que le plus petit %%parity disks|disques de parit√©%% que vous avez.
</details>

<details>
  <summary><strong>Ne pas utiliser de SSD dans le tableau ‚Äì gardez-les pour les pools ou les appareils non assign√©s.</strong></summary>

  Unraid ne supporte pas les op√©rations TRIM ou Discard pour les SSD dans le tableau principal. Avec le temps, cela entra√Ænera une d√©gradation des performances des SSD s'ils sont utilis√©s comme membres du tableau. Pour de meilleurs r√©sultats, utilisez les SSD dans les %%cache pools|cache-pool%% ou comme appareils non assign√©s, o√π ces fonctionnalit√©s sont prises en charge et la performance √† long terme est maintenue. La plupart des SSD modernes, y compris NVMe, fonctionnent bien dans ces r√¥les.
</details>

<details>
  <summary><strong>Utiliser un cache am√©liorera les performances d'√©criture du tableau.</strong></summary>

  Au lieu d'√©crire directement sur le stockage principal, les donn√©es sont d'abord envoy√©es √† un disque d√©di√© ou √† un groupe de disques. Ces donn√©es sont ensuite transf√©r√©es vers le stockage principal √† des heures programm√©es, g√©n√©ralement une fois par jour √† 3h40. L'avantage est que les donn√©es enregistr√©es sur le %%cache|cache%% apparaissent toujours via vos %%user shares|partages utilisateurs%%, vous n'avez donc pas besoin de modifier votre fa√ßon d'acc√©der √† vos fichiers.
</details>

<details>
  <summary><strong>Cr√©er un pool de cache aide √† pr√©server la s√©curit√© de vos donn√©es mises en cache.</strong></summary>

  N'utiliser qu'un seul appareil de cache compromet la s√©curit√© de vos donn√©es mises en cache jusqu'√† ce qu'elles soient d√©plac√©es vers le tableau principal. Pour prot√©ger vos donn√©es √† tout moment, utilisez plusieurs appareils configur√©s comme un %%cache pool|cache-pool%%. Cette configuration assure une redondance des donn√©es mises en cache, r√©duisant le risque de perte de donn√©es en cas de d√©faillance d'un appareil de cache.
</details>

<details>
  <summary><strong>Les appareils de cache SSD sont parfaits pour les applications et les machines virtuelles.</strong></summary>

  L'utilisation des SSD aide les applications et les machines virtuelles (VM) √† fonctionner plus rapidement car elles peuvent acc√©der aux donn√©es plus rapidement. Les SSD fonctionnent bien dans un %%cache pool|cache-pool%%, offrant un excellent m√©lange de vitesse, d'efficacit√© et de s√©curit√© des donn√©es.
</details>

<details>
  <summary><strong>Le chiffrement est d√©sactiv√© par d√©faut.</strong></summary>

  Si vous souhaitez utiliser le chiffrement sur votre syst√®me, vous devez reformater le disque avec un type de syst√®me de fichiers crypt√© ‚Äî ce processus efface toutes les donn√©es existantes sur le disque. Avant d'activer le chiffrement, d√©placez vos donn√©es hors du disque, changez le syst√®me de fichiers pour une option crypt√©e, formatez le disque, puis d√©placez √† nouveau vos donn√©es. Pour plus de d√©tails, consultez [Comment chiffrer un disque dans Unraid](../../system-administration/secure-your-server/securing-your-data.mdx#how-to-encrypt-a-drive-in-unraid).

  Gardez √† l'esprit que l'utilisation du cryptage peut rendre difficile la r√©cup√©ration des donn√©es si quelque chose tourne mal, utilisez-le donc uniquement si vous en avez vraiment besoin.
</details>

:::info[Disk Reconnaissance et flexibilit√© des ports]
Unraid identifie les disques selon leurs num√©ros de s√©rie et leurs tailles, et non par les ports SATA sp√©cifiques auxquels ils sont connect√©s. Cela signifie que vous pouvez √©changer des disques entre diff√©rents ports SATA sans affecter leurs assignations dans Unraid. Cette fonctionnalit√© est particuli√®rement utile pour d√©panner des probl√®mes mat√©riels comme trouver un port d√©fectueux ou remplacer des c√¢bles d'alimentation ou SATA peu fiables.
:::

:::caution
Votre array ne d√©marrera pas si vous attribuez ou attachez plus de p√©riph√©riques que votre cl√© de licence ne le permet.
:::

## Lancer/Arr√™ter l'array

Lorsque votre syst√®me d√©marre, il alimente g√©n√©ralement automatiquement l'array de disques. Cependant, si vous avez r√©cemment modifi√© la configuration du disque, comme l'ajout d'un nouveau disque, l'array restera d√©sactiv√© pour vous permettre de v√©rifier votre configuration.

:::caution
Gardez √† l'esprit que vous devrez d'abord arr√™ter l'array pour effectuer des ajustements. L'arr√™t de l'array arr√™tera compl√®tement tous les conteneurs Docker et les partages r√©seau, mettra en veille ou fermera les VMs, et vos p√©riph√©riques de stockage seront d√©mont√©s, rendant vos donn√©es et applications inaccessibles jusqu'√† ce que vous red√©marriez l'array.
:::

Pour d√©marrer ou arr√™ter l'array :

1. Cliquez sur l'onglet **Principal**.
2. Acc√©dez √† la section **Array Operation**.
3. Cliquez sur **Start** ou **Stop**. Vous devrez peut-√™tre cocher la case disant "Oui, je veux faire cela" avant de continuer.

---

## Op√©rations de l'array

Unraid propose plusieurs options de maintenance et de configuration pour votre array de stockage. Les op√©rations cl√©s incluent :

import DocCardList from '@theme/DocCardList';

<DocCardList
  items={[
  { type: 'link', href: '#adding-disks', label: 'Ajouter des disques', description: 'Augmenter la capacit√© de stockage' },
  { type: 'link', href: '#replacing-disks', label: 'Remplacer des disques', description: 'Am√©liorer ou √©changer des disques d√©fectueux' },
  { type: 'link', href: '#removing-disks', label: 'Retirer des disques', description: "Retirer ou r√©duire la taille de l'array" },
  { type: 'link', href: '#checking-array-devices', label: "V√©rification des appareils de l'array", description: 'Surveiller les donn√©es SMART et diagnostics' },
  { type: 'link', href: '#spinning-disks-down-or-up', label: 'Faire tourner les disques vers le bas ou vers le haut', description: 'G√©rer la mise en veille/r√©veil des disques' },
  { type: 'link', href: '#reset-the-array-configuration', label: "R√©initialiser la configuration de l'array", description: "Reconstruire la structure de l'array" }
  ]}
/>

---

### Ajout de disques

#### Configuration de nouveaux disques

1. Allez √† ***Main ‚Üí Dispositifs de l'array*** dans l'interface.
2. Choisissez l'emplacement o√π vous souhaitez ajouter le disque et s√©lectionnez le disque dans la liste d√©roulante.
3. Par d√©faut, les nouveaux disques d'array seront format√©s avec %%XFS|xfs%%. Si vous souhaitez utiliser %%ZFS|zfs%% ou %%BTRFS|btrfs%% √† la place, s√©lectionnez votre syst√®me de fichiers pr√©f√©r√© dans le menu d√©roulant.

:::tip[Hot-Swap Caract√©ristique]
Si vous utilisez du mat√©riel moderne compatible avec Unraid, vous pouvez changer de disques sans √©teindre votre serveur. Cette fonctionnalit√©, connue sous le nom de "hot-swap", est disponible dans les serveurs LimeTech depuis le d√©but.
:::

#### Effacer vs Pr√©-Effacer

Unraid exige que les disques soient dans un √©tat nettoy√© - enti√®rement remplis de z√©ros et marqu√©s d'une signature sp√©ciale - avant de les ajouter √† un array prot√©g√© par parit√©. Ce processus garantit l'int√©grit√© de la parit√© et maintient l'array en ligne pendant la pr√©paration du disque.

Clearance is mandatory when adding a data disk to a %%parity|parity%%-protected array. If you are adding a %%parity disk|parity-drives%% or working with an array that does not use %%parity|parity%%, clearance is not required.

L'op√©ration int√©gr√©e de nettoyage √©crit des z√©ros sur le disque en arri√®re-plan, permettant √† l'array de rester disponible. Une fois le processus termin√©, le disque doit √™tre format√© avant utilisation. Cette m√©thode est efficace, ne n√©cessite pas d'outils tiers, et est id√©ale pour des expansions rapides.

Pour une approche plus approfondie, l'op√©ration de pr√©-nettoyage, disponible via des plugins comme [Unassigned Devices Preclear](https://unraid.net/community/apps?q=unassigned+devices#r:~:text=enable%20destructive%20mode.-,Unassigned%20Devices%20Preclear,-dlandon), effectue une pr√©-lecture pour v√©rifier les secteurs d√©fectueux, √©crit des z√©ros sur le disque, et v√©rifie ensuite l'int√©grit√© avec une post-lecture. Cette √©tape suppl√©mentaire aide √† d√©tecter les d√©faillances pr√©matur√©es du disque mais prend beaucoup plus de temps et n√©cessite l'installation manuelle du plugin.

**R√®gle g√©n√©rale :** Utilisez l'op√©ration d'effacement int√©gr√©e pour des ajouts rapides √† votre array, ou choisissez le pr√©-effacement si vous souhaitez des tests √©tendus de la sant√© des disques avant de mettre un disque en service.

<h4>Comparaison Effacer vs Pr√©-Effacer</h4>

<div style={{ margin: 'auto', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  |                        | Effacer                           | Pr√©-Effacer                                          |
  | ---------------------- | --------------------------------- | ---------------------------------------------------- |
  | **Objectif**           | Assure la compatibilit√© de base   | Teste le disque et le pr√©pare √† l'emploi             |
  | **Vitesse**            | Fonctionne rapidement             | Processus beaucoup plus lent                         |
  | **Impact sur l'array** | Fonctionne en arri√®re-plan        | N√©cessite que le disque soit retir√© de l'utilisation |
  | **Meilleur Pour**      | Id√©al pour des expansions rapides | Parfait pour v√©rifier de nouveaux disques            |
</div>

**Effacer** pr√©pare rapidement un disque pour utilisation, le rendant compatible avec votre syst√®me et vous permettant d'ajouter du stockage en seulement quelques heures.

**Pr√©-Effacer** prend plus de temps mais fournit un test approfondi, garantissant qu'un nouveau disque est fiable avant de devenir une partie de votre array.

:::caution[Critical Note]
√âvitez de formater un disque pr√©-effac√© avant de l'inclure dans l'array, car cela supprime la signature de d√©douanement.
:::

#### Ajout de disques de donn√©es

Ajouter des disques de donn√©es est une excellente mani√®re d'augmenter l'espace de stockage de votre array Unraid. En ajoutant plus de disques, vous pouvez stocker plus de fichiers, d'applications, et de sauvegardes, tout en prot√©geant vos donn√©es.

:::important[Important Note:]
Lors de l'ajout d'un nouveau disque de donn√©es, il doit √™tre de la m√™me taille ou plus petit que vos %%parity disks|parity-drives%% actuels. Si vous souhaitez utiliser un disque plus grand, vous devrez d'abord remplacer les %%parity disks|parity-drives%% par un plus grand, puis utiliser les anciens %%parity disks|parity-drives%% comme disque de donn√©es.
:::

<details>
  <summary><strong>Comment ajouter un disque de donn√©es</strong></summary>

  ```mdx-code-block

  <Tabs>
    <TabItem value="standard" label="Standard addition (Parity-protected)" default>
      <AddDataDiskParityProtected />
    </TabItem>

    <TabItem value="no-parity" label="Addition without parity">
      <AddDataDiskNoParity />
    </TabItem>
  </Tabs>
  ```
</details>

#### Ajout de disques de parit√©

%%Parity disks|parity-drives%% are a helpful feature that provide an extra layer of protection for your data. They allow your storage system to recover information if a hard drive fails. While using %%parity disks|parity-drives%% is optional, it's highly recommended to keep your data safe.

:::important\[Requirements]

- **Parit√© Unique :** Le disque doit √™tre au moins de la m√™me taille que votre plus grand disque de donn√©es.
- **Double Parit√© :** Les deux %%parity disks|parity-drives%% doivent √©galement √™tre au moins de la taille de votre plus grand disque de donn√©es, mais ils peuvent √™tre de tailles diff√©rentes.

:::

L'ajout d'un %%parity disk|parity-drives%% est similaire √† l'ajout d'un disque de donn√©es, mais il y a une √©tape importante √† garder √† l'esprit :

1. Apr√®s avoir s√©lectionn√© le disque de %%parit√©|parity-drives%% et d√©marr√© votre matrice de stockage, un processus appel√© **calcul de parit√©** commence.
2. Pendant que ce processus se d√©roule, vous pouvez toujours acc√©der √† vos fichiers. Cependant, le syst√®me pourrait fonctionner un peu plus lentement car il travaille √† calculer la parit√©.

<details>
  <summary><strong>En profondeur : Qu'est-ce que la parit√© et pourquoi est-ce important ?</strong> - Cliquez pour d√©velopper/r√©duire</summary>

  %%Parity|parity%% in Unraid protects your data by ensuring that you can recover from a drive failure. With the use of a %%parity disk|parity-drives%%, any single missing disk can be reconstructed by combining the information from all other data drives along with the %%parity|parity%% data.

  Unraid repose sur cette parit√© en temps r√©el pour deux objectifs principaux :

  - Reconstruire les donn√©es lorsqu'un disque √©choue
  - Corriger les erreurs lorsqu'un secteur d√©fectueux est trouv√©

  Cette fonctionnalit√© vous permet de garder vos donn√©es en s√©curit√©, m√™me si les disques finiront par √©chouer au fil du temps.
</details>

<details>
  <summary><strong>En profondeur : Comment fonctionne la parit√© dans Unraid ?</strong> - Cliquez pour d√©velopper/r√©duire</summary>

  Unraid fonctionne avec un bit sp√©cial appel√© *bit de parit√©*, qui est stock√© pour chaque position de bit sur tous les disques de donn√©es et est g√©r√© par un %%parity disk|disque de parit√©%% d√©di√©. La %%parity|parit√©%% est calcul√©e de sorte que le nombre total de bits √† chaque position sur tous les disques (y compris le %%parity disk|disque de parit√©%%) soit toujours un nombre pair, un processus connu sous le nom de parit√© paire.

  Voici comment cela fonctionne :

  - Unraid utilise l'op√©ration XOR (ou exclusif) pour ce calcul.
  - Par exemple, si vous avez quatre disques et que leurs 57e bits sont 1, 1, 1, 1, le bit de parit√© pour cette position sera 0 (car 1 + 1 + 1 + 1 + 0 = pair).
  - Cependant, si les 57e bits sont 1, 0, 0, 0, la %%parit√©|parity%% pour cette position sera 1 (pour s'assurer que le total reste pair).

  Lorsque vous ajoutez un nouveau disque, Unraid commence par l'effacer en √©crivant des z√©ros sur tous les bits. Cela permet une inclusion rapide dans le tableau prot√©g√© puisque l'√©criture de z√©ros ne perturbe pas les calculs de parit√© actuels.
</details>

<details>
  <summary><strong>En profondeur : Comment les donn√©es sont-elles reconstruites √† l'aide de la parit√© ?</strong> - Cliquez pour d√©velopper/r√©duire</summary>

  Unraid peut reconstruire un disque manquant ou r√©parer un secteur d√©fectueux en utilisant les √©tapes suivantes :

  - Il lit tous les disques restants, y compris le disque de %%parit√©|parity-drives%%.
  - Il applique la %%parit√©|parity%% paire pour r√©soudre les donn√©es manquantes.

  Par exemple, si le disque 2 √©choue :

  - Si les bits concern√©s sont 1, 1, 1 (en plus de la %%parity|parity%%), Unraid calcule : 1 + x + 1 + 1 + 0 = pair. Ici, x doit √™tre 1 pour maintenir un total pair.
  - Si les bits sont 1, x, 0, 0, 1 = pair, alors x sera √©gal √† 0.

  Cette fonction de %%parity|parit√©%% permet √† Unraid de "simuler" le disque manquant. Vous pouvez continuer √† utiliser le tableau comme si le disque √©tait encore fonctionnel. Une fois que vous installez un nouveau disque dans l'emplacement d√©faillant, Unraid recr√©era toutes les donn√©es manquantes en fonction de l'√©tat actuel de la %%parity|parit√©%% et des autres disques.

  Pour assurer une protection continue et une r√©cup√©ration efficace, il est important d'effectuer des %%parity checks|v√©rifications de parit√©%% r√©guliers.
</details>

<details>
  <summary><strong>Quelle taille doit avoir mon disque de parit√© ?</strong> - Cliquez pour d√©velopper/r√©duire</summary>

  Votre %%parity disk|disque de parit√©%% doit √™tre **√©gal ou sup√©rieur √† votre plus grand disque de donn√©es**. Par exemple :

  - Si votre plus grand disque de donn√©es est de 10 To, votre disque de %%parit√©|parity-drives%% doit √™tre d'au moins 10 To.
  - Vous pouvez utiliser divers autres tailles de disques de donn√©es librement, tant qu'aucune ne d√©passe la taille du disque de %%parit√©|parity-drives%%.
</details>

<details>
  <summary><strong>En profondeur : Comment la parit√© affecte-t-elle les performances d'√©criture ?</strong> - Cliquez pour d√©velopper/r√©duire</summary>

  Writing to a %%parity|parity%%-protected array involves four disk operations for each write: reading data, reading %%parity|parity%%, writing data, and writing %%parity|parity%%. This process requires a full rotation from each affected drive, so the overall write speed is limited by the slowest drive involved in the operation.

  Ajouter un disque de %%parity|parit√©%% plus rapide n'am√©liorera pas n√©cessairement les vitesses d'√©criture, sauf si vous √©crivez sur plusieurs disques de donn√©es lents simultan√©ment, permettant ainsi au %%parity disk|disque de parit√©%% de g√©rer la charge. Typiquement, la vitesse d'√©criture est contrainte par le disque de donn√©es le plus lent vers lequel on √©crit.
</details>

<details>
  <summary><strong>En profondeur : Comment fonctionne la double parit√© ?</strong> - Cliquez pour d√©velopper/r√©duire</summary>

  La double %%parity|parit√©%% permet une r√©cup√©ration de **deux pannes de disque simultan√©es**. Dans Unraid, le deuxi√®me %%parity disk|disque de parit√©%% ne refl√®te pas simplement le premier. Au lieu de cela :

  - **Parit√© 1 :** Utilise des calculs de %%parit√©|parity%% XOR (pair) standard.
  - **Parit√© 2 :** Utilise un algorithme plus complexe (champ de Galois, plut√¥t que Reed-Solomon comme dans le traditionnel %%RAID 6|raid6%%), permettant √† Unraid de reconstruire √† partir de n'importe quels deux disques manquants en m√™me temps. Cette fonctionnalit√© est significative pour les arrays plus grands, o√π le risque de multiples d√©faillances augmente. La double %%parity|parity%% augmente consid√©rablement la r√©silience sans la surcharge suppl√©mentaire de la redondance miroir.
</details>

:::caution\[Remember]

Lors de la configuration d'un nouveau syst√®me de stockage de donn√©es, ajoutez d'abord vos disques de donn√©es, en vous assurant qu'ils utilisent tous un syst√®me de fichiers compatible. **Apr√®s** avoir plac√© vos disques de donn√©es, vous pouvez ajouter un %%parity disk|parity-drives%% pour vous prot√©ger contre les d√©faillances de disque.

Une fois votre %%parity disk|parity-drives%% ajout√©, rappelez-vous que tout nouveau disque que vous souhaitez inclure dans l'array doit √™tre nettoy√© (mis √† z√©ro) avant d'√™tre int√©gr√©. Cela afin de garantir que la %%parity|parity%% reste valide et continue de prot√©ger vos donn√©es.

:::

#### Mise √† niveau des disques de parit√©

Vous pouvez mettre √† niveau votre(vos) dispositif(s) de disque de %%parit√©|parity-drives%% vers un plus grand afin d'utiliser des disques de plus grande taille dans la matrice ou ajouter un disque de %%parit√©|parity-drives%% suppl√©mentaire.

:::caution
Si vous envisagez de suivre les √©tapes suivantes et que vous n'avez qu'un seul disque de %%parity disk|parit√©%%, gardez √† l'esprit ces points :

- Vos donn√©es ne seront pas prot√©g√©es tant que la reconstruction de la %%parity|parity%% ne sera pas termin√©e. Si un disque de donn√©es tombe en panne pendant ce temps, vous pourriez perdre les informations sur ce disque.
- Si vous avez d√©j√† un disque de donn√©es qui a √©chou√©, proc√©der avec ces √©tapes vous emp√™chera de pouvoir reconstruire ce disque. Dans ce cas, vous devriez suivre plut√¥t la proc√©dure **Parity Swap**.
:::

Pour retirer un disque de parit√© :

1. **Arr√™tez la matrice :** Utilisez le WebGUI pour arr√™ter la matrice.

:::tip
Si votre serveur prend en charge le hot-swap, vous n'avez pas besoin de l'√©teindre pour changer les disques. Vous pouvez passer en toute s√©curit√© les √©tapes 2 et 4.
:::

2. **√âteignez le serveur :** √âteignez votre serveur pour effectuer en toute s√©curit√© des modifications mat√©rielles.
3. **Installez le nouveau %%parity disk|parity-drives%% :** Placez le nouveau, plus grand %%parity disk|parity-drives%% dans votre serveur.
4. **Allumez le serveur :** Rallumez le serveur.
5. **Assignez le nouveau disque :** Allez dans l'emplacement de parit√© dans vos param√®tres et assignez le nouveau disque, rempla√ßant l'ancien.
6. **D√©marrez l'array :** Utilisez le %%WebGUI|web-gui%% pour red√©marrer l'array.

Une fois l'array de nouveau en marche, Unraid commencera √† reconstruire la %%parity|parity%% sur le nouveau disque. Vous pouvez toujours acc√©der √† vos donn√©es pendant ce temps, mais gardez √† l'esprit que cela pourrait √™tre un peu plus lent jusqu'√† ce que le processus soit termin√©. Une fois que la reconstruction de la %%parity|parity%% est termin√©e, vos donn√©es sont de nouveau prot√©g√©es !

:::important[Important Conseils]
- **Conservez l'ancien disque :** Ne retirez pas le vieux %%parity disk|parity-drives%% tant que la nouvelle reconstruction de la %%parity|parity%% n'est pas termin√©e. Si un disque de donn√©es √©choue pendant la mise √† niveau, avoir l'ancien disque pourrait vous aider √† r√©cup√©rer vos donn√©es.

- **Utilisateurs de parit√© double :** Si vous avez deux disques de %%parit√©|parity-drives%%, mettez √† niveau un √† la fois pour plus de s√©curit√©.

- **R√©utilisez l'ancien disque :** Apr√®s la mise √† niveau, vous pouvez utiliser l'ancien disque de %%parit√©|parity-drives%% comme disque de donn√©es s'il r√©pond toujours √† vos besoins de stockage.
:::

---

### Remplacement des disques

Vous pouvez avoir besoin de remplacer des disques dans votre matrice pour deux raisons principales :

1. [**Mise √† niveau de la capacit√©**](#upgrading-capacity) : Votre stockage est presque plein, et vous souhaitez utiliser des disques plus grands.
2. [**D√©faillance ou retraite**](#replacing-faileddisabled-disks) : Un disque a √©chou√© ou n'est plus pris en charge.

Bien que le processus de remplacement des disques soit similaire dans les deux cas, soyez prudent, car il y a un risque de perte de donn√©es pendant le remplacement. Les dispositifs de parit√© aident √† prot√©ger vos donn√©es ; un dispositif de parit√© peut prot√©ger contre une d√©faillance de disque unique, tandis que deux peuvent prot√©ger contre la perte de donn√©es si deux disques √©chouent. Soyez toujours conscient de votre niveau de protection lors de remplacement de disques.

#### Mise √† niveau de la capacit√©

Lors de la mise √† niveau de votre disque de donn√©es vers un plus grand, voici quelques points √† garder √† l'esprit :

- **Disques non montables :** Corrigez tous les disques non montables avant de mettre √† jour. Un statut non montable ne sera pas r√©solu pendant la reconstruction.

- **Risques de parit√© unique :** Si vous avez une parit√© unique, vous risquez une perte de donn√©es si un autre lecteur √©choue pendant la mise √† jour. Cherchez des conseils dans les forums si cela se produit.

- **Protection par double parit√© :** Avec une double parit√©, vous √™tes √† l'abri de la perte de donn√©es si un lecteur √©choue lors de la mise √† jour d'un seul disque. Vous pouvez √©galement mettre √† niveau deux disques √† la fois, mais notez que cela augmente le risque puisque vous n'aurez pas de protection contre l'√©chec d'un autre lecteur.

- **Sauvegardez l'ancien disque :** Conservez le disque original intact jusqu'√† ce que la mise √† niveau soit confirm√©e r√©ussie. Cela offre une option de secours si quelque chose tourne mal.

:::warning
Le remplacement des disques comporte toujours un risque. Si un autre disque tombe en panne lors de la mise √† niveau, surtout avec une seule parit√©, vous risquez de perdre des donn√©es. V√©rifiez toujours la sant√© de vos disques avant de commencer le processus et assurez-vous de conserver l'ancien disque intact jusqu'√† ce que la mise √† niveau soit termin√©e et que vos donn√©es soient confirm√©es comme s√©curis√©es.
:::

Pour mettre √† niveau un disque de donn√©es existant :

1. **Run a parity check:** First, ensure the integrity of your data by running a %%parity check|parity-check%%. Go to [***Tools ‚Üí Parity Check***](#checking-array-devices) and make sure there are **zero errors**. If parity isn't valid, rebuilding the disk will corrupt its file system.

2. **Arr√™ter la matrice :** Ensuite, vous voudrez arr√™ter la matrice. Naviguez vers ***Principale ‚Üí Op√©ration de la Matrice*** et s√©lectionnez **Arr√™ter**.

3. **D√©sattribuez le disque cible :** Une fois la matrice arr√™t√©e, trouvez le disque que vous souhaitez remplacer. Retirez-le de son emplacement dans ***Principale ‚Üí Dispositifs de la Matrice***.

4. **D√©marrez la matrice :** Maintenant, red√©marrez la matrice. Unraid va √©muler le disque manquant en utilisant les disques de parit√© et de donn√©es existants. Vous avez deux modes √† choisir :
   - **%%Maintenance Mode|maintenance-mode%%:** This mode prevents any writes to the %%emulated disk|emulated-disk%%.
   - **Normal Mode:** If you need read/write access to the %%emulated disk|emulated-disk%%, select this option.

:::note
Le d√©marrage de la matrice en Mode Normal √† ce point est optionnel. Vous pouvez l'utiliser pour v√©rifier que le disque √©mul√© est mont√© et que les donn√©es semblent correctes avant de proc√©der, mais elle n'est pas requise pour le processus de mise √† niveau.
:::

5. **Arr√™tez √† nouveau la matrice :** La matrice devrait maintenant indiquer que le disque non attribu√© a √©chou√©. Arr√™tez une fois de plus la matrice.

6. **Attribuez le disque de remplacement :** Ins√©rez votre nouveau disque plus grand dans l'emplacement vide de la matrice.

7. **Start the array to rebuild:** Finally, start the array again. Unraid will now rebuild the contents of the %%emulated disk|emulated-disk%% onto the new disk. The file system will automatically adjust to take full advantage of the larger disk's capacity.

#### Remplacement des disques √©chou√©s/d√©sactiv√©s

<details>
  <summary><strong>Qu'est-ce qu'un disque √©chou√©/d√©sactiv√© ?</strong></summary>

  Un disque √©chou√© ou d√©sactiv√© est un disque qu'Unraid a cess√© d'utiliser pour l'√©criture de donn√©es, g√©n√©ralement parce qu'il a rencontr√© une erreur d'√©criture. Gardez √† l'esprit que cela ne signifie pas toujours que le disque lui-m√™me est cass√© ; parfois, cela peut √™tre d√ª √† de mauvaises connexions, des probl√®mes d'alimentation, ou simplement un probl√®me temporaire.

  Certains signes incluent :

  <div class="texte--centre">
    ![Un "X" rouge indique une erreur d'√©criture](/img/Diskfailureindicator.png)
    <p class="caption-center">*Ce "X" rouge indique quel disque doit √™tre remplac√©.*</p>
  </div>

  <br />

  <div class="texte--centre">
    ![Alerte de notification d'√©chec](/img/Diskfailurenotification.png)
    <p class="caption-center">*Soyez attentif √† ces alertes.*</p>
  </div>

  <br />

  <details>
    <summary><strong>Cliquez pour voir comment diff√©rentes configurations de parit√© g√®rent les pannes de disque</strong></summary>

    | Sc√©nario d'√©chec | Pas de parit√© | Parit√© simple | Double parit√© |
    | ---------------- | ------------- | ------------- | ------------- |

    \| **1 Panne de disque**  | Donn√©es perdues | Reconstructible   | Reconstructible |
    \| **2 Pannes de disque** | Donn√©es perdues | Donn√©es perdues     | Reconstructible |

    :::tip[Conseils pour des reconstructions s√ªres]
    - **Pour une seule parit√© :** Vous ne pouvez remplacer qu'un disque √† la fois. Si un autre disque √©choue pendant la reconstruction, vous pourriez perdre des donn√©es.
    - **Pour une double parit√© :** Vous pouvez remplacer un ou deux disques en m√™me temps, mais soyez prudent si plus de deux disques √©chouent.
    :::

    :::important
    Si vous faites face √† une situation o√π **plus de disques √©chouent que votre parit√© ne peut prot√©ger :**

    1. **Arr√™tez imm√©diatement toutes les op√©rations d'√©criture** pour √©viter une perte de donn√©es suppl√©mentaire.
    2. Cherchez de l'aide en postant votre probl√®me sur les [forums Unraid](https://forums.unraid.net/) avec des diagnostics.
    3. **N'essayez pas une reconstruction** avant d'avoir re√ßu des conseils - concentrez-vous d'abord sur le sauvetage de vos donn√©es.
    :::
  </details>
</details>

<details>
  <summary><strong>Comment diagnostiquer le probl√®me</strong></summary>

  Pour diagnostiquer le probl√®me, commencez par v√©rifier le %%syslog|journal syst√®me%% et les %%SMART reports|rapports SMART%% :

  - Si le %%syslog|syslog%% montre que le lecteur a √©t√© r√©initialis√©, il pourrait y avoir un probl√®me de connexion ou de c√¢bles.
  - %%SMART reports|smart-report%% can help assess the drive's health, but the best way to check is by running a %%SMART|smart%% extended test. If it completes without errors, the drive is likely fine.
  - Si vous voyez des erreurs de %%CRC|crc-errors%%, cela indique g√©n√©ralement des probl√®mes avec le c√¢blage. Surveillez ces erreurs, car elles s'accumulent avec le temps et ne se r√©initialisent pas.

  :::tip
  Pour rester inform√© des probl√®mes de disque, [activez les notifications](../../getting-started/set-up-unraid/customize-unraid-settings.mdx#notification-settings) dans Unraid. Ainsi, vous √™tes imm√©diatement alert√© si quelque chose ne va pas, r√©duisant ainsi le risque pour vos donn√©es.
  :::
</details>

<details>
  <summary><strong>Qu'est-ce que l'√©mulation ?</strong></summary>

  When a drive is disabled, Unraid will use its parity and other working drives to emulate the failed drive. This means your system continues to operate, and you can still access the data stored on the %%emulated drive|emulated-disk%%:

  - Unraid cessera d'√©crire sur le disque physique, et toutes les mises √† jour seront sauvegard√©es en parit√© et dans l'√©mulation √† la place.
  - Before replacing the failed drive, you can check and recover data from the %%emulated drive|emulated-disk%%, which keeps the physical drive intact for potential recovery.
  - If you can't access the %%emulated drive|emulated-disk%%, repairing the file system is essential before any rebuild since fixing the file system is quicker and more effective than a rebuild.
</details>

<details>
  <summary><strong>Pr√©parer le remplacement du disque</strong></summary>

  Lorsque vous devez remplacer un disque, assurez-vous que le nouveau disque est au moins aussi grand que le disque d√©faillant, mais pas plus grand que votre plus petit disque de parit√©. Si vous devez utiliser un disque plus grand, suivez la proc√©dure de **Permutation de parit√©**.

  Bien que cela ne soit pas obligatoire, de nombreux utilisateurs choisissent de pr√©-effacer les nouveaux disques pour les tester et aider √† pr√©venir les d√©faillances pr√©coces. Vous pouvez le faire avec le plugin Preclear, un test √©tendu %%SMART|smart%%, ou les outils du fabricant.

  :::caution
  If you try to rebuild using an unmountable %%emulated drive|emulated-disk%%, the new drive will also become unmountable. Always repair the file system before attempting a rebuild.
  :::
</details>

If a disk in your Unraid system has failed or is disabled, don't worry! You can replace it and recover your data. Just follow these simple steps. Remember, you need a new disk that is the same size or larger than the one you're replacing, but it can't be larger than your smallest %%parity disk|parity-drives%%.

:::important
Avant de commencer, assurez-vous de v√©rifier les erreurs de disque ou les avertissements. Unraid doit √™tre capable de lire tous les disques restants sans aucun probl√®me pour que la reconstruction fonctionne correctement. Si un autre disque √©choue, cela pourrait mener √† une perte de donn√©es.
:::

Pour remplacer et reconstruire un disque :

1. **Arr√™tez l'array :**

   - Connectez-vous au %%WebGUI|web-gui%% d'Unraid (l'interface web).
   - Trouvez l'option pour arr√™ter la matrice. Ceci est n√©cessaire avant de pouvoir changer des disques.

:::tip
Si votre serveur prend en charge le remplacement √† chaud, vous pouvez passer √† l'√©tape suivante et simplement arr√™ter l'array.
:::

2. **√âteignez votre serveur** (seulement si vous **n'utilisez pas** le hot-swap):
   - Si votre serveur ne supporte pas le hot-swap, vous devrez l'√©teindre compl√®tement.

3. **Remplacez le disque d√©faillant :**
   - Retirez l'ancien disque d√©faillant de votre serveur.
   - Insert the new disk. Just remember, it has to be at least the same size as the old disk but no bigger than your smallest %%parity disk|parity-drives%%.

4. **Allumez le serveur** (si vous l'avez √©teint):
   - Red√©marrez votre serveur si vous l'avez √©teint.

5. **Attribuer le nouveau disque :**
   - Retournez au %%WebGUI|web-gui%% d'Unraid.
   - Trouvez l'emplacement pour le disque d√©faillant et attribuez votre nouveau disque √† cet emplacement.

6. **Confirmez votre action :**
   - Vous verrez une bo√Æte de confirmation. Cochez la case qui dit **Oui, je veux faire √ßa** et confirmez.

7. **(Optionnel) Choisissez le %%mode maintenance|maintenance-mode%% :**
   - Vous pouvez s√©lectionner le **Mode de Maintenance**, ce qui peut rendre le processus de reconstruction plus rapide. Cependant, pendant ce temps, vous n'aurez pas acc√®s √† la matrice.
   - Si vous choisissez le %%mode maintenance|maintenance-mode%%, assurez-vous de cliquer sur **Sync** pour commencer la reconstruction.

8. **Commencez la reconstruction :**
   - Click **Start** to begin the process. Unraid will copy your data from the %%emulated disk|emulated-disk%% to the new disk.
   - Si votre nouveau disque est plus grand, Unraid g√©rera l'espace suppl√©mentaire pour vous.

:::warning
Si Unraid vous demande de formater le nouveau disque pendant la reconstruction, **ne le faites pas**. Le formatage effacera toutes les donn√©es et rendra la r√©cup√©ration impossible.
:::

<h4>√Ä quoi s'attendre pendant la reconstruction</h4>

- L'array sera toujours disponible pendant le processus de reconstruction (sauf si vous √™tes en %%mode maintenance|maintenance-mode%%), mais elle pourrait fonctionner plus lentement.
- La reconstruction peut prendre plusieurs heures, selon la taille de vos disques et l'utilisation du syst√®me.
- Le nouveau disque aura le m√™me syst√®me de fichiers que l'original.
- Si l'ancien disque √©tait non montable en raison de probl√®mes de syst√®me de fichiers, le nouveau disque ne sera √©galement pas montable. Veuillez corriger tous les probl√®mes de syst√®me de fichiers avant de commencer la reconstruction.

:::note[Additional notes]
- Le processus de reconstruction ne changera pas le format de fichier du disque; il restaurera simplement sa forme pr√©c√©dente.
- V√©rifiez toujours la sant√© de chaque disque avant de commencer une reconstruction pour √©viter tout probl√®me potentiel.
:::

#### √âchange de parit√©

```mdx-code-block

<Tabs>
  <TabItem value="what" label="What is parity swap?">
    <ParitySwapWhat />
  </TabItem>

  <TabItem value="when" label="When to use parity swap?">
    <ParitySwapWhen />
  </TabItem>
</Tabs>
```

<details>
  <summary><strong>Sc√©nario d'exemple</strong></summary>

  Vous avez une configuration Unraid avec un **disque de parit√© de 2 To** et un **disque de donn√©es de 1 To** et vous voulez remplacer le disque de 1 To par un **disque de 4 To**.

  Tout d'abord, affectez le nouveau disque de 4 To comme disque de parit√©, qui remplacera le disque de 2 To. Ensuite, d√©placez le disque de 2 To original vers l'emplacement de donn√©es, et retirez compl√®tement le disque de 1 To.

  Apr√®s ces changements, vous aurez un disque de 4 To comme nouvelle parit√©, assurant que vous pouvez ajouter des disques de donn√©es futurs jusqu'√† 4 To. Le disque de 2 To contiendra d√©sormais vos donn√©es existantes, tandis que le disque de 1 To peut √™tre r√©utilis√©.

  Cet √©change garde vos donn√©es s√©curis√©es et votre array prot√©g√©, permettant des mises √† niveau futures.
</details>

:::important\[Prerequisites]

- Avant de commencer, assurez-vous que le disque de donn√©es que vous souhaitez remplacer est d√©sactiv√©. Si le disque a √©chou√© (affiche un indicateur rouge), il est d√©j√† d√©sactiv√©. Si le disque est en bon √©tat mais que vous voulez le remplacer, d√©sattribuez le disque et d√©marrez l'array une fois sans lui pour forcer Unraid √† le marquer comme d√©sactiv√©.
- Si votre disque de donn√©es de remplacement n'est pas plus grand que votre disque de parit√©, utilisez plut√¥t la proc√©dure standard [Remplacement d'un disque de donn√©es](#replacing-faileddisabled-disks).
- Cette proc√©dure n'est n√©cessaire que pour remplacer les disques de donn√©es dans une matrice Unraid par un disque plus grand que le disque de parit√© actuel. Si vous n'avez besoin que de mettre √† niveau votre disque de parit√©, il suffit de retirer l'ancien disque de parit√©, d'ajouter le nouveau et de demarrer l'array. La parit√© se reconstruira automatiquement.

:::

:::warning\[Warnings]

- Always verify the health of all drives using %%SMART reports|smart-report%% before starting a %%parity swap|parity-swap%%. Attempting this procedure with another failing or unhealthy disk increases the risk of data loss.
- Pr√©cleurez le nouveau disque si possible. Bien que cela ne soit pas requis, le pr√©d√©clairage teste la r√©sistance du disque et r√©duit le risque de d√©faillance pr√©coce.
- Identifiez correctement tous les disques avant de commencer. Notez les num√©ros de mod√®le et les quatre derniers caract√®res de chaque num√©ro de s√©rie pour √©viter les erreurs lors de l'attribution.

:::

Pour effectuer un √©change de parit√© :

:::note
Si le disque √† remplacer est d√©j√† d√©sactiv√© (d√©faillant), vous n'avez pas besoin de r√©aliser les √©tapes 1 √† 4. Si vous avez d√©j√† install√© le nouveau disque de remplacement (par exemple, apr√®s l'avoir pr√©cleur√©), vous pouvez passer les √©tapes 5 √† 8.
:::

1. **Arr√™tez l'array** s'il est en cours d'ex√©cution.
2. **D√©sattribuez l'ancien disque de donn√©es** s'il est encore attribu√©. Si le disque √©tait auparavant en bon √©tat, vous pouvez voir des notifications d'erreur pour un disque manquant - cela est pr√©vu.
3. **D√©marrez l'array.** Si une invite appara√Æt, cochez la case pour confirmer votre action. Le disque de donn√©es devrait maintenant s'afficher comme "Non install√©."
4. **Arr√™tez √† nouveau l'array.** √Ä ce stade, l'array traite le disque comme d√©faillant.
5. **√âteindre le serveur.**

   :::tip
   Si votre syst√®me prend en charge le **hot-swap**, vous n'avez pas besoin d'√©teindre pour retirer ou installer des disques. Assurez-vous simplement que le tableau est arr√™t√© avant de proc√©der √† tout changement mat√©riel.
   :::

:::

6. *(Optional)* **Remove the old drive.** You may wish to keep it installed for testing or reassignment.
7. **Install the new drive.** Pre-clearing is strongly recommended, but formatting is not needed.
8. **Power on the server.**
9. **Stop the array** if it started automatically. If you see a message about retrying to unmount disk shares, disable Docker and/or VM services in Settings, reboot, and try again.
10. **Unassign the parity drive.**
11. **Assign the new drive to the parity slot.** You may receive error notifications - this is normal.
12. **Assign the old %%parity drive|parity-drives%% to the data slot** of the drive being replaced. Both the parity and replacement data drives should now display blue status indicators.
13. **Go to *Main ‚Üí Array Operation.*** You should see a **Copy** button and a message stating "Copy will copy the parity information to the new %%parity disk|parity-drives%%."
14. **Confirm and start the copy process.** Check the confirmation box and click **Copy**. The array will not be available during this operation.

- Le processus de copie peut prendre plusieurs heures, en fonction de la taille du disque. Une fois termin√©, l'array sera arr√™t√© et pr√™t pour une reconstruction de donn√©es.

15. **D√©marrez l'array pour commencer la reconstruction des donn√©es.**
    - Confirmez votre action si vous y √™tes invit√©. L'array est maintenant d√©marr√© et les donn√©es sont reconstruites sur le nouveau disque de donn√©es.
    - Vous pouvez utiliser l'array pendant la reconstruction, mais pour de meilleures performances, limitez l'utilisation.
    - Le processus de reconstruction prendra √©galement plusieurs heures.

:::warning
Ne formatez jamais un disque pendant ce processus. Le formatage effacera toutes les donn√©es et mettra √† jour la parit√©, rendant la r√©cup√©ration impossible.
:::

After completion, you will have a larger parity disk and a replaced data disk. Many users run a %%parity check|parity-check%% afterward for extra confidence, though this is optional.

---

### Retirer des disques

Il peut arriver que vous souhaitiez retirer un disque de votre matrice Unraid. Que vous cherchiez √† √©conomiser de l'√©nergie, √† retirer un disque ancien ou peu fiable, ou √† r√©affecter le mat√©riel √† un autre usage, le processus est assez simple.

#### Retirer des disques de parit√©

If you find that you no longer need the level of %%parity|parity%% protection in your setup, you can remove a %%parity disk|parity-drives%% whenever you want.

Pour retirer un disque de parit√© %%parity drives|parity-drives%% :

1. **Arr√™tez l'array :** Commencez par acc√©der au %%WebGUI|web-gui%% et en arr√™tant l'array.
2. **Unassign the %%parity drives|parity-drives%%:** Locate the %%parity drives|parity-drives%% slot and set it to "Unassigned."
3. **D√©marrez l'array :** Enfin, red√©marrez l'array pour valider les changements et retirer avec succ√®s les disques de parit√© %%parity drives|parity-drives%% de la configuration.

:::warning
Avant d'apporter des modifications, gardez ceci √† l'esprit : si vous avez d√©j√† des disques de donn√©es d√©faillants dans votre tableau, retirer un disque de %%parit√©|parity-drives%% peut r√©duire le nombre de d√©faillances qu'Unraid peut g√©rer sans risque de perte de donn√©es.

- Avec une double parit√©, vous pouvez r√©cup√©rer d'un seul lecteur d√©faillant, mais soyez conscient que vous ne pourrez pas survivre √† une autre d√©faillance pendant le processus de reconstruction.
- Avec une seule parit√©, vous perdez toute redondance, ce qui signifie que toute d√©faillance suppl√©mentaire pourrait entra√Æner une perte de donn√©es.
:::

#### Retrait de disques de donn√©es

Retirer un disque de donn√©es est un processus simple, mais il est important de se rappeler que vous devrez effectuer une synchronisation de %%parit√©|parity%% par la suite. Jusqu'√† ce que cette synchronisation soit termin√©e, il y a un risque de perte de donn√©es si un autre disque √©choue.

Vous pouvez choisir parmi deux m√©thodes pour retirer un disque de donn√©es :

1. **M√©thode standard** - Recommand√©e pour la plupart des utilisateurs.
2. **M√©thode de pr√©servation de la parit√©** - Convient aux utilisateurs avanc√©s qui souhaitent maintenir la parit√© pendant le retrait.

```mdx-code-block

<Tabs>
  <TabItem value="standard" label="Standard method" default>
    <RemoveDataDiskStandard />
  </TabItem>

  <TabItem value="parity-preserve" label="Parity-preserve method (Advanced)">
    <RemoveDataDiskParityPreserve />
  </TabItem>
</Tabs>
```

---

### V√©rification des appareils du tableau

Regularly checking your Unraid array is crucial for maintaining data integrity and identifying potential issues before they result in data loss. You can initiate a check using the **Check** button under ***Array Operations***. Depending on your array's configuration, this button allows you to conduct either a %%parity check|parity-check%% or a %%read check|read-check%%.

<div style={{ margin: 'auto', maxWidth: '400px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![Le bouton de v√©rification vous permet d'effectuer des v√©rifications de parit√© et de lecture](/img/Check_button.PNG)
</div>

Pour plus de commodit√©, vous pouvez planifier ces v√©rifications pour qu'elles se d√©roulent automatiquement √† des intervalles qui vous conviennent en naviguant vers ***Param√®tres ‚Üí Planificateur***. Il est conseill√© d'effectuer des v√©rifications automatiques, non correctives, sur une base mensuelle ou trimestrielle pour assurer la sant√© continue de vos donn√©es.

#### V√©rifications de Parit√© & Lecture

```mdx-code-block

<Tabs>
  <TabItem value="parity-check" label="Parity checks" default>
    <ArrayCheckParity />
  </TabItem>

  <TabItem value="read-check" label="Read checks">
    <ArrayCheckRead />
  </TabItem>
</Tabs>
```

#### V√©rifiez l'historique

Whenever the system performs a %%parity check|parity-check%% or a %%read check|read-check%%, it keeps a record of what happened. You can view these details easily by clicking the **History** button found under ***Array Operations*** in the interface.

Pour ceux qui veulent approfondir, tous ces enregistrements sont sauvegard√©s dans un fichier texte situ√© dans le r√©pertoire `config` sur votre p√©riph√©rique flash USB Unraid.

---

### Arr√™ter ou d√©marrer les disques tournants

Unraid allows you to control the power states of your hard drives. You can easily %%spin them up or down|spin-state%%, and manage SSDs to be active or in standby. This helps save energy, extend the life of your drives, and reduce noise when the disks are not being used.

<h4>Pourquoi activer ou d√©sactiver ?</h4>

- **D√©sactiver :** Si vous avez des disques qui ne sont pas fr√©quemment utilis√©s, les d√©sactiver peut √©conomiser de l'√©nergie et les faire durer plus longtemps.
- **Activer :** Si vous savez que vous aurez bient√¥t besoin des fichiers, activer les disques √† l'avance peut r√©duire les temps d'attente.

<h4>Comment contr√¥ler les √©tats d'activation</h4>

Vous pouvez contr√¥ler les √©tats d'activation des disques via l'onglet **Principal** dans le %%WebGUI|web-gui%% :

1. **Allez √† l'onglet Principal** et recherchez vos appareils de matrice
2. **Trouvez les boutons de contr√¥le d'activation** - chaque disque affichera soit :
   - Cliquez sur le bouton üîò pour **Activer** si le disque est actuellement d√©sactiv√©
   - Cliquez sur le bouton üü¢ pour **D√©sactiver** si le disque est actuellement actif
3. **Cliquez sur le bouton appropri√©** pour l'action souhait√©e :
   - Cliquez sur **D√©sactiver** üü¢ pour mettre hors tension un disque inactif et √©conomiser de l'√©nergie
   - Cliquez sur **Activer** üîò pour mettre sous tension un disque actuellement d√©sactiv√©

N'oubliez pas que si un disque est en cours d'acc√®s (par exemple si vous ouvrez un fichier), il restera actif et ignorera toute demande de d√©sactivation.

Lorsque un disque est d√©sactiv√©, sa temp√©rature ne s'affiche pas dans le %%WebGUI|web-gui%%. Cependant, d√®s qu'une application ou un utilisateur y acc√®de, il se r√©activera automatiquement.

:::tip
Utilisez les commandes de rotation pour √©conomiser de l'√©nergie et r√©duire l'usure de vos disques. Rappelez-vous que les disques en cours d'utilisation resteront actifs jusqu'√† ce que toutes les t√¢ches soient termin√©es.
:::

---

### R√©initialiser la configuration de la matrice

R√©initialiser la configuration de votre array est une √©tape importante qui doit √™tre entreprise avec soin. Ce processus est g√©n√©ralement n√©cessaire lors du retrait d'un disque, de la mise en place d'une nouvelle configuration de l'array, ou de la r√©solution de probl√®mes d'attribution de disque. Veuillez noter que cette action peut avoir un impact sur la protection des donn√©es et la parit√©, alors assurez-vous de n'y proc√©der que lorsque c'est r√©ellement n√©cessaire.

Les raisons courantes pour r√©initialiser votre matrice incluent :

- **Retrait ou remplacement de disques :** Si vous devez retirer ou changer des disques dans votre matrice.
- **Recommencer √† neuf :** Lorsque vous cherchez √† cr√©er une toute nouvelle configuration pour votre matrice.
- **Correction d'erreurs d'attribution de disque :** Pour corriger tout probl√®me concernant l'attribution actuelle des disques.
- **R√©cup√©ration de probl√®mes de configuration :** En cas de difficult√©s avec votre configuration existante.

<div style={{ margin: 'auto', maxWidth: '650px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![La r√©initialisation de votre configuration de disques peut √™tre effectu√©e via la nouvelle page de configuration](/img/Newconfig.png)
</div>

Pour r√©initialiser votre configuration de matrice :

1. Allez sur la page **Outils** et cliquez sur **Nouvelle Configuration**.
2. Vous pouvez conserver certaines erreurs les erreurs existantes si vous ne souhaitez effectuer que des ajustements mineurs.
3. Confirmez votre choix en cochant la case, puis cliquez sur **Appliquer**.
4. Revenez √† l'onglet **Main**. Apr√®s avoir appliqu√© les modifications, votre configuration aura √©t√© r√©initialis√©e.
5. Apportez toutes les modifications n√©cessaires √† votre configuration en attribuant ou retirant des disques selon les besoins.
6. Lancez la matrice en Mode Normal ou %%Mode de Maintenance|maintenance-mode%% pour finaliser vos mises √† jour.

:::important
- **Pr√©servation des donn√©es :** Unraid tentera de reconna√Ætre les disques d√©j√† utilis√©s et de pr√©server les donn√©es lorsque c'est possible.
- **Impact sur la parit√© :** Retirer un disque de donn√©es invalidera toujours la parit√© √† moins que ce disque ait √©t√© pr√©par√© (¬´ zeroed ¬ª) avant son retrait.
- **Changement d'ordre des disques :** Modifier l'ordre des disques n'affectera pas la parit√©1, mais cela *peut* invalider la parit√©2.
:::

:::caution
Lorsque vous voyez le bouton **D√©marrer**, il y a une case √† cocher intitul√©e **Parit√© est valide**. Cochez cette case uniquement si vous √™tes certain qu'elle est correcte ou si un utilisateur exp√©riment√© d'Unraid vous a conseill√© de le faire lors de la r√©cup√©ration. Cocher incorrectement cette option peut entra√Æner une perte de donn√©es.

N'utilisez pas **Nouvelle Config** si votre objectif est de reconstruire un disque. Effectuer une Nouvelle Config efface l'historique de l'array n√©cessaire pour une reconstruction, et Unraid ne proposera pas de reconstruire le disque ensuite. Suivez plut√¥t la proc√©dure de reconstruction de disque.
:::

#### Annuler une r√©initialisation

Si vous devez annuler une r√©initialisation :

1. Acc√©dez √† votre appareil flash sur le r√©seau (SMB).
2. Localisez et ouvrez le dossier `config`.
3. Renommez le fichier `super.old` en `super.dat`.
4. Red√©marrez votre serveur, et votre configuration de matrice pr√©c√©dente devrait √™tre restaur√©e.

---

### Rapports d'√©tat

Unraid fournit des rapports de statut qui vous aident √† suivre la sant√© de votre matrice de stockage. Ces rapports sont un moyen rapide de v√©rifier si l'un de vos disques est d√©sactiv√© ou rencontre des probl√®mes de lecture ou d'√©criture de donn√©es.

- **Statut actuel :** Les rapports de statut affichent l'√©tat actuel de votre array. Il est important de noter que ces informations sont r√©initialis√©es apr√®s le red√©marrage du syst√®me, elles ne conserveront donc pas un historique des probl√®mes pass√©s.

- **Aucune donn√©e historique :** Si vous souhaitez voir ce qui s'est pass√© avant un red√©marrage, vous devrez chercher ailleurs, car ces rapports ne sauvegardent pas les √©tats pass√©s.

:::important
Remember that the status reports don't include %%SMART|smart%% data. %%SMART reports|smart-report%% give you a more detailed view of individual disk health. So, even if your status report shows everything is fine, checking the %%SMART reports|smart-report%% regularly is still a good idea to catch any potential problems early.
:::

---

## Modes d'√©criture de matrice

Unraid propose divers modes d'√©criture pour g√©rer les op√©rations sur l'array, chacun ayant ses propres avantages et inconv√©nients en termes de vitesse, de consommation d'√©nergie et d'usure des disques. Savoir comment ces modes fonctionnent, ainsi que le r√¥le d'un disque ou d'un pool de cache, peut vous aider √† affiner votre serveur pour r√©pondre au mieux √† vos besoins.

**Modes d'√©criture en un clin d'≈ìil**

| Mode d'√©criture               | Vitesse (Typique)                        | Consommation d'√©nergie | Quand les disques s'activent     | Protection des donn√©es    | Meilleur cas d'utilisation                                               |
| ----------------------------- | ---------------------------------------- | ---------------------- | -------------------------------- | ------------------------- | ------------------------------------------------------------------------ |
| Lire/Modifier/√âcrire          | 20‚Äì40 Mo/s                               | Faible                 | Seulement parit√© et disque cible | Oui                       | La plupart des charges de travail, √©conomie d'√©nergie, petites √©critures |
| √âcriture Turbo (Reconstruire) | 40‚Äì120 Mo/s                              | √âlev√©e                 | Tous les disques                 | Oui                       | Large file transfers, array rebuilds, %%parity checks\|parity-check%%    |
| √âcriture sur Cache (SSD/NVMe) | 50‚Äì110 Mo/s (SSD), 250‚Äì900 Mo/s (NVMe)\* | Varie                  | Seulement disques de cache       | Non (jusqu'√† d√©placement) | Applications, VM, √©critures fr√©quentes, maximisation de la vitesse       |

<h3>Lire/Modifier/√âcrire</h3>

<details>
  <summary>Cliquez pour d√©velopper/r√©duire</summary>

  <h4>Comment √ßa marche</h4>
  Ce mode lit les donn√©es existantes et la parit√©, calcule la nouvelle parit√©, puis √©crit les donn√©es mises √† jour. Seuls le %%parity drive|disque de parit√©%% et le disque de donn√©es cible s'activent, ce qui entra√Æne une consommation d'√©nergie et une usure des disques r√©duites. Cependant, cela peut √™tre plus lent en raison des cycles suppl√©mentaires de lecture/√©criture.

  <h4>Quand l'utiliser</h4>

  - √Ä tout moment, surtout si vous souhaitez √©conomiser l'√©nergie et que les disques inactifs s'arr√™tent.
  - Id√©al pour les petites ou rares √©critures.
</details>

<h3>√âcriture Turbo (Reconstruction d'√©criture)</h3>

<details>
  <summary>Cliquez pour d√©velopper/r√©duire</summary>

  Le turbo write, √©galement connu sous le nom d'√©criture reconstructrice, est une fonction con√ßue pour acc√©l√©rer la vitesse d'√©criture de votre tableau Unraid. Il fonctionne en lisant tous les disques de donn√©es et en mettant √† jour simultan√©ment la parit√©. Ce processus √©limine les d√©lais caus√©s par l'attente de la rotation des plateaux, comme on le voit dans le mode d'√©criture par d√©faut. Cependant, il est important de noter que tous les disques du tableau doivent √™tre en marche et fonctionner correctement pour que cela fonctionne efficacement.

  <h4>Comment √ßa fonctionne</h4>

  - Lorsque vous √©crivez de nouvelles donn√©es, Unraid lit de tous les autres disques de donn√©es et recalcule la parit√© en m√™me temps. Les nouvelles donn√©es et la parit√© mise √† jour sont √©crites ensemble.
  - Tous les disques de la matrice doivent √™tre op√©rationnels et activement en rotation.
  - Cette m√©thode am√©liore significativement les vitesses d'√©criture par rapport au mode d'√©criture par d√©faut.

  <h4>Quand utiliser l'√©criture turbo</h4>

  - Utilisez l'√©criture turbo lors du transfert de grands fichiers s√©quentiels dans la matrice.
  - It's effective during array rebuilds or %%parity checks|parity-check%%, as all drives will already be spinning.
  - Ce mode est tr√®s utile lorsque minimiser le temps d'√©criture est une priorit√© et que vous pouvez confirmer que tous les disques sont en bon √©tat.

  <h4>Quand √©viter l'√©criture turbo</h4>

  - √âvitez d'utiliser ce mode si vous souhaitez que vos disques s'arr√™tent durant les p√©riodes d'inactivit√© pour √©conomiser de l'√©nergie.
  - L'√©criture turbo n'est pas id√©ale pour les petites √©critures rares puisque cela d√©clenche la rotation de tous les disques √† chaque √©criture, augmentant ainsi la consommation d'√©nergie et l'usure des disques.
  - Si vous pensez qu'un disque √©choue ou est peu fiable, il est pr√©f√©rable d'√©viter l'√©criture turbo car elle repose sur le bon fonctionnement de chaque disque.

  :::info
  Le turbo write est le mieux adapt√© pour les op√©rations en masse et les sc√©narios n√©cessitant un d√©bit √©lev√©. Cependant, cela pourrait ne pas √™tre le meilleur choix pour les t√¢ches quotidiennes si vous vous concentrez sur les √©conomies d'√©nergie et la minimisation de l'usure du disque.
  :::
</details>

<h3>√âcriture sur Cache</h3>

<details>
  <summary>Cliquez pour d√©velopper/r√©duire</summary>

  <h4>Comment √ßa fonctionne</h4>

  Les donn√©es sont d'abord √©crites sur un SSD ou NVMe %%cache|cache%% rapide, puis peuvent √™tre d√©plac√©es vers le tableau principal plus tard par un processus appel√© %%Mover|mover%%. Les vitesses varient :

  - SSD : 50‚Äì110 Mo/s
  - NVMe : 250‚Äì900 Mo/s (ce qui peut utiliser des r√©seaux 10GbE)

  Une fois que les donn√©es sont d√©plac√©es vers la matrice, elles sont prot√©g√©es par la parit√©.

  <h4>Quand utiliser l'√©criture sur cache</h4>

  - Pour les partages avec des op√©rations d'√©criture fr√©quentes comme les applications, les machines virtuelles, ou les t√©l√©chargements.
  - Pour am√©liorer la performance et r√©duire toute latence de l'√©criture per√ßue.

  <h4>Attentes de performance</h4>

  - Sans un disque de cache : Moyenne de 20‚Äì30 Mo/s, avec des pics jusqu'√† 40 Mo/s.
  - Avec cache SSD : 50‚Äì110 Mo/s.
  - Avec cache NVMe : 250‚Äì900 Mo/s selon les contraintes du r√©seau ou du disque.

  :::tip
  Pensez √† utiliser un pool de cache (plusieurs dispositifs) pour plus de redondance et la protection des donn√©es avant que le %%Mover|mover%% ne fonctionne.
  :::
</details>

:::info[Automated solutions]
- Le mode **Auto** (une future fonctionnalit√©) activera l'√©criture turbo uniquement lorsque tous les disques seront d√©j√† en rotation.
- Des plugins communautaires (cherchez "Turbo Write" dans l'onglet Applications) peuvent offrir des options d'automatisation ou de planification am√©lior√©es.
:::

Pour changer le Mode d'√âcriture :

1. Naviguez vers ***Param√®tres ‚Üí Param√®tres des Disques***.
2. Localisez **Reglable (m√©thode\_md\_√©criture)**.
3. Choisissez votre mode pr√©f√©r√© :
   - **Lire/Modifier/√âcrire** (par d√©faut)
   - **Reconstruire √âcriture** (√âcriture Turbo)
   - **Auto** (fonctionnalit√© future)
4. Cliquez sur **Appliquer** pour confirmer votre choix.

:::important[Quick r√©capitulatif]
- Utilisez **√âcriture Turbo** lorsque vous avez besoin de vitesse, mais soyez conscient de l'augmentation de la consommation d'√©nergie et de l'activation des disques.
- Utilisez **√âcriture sur Cache** pour une performance optimale, particuli√®rement avec les disques SSD ou NVMe.
- Pour la plupart des utilisateurs, le mode d'√©criture par d√©faut offre le meilleur √©quilibre, sauf si vous avez sp√©cifiquement besoin de vitesses plus √©lev√©es.
:::

---

## Modes de lecture

Lors de l'utilisation d'Unraid, la vitesse √† laquelle vous pouvez lire les fichiers est principalement d√©termin√©e par le disque individuel qui contient chaque fichier. Contrairement aux syst√®mes %%RAID|raid%% traditionnels, qui combinent plusieurs disques pour am√©liorer les performances, Unraid stocke chaque fichier sur un seul disque. Cela signifie que les vitesses de lecture ne seront pas boost√©es par les vitesses combin√©es de plusieurs disques.

<h3>Attentes de performance</h3>

- **HDD unique typique :** 70‚Äì250 Mo/s (d√©pend du mod√®le de disque, de son √¢ge, et de l'emplacement des donn√©es)
- **SSD SATA typique :** 400‚Äì550 Mo/s
- **NVMe SSD (dans un pool) :** 250‚Äì7,000 Mo/s (limites de la g√©n√©ration PCIe et du r√©seau/PCIe; par exemple, le r√©seau 10GbE plafonne √† \~1,100 Mo/s)

:::note[Special cas]
- Si un disque est d√©sactiv√© et que ses donn√©es sont en cours de reconstruction, Unraid utilisera les disques restants avec les informations de parit√© pour recr√©er les donn√©es. Pendant ce processus, la vitesse de lecture peut ralentir √† 30‚Äì60 Mo/s ou m√™me moins, en fonction du disque le plus lent de votre syst√®me.
- Any ongoing operations in the array, such as a %%parity check|parity-check%% or rebuilding a drive, can also affect read performance. This is due to increased movement of the drive heads and overall contention for resources.
:::

---

## Caches temporaires

Les %%Cache pools|cache-pool%% dans Unraid offrent des avantages significatifs, notamment pour les t√¢ches intensives en √©criture, les machines virtuelles (VM) et les conteneurs Docker. Ces pools fonctionnent s√©par√©ment de l'ensemble principal et peuvent √™tre configur√©s avec plusieurs disques en utilisant soit le syst√®me de fichiers %%BTRFS|btrfs%% soit le %%ZFS|zfs%%, prenant en charge diverses configurations %%RAID|raid%% pour la vitesse et la protection des donn√©es.

<h3>Pools de cache vs ensemble principal</h3>

| Fonctionnalit√©                 | Pool de cache (BTRFS)                                                                                              | Pool de cache (ZFS)                                                                                                                              | Ensemble principal (Unraid)                                           |
| ------------------------------ | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------- |
| **Vitesse de lecture**         | SSD : 400‚Äì550 Mo/s, NVMe : 250‚Äì7,000 Mo/s\*                                                                        | SSD : 400‚Äì550 Mo/s, NVMe : 250‚Äì7,000 Mo/s\*                                                                                                      | HDD : 70‚Äì250 Mo/s (par disque)                                        |
| **Vitesse d'√©criture**         | SSD : 400‚Äì550 Mo/s, NVMe : 250‚Äì7,000 Mo/s\*                                                                        | SSD : 400‚Äì550 Mo/s, NVMe : 250‚Äì7,000 Mo/s\*                                                                                                      | 20‚Äì120 Mo/s (d√©pend du mode parit√©)                                   |
| **Protection des donn√©es**     | RAID 1\|raid1%%/RAID 10\|raid10%% ; RAID 5\|raid5%%/RAID 6\|raid6%% (exp√©rimental, non pour des donn√©es critiques) | RAID 1\raid1%%/RAID 10\raid10%% ; RAIDZ1\raidz1%%/RAIDZ2\raidz2%%/RAIDZ3\raidz3%% (stable, pr√™t pour la production)                              | Bas√© sur la parit√©, agnostique du syst√®me de fichiers                 |
| **Expansion**                  | Taille de disque vari√©e; ajout/suppression de dispositifs de mani√®re dynamique                                     | Support d'ajout/suppression limit√©; impossible de supprimer de RAIDZ; ajout d'un seul dispositif pour √©tendre un seul-vdev RAIDZ dans Unraid 7.2 | Ajout de disques, mais pas de striping ni d'extension de performances |
| **Complexit√© de r√©cup√©ration** | Risque accru de perte de donn√©es ; outils %%BTRFS\|btrfs%% requis                                                  | Risque √©lev√© de perte de donn√©es ; outils ZFS\|zfs%% requis                                                                                      | Reconstruction plus facile bas√©e sur la parit√©                        |
| **Meilleur pour**              | Applications, VM, √©critures fr√©quentes                                                                             | Applications, VM, √©critures fr√©quentes, charges de travail d'entreprise                                                                          | Stockage en vrac, biblioth√®ques multim√©dia                            |

\*Les vitesses r√©elles NVMe d√©pendent de la g√©n√©ration PCIe, du refroidissement et de la bande passante r√©seau (par exemple, le 10GbE plafonne √† \~1,100 Mo/s).\*

<h4>Avantages des pools de cache</h4>

- **Performance √©lev√©e :** Les pools NVMe peuvent saturer les r√©seaux 10GbE/40GbE (1 100‚Äì3 500 Mo/s).
- **RAID flexible :** Les %%BTRFS|btrfs%% et %%ZFS|zfs%% prennent en charge %%RAID 1|raid1%%/%%RAID 10|raid10%% pour la redondance sans tailles de disque identiques.
- **Faible latence :** Id√©al pour les bases de donn√©es, les VM et les conteneurs Docker.
- **Avantages de ZFS :** %%ZFS|zfs%% offre des fonctionnalit√©s de niveau entreprise telles que la v√©rification de l'int√©grit√© des donn√©es, la compression et les instantan√©s.

<h4>Inconv√©nients des pools de cache</h4>

- **Pas de protection par parit√© :** Les donn√©es ne sont pas prot√©g√©es tant qu'elles ne sont pas d√©plac√©es vers l‚Äôensemble.
- **Risques de r√©cup√©ration :** Le %%BTRFS|btrfs%% %%RAID 5|raid5%%/%%RAID 6|raid6%% est instable ; les pools √† un seul disque manquent de redondance.
- **Consid√©rations pour ZFS :** %%ZFS|zfs%% n√©cessite plus de RAM et a des exigences mat√©rielles plus strictes que %%BTRFS|btrfs%%.

For more detailed information about %%cache pools|cache-pool%%, including how to set them up, manage them, and advanced features, check the [Cache pools](./cache-pools.mdx) page.

---

## D√©pannage

### D√©pannage des √©checs de d√©marrage de l'ensemble

Si votre array ne d√©marre pas, suivez ces √©tapes pour identifier et r√©soudre les probl√®mes courants. Recherchez les messages d'erreur sous ***Main ‚Üí Op√©rations de l'array***.

```mdx-code-block

<Tabs>
  <TabItem value="missing-disks" label="Missing disks" default>
    <TroubleshootMissingDisks />
  </TabItem>

  <TabItem value="device-limit" label="Device limit">
    <TroubleshootDeviceLimit />
  </TabItem>

  <TabItem value="key-issues" label="License issues">
    <TroubleshootLicenseIssues />
  </TabItem>

  <TabItem value="key-server" label="Key server connection">
    <TroubleshootKeyServer />
  </TabItem>

  <TabItem value="withdrawn" label="Withdrawn release">
    <TroubleshootWithdrawnRelease />
  </TabItem>
</Tabs>
```

### √âchec de disque pendant une reconstruction

Si un second disque √©choue pendant que vous en reconstruisez un autre, ce que vous pouvez faire d√©pendra de votre configuration de parit√©.

<h4>Disque de %%parit√© unique|parity-drives%%</h4>

Si un disque √©choue pendant la reconstruction d‚Äôun autre, la reconstruction s‚Äôarr√™tera car les donn√©es ne peuvent pas √™tre restaur√©es avec pr√©cision. Malheureusement, vous ne pourrez pas r√©cup√©rer vos donn√©es dans cette situation.

<h4>Double disque de %%parit√©|parity-drives%%</h4>

If you have two %%parity drives|parity-drives%%, you have more options:

- Vous pouvez attendre la fin de la premi√®re reconstruction puis g√©rer le deuxi√®me disque d√©faillant.
- Ou, vous pouvez arr√™ter la reconstruction actuelle, remplacer le second disque d√©faillant, puis d√©marrer l'ensemble pour reconstruire les deux disques en m√™me temps.

Si la premi√®re reconstruction est presque termin√©e, il est g√©n√©ralement pr√©f√©rable de la laisser se terminer. Si elle vient de commencer, il peut √™tre plus rapide de reconstruire les deux en m√™me temps.

:::warning
Rebuilding disks puts a lot of stress on all drives, which increases the chance of new failures. Always check drive health using %%SMART reports|smart-report%% before starting a rebuild.
:::

:::info\[Rebuild Temps

Pr√©parez-vous √† ce que le processus de reconstruction prenne plusieurs heures. Le temps peut varier en fonction de la taille du disque et de l'activit√© de votre syst√®me. Les disques plus grands et les syst√®mes occup√©s peuvent prendre plus de temps.

:::
