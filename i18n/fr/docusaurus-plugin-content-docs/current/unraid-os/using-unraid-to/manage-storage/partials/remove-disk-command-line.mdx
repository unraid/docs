Si vous êtes à l'aise avec la ligne de commande, cette méthode vous donne plus de contrôle et peut être utile si l'option %%WebGUI|web-gui%% n'est pas disponible. Pour plus d'informations sur l'utilisation de l'interface de ligne de commande, voir [Interface en ligne de commande](../../../system-administration/advanced-tools/command-line-interface.mdx).

:::note[Before au début]

- Assurez-vous que le profil %%RAID|raid%% de votre pool permet le retrait d'appareils ; vous ne pouvez pas retirer un appareil d'une pool %%RAID 1|raid1%% à deux appareils sans la changer d'abord en profil unique.
- Vérifiez que les appareils restants auront suffisamment d'espace pour vos données.
  :::

Pour retirer un disque en utilisant la ligne de commande :

1. **Ouvrir une session terminale** : Assurez-vous que l'%%array|array%% est en cours d'exécution et ouvrez votre interface de ligne de commande.

2. **Retirer l'appareil** : Tapez la commande ci-dessous, en remplaçant `X` par la lettre correspondant au disque que vous souhaitez retirer (comme indiqué dans l'onglet Principal) :

   ```bash
   btrfs device remove /dev/sdX1 /mnt/cache
   ```

   - Pour les appareils chiffrés, utilisez : `/dev/mapper/sdX1`.
   - Pour les appareils NVMe, utilisez : `nvmeXn1p1`.

3. **Attendre la fin de l'opération** : l'appareil sera retiré une fois que vous verrez le curseur revenir.

4. **Faire en sorte que Unraid "oublie" le membre supprimé** :
   - Arrêtez le %%array|array%%.
   - Désassigner tous les appareils de la pool.
   - Démarrer l'%%array|array%% (Unraid effacera la configuration de la pool).
   - Si des services Docker/%%VM|vm%% utilisent cette pool, désactivez-les avant de démarrer l'%%array|array%% pour éviter que Unraid ne recrée des images ailleurs.

5. **Réassigner les appareils** : Arrêtez à nouveau l'%%array|array%%, réassignez tous les membres restants de la pool sauf l'appareil retiré, puis redémarrez l'%%array|array%%.

**Pour retirer plusieurs appareils** :

Vous pouvez le faire en une seule commande :

```bash
btrfs device remove /dev/sdX1 /dev/sdY1 /mnt/cache
```

Cependant, gardez à l'esprit que le retrait se fera toujours un par un.

:::note[Timing]
Similaire à la méthode %%WebGUI|web-gui%%, retirer des appareils et rééquilibrer peut prendre plusieurs heures selon le volume de données et la vitesse des appareils.
:::

:::important
Si vous n'avez plus qu'un seul dispositif dans le pool, vous devrez convertir le profil %%RAID|raid%% en **single** pour vous assurer que tout fonctionne correctement. Pour de plus amples instructions, reportez-vous à la section sur [Changer le niveau RAID du pool en single](#changing-pool-raid-levels).
:::
