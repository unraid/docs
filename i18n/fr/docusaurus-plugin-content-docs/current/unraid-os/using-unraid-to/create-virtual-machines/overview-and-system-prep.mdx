---
sidebar_position: 1
sidebar_label: Overview & system prep
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HvmSupport from './partials/hvm-support.mdx';
import IommuSupport from './partials/iommu-support.mdx';
import GpuNvidia from './partials/gpu-nvidia.mdx';
import GpuAmd from './partials/gpu-amd.mdx';

# Overview & system prep

Virtual machines (VMs) allow you to run full operating systems, such as Windows, macOS, or Linux, on your Unraid server, side-by-side with Docker containers.

%%VMs|vm%% are ideal for:

- Running applications that require a full OS or are unavailable as containers.
- Assigning dedicated hardware to guest systems, such as GPUs or USB devices.
- Testing, development, gaming, or running legacy software.
- Hosting multiple isolated environments for different workloads.

For a list of operating systems tested with Unraid, see the [%%VM|vm%% Setup](./vm-setup.mdx) page.

<details>
  <summary>**Sous le capot :** Développez pour en savoir plus sur la pile technologique derrière la virtualisation d'Unraid</summary>

  La pile de virtualisation d’Unraid est conçue pour être flexible et performante, utilisant plusieurs technologies open-source pour prendre en charge une gestion efficace des %%machines virtuelles (VM)|vm%%. Cette vue d'ensemble explique les composants clés et leur interaction de manière conviviale.

  <h4>Technologies de base</h4>

  | Technologie                       | Ce qu'il fait                                                                                           | Pourquoi c'est important                                                                                                    |
  | --------------------------------- | ------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------- |
  | %%KVM\|kvm%%                      | Agit en tant que %%hyperviseur\|hypervisor%% intégré au noyau Linux.                                    | Permet à Unraid de faire fonctionner les %%VMs\|vm%% en douceur avec accélération matérielle et un minimum de surcharge.    |
  | %%QEMU\|qemu%%                    | Emulates the essential hardware (like motherboard, CPU, and controllers) for %%VMs\|vm%%.               | Fonctionne avec %%KVM\|kvm%% pour créer un environnement virtuel complet pour les systèmes d'exploitation invités.          |
  | %%Libvirt\|libvirt%%              | Gère les définitions des %%VM\|vm%%, ainsi que les interfaces de stockage et réseau.                    | Stocke les configurations de %%VM\|vm%% dans `libvirt.img` et fournit une API de gestion cohérente.                         |
  | %%VNC\|vnc-session%%              | Offre un accès graphique à distance aux %%VM\|vm%%.                                                     | Permet d'interagir avec les %%VMs\|vm%% depuis n'importe quel appareil via un navigateur ou un client %%VNC\|vnc-session%%. |
  | %%VirtIO\|virtio%%                | Fournit des pilotes paravirtualisés haute performance pour les périphériques réseau et disque.          | Enhances %%VM\|vm%% speed and efficiency, requiring %%VirtIO\|virtio%% drivers installed in the guest OS.                   |
  | %%VirtFS\|virtfs%% (`9p`)         | Facilite le partage de systèmes de fichiers entre l'hôte et les invités basés sur Linux.                | Utile pour le développement et les besoins avancés de partage de fichiers.                                                  |
  | %%HVM\|hvm%%                      | Supports hardware-assisted virtualization (%%Intel VT-x\|intel-vt-x%%, %%AMD-V\|amd-v%%).               | Nécessaire pour faire fonctionner les %%VMs\|vm%% avec une accélération matérielle complète.                                |
  | %%VFIO\|vfio%% & %%IOMMU\|iommu%% | Permettent le passage direct de périphériques PCI aux %%VMs\|vm%% (comme les GPU et périphériques USB). | Essentiel pour obtenir une performance quasi-native et maintenir l'isolement sécuritaire.                                   |

  <h4>Comment Unraid implémente le support de %%VM|vm%%</h4>

  - %%KVM|kvm%%/%%QEMU|qemu%%: Unraid’s virtualization is fundamentally based on %%KVM|kvm%% and %%QEMU|qemu%%, providing robust %%VM|vm%% hosting capabilities.
  - %%Libvirt|libvirt%%: %%VM|vm%% definitions are stored as XML files in `libvirt.img` (typically found in the `system` share).
  - **Default shares**:
    - `domains`: Holds %%VM|vm%% %%virtual disk images|virtual-disk-images%%.
    - `isos`: Contains installation ISOs and driver images.
    - `system`: Stores `libvirt.img` and other critical system files.
    - All default to **Use %%Cache|cache%%: Prefer** for optimal performance.
  - %%VNC|vnc-session%%: Unraid features a built-in NoVNC client for easy browser-based access to %%VMs|vm%%, with the option to use external %%VNC clients|vnc-session%% as needed.

  :::tip
  La plupart des utilisateurs n'ont pas besoin d'interagir directement avec ces technologies, mais comprendre ce qui se passe "sous le capot" peut être incroyablement utile pour le dépannage et la personnalisation avancés. Pour des informations plus détaillées, consultez la documentation officielle pour [KVM](https://www.linux-kvm.org/page/Main_Page), [QEMU](https://www.qemu.org/), [Libvirt](https://libvirt.org/) et [VirtIO](https://www.linux-kvm.org/page/Virtio).
  :::
</details>

## Requirements

To run %%VMs|vm%% on Unraid, your system must meet the following requirements:

| Composant      | Exigence minimale                                             | Recommandé pour les %%VMs\|vm%% & le passage %%GPU\|gpu-passthrough%%.         |
| -------------- | ------------------------------------------------------------- | ------------------------------------------------------------------------------ |
| CPU            | 64 bits, 4 cœurs, 2,4 GHz+ (Intel/AMD)                        | 8+ cœurs, 3,0 GHz+ (Intel Core i7/i9, AMD Ryzen 7/9, ou plus récent)           |
| Virtualisation | %%HVM\|hvm%% (%%Intel VT-x\|intel-vt-x%% or %%AMD-V\|amd-v%%) | %%HVM\|hvm%% + %%IOMMU\|iommu%% (Intel VT-d ou AMD-Vi)                         |
| RAM            | 8 Go                                                          | 16 Go ou plus (ajoutez de la RAM pour chaque %%VM\|vm%% active).               |
| Storage        | SSD/NVMe pour les disques de %%VM\|vm%%.                      | NVMe haut de gamme pour une meilleure performance                              |
| Réseau         | Ethernet Gigabit (PCIe recommandé)                            | Ethernet 2,5G/10G pour des charges de travail exigeantes                       |
| GPU (optional) | NVIDIA RTX moderne (recommandé) ou AMD Radeon RX              | RTX 3000/4000 series (NVIDIA recommended for better passthrough compatibility) |

:::tip[GPU passthrough compatibility]
NVIDIA GPUs are **generally recommended** for %%VM|vm%% passthrough due to better compatibility and reliability. AMD GPUs can be more challenging to pass through, and some newer models (including RX 7000/9000 series) may not work reliably or at all with %%VMs|vm%%. If you're planning to use %%GPU passthrough|gpu-passthrough%%, consider NVIDIA options for the best experience.
:::

:::note
Your motherboard BIOS must enable Hardware-assisted virtualization and %%IOMMU|iommu%% support. Look for settings labeled “%%Intel VT-x|intel-vt-x%%,” “Intel VT-d,” “%%AMD-V|amd-v%%,” or “AMD-Vi.”
:::

### VM resources

| Type de %%VM\|vm%%       | RAM per %%VM\|vm%% | vCPUs per %%VM\|vm%% | Exemples d'utilisation                           |
| ------------------------ | ------------------ | -------------------- | ------------------------------------------------ |
| Serveur virtuel          | 1–2 GB             | 1–2                  | Linux léger, utilitaires %%VMs\|vm%%             |
| Bureau virtuel           | 4–8 GB             | 2–4                  | Windows 11, bureau Ubuntu, RDP                   |
| Hybrid/gaming %%VM\|vm%% | 8–16 GB +          | 4–8+                 | %%GPU passthrough\|gpu-passthrough%%, gaming, ML |

- Memory and CPU are only consumed while %%VMs|vm%% are running.
- Plan for peak usage if running multiple %%VMs|vm%% simultaneously.
- Always allocate resources based on guest OS and workload requirements.

### HVM & IOMMU: What they enable

<Tabs>
  <TabItem value="hvm" label="Support HVM">
    <HvmSupport />
  </TabItem>

  <TabItem value="iommu" label="Support IOMMU">
    <IommuSupport />
  </TabItem>
</Tabs>

:::important[How to check support]

- **HVM support:** Shows if hardware virtualization is present and enabled.
- **Support IOMMU :** Indique si le passage de périphérique est disponible et activé.
  :::

---

### Graphics device passthrough

Passing a GPU to a %%VM|vm%% allows for near-native graphics performance, making it ideal for gaming, creative work, or machine learning.

<Tabs>
  <TabItem value="nvidia" label="NVIDIA">
    <GpuNvidia />
  </TabItem>

  <TabItem value="amd" label="AMD">
    <GpuAmd />
  </TabItem>
</Tabs>

:::tip[General tips]

- Use %%OVMF|ovmf%% (%%UEFI|uefi%%) for %%VMs|vm%% with modern GPUs.
- Always use the latest Unraid version for improved hardware support.
- Les technologies comme NVIDIA Optimus peuvent permettre le %%GPU passthrough|gpu-passthrough%% pour les ordinateurs portables ou les configurations avancées, mais les résultats varient.
  :::

:::info[Always changing]
Hardware and driver compatibility changes rapidly. Before purchasing a GPU for passthrough, check the [Unraid forums](https://forums.unraid.net/) and vendor documentation for up-to-date reports and user experiences.
:::

---

## System preparation

Before you create virtual machines, complete these essential setup tasks to ensure your system is ready.

### Adjust BIOS settings

To fully utilize Unraid's virtualization capabilities, your BIOS must enable hardware-assisted virtualization and I/O memory management. Look for settings labeled **Virtualization**, %%Intel VT-x|intel-vt-x%%, **Intel VT-d**, %%AMD-V|amd-v%%, or **AMD-Vi** and set them to **Enabled**.

:::note
BIOS interfaces vary by manufacturer. Check your motherboard manual for the exact location of these settings.
:::

### Configure a network bridge

%%Virtual machines|vm%% can connect to your network using one of two bridge types. Choose the one that best fits your needs:

| Type de pont             | Description                                                                                                                                                                                                  | Use case                                                                                                     |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------ |
| **Private NAT (virbr0)** | Managed by %%libvirt\|libvirt%%. This option provides an internal DHCP server and an isolated subnet. %%VMs\|vm%% can access the internet and host file shares, but are isolated from other network devices. | Idéal pour les %%VMs\|vm%% isolées ayant besoin d'un accès Internet et hôte mais sans visibilité LAN.        |
| **Pont public (br0)**    | Géré par Unraid. Cette option connecte directement les %%VMs\|vm%% à votre LAN, avec des IP assignées par votre routeur. Les adresses MAC sont préservées pour une attribution d'IP cohérente.               | Best for %%VMs\|vm%% that should function as regular devices on your network, accessible from other devices. |

:::important
If your Unraid server is connected to Wi-Fi, using the **Private NAT (virbr0)** network bridge for your %%virtual machines|vm%% is recommended. This is because Wi-Fi interfaces support only a single MAC address, which restricts the use of public bridges and custom network types. By utilizing the **virbr0** bridge, your %%VMs|vm%% will have complete network access through %%NAT|nat%%, although they will not be directly accessible from other devices on your local area network (LAN). However, you can still access the %%VMs|vm%% via %%VNC|vnc-session%% through the host.
:::

- Enable the public bridge in ***Network settings → Enable bridging***.
- Set your preferred bridge as the **Default network bridge** in %%VM|vm%% settings. You may need to enable advanced view to see this option.

---

### User shares for virtualization

Unraid creates two default %%user shares|user-share%% for %%virtualization|virt%%:

- `isos`: This share stores installation media files for your %%VMs|vm%%.
- `domains`: This share holds %%virtual machine|vm%% %%virtual disk images|virtual-disk-images%% and configuration files.

Consider creating a separate share for %%VM|vm%% backups to protect your data.

<h4>Share configuration recommendations</h4>

- Store active %%VM|vm%% %%virtual disk images|virtual-disk-images%% on a %%cache|cache%%-only share for the best performance.
- Using SSDs in your %%cache pool|cache-pool%% significantly improves %%VM|vm%% responsiveness.
- %%Cache|cache%% usage for the `isos` share is optional.

:::important
Do not store active %%virtual machines|vm%% on a share with **Use %%cache|cache%%** set to **Yes**. This can cause %%VMs|vm%% to be moved to the %%array|array%% during the %%Mover|mover%% process, leading to degraded performance.
:::

## Set up virtualization preferences

Before you begin, ensure your system is ready for virtualization (see [System preparation](#system-preparation)). Setting your %%virtualization|virt%% preferences in Unraid helps ensure your %%virtual machines (VMs)|vm%% are configured for optimal performance and compatibility.

To set your virtualization preferences:

1. In the %%WebGUI|web-gui%%, go to ***Settings → VM Manager***.
2. **For Windows VMs:**
   - Download the latest stable %%VirtIO|virtio%% Windows drivers ISO from the [official repository](https://github.com/virtio-win/virtio-win-pkg-scripts/blob/master/README.md).
   - Copy the %%VirtIO|virtio%% ISO file to your **isos** share.
   - In **VM Manager**, use the file picker for **VirtIO Windows Drivers ISO** to select the ISO you just copied.
   - (Optional) Override the default driver ISO for individual %%VMs|vm%% in **Advanced View**.
3. **Select a default network bridge:**
   - Choose `virbr0` for a private network bridge, or select a public bridge (e.g., `br0`) created in **Network Settings**.
   - (Optional) Override the default network bridge for each %%VM|vm%% in **Advanced View**.
4. **PCIe ACS override (Advanced):**
   - Toggle **PCIe ACS Override** to **On** if you need to assign multiple PCI devices (like %%GPUs|gpu-passthrough%% or USB controllers) to different %%VMs|vm%%.
   - This option breaks apart %%IOMMU|iommu%% groups, allowing more flexible device passthrough.

:::warning
This setting is experimental and may affect system stability. Use with caution.
:::

5. Click **Apply** to save your settings.
