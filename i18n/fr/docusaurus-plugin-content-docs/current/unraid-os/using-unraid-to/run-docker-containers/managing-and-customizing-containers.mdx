---
sidebar_position: 3
sidebar_label: Gestion et personnalisation des conteneurs
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import DockerNetworkType from './partials/managing-and-customizing-containers/network-type.mdx';
import DockerVolumeMappings from './partials/managing-and-customizing-containers/volume-mappings.mdx';
import DockerPortMappings from './partials/managing-and-customizing-containers/port-mappings.mdx';
import DockerEnvironmentVariables from './partials/managing-and-customizing-containers/environment-variables.mdx';
import DockerCommandStart from './partials/managing-and-customizing-containers/command-start.mdx';
import DockerCommandStop from './partials/managing-and-customizing-containers/command-stop.mdx';
import DockerCommandRestart from './partials/managing-and-customizing-containers/command-restart.mdx';
import DockerCommandStatus from './partials/managing-and-customizing-containers/command-status.mdx';
import DockerCommandLogs from './partials/managing-and-customizing-containers/command-logs.mdx';

# Gestion et personnalisation des conteneurs

:::caution\[Disclaimer]

Cette page est √©crite pour aider les utilisateurs de tous niveaux √† tirer le meilleur parti des conteneurs Docker sur Unraid OS. Les conseils et les meilleures pratiques proviennent de l'√©quipe d'Unraid, qui veille √† ce qu'ils soient adapt√©s aux besoins des utilisateurs. Cependant, gardez √† l'esprit que Docker √©volue constamment, donc pour les fonctionnalit√©s les plus r√©centes, les configurations avanc√©es ou les probl√®mes de d√©pannage qui vont au-del√† de ce que couvre Unraid, il est toujours bon de consulter la [documentation officielle de Docker](https://docs.docker.com/).

:::

Avant de personnaliser un conteneur Docker dans Unraid, il est utile de comprendre les options de configuration de base. Chaque [mod√®le de conteneur](./community-applications.mdx) offre une interface conviviale pour configurer le r√©seau, le stockage et les variables d'environnement, vous permettant d'adapter le comportement du conteneur √† vos besoins sans utiliser d'outils en ligne de commande complexes.

<Tabs>
  <TabItem value="type-de-r√©seau" label="Type de r√©seau" default>
    <DockerNetworkType />
  </TabItem>

  <TabItem value="mappages-de-volume" label="Mappages de volume">
    <DockerVolumeMappings />
  </TabItem>

  <TabItem value="mappages-de-port" label="Mappages de port">
    <DockerPortMappings />
  </TabItem>

  <TabItem value="variables-d'environnement" label="Variables d'environnement">
    <DockerEnvironmentVariables />
  </TabItem>
</Tabs>

## Cr√©ation et d√©marrage des conteneurs

Une fois que vous avez configur√© le r√©seau de votre conteneur, les mappages de volumes, les mappages de ports et les variables d'environnement, vous √™tes pr√™t √† cr√©er et lancer votre conteneur Docker. Cette section vous guidera √† travers le processus de cr√©ation, expliquera comment g√©rer l'ordre de d√©marrage et les d√©pendances, et fournira des conseils pour une personnalisation avanc√©e du d√©marrage.

### Cr√©ation d'un conteneur

Apr√®s avoir examin√© vos param√®tres de configuration dans le mod√®le de conteneur :

1. Cliquez sur **Cr√©er** pour commencer √† t√©l√©charger et configurer le conteneur.
   - √âvitez de fermer votre fen√™tre de navigateur ou de naviguer ailleurs jusqu'√† ce que le processus soit termin√©.
   - Le t√©l√©chargement initial pour un nouveau d√©p√¥t peut prendre plus de temps que les t√©l√©chargements ult√©rieurs.
2. Une fois le processus termin√©, cliquez sur **Termin√©** pour revenir √† la page Docker, o√π vous pourrez g√©rer ou ajouter d'autres conteneurs.

### Planification de votre s√©quence de d√©marrage

Certains conteneurs d√©pendent d'autres pour fonctionner correctement. Par exemple, une application peut avoir besoin d'un conteneur de base de donn√©es en premier, ou un service peut n√©cessiter un conteneur [%%VPN|vpn-tunnel%%](../../system-administration/secure-your-server/tailscale.mdx) actif avant de d√©marrer.

:::important[Plan votre d√©marrage]

- Identifiez les conteneurs qui fournissent des services essentiels (comme les bases de donn√©es, les %%VPNs|vpn-tunnel%% ou les passerelles de stockage).
- Assurez-vous que les conteneurs d√©pendants ne sont d√©marr√©s qu'apr√®s que leurs pr√©requis aient √©t√© lanc√©s et pr√™ts.
- Consultez la documentation pour chaque conteneur afin de comprendre les exigences sp√©cifiques de d√©marrage.

:::

---

## D√©marrage avanc√© des conteneurs

Unraid vous offre un contr√¥le flexible sur les conteneurs qui d√©marrent automatiquement et dans quel ordre. Ceci est particuli√®rement utile si vous avez des conteneurs qui d√©pendent d'autres (comme un service de base de donn√©es ou un service %%VPN|vpn-tunnel%%).

Pour garantir qu'un conteneur d√©marre automatiquement au d√©marrage de l'%%array|array%% :

1. Allez dans l'onglet **Docker** dans le %%WebGUI|web-gui%%.
2. Basculez l'interrupteur **D√©marrage automatique** sur **ON** pour chaque conteneur que vous voulez lancer automatiquement.

### Personnaliser l'ordre et les d√©lais de d√©marrage

Par d√©faut, Unraid d√©marre tous les conteneurs en d√©marrage automatique le plus rapidement possible, dans l'ordre o√π ils apparaissent dans l'onglet Docker. Vous pouvez personnaliser cet ordre et ajouter des temps d'attente entre les d√©marrages des conteneurs :

1. Sur l'onglet **Docker**, d√©verrouillez la liste des conteneurs en utilisant l'ic√¥ne de cadenas.
2. Faites glisser et d√©posez les conteneurs pour r√©organiser leur ordre.
3. Passez √† la **Vue avanc√©e** en utilisant le bouton bascule en haut √† droite.
4. Dans la colonne **AutoStart**, entrez un temps d'attente (en secondes) dans le champ **attente** pour tout conteneur n√©cessitant un suppl√©ment de temps avant que le suivant ne d√©marre.
   - Utilisez l'essai et l'erreur pour d√©terminer les meilleurs temps d'attente pour votre configuration.

:::tip

D√©finir l'ordre correct et les temps d'attente est particuli√®rement important pour les conteneurs qui d√©pendent de services fournis par d'autres (par exemple, d√©marrer une base de donn√©es avant une application qui l'utilise, ou un %%VPN|vpn-tunnel%% avant des applications d√©pendantes).

:::

### Tester votre s√©quence de d√©marrage

Bien qu'Unraid ne poss√®de pas de fonctionnalit√© d√©di√©e de "test de s√©quence de d√©marrage", vous pouvez simuler et v√©rifier votre ordre de d√©marrage :

1. Arr√™tez tous les conteneurs depuis l'onglet **Docker**.
2. D√©marrez chaque conteneur manuellement, dans cet ordre planifi√©, en utilisant le bouton **D√©marrer**.
3. Surveillez les journaux des conteneurs et le comportement des applications pour vous assurer que les d√©pendances sont satisfaites et que les services se lancent comme pr√©vu.
4. Ajustez l'ordre de d√©marrage ou les temps d'attente si n√©cessaire.

:::important

Testez votre s√©quence de d√©marrage apr√®s avoir modifi√© les d√©pendances de conteneurs ou ajout√© de nouveaux services, surtout si votre configuration repose sur un timing de d√©marrage sp√©cifique.

:::

---

## Contr√¥ler vos conteneurs

Une fois que vous avez cr√©√© et d√©marr√© votre conteneur Docker, sa gestion est facile via le %%WebGUI|web-gui%%. Ce guide vous expliquera comment utiliser le menu contextuel, comprendre les indicateurs de sant√© du conteneur et acc√©der aux mappages de volumes dans votre conteneur.

Pour acc√©der au menu contextuel du conteneur, allez dans l'onglet **Docker** ou **Dashboard** et cliquez sur l'ic√¥ne du conteneur que vous souhaitez g√©rer. Ce menu offre un acc√®s simple aux actions courantes :

<div style={{ margin: 'auto', maxWidth: '286px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  ![Docker Guide - Controlling](/img/Dockerguide-controlling.png)
</div>

| Option             | Description                                                                                                                                          |
| ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| **WebUI**          | Ouvre l'interface web du conteneur dans un nouvel onglet du navigateur (si disponible).                                                              |
| **Console**        | Ouvre une interface en ligne de commande pour interagir directement avec le conteneur.                                                               |
| **Arr√™ter**        | Arr√™te le conteneur en cours d'ex√©cution.                                                                                                            |
| **Pause**          | Met en pause le conteneur, arr√™tant temporairement tous les processus.                                                                               |
| **Red√©marrer**     | Red√©marre le conteneur, appliquant tout changement de configuration.                                                                                 |
| **Journaux**       | Affiche la sortie des journaux du conteneur pour le d√©pannage.                                                                                       |
| **Modifier**       | Modifiez les param√®tres du conteneur, tels que les mappages de ports ou de volumes. Les changements s'appliquent imm√©diatement apr√®s enregistrement. |
| **Supprimer**      | Supprime le conteneur. Vous pouvez choisir de retirer seulement le conteneur ou √©galement supprimer son image.                                       |
| **Page du projet** | Ouvre la page de projet du conteneur pour la documentation et le support.                                                                            |
| **Support**        | Fournit l'acc√®s aux ressources de support et d'aide pour le conteneur.                                                                               |
| **Plus d'infos**   | Affiche des informations suppl√©mentaires sur le conteneur et sa configuration.                                                                       |

### Indicateur de sant√©

Vous trouverez un indicateur de sant√© color√© √† c√¥t√© de l'ic√¥ne de chaque conteneur :

- üü¢ **Sain** : Indique que le conteneur fonctionne et r√©pond comme pr√©vu.
- üü° **Unhealthy** : Le conteneur fonctionne mais a √©chou√© √† son contr√¥le de sant√©. Consultez les journaux ou les param√®tres du conteneur pour plus d'informations.
- ‚ö™ **No health check** : Cela signifie qu'aucun contr√¥le de sant√© n'est configur√© pour le conteneur. C'est courant pour de nombreuses applications, et pas n√©cessairement un probl√®me.

:::note

Les contr√¥les de sant√© sont d√©finis par l'auteur du conteneur et peuvent ne pas √™tre pr√©sents pour toutes les images.

:::

---

## Mappages de volumes √† l'int√©rieur d'un conteneur

Lors de la configuration de votre application via son interface web, r√©f√©rencez le **chemin du conteneur** que vous avez configur√© lors de la configuration - pas le chemin h√¥te.

Par exemple, si vous avez mapp√© `/mnt/user/media` sur l'h√¥te √† `/unraid_media` dans le conteneur, vous devez utiliser `/unraid_media` dans les param√®tres de l'application.

<h3>Sc√©narios d'exemple</h3>

Voici quelques exemples montrant les configurations courantes de mappages de chemin que les utilisateurs ont fr√©quemment besoin lors de la configuration de conteneurs Docker. Ils d√©montrent comment traduire entre les chemins du syst√®me de fichiers h√¥te d'Unraid et les chemins internes du conteneur, vous aidant √† configurer correctement les applications.

- **Serveur multim√©dia :**
  Chemin h√¥te : `/mnt/user/media`\
  Chemin du conteneur : `/unraid_media`

  Dans l'application, d√©finissez l'emplacement de votre biblioth√®que multim√©dia sur `/unraid_media`.

- **Stockage d'appdata :**
  Chemin h√¥te : `/mnt/user/appdata/myapp`\
  Chemin du conteneur : `/config`

  Dans l'application, utilisez `/config` pour le stockage de la configuration.

- **Multiple %%user shares|user-share%%:**
  Host path: `/mnt/user/media` ‚Üí Container path: `/media`\
  Host path: `/mnt/user/data` ‚Üí Container path: `/data`

  R√©f√©rencez `/media` ou `/data` dans l'application selon les besoins.

:::important[Best pratique]

Utilisez toujours le [mode d'acc√®s](../manage-storage/shares.mdx) le plus restrictif (lecture seule ou lecture/√©criture) qui permet √† votre conteneur de fonctionner correctement.

:::

---

## Planifier le d√©marrage et l'arr√™t

Unraid ne prend pas en charge nativement les actions de d√©marrage ou d'arr√™t planifi√©es pour les **conteneurs Docker**, mais vous pouvez facilement automatiser ce processus en utilisant le [plugin **User Scripts**](../customize-your-experience/plugins.mdx). Cet outil puissant vous permet d'ex√©cuter des scripts personnalis√©s √† intervalles r√©guliers, permettant un contr√¥le automatique de vos conteneurs.

### Plugin User Scripts

Le plugin **User Scripts** vous permet de cr√©er, g√©rer et programmer des scripts shell personnalis√©s directement depuis le %%WebGUI|web-gui%%. Vous pouvez l'utiliser pour diverses t√¢ches d'automatisation, telles que le d√©marrage ou l'arr√™t des conteneurs, la sauvegarde des donn√©es ou l'ex√©cution de routines de maintenance.

- Installez le plugin depuis l'onglet **Apps** si vous ne l'avez pas encore fait.
- Acc√©dez-y via ***Param√®tres ‚Üí User Scripts*** pour cr√©er et g√©rer vos scripts.

Pour en savoir plus sur les plugins, consultez [Plugins](../customize-your-experience/plugins.mdx).

### Planification des actions des conteneurs

Pour automatiser le d√©marrage ou l'arr√™t de vos conteneurs selon un planning :

1. Installez le **plugin User Scripts** depuis l'onglet **Apps**.
2. Acc√©dez √† ***Param√®tres ‚Üí User Scripts***.
3. Cr√©ez un nouveau script pour chaque planification unique. Vous pouvez inclure des commandes pour plusieurs conteneurs dans un seul script s'ils partagent le m√™me programme.
4. D√©finissez le planning √† l'aide du menu d√©roulant ou utilisez une expression `cron` personnalis√©e pour des options de chronom√©trage plus avanc√©es.
5. Cliquez sur **Appliquer** pour enregistrer et activer votre script.

:::tip

Les expressions Cron permettent une planification flexible au-del√† des options int√©gr√©es. Par exemple, `0 3 * * 1` ex√©cute votre script √† 3h00 chaque lundi matin.

:::

### Exemples de commandes

<Tabs>
  <TabItem value="d√©marrer" label="D√©marrer le conteneur" default>
    <DockerCommandStart />
  </TabItem>

  <TabItem value="arr√™ter" label="Arr√™ter le conteneur">
    <DockerCommandStop />
  </TabItem>

  <TabItem value="red√©marrer" label="Red√©marrer le conteneur">
    <DockerCommandRestart />
  </TabItem>

  <TabItem value="statut" label="V√©rifier le statut du conteneur">
    <DockerCommandStatus />
  </TabItem>

  <TabItem value="journaux" label="Afficher les journaux du conteneur">
    <DockerCommandLogs />
  </TabItem>
</Tabs>

:::tip

Vous pouvez trouver le nom du conteneur dans l'onglet Docker ou en visualisant la commande `docker run` sur l'√©cran de configuration du conteneur.

:::
