---
sidebar_position: 2
sidebar_label: Mise à niveau d'Unraid
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import UpgradeModern from "./partials/upgrade-modern.mdx";
import UpgradeLegacy611612 from "./partials/upgrade-legacy-611-612.mdx";
import ManualDowngradeSimplest from "./partials/manual-downgrade-simplest.mdx";
import ManualDowngradeCommandLine from "./partials/manual-downgrade-command-line.mdx";

# Mise à niveau d'Unraid

La mise à niveau d'Unraid OS garantit que vous disposez des fonctionnalités, des mises à jour de sécurité et du support matériel les plus récents. Cette page décrit le processus de mise à niveau standard, ainsi que des conseils de dépannage et des options de mise à niveau manuelle.

:::note\[Prerequisites]

Avant de commencer la mise à niveau, assurez-vous de créer une sauvegarde complète de votre périphérique USB. Pour plus de détails, consultez [Sauvegarder votre périphérique](../maintain-and-update/changing-the-flash-device.mdx#backing-up-your-flash-device).

:::

:::tip[Best pratiques avant la mise à niveau]

1. **Faites une sauvegarde** de votre clé USB et de toutes données importantes.
2. **Lisez les notes de version** de la version que vous prévoyez d'installer.
3. **Mettez à jour tous les plugins** vers leurs dernières versions.
4. **Optionnellement, arrêtez le réseau** avant de procéder.
5. **Mettez à jour Unraid OS** en utilisant la page ***Outils → Mise à jour de l'OS***.
6. **Redémarrez** votre serveur pour finaliser la mise à jour.

:::

## Processus de mise à niveau standard

<Tabs>
  <TabItem value="modern-7x" label="Unraid 7.x et plus" default>
    <UpgradeModern />
  </TabItem>

  <TabItem value="legacy-611-612" label="Unraid 6.11 à 6.12">
    <UpgradeLegacy611612 />
  </TabItem>
</Tabs>

:::caution[ZFS avertissements de mise à niveau du pool]

Lors de la mise à niveau vers Unraid 7.x, vous pouvez voir des avertissements concernant les mises à jour des fonctionnalités du pool %%ZFS|zfs%% durant le démarrage ou dans le %%WebGUI|web-gui%%. Ces avertissements ne sont pas un signe de problème; ils indiquent simplement que votre pool %%ZFS|zfs%% utilise des fonctionnalités d'une ancienne version de ZFS.

Mettre à niveau votre pool n'est pas urgent, mais si vous décidez de le faire, gardez à l'esprit que cela peut ne pas fonctionner avec les versions précédentes d'Unraid. Cela signifie que vous ne pourrez peut-être pas revenir à une version antérieure d'Unraid après avoir effectué la mise à niveau.

Comme toujours, n'oubliez pas de sauvegarder vos données avant de mettre à niveau vos pools %%ZFS|zfs%%.

:::

---

## Dépannage des problèmes de mise à niveau

Si vous rencontrez des problèmes après la mise à niveau, consultez la section correspondante ci-dessous pour obtenir de l'aide.

<details>
  <summary><strong>Les conteneurs Docker ne fonctionnent pas correctement après une mise à niveau</strong> - Cliquez pour développer/réduire</summary>

  Si vous rencontrez des erreurs du type *"les couches du manifeste ne correspondent pas à la configuration de l'image,"* il peut être nécessaire de reconstruire votre fichier d'image Docker. Voici comment :
</details>

<details>
  <summary><strong>Les VMs affichent "impossible d'obtenir l'interface MTU" ou des erreurs réseau</strong> - Cliquez pour développer/réduire</summary>

  If you have %%OVMF|ovmf%%-based %%VMs|vm%% created in older Unraid versions, you might encounter an EFI shell. You can boot the %%VM|vm%% by entering the following commands:

  1. Tapez `fs0:`.
  2. Ensuite, tapez `cd efi/boot`.
  3. Enfin, tapez `bootx64.efi`.
  4. Naviguez vers l'onglet **Applications**, **Applications Précédentes**, cochez ce que vous souhaitez réinstaller, puis cliquez sur **"Installer xx Applications"**.
</details>

<details>
  <summary><strong>L'accès VNC aux VMs ne fonctionne pas ou est lent</strong> - Cliquez pour développer/réduire</summary>

  Pour résoudre ce problème, modifiez le %%VM|vm%% dans le %%WebGUI|web-gui%% et cliquez sur **Appliquer** sans apporter de modifications. Cette action mettra à jour le type de machine vers la version la plus récente supportée.

  1. Allez à l'onglet **VMs** et modifiez chaque %%VM|vm%% (assurez-vous d'activer **Vue avancée**).
  2. Réglez le pont réseau sur `br0` et cliquez sur **Appliquer**.
  3. Allez à ***Paramètres → Gestionnaire de VM*** (en **Vue avancée**) et réglez le pont par défaut sur `br0`.
</details>

<details>
  <summary><strong>La VM ne démarre pas (shell EFI apparaît)</strong> - Cliquez pour développer/réduire</summary>

  If you have %%OVMF|ovmf%%-based %%VMs|vm%% created in older Unraid versions, you might encounter an EFI shell. You can boot the %%VM|vm%% by entering the following commands:

  1. Modifiez la %%VM|vm%% de l'onglet **VMs** (sélectionnez **Vue avancée**).
  2. Réglez le **Pilote Vidéo %%VNC|vnc-session%%** sur **QXL** (recommandé). Essayez **Cirrus** ou **vmvga** si vous avez un succès limité avec QXL.
  3. Cliquez sur **Appliquer** pour enregistrer les modifications.
</details>

<details>
  <summary><strong>Les VMs affichent "impossible d'obtenir l'interface MTU" ou des erreurs réseau</strong> - Cliquez pour développer/réduire</summary>

  If you have %%OVMF|ovmf%%-based %%VMs|vm%% created in older Unraid versions, you might encounter an EFI shell. You can boot the %%VM|vm%% by entering the following commands:

  1. Tapez `fs0:`.
  2. Ensuite, tapez `cd efi/boot`.
  3. Enfin, tapez `bootx64.efi`.

  Si `fs0:` ne fonctionne pas, vous pouvez essayer `fs1:` à la place. Si vous continuez à avoir des problèmes, veuillez visiter les [forums Unraid](https://forums.unraid.net/) pour obtenir de l'aide.
</details>

<details>
  <summary><strong>L'accès VNC aux VMs ne fonctionne pas ou est lent</strong> - Cliquez pour développer/réduire</summary>

  Pour résoudre ce problème, modifiez le %%VM|vm%% dans le %%WebGUI|web-gui%% et cliquez sur **Appliquer** sans apporter de modifications. Cette action mettra à jour le type de machine vers la version la plus récente supportée.
</details>

<details>
  <summary><strong>La VM ne démarre pas (shell EFI apparaît)</strong> - Cliquez pour développer/réduire</summary>

  If you have %%OVMF|ovmf%%-based %%VMs|vm%% created in older Unraid versions, you might encounter an EFI shell. You can boot the %%VM|vm%% by entering the following commands:
</details>

---

## Rétrogradation manuelle

Les rétrogradations manuelles sont rarement nécessaires mais peuvent l'être si vous ne pouvez pas accéder au %%WebGUI|web-gui%% ou si vous devez revenir à une version antérieure. Avant de continuer, il est important de sauvegarder votre dispositif flash USB, les détails peuvent être trouvés dans [Sauvegarder votre dispositif flash](../maintain-and-update/changing-the-flash-device.mdx#backing-up-your-flash-device).

Utilisez ces méthodes uniquement si vous ne pouvez pas accéder au %%WebGUI|web-gui%% :

<Tabs>
  <TabItem value="Méthode la plus simple" label="Méthode la plus simple">
    <ManualDowngradeSimplest />
  </TabItem>

  <TabItem value="Méthode en ligne de commande" label="Méthode en ligne de commande">
    <ManualDowngradeCommandLine />
  </TabItem>
</Tabs>

:::info[What se produit pendant le processus de rétrogradation]

Lors de l'utilisation de l'outil de rétrogradation OS (WebGUI), l'outil gérera automatiquement les actions suivantes :

1. **Validation du système** : Vérifie que la rétrogradation est sûre à effectuer.
2. **Sauvegarde des fichiers** : Une sauvegarde de vos fichiers système actuels sera créée.
3. **Vérification de la version** : L'outil s'assure que les fichiers de la version cible sont valides et complets.
4. **Remplacement des fichiers** : Il remplace les fichiers actuels de l'OS par ceux de la version précédente.
5. **Préservation de la configuration** : Vos paramètres actuels seront conservés.
6. **Préparation du système** : Le système sera préparé pour la version précédente.
7. **Planification du redémarrage** : Un redémarrage sera programmé pour terminer la rétrogradation.

:::

#### Vérification post-rétrogradation

Après la rétrogradation et le redémarrage de votre serveur :

1. **Vérifiez la version** : Assurez-vous que vous exécutez la version d'Unraid que vous attendez.
2. **Testez les fonctionnalités essentielles** : Assurez-vous que les services %%array|array%%, Docker, et VM fonctionnent correctement.
3. **Vérifiez les plugins** : Vérifiez que vos plugins installés sont compatibles et fonctionnent comme prévu.
4. **Testez les conteneurs Docker** : Démarrez vos conteneurs Docker et confirmez leur bon fonctionnement.
5. **Vérifiez les VMs** : Si vous avez des machines virtuelles (VMs), assurez-vous qu'elles démarrent et fonctionnent correctement. Voir [Configuration de VM](../../using-unraid-to/create-virtual-machines/vm-setup.mdx) pour des conseils de configuration.
6. **Surveillez les journaux du système** : Surveillez les journaux du système pour tout message d'erreur. Utilisez [les outils de diagnostic](../../troubleshooting/diagnostics/capture-diagnostics-and-logs.mdx) pour capturer des informations détaillées sur le système.

#### Dépannage des problèmes de rétrogradation

<details>
  <summary><strong>Option de rétrogradation non disponible</strong> - Cliquez pour développer/réduire</summary>

  Si vous ne voyez pas d'option pour rétrograder :

  - **Vérifiez l'historique du système** : Assurez-vous que vous avez précédemment mis à jour à partir d'une version compatible.
  - **Vérifiez l'intégrité des fichiers** : Les fichiers de la version précédente peuvent être corrompus ou manquants.
  - **Vérifiez la compatibilité** : Il se peut que la version antérieure ne soit pas compatible avec votre matériel actuel.
  - **Méthode manuelle** : Si nécessaire, suivez les méthodes de rétrogradation manuelle décrites sur cette page.
</details>

<details>
  <summary><strong>Échec de la rétrogradation pendant le processus</strong> - Cliquez pour développer/réduire</summary>

  Si le processus de rétrogradation ne se passe pas comme prévu :

  1. **Ne paniquez pas** : Votre système devrait toujours fonctionner avec la version actuelle.
  2. **Vérifiez les journaux** : Examinez les journaux du système pour trouver des messages d'erreur spécifiques. Utilisez [les outils de diagnostic](../../troubleshooting/diagnostics/capture-diagnostics-and-logs.mdx) pour une analyse complète des journaux.
  3. **Vérifiez les fichiers** : Assurez-vous que tous les fichiers requis pour la version cible sont disponibles.
  4. **Essayez la méthode manuelle** : Si l'outil ne fonctionne pas, envisagez d'utiliser les méthodes de rétrogradation manuelle.
  5. **Contactez le support** : Si les problèmes persistent, contactez le support Unraid avec vos diagnostics.
</details>

<details>
  <summary><strong>Le système ne démarre pas après la rétrogradation</strong> - Cliquez pour développer/réduire</summary>

  Si votre système ne démarre pas après la rétrogradation :

  1. **Démarrez à partir de l'USB** : Utilisez un autre ordinateur pour accéder à votre dispositif flash USB. Voir [dépannage du démarrage](../../troubleshooting/common-issues/boot-and-startup-failures.mdx) pour des étapes de récupération détaillées.
  2. **Restaurer à partir de la sauvegarde** : Copiez vos fichiers de sauvegarde sur le dispositif USB.
  3. **Vérifiez l'intégrité des fichiers** : Assurez-vous que tous les fichiers système sont présents et non endommagés.
  4. **Essayez le mode sans échec** : Démarrez en [mode sans échec](../../using-unraid-to/customize-your-experience/plugins.mdx#troubleshooting-with-safe-mode) pour un dépannage plus approfondi.
  5. **Récupération manuelle** : Si nécessaire, utilisez les méthodes de récupération manuelle.
</details>

<details>
  <summary><strong>Plugins ou conteneurs Docker ne fonctionnent pas</strong> - Cliquez pour développer/réduire</summary>

  Après une rétrogradation, certains plugins ou conteneurs peuvent ne pas fonctionner correctement :

  - **Mettez à jour les plugins** : Cherchez des mises à jour de plugins compatible avec la version rétrogradée. Consulter [Applications Communautaires](../../using-unraid-to/run-docker-containers/community-applications.mdx) pour des versions compatibles.
  - **Reconstruisez Docker** : Supprimez et recréez votre fichier d'image Docker. Voir [Dépannage Docker](../../troubleshooting/common-issues/docker-troubleshooting.mdx#re-creating-the-docker-image-file) pour des étapes détaillées.
    - **Vérifiez les dépendances** : Assurez-vous que toutes les dépendances nécessaires sont disponibles.
    - **Compatibilité des plugins** : Certains plugins peuvent ne pas prendre en charge les versions antérieures d'Unraid.
    - **Plugins dépendants des fonctionnalités UI/WebGUI** : Les plugins reposant sur des fonctionnalités plus récentes de WebGUI peuvent ne pas fonctionner correctement sur des versions plus anciennes.
    - **Plugins de thèmes** : Les plugins de personnalisation visuelle peuvent nécessiter des mises à jour ou la suppression s'ils sont incompatibles.
</details>
