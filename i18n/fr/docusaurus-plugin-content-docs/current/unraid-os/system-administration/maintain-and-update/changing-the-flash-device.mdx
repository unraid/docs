---
sidebar_position: 3
sidebar_label: Changement du dispositif de flash
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import BackupUsingWebGUI from './partials/backup-using-webgui.mdx';
import BackupManualMethod from './partials/backup-manual-method.mdx';
import ReplacementUsingCreator from './partials/replacement-using-creator.mdx';
import ReplacementManualMethod from './partials/replacement-manual-method.mdx';

# Changement du dispositif de flash

Le périphérique flash USB est crucial pour votre serveur Unraid car il stocke le système d'exploitation, les fichiers de configuration et la licence. Si ce périphérique tombe en panne ou devient peu fiable, un remplacement rapide est essentiel pour éviter la perte de données et minimiser les temps d'arrêt.

:::caution

Lorsque vous remplacez votre dispositif USB Unraid, votre licence est transférée sur le nouvel appareil, et l'ancien appareil est mis sur liste noire **et ne peut plus être utilisé avec Unraid.** Cette action est permanente et irréversible.

:::

Voici quelques signes courants indiquant que votre dispositif USB doit être remplacé :

- Le serveur ne démarre pas ou des fichiers manquent sur l'appareil.
- L'appareil passe à plusieurs reprises en mode lecture seule ou affiche des erreurs de système de fichiers.
- L'appareil est perdu ou volé.
- La capacité de stockage est insuffisante pour les mises à jour ou les modifications de configuration.
- La taille physique de l'appareil ne convient pas à votre configuration de serveur.

---

## Choix d'un appareil de remplacement

Lorsque vous choisissez une nouvelle clé USB pour Unraid, privilégiez la fiabilité et la compatibilité plutôt que la vitesse.

<h4>Exigences</h4>

| Exigence                    | Détails                                                                                                                        |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| Version USB                 | USB 2.0 recommandé (généralement plus fiable et largement compatible que USB 3.0)                                              |
| GUID Unique                 | Doit contenir un GUID matériel unique dans la ROM programmable                                                                 |
| Taille minimale             | Au moins 4 Go                                                                                                                  |
| Taille maximale recommandée | 32 Go (pour faciliter les installations manuelles; les appareils plus grands peuvent fonctionner mais ne sont pas nécessaires) |
| Marque/fournisseur          | Achetez auprès de marques réputées et de détaillants de confiance; évitez le marché noir ou la seconde main                    |
| Taille physique             | Choisissez une forme qui s'adapte aux ports USB disponibles de votre serveur et aux contraintes physiques.                     |

Pour plus de conseils sur le choix du meilleur appareil flash pour Unraid, consultez [le guide vidéo de Spaceinvader One sur les tests de clés USB](https://www.youtube.com/watch?v=jjkaidlZmgs).

::::tip[Rules de la règle empirique pour le remplacement]

- Achetez des clés USB auprès de détaillants réputés et évitez les sites d'enchères et les vendeurs inconnus.
- Évitez les lecteurs d'occasion ou déjà utilisés.
- Testez le nouveau lecteur sur votre serveur avant de transférer votre licence.
- Soyez vigilant face aux produits contrefaits, même de marques bien connues.
  :::note

L'[annonce du forum sur les clés USB SanDisk contrefaites](https://forums.unraid.net/topic/119052-psa-on-sandisk-usbs/) de janvier 2022 confirme que SanDisk n'est pas recommandé en raison des appareils contrefaits et des changements de fabrication entraînant des GUID non uniques. Cela affecte à la fois les clés SanDisk contrefaites et légitimes.

:::caution[Before vous commencez]
Assurez-vous que **%%SMB|samba%%** est activé dans le %%WebGUI|web-gui%% :

---

## Remplacement de votre dispositif flash USB

:::attention Avant de remplacer

Avant de remplacer votre clé flash actuelle, envisagez de vérifier s'il y a des erreurs :

1. Éteignez votre serveur et retirez la clé flash.
2. Insérez l'appareil dans un ordinateur Windows ou Mac.
3. Utilisez Windows Scandisk ou l'utilitaire de disque Mac pour vérifier et réparer les erreurs.
4. Si des erreurs sont trouvées et corrigées, vous pouvez continuer à utiliser l'appareil. Si les problèmes persistent ou se reproduisent, le remplacement est recommandé.

Une seule panne de courant ou une écriture incomplète peut parfois causer une légère corruption, qui est généralement réparable. Cependant, des problèmes répétés signalent la nécessité d'un nouvel appareil.

:::

Il existe deux façons de remplacer votre dispositif USB Unraid : l'outil recommandé [créateur de clé USB](https://unraid.net/download) pour Windows ou macOS, ou la méthode manuelle pour les utilisateurs avancés. **Toujours sauvegarder votre appareil flash avant de commencer.**

### Sauvegarde de votre appareil flash

<Tabs>
  <TabItem value="webgui" label="Via le WebGUI" default>
    <BackupUsingWebGUI />
  </TabItem>

  <TabItem value="manuel" label="Copie manuelle">
    <BackupManualMethod />
  </TabItem>
</Tabs>

:::tip[Backup meilleures pratiques]

- Sauvegardez régulièrement votre clé USB, surtout après des changements de configuration importants.
- Stockez les sauvegardes hors serveur (sur un autre ordinateur ou un stockage cloud).
- Gardez une capture d'écran de vos attributions de disques après tout changement matériel.

:::

:::important[Trial clés et changements d'appareils]

Si vous transférez une configuration d'essai sur une nouvelle clé flash, vous ne pourrez pas démarrer la %%array|array%% tant que vous n'aurez pas acheté une clé d'enregistrement valide. Les clés d'essai ne fonctionnent que sur l'appareil d'origine.

:::

### Récupération après perte d'un dispositif flash défaillant sans sauvegarde

<Tabs>
  <TabItem value="créateur" label="Utilisation du créateur de clé USB" default>
    <ReplacementUsingCreator />
  </TabItem>

  <TabItem value="manuel" label="Méthode manuelle">
    <ReplacementManualMethod />
  </TabItem>
</Tabs>

Vous avez maintenant remplacé votre clé USB et transféré votre clé d'enregistrement Unraid. Le système affichera la date d'enregistrement et la prochaine date de remplacement éligible.

---

## Fréquence de remplacement de la clé d'enregistrement

Remplacer votre clé d'enregistrement Unraid est simple, mais il y a d'importants détails sur le timing et l'éligibilité à garder à l'esprit.

- Préparez une nouvelle clé flash Unraid, selon les instructions fournies plus haut dans ce guide.
- Si vous devez remplacer à nouveau votre clé dans les 12 mois, [contactez le support Unraid](https://unraid.net/contact). Pour un service plus rapide, incluez vos anciens et nouveaux USB %%GUIDs|guid%%, votre clé de licence, et l'adresse email utilisée pour l'achat.

:::important

Si vous êtes bloqué à cause de la limite de remplacement automatisée et avez besoin d'accéder immédiatement au serveur, configurez un nouvel essai Unraid avec une nouvelle clé USB, puis contactez le support pour transférer votre licence.

:::

---

## Récupération après perte d'un dispositif flash défaillant sans sauvegarde

Perdre votre clé flash sans connaître les attributions de disques peut être stressant, mais vous pouvez éviter la perte de données en prenant des mesures adéquates.

:::caution

Ne jamais attribuer un disque de données comme un %%parity drive|disque de parité%%. Des attributions incorrectes peuvent écrire la parité sur les données, entraînant une perte permanente de données.

:::

:::tip[Identifying disques]

- **%%Parité disques|parity-drives%%** n'ont pas de système de fichiers montable. Si un disque ne peut pas être monté, il est probablement un disque de %%parity|parité%%.
- **Data drives** previously used by Unraid retain their data even after resetting the %%array|array%% configuration.
- Si vous trouvez plus de disques non montables que prévu pour les disques %%parity|de parité%%, arrêtez et demandez de l'aide sur les [forums d'Unraid](https://forums.unraid.net/).

:::

Pour reconfigurer en toute sécurité votre %%array|array%% :

1. Préparez une nouvelle clé flash Unraid, selon les instructions fournies plus haut dans ce guide.
2. Allez à l'onglet ***Principal***
   - Assignez tous les disques comme disques de données et lancez l'%%array|array%%.
   - Notez les numéros de série des disques qui ne montent pas ; ceux-ci sont probablement vos disques %%parity|de parité%%.
   - Ne pas cliquer sur **Format** sur un disque quelconque. Si plus de disques non montables apparaissent que prévu pour %%parity|de parité%%, arrêtez et demandez de l'aide sur les forums.
   - Vous pouvez également utiliser le [plugin Unassigned Devices](https://unraid.net/community/apps?q=Unassigned%20Devices) pour tester le montage de chaque disque (%%parity|parité%% ne montera pas), identifiant %%parity|la parité%% par élimination.
   - Arrêtez l'%%array|array%% avant de continuer.
3. Allez à ***Outils → Nouvelle Configuration*** et créez une nouvelle configuration %%array|array%%, tout en conservant tous les disques configurés actuellement.
4. Attribuez les disques corrects comme %%parity|parité%% et le reste comme disques de données dans l'onglet **Principal**.
5. Si vous avez un seul disque de %%parity|parité%%, l'ordre des disques de données n'est pas critique. Cochez **Parité est Valide** uniquement si vous êtes sûr d'avoir attribué le même disque physique de parité et qu'aucune écriture n'a eu lieu depuis la configuration d'origine. Pour une double %%parity|parité%%, l'ordre des disques de données et l'attribution de parité1 et parité2 sont importants—parité1 et parité2 ne sont pas interchangeables, et la %%parity|parité%% doit être reconstruite si l'une d'entre elles est modifiée.
6. Démarrez la %%array|array%% pour valider les assignations. Les disques de données devraient se monter, et leur contenu devrait rester intact.
7. Si vous avez coché **La parité est valide**, effectuez une [vérification de la %%parity|parité%%](../../using-unraid-to/manage-storage/array/array-health-and-maintenance.mdx#parity-checks) corrective pour confirmer que votre configuration est correcte.

:::note

Après avoir restauré votre %%array|array%%, vérifiez tous les paramètres d'inclusion/exclusion spécifiques aux partages, car l'ordre des disques de données peut avoir changé.

:::

---

\* *"%%WireGuard|wireguard%%" et le logo "%%WireGuard|wireguard%%" sont des marques déposées de Jason A. Donenfeld.*
